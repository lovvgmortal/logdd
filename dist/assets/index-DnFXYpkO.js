var ox=e=>{throw TypeError(e)};var uf=(e,t,n)=>t.has(e)||ox("Cannot "+n);var T=(e,t,n)=>(uf(e,t,"read from private field"),n?n.call(e):t.get(e)),Ce=(e,t,n)=>t.has(e)?ox("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),he=(e,t,n,r)=>(uf(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),$e=(e,t,n)=>(uf(e,t,"access private method"),n);var du=(e,t,n,r)=>({set _(s){he(e,t,s,n)},get _(){return T(e,t,r)}});function JT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Sb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nb={exports:{}},ah={},jb={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),ZT=Symbol.for("react.portal"),eP=Symbol.for("react.fragment"),tP=Symbol.for("react.strict_mode"),nP=Symbol.for("react.profiler"),rP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),aP=Symbol.for("react.suspense"),iP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),ax=Symbol.iterator;function cP(e){return e===null||typeof e!="object"?null:(e=ax&&e[ax]||e["@@iterator"],typeof e=="function"?e:null)}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_b=Object.assign,kb={};function Hi(e,t,n){this.props=e,this.context=t,this.refs=kb,this.updater=n||Cb}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Eb(){}Eb.prototype=Hi.prototype;function gg(e,t,n){this.props=e,this.context=t,this.refs=kb,this.updater=n||Cb}var vg=gg.prototype=new Eb;vg.constructor=gg;_b(vg,Hi.prototype);vg.isPureReactComponent=!0;var ix=Array.isArray,Tb=Object.prototype.hasOwnProperty,yg={current:null},Pb={key:!0,ref:!0,__self:!0,__source:!0};function Ab(e,t,n){var r,s={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Tb.call(t,r)&&!Pb.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Lc,type:e,key:a,ref:i,props:s,_owner:yg.current}}function uP(e,t){return{$$typeof:Lc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lc}function dP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lx=/\/+/g;function df(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dP(""+e.key):t.toString(36)}function Wu(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Lc:case ZT:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+df(i,0):r,ix(s)?(n="",e!=null&&(n=e.replace(lx,"$&/")+"/"),Wu(s,t,n,"",function(u){return u})):s!=null&&(xg(s)&&(s=uP(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(lx,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",ix(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+df(a,l);i+=Wu(a,t,n,c,s)}else if(c=cP(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+df(a,l++),i+=Wu(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function hu(e,t,n){if(e==null)return e;var r=[],s=0;return Wu(e,r,"","",function(a){return t.call(n,a,s++)}),r}function hP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cn={current:null},Hu={transition:null},fP={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Hu,ReactCurrentOwner:yg};function Rb(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:hu,forEach:function(e,t,n){hu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hu(e,function(){t++}),t},toArray:function(e){return hu(e,function(t){return t})||[]},only:function(e){if(!xg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=Hi;Fe.Fragment=eP;Fe.Profiler=nP;Fe.PureComponent=gg;Fe.StrictMode=tP;Fe.Suspense=aP;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;Fe.act=Rb;Fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_b({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=yg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Tb.call(t,c)&&!Pb.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Lc,type:e.type,key:s,ref:a,props:r,_owner:i}};Fe.createContext=function(e){return e={$$typeof:sP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rP,_context:e},e.Consumer=e};Fe.createElement=Ab;Fe.createFactory=function(e){var t=Ab.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:oP,render:e}};Fe.isValidElement=xg;Fe.lazy=function(e){return{$$typeof:lP,_payload:{_status:-1,_result:e},_init:hP}};Fe.memo=function(e,t){return{$$typeof:iP,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=Hu.transition;Hu.transition={};try{e()}finally{Hu.transition=t}};Fe.unstable_act=Rb;Fe.useCallback=function(e,t){return cn.current.useCallback(e,t)};Fe.useContext=function(e){return cn.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return cn.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return cn.current.useEffect(e,t)};Fe.useId=function(){return cn.current.useId()};Fe.useImperativeHandle=function(e,t,n){return cn.current.useImperativeHandle(e,t,n)};Fe.useInsertionEffect=function(e,t){return cn.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return cn.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return cn.current.useMemo(e,t)};Fe.useReducer=function(e,t,n){return cn.current.useReducer(e,t,n)};Fe.useRef=function(e){return cn.current.useRef(e)};Fe.useState=function(e){return cn.current.useState(e)};Fe.useSyncExternalStore=function(e,t,n){return cn.current.useSyncExternalStore(e,t,n)};Fe.useTransition=function(){return cn.current.useTransition()};Fe.version="18.3.1";jb.exports=Fe;var f=jb.exports;const se=Sb(f),wg=JT({__proto__:null,default:se},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=f,mP=Symbol.for("react.element"),gP=Symbol.for("react.fragment"),vP=Object.prototype.hasOwnProperty,yP=pP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xP={key:!0,ref:!0,__self:!0,__source:!0};function Ob(e,t,n){var r,s={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)vP.call(t,r)&&!xP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:mP,type:e,key:a,ref:i,props:s,_owner:yP.current}}ah.Fragment=gP;ah.jsx=Ob;ah.jsxs=Ob;Nb.exports=ah;var o=Nb.exports,Ib={exports:{}},Fn={},Db={exports:{}},Mb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,A){var M=O.length;O.push(A);e:for(;0<M;){var G=M-1>>>1,ee=O[G];if(0<s(ee,A))O[G]=A,O[M]=ee,M=G;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var A=O[0],M=O.pop();if(M!==A){O[0]=M;e:for(var G=0,ee=O.length,ae=ee>>>1;G<ae;){var ce=2*(G+1)-1,Oe=O[ce],ye=ce+1,F=O[ye];if(0>s(Oe,M))ye<ee&&0>s(F,Oe)?(O[G]=F,O[ye]=M,G=ye):(O[G]=Oe,O[ce]=M,G=ce);else if(ye<ee&&0>s(F,M))O[G]=F,O[ye]=M,G=ye;else break e}}return A}function s(O,A){var M=O.sortIndex-A.sortIndex;return M!==0?M:O.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,d=null,m=3,p=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var A=n(u);A!==null;){if(A.callback===null)r(u);else if(A.startTime<=O)r(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=n(u)}}function S(O){if(g=!1,y(O),!b)if(n(c)!==null)b=!0,z(j);else{var A=n(u);A!==null&&B(S,A.startTime-O)}}function j(O,A){b=!1,g&&(g=!1,x(_),_=-1),p=!0;var M=m;try{for(y(A),d=n(c);d!==null&&(!(d.expirationTime>A)||O&&!U());){var G=d.callback;if(typeof G=="function"){d.callback=null,m=d.priorityLevel;var ee=G(d.expirationTime<=A);A=e.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(c)&&r(c),y(A)}else r(c);d=n(c)}if(d!==null)var ae=!0;else{var ce=n(u);ce!==null&&B(S,ce.startTime-A),ae=!1}return ae}finally{d=null,m=M,p=!1}}var N=!1,C=null,_=-1,k=5,E=-1;function U(){return!(e.unstable_now()-E<k)}function R(){if(C!==null){var O=e.unstable_now();E=O;var A=!0;try{A=C(!0,O)}finally{A?$():(N=!1,C=null)}}else N=!1}var $;if(typeof v=="function")$=function(){v(R)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,re=L.port2;L.port1.onmessage=R,$=function(){re.postMessage(null)}}else $=function(){w(R,0)};function z(O){C=O,N||(N=!0,$())}function B(O,A){_=w(function(){O(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,z(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var M=m;m=A;try{return O()}finally{m=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,A){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var M=m;m=O;try{return A()}finally{m=M}},e.unstable_scheduleCallback=function(O,A,M){var G=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?G+M:G):M=G,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=M+ee,O={id:h++,callback:A,priorityLevel:O,startTime:M,expirationTime:ee,sortIndex:-1},M>G?(O.sortIndex=M,t(u,O),n(c)===null&&O===n(u)&&(g?(x(_),_=-1):g=!0,B(S,M-G))):(O.sortIndex=ee,t(c,O),b||p||(b=!0,z(j))),O},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(O){var A=m;return function(){var M=m;m=A;try{return O.apply(this,arguments)}finally{m=M}}}})(Mb);Db.exports=Mb;var wP=Db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP=f,Ln=wP;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lb=new Set,Xl={};function pa(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(Xl[e]=t,e=0;e<t.length;e++)Lb.add(t[e])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vp=Object.prototype.hasOwnProperty,SP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cx={},ux={};function NP(e){return vp.call(ux,e)?!0:vp.call(cx,e)?!1:SP.test(e)?ux[e]=!0:(cx[e]=!0,!1)}function jP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CP(e,t,n,r){if(t===null||typeof t>"u"||jP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function un(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bt[e]=new un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bt[t]=new un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bt[e]=new un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bt[e]=new un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bt[e]=new un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bt[e]=new un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bt[e]=new un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bt[e]=new un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bt[e]=new un(e,5,!1,e.toLowerCase(),null,!1,!1)});var bg=/[\-:]([a-z])/g;function Sg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bg,Sg);Bt[t]=new un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bg,Sg);Bt[t]=new un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bg,Sg);Bt[t]=new un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bt[e]=new un(e,1,!1,e.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bt[e]=new un(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ng(e,t,n,r){var s=Bt.hasOwnProperty(t)?Bt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CP(t,n,s,r)&&(n=null),r||s===null?NP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hs=bP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fu=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),Ha=Symbol.for("react.fragment"),jg=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Fb=Symbol.for("react.context"),Cg=Symbol.for("react.forward_ref"),xp=Symbol.for("react.suspense"),wp=Symbol.for("react.suspense_list"),_g=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),Ub=Symbol.for("react.offscreen"),dx=Symbol.iterator;function fl(e){return e===null||typeof e!="object"?null:(e=dx&&e[dx]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Object.assign,hf;function _l(e){if(hf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);hf=t&&t[1]||""}return`
`+hf+e}var ff=!1;function pf(e,t){if(!e||ff)return"";ff=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{ff=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_l(e):""}function _P(e){switch(e.tag){case 5:return _l(e.type);case 16:return _l("Lazy");case 13:return _l("Suspense");case 19:return _l("SuspenseList");case 0:case 2:case 15:return e=pf(e.type,!1),e;case 11:return e=pf(e.type.render,!1),e;case 1:return e=pf(e.type,!0),e;default:return""}}function bp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ha:return"Fragment";case Wa:return"Portal";case yp:return"Profiler";case jg:return"StrictMode";case xp:return"Suspense";case wp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Fb:return(e.displayName||"Context")+".Consumer";case $b:return(e._context.displayName||"Context")+".Provider";case Cg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _g:return t=e.displayName||null,t!==null?t:bp(e.type)||"Memo";case Ts:t=e._payload,e=e._init;try{return bp(e(t))}catch{}}return null}function kP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bp(t);case 8:return t===jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function io(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EP(e){var t=Vb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pu(e){e._valueTracker||(e._valueTracker=EP(e))}function zb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ld(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sp(e,t){var n=t.checked;return pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=io(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bb(e,t){t=t.checked,t!=null&&Ng(e,"checked",t,!1)}function Np(e,t){Bb(e,t);var n=io(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jp(e,t.type,n):t.hasOwnProperty("defaultValue")&&jp(e,t.type,io(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jp(e,t,n){(t!=="number"||ld(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kl=Array.isArray;function ii(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+io(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Cp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function px(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(kl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:io(n)}}function Wb(e,t){var n=io(t.value),r=io(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _p(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mu,Kb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mu=mu||document.createElement("div"),mu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TP=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(e){TP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ll[t]=Ll[e]})});function qb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ll.hasOwnProperty(e)&&Ll[e]?(""+t).trim():t+"px"}function Gb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qb(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var PP=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kp(e,t){if(t){if(PP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function Ep(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tp=null;function kg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pp=null,li=null,ci=null;function gx(e){if(e=Uc(e)){if(typeof Pp!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=dh(t),Pp(e.stateNode,e.type,t))}}function Yb(e){li?ci?ci.push(e):ci=[e]:li=e}function Qb(){if(li){var e=li,t=ci;if(ci=li=null,gx(e),t)for(e=0;e<t.length;e++)gx(t[e])}}function Xb(e,t){return e(t)}function Jb(){}var mf=!1;function Zb(e,t,n){if(mf)return e(t,n);mf=!0;try{return Xb(e,t,n)}finally{mf=!1,(li!==null||ci!==null)&&(Jb(),Qb())}}function Zl(e,t){var n=e.stateNode;if(n===null)return null;var r=dh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var Ap=!1;if(as)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Ap=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Ap=!1}function AP(e,t,n,r,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var $l=!1,cd=null,ud=!1,Rp=null,RP={onError:function(e){$l=!0,cd=e}};function OP(e,t,n,r,s,a,i,l,c){$l=!1,cd=null,AP.apply(RP,arguments)}function IP(e,t,n,r,s,a,i,l,c){if(OP.apply(this,arguments),$l){if($l){var u=cd;$l=!1,cd=null}else throw Error(Z(198));ud||(ud=!0,Rp=u)}}function ma(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vx(e){if(ma(e)!==e)throw Error(Z(188))}function DP(e){var t=e.alternate;if(!t){if(t=ma(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return vx(s),e;if(a===r)return vx(s),t;a=a.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=a;break}if(l===r){i=!0,r=s,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=s;break}if(l===r){i=!0,r=a,n=s;break}l=l.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function tS(e){return e=DP(e),e!==null?nS(e):null}function nS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nS(e);if(t!==null)return t;e=e.sibling}return null}var rS=Ln.unstable_scheduleCallback,yx=Ln.unstable_cancelCallback,MP=Ln.unstable_shouldYield,LP=Ln.unstable_requestPaint,St=Ln.unstable_now,$P=Ln.unstable_getCurrentPriorityLevel,Eg=Ln.unstable_ImmediatePriority,sS=Ln.unstable_UserBlockingPriority,dd=Ln.unstable_NormalPriority,FP=Ln.unstable_LowPriority,oS=Ln.unstable_IdlePriority,ih=null,Lr=null;function UP(e){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(ih,e,void 0,(e.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:BP,VP=Math.log,zP=Math.LN2;function BP(e){return e>>>=0,e===0?32:31-(VP(e)/zP|0)|0}var gu=64,vu=4194304;function El(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=El(l):(a&=i,a!==0&&(r=El(a)))}else i=n&~s,i!==0?r=El(i):a!==0&&(r=El(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vr(t),s=1<<n,r|=e[n],t&=~s;return r}function WP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-vr(a),l=1<<i,c=s[i];c===-1?(!(l&n)||l&r)&&(s[i]=WP(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Op(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aS(){var e=gu;return gu<<=1,!(gu&4194240)&&(gu=64),e}function gf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $c(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vr(t),e[t]=n}function KP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-vr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Tg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var qe=0;function iS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lS,Pg,cS,uS,dS,Ip=!1,yu=[],Qs=null,Xs=null,Js=null,ec=new Map,tc=new Map,Rs=[],qP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xx(e,t){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":ec.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(t.pointerId)}}function ml(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Uc(t),t!==null&&Pg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function GP(e,t,n,r,s){switch(t){case"focusin":return Qs=ml(Qs,e,t,n,r,s),!0;case"dragenter":return Xs=ml(Xs,e,t,n,r,s),!0;case"mouseover":return Js=ml(Js,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return ec.set(a,ml(ec.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,tc.set(a,ml(tc.get(a)||null,e,t,n,r,s)),!0}return!1}function hS(e){var t=Mo(e.target);if(t!==null){var n=ma(t);if(n!==null){if(t=n.tag,t===13){if(t=eS(n),t!==null){e.blockedOn=t,dS(e.priority,function(){cS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ku(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tp=r,n.target.dispatchEvent(r),Tp=null}else return t=Uc(n),t!==null&&Pg(t),e.blockedOn=n,!1;t.shift()}return!0}function wx(e,t,n){Ku(e)&&n.delete(t)}function YP(){Ip=!1,Qs!==null&&Ku(Qs)&&(Qs=null),Xs!==null&&Ku(Xs)&&(Xs=null),Js!==null&&Ku(Js)&&(Js=null),ec.forEach(wx),tc.forEach(wx)}function gl(e,t){e.blockedOn===t&&(e.blockedOn=null,Ip||(Ip=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,YP)))}function nc(e){function t(s){return gl(s,e)}if(0<yu.length){gl(yu[0],e);for(var n=1;n<yu.length;n++){var r=yu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qs!==null&&gl(Qs,e),Xs!==null&&gl(Xs,e),Js!==null&&gl(Js,e),ec.forEach(t),tc.forEach(t),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)hS(n),n.blockedOn===null&&Rs.shift()}var ui=hs.ReactCurrentBatchConfig,fd=!0;function QP(e,t,n,r){var s=qe,a=ui.transition;ui.transition=null;try{qe=1,Ag(e,t,n,r)}finally{qe=s,ui.transition=a}}function XP(e,t,n,r){var s=qe,a=ui.transition;ui.transition=null;try{qe=4,Ag(e,t,n,r)}finally{qe=s,ui.transition=a}}function Ag(e,t,n,r){if(fd){var s=Dp(e,t,n,r);if(s===null)_f(e,t,r,pd,n),xx(e,r);else if(GP(s,e,t,n,r))r.stopPropagation();else if(xx(e,r),t&4&&-1<qP.indexOf(e)){for(;s!==null;){var a=Uc(s);if(a!==null&&lS(a),a=Dp(e,t,n,r),a===null&&_f(e,t,r,pd,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else _f(e,t,r,null,n)}}var pd=null;function Dp(e,t,n,r){if(pd=null,e=kg(r),e=Mo(e),e!==null)if(t=ma(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pd=e,null}function fS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($P()){case Eg:return 1;case sS:return 4;case dd:case FP:return 16;case oS:return 536870912;default:return 16}default:return 16}}var Ks=null,Rg=null,qu=null;function pS(){if(qu)return qu;var e,t=Rg,n=t.length,r,s="value"in Ks?Ks.value:Ks.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return qu=s.slice(e,1<r?1-r:void 0)}function Gu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xu(){return!0}function bx(){return!1}function Un(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?xu:bx,this.isPropagationStopped=bx,this}return pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),t}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Og=Un(Ki),Fc=pt({},Ki,{view:0,detail:0}),JP=Un(Fc),vf,yf,vl,lh=pt({},Fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vl&&(vl&&e.type==="mousemove"?(vf=e.screenX-vl.screenX,yf=e.screenY-vl.screenY):yf=vf=0,vl=e),vf)},movementY:function(e){return"movementY"in e?e.movementY:yf}}),Sx=Un(lh),ZP=pt({},lh,{dataTransfer:0}),eA=Un(ZP),tA=pt({},Fc,{relatedTarget:0}),xf=Un(tA),nA=pt({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),rA=Un(nA),sA=pt({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oA=Un(sA),aA=pt({},Ki,{data:0}),Nx=Un(aA),iA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cA[e])?!!t[e]:!1}function Ig(){return uA}var dA=pt({},Fc,{key:function(e){if(e.key){var t=iA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(e){return e.type==="keypress"?Gu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hA=Un(dA),fA=pt({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jx=Un(fA),pA=pt({},Fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),mA=Un(pA),gA=pt({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),vA=Un(gA),yA=pt({},lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xA=Un(yA),wA=[9,13,27,32],Dg=as&&"CompositionEvent"in window,Fl=null;as&&"documentMode"in document&&(Fl=document.documentMode);var bA=as&&"TextEvent"in window&&!Fl,mS=as&&(!Dg||Fl&&8<Fl&&11>=Fl),Cx=" ",_x=!1;function gS(e,t){switch(e){case"keyup":return wA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ka=!1;function SA(e,t){switch(e){case"compositionend":return vS(t);case"keypress":return t.which!==32?null:(_x=!0,Cx);case"textInput":return e=t.data,e===Cx&&_x?null:e;default:return null}}function NA(e,t){if(Ka)return e==="compositionend"||!Dg&&gS(e,t)?(e=pS(),qu=Rg=Ks=null,Ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mS&&t.locale!=="ko"?null:t.data;default:return null}}var jA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jA[e.type]:t==="textarea"}function yS(e,t,n,r){Yb(r),t=md(t,"onChange"),0<t.length&&(n=new Og("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ul=null,rc=null;function CA(e){TS(e,0)}function ch(e){var t=Ya(e);if(zb(t))return e}function _A(e,t){if(e==="change")return t}var xS=!1;if(as){var wf;if(as){var bf="oninput"in document;if(!bf){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),bf=typeof Ex.oninput=="function"}wf=bf}else wf=!1;xS=wf&&(!document.documentMode||9<document.documentMode)}function Tx(){Ul&&(Ul.detachEvent("onpropertychange",wS),rc=Ul=null)}function wS(e){if(e.propertyName==="value"&&ch(rc)){var t=[];yS(t,rc,e,kg(e)),Zb(CA,t)}}function kA(e,t,n){e==="focusin"?(Tx(),Ul=t,rc=n,Ul.attachEvent("onpropertychange",wS)):e==="focusout"&&Tx()}function EA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ch(rc)}function TA(e,t){if(e==="click")return ch(t)}function PA(e,t){if(e==="input"||e==="change")return ch(t)}function AA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xr=typeof Object.is=="function"?Object.is:AA;function sc(e,t){if(xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vp.call(t,s)||!xr(e[s],t[s]))return!1}return!0}function Px(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ax(e,t){var n=Px(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Px(n)}}function bS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SS(){for(var e=window,t=ld();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ld(e.document)}return t}function Mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RA(e){var t=SS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bS(n.ownerDocument.documentElement,n)){if(r!==null&&Mg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=Ax(n,a);var i=Ax(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OA=as&&"documentMode"in document&&11>=document.documentMode,qa=null,Mp=null,Vl=null,Lp=!1;function Rx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lp||qa==null||qa!==ld(r)||(r=qa,"selectionStart"in r&&Mg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vl&&sc(Vl,r)||(Vl=r,r=md(Mp,"onSelect"),0<r.length&&(t=new Og("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qa)))}function wu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ga={animationend:wu("Animation","AnimationEnd"),animationiteration:wu("Animation","AnimationIteration"),animationstart:wu("Animation","AnimationStart"),transitionend:wu("Transition","TransitionEnd")},Sf={},NS={};as&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function uh(e){if(Sf[e])return Sf[e];if(!Ga[e])return e;var t=Ga[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in NS)return Sf[e]=t[n];return e}var jS=uh("animationend"),CS=uh("animationiteration"),_S=uh("animationstart"),kS=uh("transitionend"),ES=new Map,Ox="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(e,t){ES.set(e,t),pa(t,[e])}for(var Nf=0;Nf<Ox.length;Nf++){var jf=Ox[Nf],IA=jf.toLowerCase(),DA=jf[0].toUpperCase()+jf.slice(1);vo(IA,"on"+DA)}vo(jS,"onAnimationEnd");vo(CS,"onAnimationIteration");vo(_S,"onAnimationStart");vo("dblclick","onDoubleClick");vo("focusin","onFocus");vo("focusout","onBlur");vo(kS,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function Ix(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,IP(r,t,void 0,e),e.currentTarget=null}function TS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Ix(s,l,u),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Ix(s,l,u),a=c}}}if(ud)throw e=Rp,ud=!1,Rp=null,e}function et(e,t){var n=t[zp];n===void 0&&(n=t[zp]=new Set);var r=e+"__bubble";n.has(r)||(PS(t,e,2,!1),n.add(r))}function Cf(e,t,n){var r=0;t&&(r|=4),PS(n,e,r,t)}var bu="_reactListening"+Math.random().toString(36).slice(2);function oc(e){if(!e[bu]){e[bu]=!0,Lb.forEach(function(n){n!=="selectionchange"&&(MA.has(n)||Cf(n,!1,e),Cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bu]||(t[bu]=!0,Cf("selectionchange",!1,t))}}function PS(e,t,n,r){switch(fS(t)){case 1:var s=QP;break;case 4:s=XP;break;default:s=Ag}n=s.bind(null,t,n,e),s=void 0,!Ap||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function _f(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Mo(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}Zb(function(){var u=a,h=kg(n),d=[];e:{var m=ES.get(e);if(m!==void 0){var p=Og,b=e;switch(e){case"keypress":if(Gu(n)===0)break e;case"keydown":case"keyup":p=hA;break;case"focusin":b="focus",p=xf;break;case"focusout":b="blur",p=xf;break;case"beforeblur":case"afterblur":p=xf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Sx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=eA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mA;break;case jS:case CS:case _S:p=rA;break;case kS:p=vA;break;case"scroll":p=JP;break;case"wheel":p=xA;break;case"copy":case"cut":case"paste":p=oA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jx}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,y;v!==null;){y=v;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,x!==null&&(S=Zl(v,x),S!=null&&g.push(ac(v,S,y)))),w)break;v=v.return}0<g.length&&(m=new p(m,b,null,n,h),d.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==Tp&&(b=n.relatedTarget||n.fromElement)&&(Mo(b)||b[is]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Mo(b):null,b!==null&&(w=ma(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(g=Sx,S="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=jx,S="onPointerLeave",x="onPointerEnter",v="pointer"),w=p==null?m:Ya(p),y=b==null?m:Ya(b),m=new g(S,v+"leave",p,n,h),m.target=w,m.relatedTarget=y,S=null,Mo(h)===u&&(g=new g(x,v+"enter",b,n,h),g.target=y,g.relatedTarget=w,S=g),w=S,p&&b)t:{for(g=p,x=b,v=0,y=g;y;y=Ea(y))v++;for(y=0,S=x;S;S=Ea(S))y++;for(;0<v-y;)g=Ea(g),v--;for(;0<y-v;)x=Ea(x),y--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=Ea(g),x=Ea(x)}g=null}else g=null;p!==null&&Dx(d,m,p,g,!1),b!==null&&w!==null&&Dx(d,w,b,g,!0)}}e:{if(m=u?Ya(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=_A;else if(kx(m))if(xS)j=PA;else{j=EA;var N=kA}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=TA);if(j&&(j=j(e,u))){yS(d,j,n,h);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&jp(m,"number",m.value)}switch(N=u?Ya(u):window,e){case"focusin":(kx(N)||N.contentEditable==="true")&&(qa=N,Mp=u,Vl=null);break;case"focusout":Vl=Mp=qa=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,Rx(d,n,h);break;case"selectionchange":if(OA)break;case"keydown":case"keyup":Rx(d,n,h)}var C;if(Dg)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ka?gS(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(mS&&n.locale!=="ko"&&(Ka||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ka&&(C=pS()):(Ks=h,Rg="value"in Ks?Ks.value:Ks.textContent,Ka=!0)),N=md(u,_),0<N.length&&(_=new Nx(_,e,null,n,h),d.push({event:_,listeners:N}),C?_.data=C:(C=vS(n),C!==null&&(_.data=C)))),(C=bA?SA(e,n):NA(e,n))&&(u=md(u,"onBeforeInput"),0<u.length&&(h=new Nx("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}TS(d,t)})}function ac(e,t,n){return{instance:e,listener:t,currentTarget:n}}function md(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Zl(e,n),a!=null&&r.unshift(ac(e,a,s)),a=Zl(e,t),a!=null&&r.push(ac(e,a,s))),e=e.return}return r}function Ea(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Dx(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Zl(n,a),c!=null&&i.unshift(ac(n,c,l))):s||(c=Zl(n,a),c!=null&&i.push(ac(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var LA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function Mx(e){return(typeof e=="string"?e:""+e).replace(LA,`
`).replace($A,"")}function Su(e,t,n){if(t=Mx(t),Mx(e)!==t&&n)throw Error(Z(425))}function gd(){}var $p=null,Fp=null;function Up(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vp=typeof setTimeout=="function"?setTimeout:void 0,FA=typeof clearTimeout=="function"?clearTimeout:void 0,Lx=typeof Promise=="function"?Promise:void 0,UA=typeof queueMicrotask=="function"?queueMicrotask:typeof Lx<"u"?function(e){return Lx.resolve(null).then(e).catch(VA)}:Vp;function VA(e){setTimeout(function(){throw e})}function kf(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),nc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);nc(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $x(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qi=Math.random().toString(36).slice(2),Rr="__reactFiber$"+qi,ic="__reactProps$"+qi,is="__reactContainer$"+qi,zp="__reactEvents$"+qi,zA="__reactListeners$"+qi,BA="__reactHandles$"+qi;function Mo(e){var t=e[Rr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[is]||n[Rr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$x(e);e!==null;){if(n=e[Rr])return n;e=$x(e)}return t}e=n,n=e.parentNode}return null}function Uc(e){return e=e[Rr]||e[is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ya(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function dh(e){return e[ic]||null}var Bp=[],Qa=-1;function yo(e){return{current:e}}function nt(e){0>Qa||(e.current=Bp[Qa],Bp[Qa]=null,Qa--)}function Qe(e,t){Qa++,Bp[Qa]=e.current,e.current=t}var lo={},Qt=yo(lo),xn=yo(!1),Jo=lo;function Ai(e,t){var n=e.type.contextTypes;if(!n)return lo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wn(e){return e=e.childContextTypes,e!=null}function vd(){nt(xn),nt(Qt)}function Fx(e,t,n){if(Qt.current!==lo)throw Error(Z(168));Qe(Qt,t),Qe(xn,n)}function AS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Z(108,kP(e)||"Unknown",s));return pt({},n,r)}function yd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lo,Jo=Qt.current,Qe(Qt,e),Qe(xn,xn.current),!0}function Ux(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=AS(e,t,Jo),r.__reactInternalMemoizedMergedChildContext=e,nt(xn),nt(Qt),Qe(Qt,e)):nt(xn),Qe(xn,n)}var Yr=null,hh=!1,Ef=!1;function RS(e){Yr===null?Yr=[e]:Yr.push(e)}function WA(e){hh=!0,RS(e)}function xo(){if(!Ef&&Yr!==null){Ef=!0;var e=0,t=qe;try{var n=Yr;for(qe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yr=null,hh=!1}catch(s){throw Yr!==null&&(Yr=Yr.slice(e+1)),rS(Eg,xo),s}finally{qe=t,Ef=!1}}return null}var Xa=[],Ja=0,xd=null,wd=0,Kn=[],qn=0,Zo=null,Zr=1,es="";function Po(e,t){Xa[Ja++]=wd,Xa[Ja++]=xd,xd=e,wd=t}function OS(e,t,n){Kn[qn++]=Zr,Kn[qn++]=es,Kn[qn++]=Zo,Zo=e;var r=Zr;e=es;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var a=32-vr(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Zr=1<<32-vr(t)+s|n<<s|r,es=a+e}else Zr=1<<a|n<<s|r,es=e}function Lg(e){e.return!==null&&(Po(e,1),OS(e,1,0))}function $g(e){for(;e===xd;)xd=Xa[--Ja],Xa[Ja]=null,wd=Xa[--Ja],Xa[Ja]=null;for(;e===Zo;)Zo=Kn[--qn],Kn[qn]=null,es=Kn[--qn],Kn[qn]=null,Zr=Kn[--qn],Kn[qn]=null}var In=null,Tn=null,st=!1,gr=null;function IS(e,t){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,In=e,Tn=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,In=e,Tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zo!==null?{id:Zr,overflow:es}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,In=e,Tn=null,!0):!1;default:return!1}}function Wp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hp(e){if(st){var t=Tn;if(t){var n=t;if(!Vx(e,t)){if(Wp(e))throw Error(Z(418));t=Zs(n.nextSibling);var r=In;t&&Vx(e,t)?IS(r,n):(e.flags=e.flags&-4097|2,st=!1,In=e)}}else{if(Wp(e))throw Error(Z(418));e.flags=e.flags&-4097|2,st=!1,In=e}}}function zx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;In=e}function Nu(e){if(e!==In)return!1;if(!st)return zx(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Up(e.type,e.memoizedProps)),t&&(t=Tn)){if(Wp(e))throw DS(),Error(Z(418));for(;t;)IS(e,t),t=Zs(t.nextSibling)}if(zx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tn=Zs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tn=null}}else Tn=In?Zs(e.stateNode.nextSibling):null;return!0}function DS(){for(var e=Tn;e;)e=Zs(e.nextSibling)}function Ri(){Tn=In=null,st=!1}function Fg(e){gr===null?gr=[e]:gr.push(e)}var HA=hs.ReactCurrentBatchConfig;function yl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function ju(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bx(e){var t=e._init;return t(e._payload)}function MS(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=ro(x,v),x.index=0,x.sibling=null,x}function a(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,y,S){return v===null||v.tag!==6?(v=Df(y,x.mode,S),v.return=x,v):(v=s(v,y),v.return=x,v)}function c(x,v,y,S){var j=y.type;return j===Ha?h(x,v,y.props.children,S,y.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ts&&Bx(j)===v.type)?(S=s(v,y.props),S.ref=yl(x,v,y),S.return=x,S):(S=td(y.type,y.key,y.props,null,x.mode,S),S.ref=yl(x,v,y),S.return=x,S)}function u(x,v,y,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Mf(y,x.mode,S),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function h(x,v,y,S,j){return v===null||v.tag!==7?(v=Qo(y,x.mode,S,j),v.return=x,v):(v=s(v,y),v.return=x,v)}function d(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Df(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fu:return y=td(v.type,v.key,v.props,null,x.mode,y),y.ref=yl(x,null,v),y.return=x,y;case Wa:return v=Mf(v,x.mode,y),v.return=x,v;case Ts:var S=v._init;return d(x,S(v._payload),y)}if(kl(v)||fl(v))return v=Qo(v,x.mode,y,null),v.return=x,v;ju(x,v)}return null}function m(x,v,y,S){var j=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:l(x,v,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fu:return y.key===j?c(x,v,y,S):null;case Wa:return y.key===j?u(x,v,y,S):null;case Ts:return j=y._init,m(x,v,j(y._payload),S)}if(kl(y)||fl(y))return j!==null?null:h(x,v,y,S,null);ju(x,y)}return null}function p(x,v,y,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(y)||null,l(v,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fu:return x=x.get(S.key===null?y:S.key)||null,c(v,x,S,j);case Wa:return x=x.get(S.key===null?y:S.key)||null,u(v,x,S,j);case Ts:var N=S._init;return p(x,v,y,N(S._payload),j)}if(kl(S)||fl(S))return x=x.get(y)||null,h(v,x,S,j,null);ju(v,S)}return null}function b(x,v,y,S){for(var j=null,N=null,C=v,_=v=0,k=null;C!==null&&_<y.length;_++){C.index>_?(k=C,C=null):k=C.sibling;var E=m(x,C,y[_],S);if(E===null){C===null&&(C=k);break}e&&C&&E.alternate===null&&t(x,C),v=a(E,v,_),N===null?j=E:N.sibling=E,N=E,C=k}if(_===y.length)return n(x,C),st&&Po(x,_),j;if(C===null){for(;_<y.length;_++)C=d(x,y[_],S),C!==null&&(v=a(C,v,_),N===null?j=C:N.sibling=C,N=C);return st&&Po(x,_),j}for(C=r(x,C);_<y.length;_++)k=p(C,x,_,y[_],S),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?_:k.key),v=a(k,v,_),N===null?j=k:N.sibling=k,N=k);return e&&C.forEach(function(U){return t(x,U)}),st&&Po(x,_),j}function g(x,v,y,S){var j=fl(y);if(typeof j!="function")throw Error(Z(150));if(y=j.call(y),y==null)throw Error(Z(151));for(var N=j=null,C=v,_=v=0,k=null,E=y.next();C!==null&&!E.done;_++,E=y.next()){C.index>_?(k=C,C=null):k=C.sibling;var U=m(x,C,E.value,S);if(U===null){C===null&&(C=k);break}e&&C&&U.alternate===null&&t(x,C),v=a(U,v,_),N===null?j=U:N.sibling=U,N=U,C=k}if(E.done)return n(x,C),st&&Po(x,_),j;if(C===null){for(;!E.done;_++,E=y.next())E=d(x,E.value,S),E!==null&&(v=a(E,v,_),N===null?j=E:N.sibling=E,N=E);return st&&Po(x,_),j}for(C=r(x,C);!E.done;_++,E=y.next())E=p(C,x,_,E.value,S),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?_:E.key),v=a(E,v,_),N===null?j=E:N.sibling=E,N=E);return e&&C.forEach(function(R){return t(x,R)}),st&&Po(x,_),j}function w(x,v,y,S){if(typeof y=="object"&&y!==null&&y.type===Ha&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case fu:e:{for(var j=y.key,N=v;N!==null;){if(N.key===j){if(j=y.type,j===Ha){if(N.tag===7){n(x,N.sibling),v=s(N,y.props.children),v.return=x,x=v;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ts&&Bx(j)===N.type){n(x,N.sibling),v=s(N,y.props),v.ref=yl(x,N,y),v.return=x,x=v;break e}n(x,N);break}else t(x,N);N=N.sibling}y.type===Ha?(v=Qo(y.props.children,x.mode,S,y.key),v.return=x,x=v):(S=td(y.type,y.key,y.props,null,x.mode,S),S.ref=yl(x,v,y),S.return=x,x=S)}return i(x);case Wa:e:{for(N=y.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Mf(y,x.mode,S),v.return=x,x=v}return i(x);case Ts:return N=y._init,w(x,v,N(y._payload),S)}if(kl(y))return b(x,v,y,S);if(fl(y))return g(x,v,y,S);ju(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,y),v.return=x,x=v):(n(x,v),v=Df(y,x.mode,S),v.return=x,x=v),i(x)):n(x,v)}return w}var Oi=MS(!0),LS=MS(!1),bd=yo(null),Sd=null,Za=null,Ug=null;function Vg(){Ug=Za=Sd=null}function zg(e){var t=bd.current;nt(bd),e._currentValue=t}function Kp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function di(e,t){Sd=e,Ug=Za=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yn=!0),e.firstContext=null)}function Zn(e){var t=e._currentValue;if(Ug!==e)if(e={context:e,memoizedValue:t,next:null},Za===null){if(Sd===null)throw Error(Z(308));Za=e,Sd.dependencies={lanes:0,firstContext:e}}else Za=Za.next=e;return t}var Lo=null;function Bg(e){Lo===null?Lo=[e]:Lo.push(e)}function $S(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Bg(t)):(n.next=s.next,s.next=n),t.interleaved=n,ls(e,r)}function ls(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ps=!1;function Wg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ls(e,n)}return s=r.interleaved,s===null?(t.next=t,Bg(r)):(t.next=s.next,s.next=t),r.interleaved=t,ls(e,n)}function Yu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Tg(e,n)}}function Wx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Nd(e,t,n,r){var s=e.updateQueue;Ps=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var d=s.baseState;i=0,h=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(m=t,p=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){d=b.call(p,d,m);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,m=typeof b=="function"?b.call(p,d,m):b,m==null)break e;d=pt({},d,m);break e;case 2:Ps=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);ta|=i,e.lanes=i,e.memoizedState=d}}function Hx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Vc={},$r=yo(Vc),lc=yo(Vc),cc=yo(Vc);function $o(e){if(e===Vc)throw Error(Z(174));return e}function Hg(e,t){switch(Qe(cc,t),Qe(lc,e),Qe($r,Vc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_p(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_p(t,e)}nt($r),Qe($r,t)}function Ii(){nt($r),nt(lc),nt(cc)}function US(e){$o(cc.current);var t=$o($r.current),n=_p(t,e.type);t!==n&&(Qe(lc,e),Qe($r,n))}function Kg(e){lc.current===e&&(nt($r),nt(lc))}var ct=yo(0);function jd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tf=[];function qg(){for(var e=0;e<Tf.length;e++)Tf[e]._workInProgressVersionPrimary=null;Tf.length=0}var Qu=hs.ReactCurrentDispatcher,Pf=hs.ReactCurrentBatchConfig,ea=0,ht=null,kt=null,It=null,Cd=!1,zl=!1,uc=0,KA=0;function Kt(){throw Error(Z(321))}function Gg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xr(e[n],t[n]))return!1;return!0}function Yg(e,t,n,r,s,a){if(ea=a,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qu.current=e===null||e.memoizedState===null?QA:XA,e=n(r,s),zl){a=0;do{if(zl=!1,uc=0,25<=a)throw Error(Z(301));a+=1,It=kt=null,t.updateQueue=null,Qu.current=JA,e=n(r,s)}while(zl)}if(Qu.current=_d,t=kt!==null&&kt.next!==null,ea=0,It=kt=ht=null,Cd=!1,t)throw Error(Z(300));return e}function Qg(){var e=uc!==0;return uc=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ht.memoizedState=It=e:It=It.next=e,It}function er(){if(kt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var t=It===null?ht.memoizedState:It.next;if(t!==null)It=t,kt=e;else{if(e===null)throw Error(Z(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},It===null?ht.memoizedState=It=e:It=It.next=e}return It}function dc(e,t){return typeof t=="function"?t(e):t}function Af(e){var t=er(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=kt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=i=null,c=null,u=a;do{var h=u.lane;if((ea&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,i=r):c=c.next=d,ht.lanes|=h,ta|=h}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=l,xr(r,t.memoizedState)||(yn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,ht.lanes|=a,ta|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rf(e){var t=er(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);xr(a,t.memoizedState)||(yn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function VS(){}function zS(e,t){var n=ht,r=er(),s=t(),a=!xr(r.memoizedState,s);if(a&&(r.memoizedState=s,yn=!0),r=r.queue,Xg(HS.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,hc(9,WS.bind(null,n,r,s,t),void 0,null),Dt===null)throw Error(Z(349));ea&30||BS(n,t,s)}return s}function BS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function WS(e,t,n,r){t.value=n,t.getSnapshot=r,KS(t)&&qS(e)}function HS(e,t,n){return n(function(){KS(t)&&qS(e)})}function KS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xr(e,n)}catch{return!0}}function qS(e){var t=ls(e,1);t!==null&&yr(t,e,1,-1)}function Kx(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:e},t.queue=e,e=e.dispatch=YA.bind(null,ht,e),[t.memoizedState,e]}function hc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function GS(){return er().memoizedState}function Xu(e,t,n,r){var s=Er();ht.flags|=e,s.memoizedState=hc(1|t,n,void 0,r===void 0?null:r)}function fh(e,t,n,r){var s=er();r=r===void 0?null:r;var a=void 0;if(kt!==null){var i=kt.memoizedState;if(a=i.destroy,r!==null&&Gg(r,i.deps)){s.memoizedState=hc(t,n,a,r);return}}ht.flags|=e,s.memoizedState=hc(1|t,n,a,r)}function qx(e,t){return Xu(8390656,8,e,t)}function Xg(e,t){return fh(2048,8,e,t)}function YS(e,t){return fh(4,2,e,t)}function QS(e,t){return fh(4,4,e,t)}function XS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JS(e,t,n){return n=n!=null?n.concat([e]):null,fh(4,4,XS.bind(null,t,e),n)}function Jg(){}function ZS(e,t){var n=er();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function eN(e,t){var n=er();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Gg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tN(e,t,n){return ea&21?(xr(n,t)||(n=aS(),ht.lanes|=n,ta|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yn=!0),e.memoizedState=n)}function qA(e,t){var n=qe;qe=n!==0&&4>n?n:4,e(!0);var r=Pf.transition;Pf.transition={};try{e(!1),t()}finally{qe=n,Pf.transition=r}}function nN(){return er().memoizedState}function GA(e,t,n){var r=no(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rN(e))sN(t,n);else if(n=$S(e,t,n,r),n!==null){var s=an();yr(n,e,r,s),oN(n,t,r)}}function YA(e,t,n){var r=no(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rN(e))sN(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(s.hasEagerState=!0,s.eagerState=l,xr(l,i)){var c=t.interleaved;c===null?(s.next=s,Bg(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=$S(e,t,s,r),n!==null&&(s=an(),yr(n,e,r,s),oN(n,t,r))}}function rN(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function sN(e,t){zl=Cd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Tg(e,n)}}var _d={readContext:Zn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},QA={readContext:Zn,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:Zn,useEffect:qx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xu(4194308,4,XS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xu(4,2,e,t)},useMemo:function(e,t){var n=Er();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Er();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=GA.bind(null,ht,e),[r.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Kx,useDebugValue:Jg,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Kx(!1),t=e[0];return e=qA.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ht,s=Er();if(st){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),Dt===null)throw Error(Z(349));ea&30||BS(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,qx(HS.bind(null,r,a,e),[e]),r.flags|=2048,hc(9,WS.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Er(),t=Dt.identifierPrefix;if(st){var n=es,r=Zr;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=uc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=KA++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XA={readContext:Zn,useCallback:ZS,useContext:Zn,useEffect:Xg,useImperativeHandle:JS,useInsertionEffect:YS,useLayoutEffect:QS,useMemo:eN,useReducer:Af,useRef:GS,useState:function(){return Af(dc)},useDebugValue:Jg,useDeferredValue:function(e){var t=er();return tN(t,kt.memoizedState,e)},useTransition:function(){var e=Af(dc)[0],t=er().memoizedState;return[e,t]},useMutableSource:VS,useSyncExternalStore:zS,useId:nN,unstable_isNewReconciler:!1},JA={readContext:Zn,useCallback:ZS,useContext:Zn,useEffect:Xg,useImperativeHandle:JS,useInsertionEffect:YS,useLayoutEffect:QS,useMemo:eN,useReducer:Rf,useRef:GS,useState:function(){return Rf(dc)},useDebugValue:Jg,useDeferredValue:function(e){var t=er();return kt===null?t.memoizedState=e:tN(t,kt.memoizedState,e)},useTransition:function(){var e=Rf(dc)[0],t=er().memoizedState;return[e,t]},useMutableSource:VS,useSyncExternalStore:zS,useId:nN,unstable_isNewReconciler:!1};function ur(e,t){if(e&&e.defaultProps){t=pt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ph={isMounted:function(e){return(e=e._reactInternals)?ma(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=an(),s=no(e),a=rs(r,s);a.payload=t,n!=null&&(a.callback=n),t=eo(e,a,s),t!==null&&(yr(t,e,s,r),Yu(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=an(),s=no(e),a=rs(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=eo(e,a,s),t!==null&&(yr(t,e,s,r),Yu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=an(),r=no(e),s=rs(n,r);s.tag=2,t!=null&&(s.callback=t),t=eo(e,s,r),t!==null&&(yr(t,e,r,n),Yu(t,e,r))}};function Gx(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!sc(n,r)||!sc(s,a):!0}function aN(e,t,n){var r=!1,s=lo,a=t.contextType;return typeof a=="object"&&a!==null?a=Zn(a):(s=wn(t)?Jo:Qt.current,r=t.contextTypes,a=(r=r!=null)?Ai(e,s):lo),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ph,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Yx(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ph.enqueueReplaceState(t,t.state,null)}function Gp(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Wg(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Zn(a):(a=wn(t)?Jo:Qt.current,s.context=Ai(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(qp(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ph.enqueueReplaceState(s,s.state,null),Nd(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Di(e,t){try{var n="",r=t;do n+=_P(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Of(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ZA=typeof WeakMap=="function"?WeakMap:Map;function iN(e,t,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ed||(Ed=!0,om=r),Yp(e,t)},n}function lN(e,t,n){n=rs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Yp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Yp(e,t),typeof r!="function"&&(to===null?to=new Set([this]):to.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Qx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ZA;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=f2.bind(null,e,t,n),t.then(e,e))}function Xx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jx(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rs(-1,1),t.tag=2,eo(n,t,1))),n.lanes|=1),e)}var e2=hs.ReactCurrentOwner,yn=!1;function sn(e,t,n,r){t.child=e===null?LS(t,null,n,r):Oi(t,e.child,n,r)}function Zx(e,t,n,r,s){n=n.render;var a=t.ref;return di(t,s),r=Yg(e,t,n,r,a,s),n=Qg(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cs(e,t,s)):(st&&n&&Lg(t),t.flags|=1,sn(e,t,r,s),t.child)}function ew(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!av(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,cN(e,t,a,r,s)):(e=td(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:sc,n(i,r)&&e.ref===t.ref)return cs(e,t,s)}return t.flags|=1,e=ro(a,r),e.ref=t.ref,e.return=t,t.child=e}function cN(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(sc(a,r)&&e.ref===t.ref)if(yn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(yn=!0);else return t.lanes=e.lanes,cs(e,t,s)}return Qp(e,t,n,r,s)}function uN(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ti,Cn),Cn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qe(ti,Cn),Cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Qe(ti,Cn),Cn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Qe(ti,Cn),Cn|=r;return sn(e,t,s,n),t.child}function dN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qp(e,t,n,r,s){var a=wn(n)?Jo:Qt.current;return a=Ai(t,a),di(t,s),n=Yg(e,t,n,r,a,s),r=Qg(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cs(e,t,s)):(st&&r&&Lg(t),t.flags|=1,sn(e,t,n,s),t.child)}function tw(e,t,n,r,s){if(wn(n)){var a=!0;yd(t)}else a=!1;if(di(t,s),t.stateNode===null)Ju(e,t),aN(t,n,r),Gp(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zn(u):(u=wn(n)?Jo:Qt.current,u=Ai(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Yx(t,i,r,u),Ps=!1;var m=t.memoizedState;i.state=m,Nd(t,r,i,s),c=t.memoizedState,l!==r||m!==c||xn.current||Ps?(typeof h=="function"&&(qp(t,n,h,r),c=t.memoizedState),(l=Ps||Gx(t,n,l,r,m,c,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,FS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ur(t.type,l),i.props=u,d=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zn(c):(c=wn(n)?Jo:Qt.current,c=Ai(t,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Yx(t,i,r,c),Ps=!1,m=t.memoizedState,i.state=m,Nd(t,r,i,s);var b=t.memoizedState;l!==d||m!==b||xn.current||Ps?(typeof p=="function"&&(qp(t,n,p,r),b=t.memoizedState),(u=Ps||Gx(t,n,u,r,m,b,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,b,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),i.props=r,i.state=b,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Xp(e,t,n,r,a,s)}function Xp(e,t,n,r,s,a){dN(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Ux(t,n,!1),cs(e,t,a);r=t.stateNode,e2.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Oi(t,e.child,null,a),t.child=Oi(t,null,l,a)):sn(e,t,l,a),t.memoizedState=r.state,s&&Ux(t,n,!0),t.child}function hN(e){var t=e.stateNode;t.pendingContext?Fx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fx(e,t.context,!1),Hg(e,t.containerInfo)}function nw(e,t,n,r,s){return Ri(),Fg(s),t.flags|=256,sn(e,t,n,r),t.child}var Jp={dehydrated:null,treeContext:null,retryLane:0};function Zp(e){return{baseLanes:e,cachePool:null,transitions:null}}function fN(e,t,n){var r=t.pendingProps,s=ct.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Qe(ct,s&1),e===null)return Hp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=vh(i,r,0,null),e=Qo(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Zp(n),t.memoizedState=Jp,e):Zg(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return t2(e,t,i,r,l,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ro(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ro(l,a):(a=Qo(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Zp(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Jp,r}return a=e.child,e=a.sibling,r=ro(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zg(e,t){return t=vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cu(e,t,n,r){return r!==null&&Fg(r),Oi(t,e.child,null,n),e=Zg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t2(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Of(Error(Z(422))),Cu(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=vh({mode:"visible",children:r.children},s,0,null),a=Qo(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Oi(t,e.child,null,i),t.child.memoizedState=Zp(i),t.memoizedState=Jp,a);if(!(t.mode&1))return Cu(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Z(419)),r=Of(a,r,void 0),Cu(e,t,i,r)}if(l=(i&e.childLanes)!==0,yn||l){if(r=Dt,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ls(e,s),yr(r,e,s,-1))}return ov(),r=Of(Error(Z(421))),Cu(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=p2.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Tn=Zs(s.nextSibling),In=t,st=!0,gr=null,e!==null&&(Kn[qn++]=Zr,Kn[qn++]=es,Kn[qn++]=Zo,Zr=e.id,es=e.overflow,Zo=t),t=Zg(t,r.children),t.flags|=4096,t)}function rw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kp(e.return,t,n)}function If(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function pN(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(sn(e,t,r.children,n),r=ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rw(e,n,t);else if(e.tag===19)rw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Qe(ct,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&jd(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),If(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&jd(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}If(t,!0,n,null,a);break;case"together":If(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ju(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ta|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=ro(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ro(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function n2(e,t,n){switch(t.tag){case 3:hN(t),Ri();break;case 5:US(t);break;case 1:wn(t.type)&&yd(t);break;case 4:Hg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Qe(bd,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Qe(ct,ct.current&1),t.flags|=128,null):n&t.child.childLanes?fN(e,t,n):(Qe(ct,ct.current&1),e=cs(e,t,n),e!==null?e.sibling:null);Qe(ct,ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(ct,ct.current),r)break;return null;case 22:case 23:return t.lanes=0,uN(e,t,n)}return cs(e,t,n)}var mN,em,gN,vN;mN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};em=function(){};gN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,$o($r.current);var a=null;switch(n){case"input":s=Sp(e,s),r=Sp(e,r),a=[];break;case"select":s=pt({},s,{value:void 0}),r=pt({},r,{value:void 0}),a=[];break;case"textarea":s=Cp(e,s),r=Cp(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=gd)}kp(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};vN=function(e,t,n,r){n!==r&&(t.flags|=4)};function xl(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function r2(e,t,n){var r=t.pendingProps;switch($g(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(t),null;case 1:return wn(t.type)&&vd(),qt(t),null;case 3:return r=t.stateNode,Ii(),nt(xn),nt(Qt),qg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Nu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gr!==null&&(lm(gr),gr=null))),em(e,t),qt(t),null;case 5:Kg(t);var s=$o(cc.current);if(n=t.type,e!==null&&t.stateNode!=null)gN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return qt(t),null}if(e=$o($r.current),Nu(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Rr]=t,r[ic]=a,e=(t.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<Tl.length;s++)et(Tl[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":hx(r,a),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},et("invalid",r);break;case"textarea":px(r,a),et("invalid",r)}kp(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Su(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Su(r.textContent,l,e),s=["children",""+l]):Xl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&et("scroll",r)}switch(n){case"input":pu(r),fx(r,a,!0);break;case"textarea":pu(r),mx(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=gd)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Rr]=t,e[ic]=r,mN(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ep(n,r),n){case"dialog":et("cancel",e),et("close",e),s=r;break;case"iframe":case"object":case"embed":et("load",e),s=r;break;case"video":case"audio":for(s=0;s<Tl.length;s++)et(Tl[s],e);s=r;break;case"source":et("error",e),s=r;break;case"img":case"image":case"link":et("error",e),et("load",e),s=r;break;case"details":et("toggle",e),s=r;break;case"input":hx(e,r),s=Sp(e,r),et("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=pt({},r,{value:void 0}),et("invalid",e);break;case"textarea":px(e,r),s=Cp(e,r),et("invalid",e);break;default:s=r}kp(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Gb(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Kb(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Jl(e,c):typeof c=="number"&&Jl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Xl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&et("scroll",e):c!=null&&Ng(e,a,c,i))}switch(n){case"input":pu(e),fx(e,r,!1);break;case"textarea":pu(e),mx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+io(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ii(e,!!r.multiple,a,!1):r.defaultValue!=null&&ii(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=gd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qt(t),null;case 6:if(e&&t.stateNode!=null)vN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=$o(cc.current),$o($r.current),Nu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rr]=t,(a=r.nodeValue!==n)&&(e=In,e!==null))switch(e.tag){case 3:Su(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Su(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rr]=t,t.stateNode=r}return qt(t),null;case 13:if(nt(ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&Tn!==null&&t.mode&1&&!(t.flags&128))DS(),Ri(),t.flags|=98560,a=!1;else if(a=Nu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Z(317));a[Rr]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qt(t),a=!1}else gr!==null&&(lm(gr),gr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?Tt===0&&(Tt=3):ov())),t.updateQueue!==null&&(t.flags|=4),qt(t),null);case 4:return Ii(),em(e,t),e===null&&oc(t.stateNode.containerInfo),qt(t),null;case 10:return zg(t.type._context),qt(t),null;case 17:return wn(t.type)&&vd(),qt(t),null;case 19:if(nt(ct),a=t.memoizedState,a===null)return qt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)xl(a,!1);else{if(Tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=jd(e),i!==null){for(t.flags|=128,xl(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Qe(ct,ct.current&1|2),t.child}e=e.sibling}a.tail!==null&&St()>Mi&&(t.flags|=128,r=!0,xl(a,!1),t.lanes=4194304)}else{if(!r)if(e=jd(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!st)return qt(t),null}else 2*St()-a.renderingStartTime>Mi&&n!==1073741824&&(t.flags|=128,r=!0,xl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=St(),t.sibling=null,n=ct.current,Qe(ct,r?n&1|2:n&1),t):(qt(t),null);case 22:case 23:return sv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Cn&1073741824&&(qt(t),t.subtreeFlags&6&&(t.flags|=8192)):qt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function s2(e,t){switch($g(t),t.tag){case 1:return wn(t.type)&&vd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ii(),nt(xn),nt(Qt),qg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kg(t),null;case 13:if(nt(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nt(ct),null;case 4:return Ii(),null;case 10:return zg(t.type._context),null;case 22:case 23:return sv(),null;case 24:return null;default:return null}}var _u=!1,Yt=!1,o2=typeof WeakSet=="function"?WeakSet:Set,ge=null;function ei(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(e,t,r)}else n.current=null}function tm(e,t,n){try{n()}catch(r){yt(e,t,r)}}var sw=!1;function a2(e,t){if($p=fd,e=SS(),Mg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(l=i+s),d!==a||r!==0&&d.nodeType!==3||(c=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)m=d,d=p;for(;;){if(d===e)break t;if(m===n&&++u===s&&(l=i),m===a&&++h===r&&(c=i),(p=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fp={focusedElem:e,selectionRange:n},fd=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:ur(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){yt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return b=sw,sw=!1,b}function Bl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&tm(t,n,a)}s=s.next}while(s!==r)}}function mh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yN(e){var t=e.alternate;t!==null&&(e.alternate=null,yN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rr],delete t[ic],delete t[zp],delete t[zA],delete t[BA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xN(e){return e.tag===5||e.tag===3||e.tag===4}function ow(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gd));else if(r!==4&&(e=e.child,e!==null))for(rm(e,t,n),e=e.sibling;e!==null;)rm(e,t,n),e=e.sibling}function sm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sm(e,t,n),e=e.sibling;e!==null;)sm(e,t,n),e=e.sibling}var Vt=null,pr=!1;function Ss(e,t,n){for(n=n.child;n!==null;)wN(e,t,n),n=n.sibling}function wN(e,t,n){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(ih,n)}catch{}switch(n.tag){case 5:Yt||ei(n,t);case 6:var r=Vt,s=pr;Vt=null,Ss(e,t,n),Vt=r,pr=s,Vt!==null&&(pr?(e=Vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(pr?(e=Vt,n=n.stateNode,e.nodeType===8?kf(e.parentNode,n):e.nodeType===1&&kf(e,n),nc(e)):kf(Vt,n.stateNode));break;case 4:r=Vt,s=pr,Vt=n.stateNode.containerInfo,pr=!0,Ss(e,t,n),Vt=r,pr=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&tm(n,t,i),s=s.next}while(s!==r)}Ss(e,t,n);break;case 1:if(!Yt&&(ei(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,t,l)}Ss(e,t,n);break;case 21:Ss(e,t,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Ss(e,t,n),Yt=r):Ss(e,t,n);break;default:Ss(e,t,n)}}function aw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new o2),t.forEach(function(r){var s=m2.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function or(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,pr=!1;break e;case 3:Vt=l.stateNode.containerInfo,pr=!0;break e;case 4:Vt=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(Vt===null)throw Error(Z(160));wN(a,i,s),Vt=null,pr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){yt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bN(t,e),t=t.sibling}function bN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(or(t,e),kr(e),r&4){try{Bl(3,e,e.return),mh(3,e)}catch(g){yt(e,e.return,g)}try{Bl(5,e,e.return)}catch(g){yt(e,e.return,g)}}break;case 1:or(t,e),kr(e),r&512&&n!==null&&ei(n,n.return);break;case 5:if(or(t,e),kr(e),r&512&&n!==null&&ei(n,n.return),e.flags&32){var s=e.stateNode;try{Jl(s,"")}catch(g){yt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Bb(s,a),Ep(l,i);var u=Ep(l,a);for(i=0;i<c.length;i+=2){var h=c[i],d=c[i+1];h==="style"?Gb(s,d):h==="dangerouslySetInnerHTML"?Kb(s,d):h==="children"?Jl(s,d):Ng(s,h,d,u)}switch(l){case"input":Np(s,a);break;case"textarea":Wb(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?ii(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?ii(s,!!a.multiple,a.defaultValue,!0):ii(s,!!a.multiple,a.multiple?[]:"",!1))}s[ic]=a}catch(g){yt(e,e.return,g)}}break;case 6:if(or(t,e),kr(e),r&4){if(e.stateNode===null)throw Error(Z(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){yt(e,e.return,g)}}break;case 3:if(or(t,e),kr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nc(t.containerInfo)}catch(g){yt(e,e.return,g)}break;case 4:or(t,e),kr(e);break;case 13:or(t,e),kr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(nv=St())),r&4&&aw(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Yt=(u=Yt)||h,or(t,e),Yt=u):or(t,e),kr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(ge=e,h=e.child;h!==null;){for(d=ge=h;ge!==null;){switch(m=ge,p=m.child,m.tag){case 0:case 11:case 14:case 15:Bl(4,m,m.return);break;case 1:ei(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){yt(r,n,g)}}break;case 5:ei(m,m.return);break;case 22:if(m.memoizedState!==null){lw(d);continue}}p!==null?(p.return=m,ge=p):lw(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=d.stateNode,c=d.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=qb("display",i))}catch(g){yt(e,e.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){yt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:or(t,e),kr(e),r&4&&aw(e);break;case 21:break;default:or(t,e),kr(e)}}function kr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xN(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Jl(s,""),r.flags&=-33);var a=ow(e);sm(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=ow(e);rm(e,l,i);break;default:throw Error(Z(161))}}catch(c){yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i2(e,t,n){ge=e,SN(e)}function SN(e,t,n){for(var r=(e.mode&1)!==0;ge!==null;){var s=ge,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||_u;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Yt;l=_u;var u=Yt;if(_u=i,(Yt=c)&&!u)for(ge=s;ge!==null;)i=ge,c=i.child,i.tag===22&&i.memoizedState!==null?cw(s):c!==null?(c.return=i,ge=c):cw(s);for(;a!==null;)ge=a,SN(a),a=a.sibling;ge=s,_u=l,Yt=u}iw(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ge=a):iw(e)}}function iw(e){for(;ge!==null;){var t=ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yt||mh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ur(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Hx(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hx(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&nc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Yt||t.flags&512&&nm(t)}catch(m){yt(t,t.return,m)}}if(t===e){ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,ge=n;break}ge=t.return}}function lw(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ge=n;break}ge=t.return}}function cw(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mh(4,t)}catch(c){yt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){yt(t,s,c)}}var a=t.return;try{nm(t)}catch(c){yt(t,a,c)}break;case 5:var i=t.return;try{nm(t)}catch(c){yt(t,i,c)}}}catch(c){yt(t,t.return,c)}if(t===e){ge=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ge=l;break}ge=t.return}}var l2=Math.ceil,kd=hs.ReactCurrentDispatcher,ev=hs.ReactCurrentOwner,Xn=hs.ReactCurrentBatchConfig,Ve=0,Dt=null,Ct=null,zt=0,Cn=0,ti=yo(0),Tt=0,fc=null,ta=0,gh=0,tv=0,Wl=null,vn=null,nv=0,Mi=1/0,qr=null,Ed=!1,om=null,to=null,ku=!1,qs=null,Td=0,Hl=0,am=null,Zu=-1,ed=0;function an(){return Ve&6?St():Zu!==-1?Zu:Zu=St()}function no(e){return e.mode&1?Ve&2&&zt!==0?zt&-zt:HA.transition!==null?(ed===0&&(ed=aS()),ed):(e=qe,e!==0||(e=window.event,e=e===void 0?16:fS(e.type)),e):1}function yr(e,t,n,r){if(50<Hl)throw Hl=0,am=null,Error(Z(185));$c(e,n,r),(!(Ve&2)||e!==Dt)&&(e===Dt&&(!(Ve&2)&&(gh|=n),Tt===4&&Os(e,zt)),bn(e,r),n===1&&Ve===0&&!(t.mode&1)&&(Mi=St()+500,hh&&xo()))}function bn(e,t){var n=e.callbackNode;HP(e,t);var r=hd(e,e===Dt?zt:0);if(r===0)n!==null&&yx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yx(n),t===1)e.tag===0?WA(uw.bind(null,e)):RS(uw.bind(null,e)),UA(function(){!(Ve&6)&&xo()}),n=null;else{switch(iS(r)){case 1:n=Eg;break;case 4:n=sS;break;case 16:n=dd;break;case 536870912:n=oS;break;default:n=dd}n=PN(n,NN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function NN(e,t){if(Zu=-1,ed=0,Ve&6)throw Error(Z(327));var n=e.callbackNode;if(hi()&&e.callbackNode!==n)return null;var r=hd(e,e===Dt?zt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pd(e,r);else{t=r;var s=Ve;Ve|=2;var a=CN();(Dt!==e||zt!==t)&&(qr=null,Mi=St()+500,Yo(e,t));do try{d2();break}catch(l){jN(e,l)}while(!0);Vg(),kd.current=a,Ve=s,Ct!==null?t=0:(Dt=null,zt=0,t=Tt)}if(t!==0){if(t===2&&(s=Op(e),s!==0&&(r=s,t=im(e,s))),t===1)throw n=fc,Yo(e,0),Os(e,r),bn(e,St()),n;if(t===6)Os(e,r);else{if(s=e.current.alternate,!(r&30)&&!c2(s)&&(t=Pd(e,r),t===2&&(a=Op(e),a!==0&&(r=a,t=im(e,a))),t===1))throw n=fc,Yo(e,0),Os(e,r),bn(e,St()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:Ao(e,vn,qr);break;case 3:if(Os(e,r),(r&130023424)===r&&(t=nv+500-St(),10<t)){if(hd(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){an(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vp(Ao.bind(null,e,vn,qr),t);break}Ao(e,vn,qr);break;case 4:if(Os(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-vr(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*l2(r/1960))-r,10<r){e.timeoutHandle=Vp(Ao.bind(null,e,vn,qr),r);break}Ao(e,vn,qr);break;case 5:Ao(e,vn,qr);break;default:throw Error(Z(329))}}}return bn(e,St()),e.callbackNode===n?NN.bind(null,e):null}function im(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(Yo(e,t).flags|=256),e=Pd(e,t),e!==2&&(t=vn,vn=n,t!==null&&lm(t)),e}function lm(e){vn===null?vn=e:vn.push.apply(vn,e)}function c2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!xr(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t){for(t&=~tv,t&=~gh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vr(t),r=1<<n;e[n]=-1,t&=~r}}function uw(e){if(Ve&6)throw Error(Z(327));hi();var t=hd(e,0);if(!(t&1))return bn(e,St()),null;var n=Pd(e,t);if(e.tag!==0&&n===2){var r=Op(e);r!==0&&(t=r,n=im(e,r))}if(n===1)throw n=fc,Yo(e,0),Os(e,t),bn(e,St()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ao(e,vn,qr),bn(e,St()),null}function rv(e,t){var n=Ve;Ve|=1;try{return e(t)}finally{Ve=n,Ve===0&&(Mi=St()+500,hh&&xo())}}function na(e){qs!==null&&qs.tag===0&&!(Ve&6)&&hi();var t=Ve;Ve|=1;var n=Xn.transition,r=qe;try{if(Xn.transition=null,qe=1,e)return e()}finally{qe=r,Xn.transition=n,Ve=t,!(Ve&6)&&xo()}}function sv(){Cn=ti.current,nt(ti)}function Yo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,FA(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch($g(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vd();break;case 3:Ii(),nt(xn),nt(Qt),qg();break;case 5:Kg(r);break;case 4:Ii();break;case 13:nt(ct);break;case 19:nt(ct);break;case 10:zg(r.type._context);break;case 22:case 23:sv()}n=n.return}if(Dt=e,Ct=e=ro(e.current,null),zt=Cn=t,Tt=0,fc=null,tv=gh=ta=0,vn=Wl=null,Lo!==null){for(t=0;t<Lo.length;t++)if(n=Lo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}Lo=null}return e}function jN(e,t){do{var n=Ct;try{if(Vg(),Qu.current=_d,Cd){for(var r=ht.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cd=!1}if(ea=0,It=kt=ht=null,zl=!1,uc=0,ev.current=null,n===null||n.return===null){Tt=1,fc=t,Ct=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Xx(i);if(p!==null){p.flags&=-257,Jx(p,i,l,a,t),p.mode&1&&Qx(a,u,t),t=p,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Qx(a,u,t),ov();break e}c=Error(Z(426))}}else if(st&&l.mode&1){var w=Xx(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Jx(w,i,l,a,t),Fg(Di(c,l));break e}}a=c=Di(c,l),Tt!==4&&(Tt=2),Wl===null?Wl=[a]:Wl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=iN(a,c,t);Wx(a,x);break e;case 1:l=c;var v=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(to===null||!to.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=lN(a,l,t);Wx(a,S);break e}}a=a.return}while(a!==null)}kN(n)}catch(j){t=j,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function CN(){var e=kd.current;return kd.current=_d,e===null?_d:e}function ov(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Dt===null||!(ta&268435455)&&!(gh&268435455)||Os(Dt,zt)}function Pd(e,t){var n=Ve;Ve|=2;var r=CN();(Dt!==e||zt!==t)&&(qr=null,Yo(e,t));do try{u2();break}catch(s){jN(e,s)}while(!0);if(Vg(),Ve=n,kd.current=r,Ct!==null)throw Error(Z(261));return Dt=null,zt=0,Tt}function u2(){for(;Ct!==null;)_N(Ct)}function d2(){for(;Ct!==null&&!MP();)_N(Ct)}function _N(e){var t=TN(e.alternate,e,Cn);e.memoizedProps=e.pendingProps,t===null?kN(e):Ct=t,ev.current=null}function kN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=s2(n,t),n!==null){n.flags&=32767,Ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tt=6,Ct=null;return}}else if(n=r2(n,t,Cn),n!==null){Ct=n;return}if(t=t.sibling,t!==null){Ct=t;return}Ct=t=e}while(t!==null);Tt===0&&(Tt=5)}function Ao(e,t,n){var r=qe,s=Xn.transition;try{Xn.transition=null,qe=1,h2(e,t,n,r)}finally{Xn.transition=s,qe=r}return null}function h2(e,t,n,r){do hi();while(qs!==null);if(Ve&6)throw Error(Z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(KP(e,a),e===Dt&&(Ct=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,PN(dd,function(){return hi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Xn.transition,Xn.transition=null;var i=qe;qe=1;var l=Ve;Ve|=4,ev.current=null,a2(e,n),bN(n,e),RA(Fp),fd=!!$p,Fp=$p=null,e.current=n,i2(n),LP(),Ve=l,qe=i,Xn.transition=a}else e.current=n;if(ku&&(ku=!1,qs=e,Td=s),a=e.pendingLanes,a===0&&(to=null),UP(n.stateNode),bn(e,St()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ed)throw Ed=!1,e=om,om=null,e;return Td&1&&e.tag!==0&&hi(),a=e.pendingLanes,a&1?e===am?Hl++:(Hl=0,am=e):Hl=0,xo(),null}function hi(){if(qs!==null){var e=iS(Td),t=Xn.transition,n=qe;try{if(Xn.transition=null,qe=16>e?16:e,qs===null)var r=!1;else{if(e=qs,qs=null,Td=0,Ve&6)throw Error(Z(331));var s=Ve;for(Ve|=4,ge=e.current;ge!==null;){var a=ge,i=a.child;if(ge.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ge=u;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:Bl(8,h,a)}var d=h.child;if(d!==null)d.return=h,ge=d;else for(;ge!==null;){h=ge;var m=h.sibling,p=h.return;if(yN(h),h===u){ge=null;break}if(m!==null){m.return=p,ge=m;break}ge=p}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ge=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,ge=i;else e:for(;ge!==null;){if(a=ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Bl(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ge=x;break e}ge=a.return}}var v=e.current;for(ge=v;ge!==null;){i=ge;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,ge=y;else e:for(i=v;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mh(9,l)}}catch(j){yt(l,l.return,j)}if(l===i){ge=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ge=S;break e}ge=l.return}}if(Ve=s,xo(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(ih,e)}catch{}r=!0}return r}finally{qe=n,Xn.transition=t}}return!1}function dw(e,t,n){t=Di(n,t),t=iN(e,t,1),e=eo(e,t,1),t=an(),e!==null&&($c(e,1,t),bn(e,t))}function yt(e,t,n){if(e.tag===3)dw(e,e,n);else for(;t!==null;){if(t.tag===3){dw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(to===null||!to.has(r))){e=Di(n,e),e=lN(t,e,1),t=eo(t,e,1),e=an(),t!==null&&($c(t,1,e),bn(t,e));break}}t=t.return}}function f2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=an(),e.pingedLanes|=e.suspendedLanes&n,Dt===e&&(zt&n)===n&&(Tt===4||Tt===3&&(zt&130023424)===zt&&500>St()-nv?Yo(e,0):tv|=n),bn(e,t)}function EN(e,t){t===0&&(e.mode&1?(t=vu,vu<<=1,!(vu&130023424)&&(vu=4194304)):t=1);var n=an();e=ls(e,t),e!==null&&($c(e,t,n),bn(e,n))}function p2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),EN(e,n)}function m2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),EN(e,n)}var TN;TN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xn.current)yn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yn=!1,n2(e,t,n);yn=!!(e.flags&131072)}else yn=!1,st&&t.flags&1048576&&OS(t,wd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ju(e,t),e=t.pendingProps;var s=Ai(t,Qt.current);di(t,n),s=Yg(null,t,r,e,s,n);var a=Qg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wn(r)?(a=!0,yd(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wg(t),s.updater=ph,t.stateNode=s,s._reactInternals=t,Gp(t,r,e,n),t=Xp(null,t,r,!0,a,n)):(t.tag=0,st&&a&&Lg(t),sn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ju(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=v2(r),e=ur(r,e),s){case 0:t=Qp(null,t,r,e,n);break e;case 1:t=tw(null,t,r,e,n);break e;case 11:t=Zx(null,t,r,e,n);break e;case 14:t=ew(null,t,r,ur(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ur(r,s),Qp(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ur(r,s),tw(e,t,r,s,n);case 3:e:{if(hN(t),e===null)throw Error(Z(387));r=t.pendingProps,a=t.memoizedState,s=a.element,FS(e,t),Nd(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Di(Error(Z(423)),t),t=nw(e,t,r,n,s);break e}else if(r!==s){s=Di(Error(Z(424)),t),t=nw(e,t,r,n,s);break e}else for(Tn=Zs(t.stateNode.containerInfo.firstChild),In=t,st=!0,gr=null,n=LS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){t=cs(e,t,n);break e}sn(e,t,r,n)}t=t.child}return t;case 5:return US(t),e===null&&Hp(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Up(r,s)?i=null:a!==null&&Up(r,a)&&(t.flags|=32),dN(e,t),sn(e,t,i,n),t.child;case 6:return e===null&&Hp(t),null;case 13:return fN(e,t,n);case 4:return Hg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Oi(t,null,r,n):sn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ur(r,s),Zx(e,t,r,s,n);case 7:return sn(e,t,t.pendingProps,n),t.child;case 8:return sn(e,t,t.pendingProps.children,n),t.child;case 12:return sn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Qe(bd,r._currentValue),r._currentValue=i,a!==null)if(xr(a.value,i)){if(a.children===s.children&&!xn.current){t=cs(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=rs(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Kp(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(Z(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Kp(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}sn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,di(t,n),s=Zn(s),r=r(s),t.flags|=1,sn(e,t,r,n),t.child;case 14:return r=t.type,s=ur(r,t.pendingProps),s=ur(r.type,s),ew(e,t,r,s,n);case 15:return cN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ur(r,s),Ju(e,t),t.tag=1,wn(r)?(e=!0,yd(t)):e=!1,di(t,n),aN(t,r,s),Gp(t,r,s,n),Xp(null,t,r,!0,e,n);case 19:return pN(e,t,n);case 22:return uN(e,t,n)}throw Error(Z(156,t.tag))};function PN(e,t){return rS(e,t)}function g2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,t,n,r){return new g2(e,t,n,r)}function av(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v2(e){if(typeof e=="function")return av(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cg)return 11;if(e===_g)return 14}return 2}function ro(e,t){var n=e.alternate;return n===null?(n=Gn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function td(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")av(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Ha:return Qo(n.children,s,a,t);case jg:i=8,s|=8;break;case yp:return e=Gn(12,n,t,s|2),e.elementType=yp,e.lanes=a,e;case xp:return e=Gn(13,n,t,s),e.elementType=xp,e.lanes=a,e;case wp:return e=Gn(19,n,t,s),e.elementType=wp,e.lanes=a,e;case Ub:return vh(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $b:i=10;break e;case Fb:i=9;break e;case Cg:i=11;break e;case _g:i=14;break e;case Ts:i=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=Gn(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Qo(e,t,n,r){return e=Gn(7,e,r,t),e.lanes=n,e}function vh(e,t,n,r){return e=Gn(22,e,r,t),e.elementType=Ub,e.lanes=n,e.stateNode={isHidden:!1},e}function Df(e,t,n){return e=Gn(6,e,null,t),e.lanes=n,e}function Mf(e,t,n){return t=Gn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y2(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gf(0),this.expirationTimes=gf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function iv(e,t,n,r,s,a,i,l,c){return e=new y2(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Gn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wg(a),e}function x2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function AN(e){if(!e)return lo;e=e._reactInternals;e:{if(ma(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(wn(n))return AS(e,n,t)}return t}function RN(e,t,n,r,s,a,i,l,c){return e=iv(n,r,!0,e,s,a,i,l,c),e.context=AN(null),n=e.current,r=an(),s=no(n),a=rs(r,s),a.callback=t??null,eo(n,a,s),e.current.lanes=s,$c(e,s,r),bn(e,r),e}function yh(e,t,n,r){var s=t.current,a=an(),i=no(s);return n=AN(n),t.context===null?t.context=n:t.pendingContext=n,t=rs(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=eo(s,t,i),e!==null&&(yr(e,s,i,a),Yu(e,s,i)),i}function Ad(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lv(e,t){hw(e,t),(e=e.alternate)&&hw(e,t)}function w2(){return null}var ON=typeof reportError=="function"?reportError:function(e){console.error(e)};function cv(e){this._internalRoot=e}xh.prototype.render=cv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));yh(e,t,null,null)};xh.prototype.unmount=cv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;na(function(){yh(null,e,null,null)}),t[is]=null}};function xh(e){this._internalRoot=e}xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=uS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rs.length&&t!==0&&t<Rs[n].priority;n++);Rs.splice(n,0,e),n===0&&hS(e)}};function uv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fw(){}function b2(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Ad(i);a.call(u)}}var i=RN(t,r,e,0,null,!1,!1,"",fw);return e._reactRootContainer=i,e[is]=i.current,oc(e.nodeType===8?e.parentNode:e),na(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ad(c);l.call(u)}}var c=iv(e,0,!1,null,null,!1,!1,"",fw);return e._reactRootContainer=c,e[is]=c.current,oc(e.nodeType===8?e.parentNode:e),na(function(){yh(t,c,n,r)}),c}function bh(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Ad(i);l.call(c)}}yh(t,i,e,s)}else i=b2(n,t,e,s,r);return Ad(i)}lS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=El(t.pendingLanes);n!==0&&(Tg(t,n|1),bn(t,St()),!(Ve&6)&&(Mi=St()+500,xo()))}break;case 13:na(function(){var r=ls(e,1);if(r!==null){var s=an();yr(r,e,1,s)}}),lv(e,1)}};Pg=function(e){if(e.tag===13){var t=ls(e,134217728);if(t!==null){var n=an();yr(t,e,134217728,n)}lv(e,134217728)}};cS=function(e){if(e.tag===13){var t=no(e),n=ls(e,t);if(n!==null){var r=an();yr(n,e,t,r)}lv(e,t)}};uS=function(){return qe};dS=function(e,t){var n=qe;try{return qe=e,t()}finally{qe=n}};Pp=function(e,t,n){switch(t){case"input":if(Np(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=dh(r);if(!s)throw Error(Z(90));zb(r),Np(r,s)}}}break;case"textarea":Wb(e,n);break;case"select":t=n.value,t!=null&&ii(e,!!n.multiple,t,!1)}};Xb=rv;Jb=na;var S2={usingClientEntryPoint:!1,Events:[Uc,Ya,dh,Yb,Qb,rv]},wl={findFiberByHostInstance:Mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N2={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tS(e),e===null?null:e.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||w2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{ih=Eu.inject(N2),Lr=Eu}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;Fn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uv(t))throw Error(Z(200));return x2(e,t,null,n)};Fn.createRoot=function(e,t){if(!uv(e))throw Error(Z(299));var n=!1,r="",s=ON;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=iv(e,1,!1,null,null,n,!1,r,s),e[is]=t.current,oc(e.nodeType===8?e.parentNode:e),new cv(t)};Fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=tS(t),e=e===null?null:e.stateNode,e};Fn.flushSync=function(e){return na(e)};Fn.hydrate=function(e,t,n){if(!wh(t))throw Error(Z(200));return bh(null,e,t,!0,n)};Fn.hydrateRoot=function(e,t,n){if(!uv(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=ON;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=RN(t,null,e,1,n??null,s,!1,a,i),e[is]=t.current,oc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xh(t)};Fn.render=function(e,t,n){if(!wh(t))throw Error(Z(200));return bh(null,e,t,!1,n)};Fn.unmountComponentAtNode=function(e){if(!wh(e))throw Error(Z(40));return e._reactRootContainer?(na(function(){bh(null,null,e,!1,function(){e._reactRootContainer=null,e[is]=null})}),!0):!1};Fn.unstable_batchedUpdates=rv;Fn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wh(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return bh(e,t,n,!1,r)};Fn.version="18.3.1-next-f1338f8080-20240426";function IN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IN)}catch(e){console.error(e)}}IN(),Ib.exports=Fn;var ga=Ib.exports;const DN=Sb(ga);var MN,pw=ga;MN=pw.createRoot,pw.hydrateRoot;const j2=1,C2=1e6;let Lf=0;function _2(){return Lf=(Lf+1)%Number.MAX_SAFE_INTEGER,Lf.toString()}const $f=new Map,mw=e=>{if($f.has(e))return;const t=setTimeout(()=>{$f.delete(e),Kl({type:"REMOVE_TOAST",toastId:e})},C2);$f.set(e,t)},k2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,j2)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?mw(n):e.toasts.forEach(r=>{mw(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},nd=[];let rd={toasts:[]};function Kl(e){rd=k2(rd,e),nd.forEach(t=>{t(rd)})}function E2({...e}){const t=_2(),n=s=>Kl({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Kl({type:"DISMISS_TOAST",toastId:t});return Kl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Mt(){const[e,t]=f.useState(rd);return f.useEffect(()=>(nd.push(t),()=>{const n=nd.indexOf(t);n>-1&&nd.splice(n,1)}),[e]),{...e,toast:E2,dismiss:n=>Kl({type:"DISMISS_TOAST",toastId:n})}}function oe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function gw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Sh(...e){return t=>{let n=!1;const r=e.map(s=>{const a=gw(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():gw(e[s],null)}}}}function Te(...e){return f.useCallback(Sh(...e),e)}function T2(e,t){const n=f.createContext(t),r=a=>{const{children:i,...l}=a,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=f.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Lt(e,t=[]){let n=[];function r(a,i){const l=f.createContext(i),c=n.length;n=[...n,i];const u=d=>{var x;const{scope:m,children:p,...b}=d,g=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,w=f.useMemo(()=>b,Object.values(b));return o.jsx(g.Provider,{value:w,children:p})};u.displayName=a+"Provider";function h(d,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,b=f.useContext(p);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(i=>f.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,P2(s,...t)]}function P2(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(a)[`__scope${u}`];return{...l,...d}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function ra(e){const t=A2(e),n=f.forwardRef((r,s)=>{const{children:a,...i}=r,l=f.Children.toArray(a),c=l.find(R2);if(c){const u=c.props.children,h=l.map(d=>d===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:d);return o.jsx(t,{...i,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var Gi=ra("Slot");function A2(e){const t=f.forwardRef((n,r)=>{const{children:s,...a}=n;if(f.isValidElement(s)){const i=I2(s),l=O2(a,s.props);return s.type!==f.Fragment&&(l.ref=r?Sh(r,i):i),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var LN=Symbol("radix.slottable");function $N(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=LN,t}function R2(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LN}function O2(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function I2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Yi(e){const t=e+"CollectionProvider",[n,r]=Lt(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:x}=g,v=se.useRef(null),y=se.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:y,collectionRef:v,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=ra(l),u=se.forwardRef((g,w)=>{const{scope:x,children:v}=g,y=a(l,x),S=Te(w,y.collectionRef);return o.jsx(c,{ref:S,children:v})});u.displayName=l;const h=e+"CollectionItemSlot",d="data-radix-collection-item",m=ra(h),p=se.forwardRef((g,w)=>{const{scope:x,children:v,...y}=g,S=se.useRef(null),j=Te(w,S),N=a(h,x);return se.useEffect(()=>(N.itemMap.set(S,{ref:S,...y}),()=>void N.itemMap.delete(S))),o.jsx(m,{[d]:"",ref:j,children:v})});p.displayName=h;function b(g){const w=a(e+"CollectionConsumer",g);return se.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((N,C)=>y.indexOf(N.ref.current)-y.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},b,r]}var D2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=D2.reduce((e,t)=>{const n=ra(`Primitive.${t}`),r=f.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function dv(e,t){e&&ga.flushSync(()=>e.dispatchEvent(t))}function ot(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function M2(e,t=globalThis==null?void 0:globalThis.document){const n=ot(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var L2="DismissableLayer",cm="dismissableLayer.update",$2="dismissableLayer.pointerDownOutside",F2="dismissableLayer.focusOutside",vw,FN=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qi=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=f.useContext(FN),[h,d]=f.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=f.useState({}),b=Te(t,C=>d(C)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=h?g.indexOf(h):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=x,j=V2(C=>{const _=C.target,k=[...u.branches].some(E=>E.contains(_));!S||k||(s==null||s(C),i==null||i(C),C.defaultPrevented||l==null||l())},m),N=z2(C=>{const _=C.target;[...u.branches].some(E=>E.contains(_))||(a==null||a(C),i==null||i(C),C.defaultPrevented||l==null||l())},m);return M2(C=>{v===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),yw(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=vw)}},[h,m,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),yw())},[h,u]),f.useEffect(()=>{const C=()=>p({});return document.addEventListener(cm,C),()=>document.removeEventListener(cm,C)},[]),o.jsx(fe.div,{...c,ref:b,style:{pointerEvents:y?S?"auto":"none":void 0,...e.style},onFocusCapture:oe(e.onFocusCapture,N.onFocusCapture),onBlurCapture:oe(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:oe(e.onPointerDownCapture,j.onPointerDownCapture)})});Qi.displayName=L2;var U2="DismissableLayerBranch",UN=f.forwardRef((e,t)=>{const n=f.useContext(FN),r=f.useRef(null),s=Te(t,r);return f.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(fe.div,{...e,ref:s})});UN.displayName=U2;function V2(e,t=globalThis==null?void 0:globalThis.document){const n=ot(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){VN($2,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function z2(e,t=globalThis==null?void 0:globalThis.document){const n=ot(e),r=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!r.current&&VN(F2,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yw(){const e=new CustomEvent(cm);document.dispatchEvent(e)}function VN(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?dv(s,a):s.dispatchEvent(a)}var B2=Qi,W2=UN,at=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},H2="Portal",zc=f.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=f.useState(!1);at(()=>a(!0),[]);const i=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?DN.createPortal(o.jsx(fe.div,{...r,ref:t}),i):null});zc.displayName=H2;function K2(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Xt=e=>{const{present:t,children:n}=e,r=q2(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=Te(r.ref,G2(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};Xt.displayName="Presence";function q2(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=K2(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Tu(r.current);a.current=l==="mounted"?u:"none"},[l]),at(()=>{const u=r.current,h=s.current;if(h!==e){const m=a.current,p=Tu(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),at(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,d=p=>{const g=Tu(r.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(a.current=Tu(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Tu(e){return(e==null?void 0:e.animationName)||"none"}function G2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Y2=wg[" useInsertionEffect ".trim().toString()]||at;function $n({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=Q2({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const h=f.useRef(e!==void 0);f.useEffect(()=>{const d=h.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=f.useCallback(h=>{var d;if(l){const m=X2(h)?h(e):h;m!==e&&((d=i.current)==null||d.call(i,m))}else a(h)},[l,e,a,i]);return[c,u]}function Q2({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),a=f.useRef(t);return Y2(()=>{a.current=t},[t]),f.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function X2(e){return typeof e=="function"}var zN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),J2="VisuallyHidden",Nh=f.forwardRef((e,t)=>o.jsx(fe.span,{...e,ref:t,style:{...zN,...e.style}}));Nh.displayName=J2;var Z2=Nh,hv="ToastProvider",[fv,eR,tR]=Yi("Toast"),[BN,pW]=Lt("Toast",[tR]),[nR,jh]=BN(hv),WN=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[l,c]=f.useState(null),[u,h]=f.useState(0),d=f.useRef(!1),m=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${hv}\`. Expected non-empty \`string\`.`),o.jsx(fv.Provider,{scope:t,children:o.jsx(nR,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>h(p=>p+1),[]),onToastRemove:f.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:m,children:i})})};WN.displayName=hv;var HN="ToastViewport",rR=["F8"],um="toast.viewportPause",dm="toast.viewportResume",KN=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=rR,label:s="Notifications ({hotkey})",...a}=e,i=jh(HN,n),l=eR(n),c=f.useRef(null),u=f.useRef(null),h=f.useRef(null),d=f.useRef(null),m=Te(t,d,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;f.useEffect(()=>{const w=x=>{var y;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((y=d.current)==null||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),f.useEffect(()=>{const w=c.current,x=d.current;if(b&&w&&x){const v=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(um);x.dispatchEvent(N),i.isClosePausedRef.current=!0}},y=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(dm);x.dispatchEvent(N),i.isClosePausedRef.current=!1}},S=N=>{!w.contains(N.relatedTarget)&&y()},j=()=>{w.contains(document.activeElement)||y()};return w.addEventListener("focusin",v),w.addEventListener("focusout",S),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",j),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",j),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[b,i.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:w})=>{const v=l().map(y=>{const S=y.ref.current,j=[S,...gR(S)];return w==="forwards"?j:j.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return f.useEffect(()=>{const w=d.current;if(w){const x=v=>{var j,N,C;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const _=document.activeElement,k=v.shiftKey;if(v.target===w&&k){(j=u.current)==null||j.focus();return}const R=g({tabbingDirection:k?"backwards":"forwards"}),$=R.findIndex(L=>L===_);Ff(R.slice($+1))?v.preventDefault():k?(N=u.current)==null||N.focus():(C=h.current)==null||C.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),o.jsxs(W2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&o.jsx(hm,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Ff(w)}}),o.jsx(fv.Slot,{scope:n,children:o.jsx(fe.ol,{tabIndex:-1,...a,ref:m})}),b&&o.jsx(hm,{ref:h,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Ff(w)}})]})});KN.displayName=HN;var qN="ToastFocusProxy",hm=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=jh(qN,n);return o.jsx(Nh,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});hm.displayName=qN;var Bc="Toast",sR="toast.swipeStart",oR="toast.swipeMove",aR="toast.swipeCancel",iR="toast.swipeEnd",GN=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[l,c]=$n({prop:r,defaultProp:s??!0,onChange:a,caller:Bc});return o.jsx(Xt,{present:n||l,children:o.jsx(uR,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:ot(e.onPause),onResume:ot(e.onResume),onSwipeStart:oe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:oe(e.onSwipeMove,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:oe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:oe(e.onSwipeEnd,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});GN.displayName=Bc;var[lR,cR]=BN(Bc,{onClose(){}}),uR=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:d,onSwipeCancel:m,onSwipeEnd:p,...b}=e,g=jh(Bc,n),[w,x]=f.useState(null),v=Te(t,L=>x(L)),y=f.useRef(null),S=f.useRef(null),j=s||g.duration,N=f.useRef(0),C=f.useRef(j),_=f.useRef(0),{onToastAdd:k,onToastRemove:E}=g,U=ot(()=>{var re;(w==null?void 0:w.contains(document.activeElement))&&((re=g.viewport)==null||re.focus()),i()}),R=f.useCallback(L=>{!L||L===1/0||(window.clearTimeout(_.current),N.current=new Date().getTime(),_.current=window.setTimeout(U,L))},[U]);f.useEffect(()=>{const L=g.viewport;if(L){const re=()=>{R(C.current),u==null||u()},z=()=>{const B=new Date().getTime()-N.current;C.current=C.current-B,window.clearTimeout(_.current),c==null||c()};return L.addEventListener(um,z),L.addEventListener(dm,re),()=>{L.removeEventListener(um,z),L.removeEventListener(dm,re)}}},[g.viewport,j,c,u,R]),f.useEffect(()=>{a&&!g.isClosePausedRef.current&&R(j)},[a,j,g.isClosePausedRef,R]),f.useEffect(()=>(k(),()=>E()),[k,E]);const $=f.useMemo(()=>w?t1(w):null,[w]);return g.viewport?o.jsxs(o.Fragment,{children:[$&&o.jsx(dR,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),o.jsx(lR,{scope:n,onClose:U,children:ga.createPortal(o.jsx(fv.ItemSlot,{scope:n,children:o.jsx(B2,{asChild:!0,onEscapeKeyDown:oe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||U(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:oe(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:oe(e.onPointerDown,L=>{L.button===0&&(y.current={x:L.clientX,y:L.clientY})}),onPointerMove:oe(e.onPointerMove,L=>{if(!y.current)return;const re=L.clientX-y.current.x,z=L.clientY-y.current.y,B=!!S.current,O=["left","right"].includes(g.swipeDirection),A=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,M=O?A(0,re):0,G=O?0:A(0,z),ee=L.pointerType==="touch"?10:2,ae={x:M,y:G},ce={originalEvent:L,delta:ae};B?(S.current=ae,Pu(oR,d,ce,{discrete:!1})):xw(ae,g.swipeDirection,ee)?(S.current=ae,Pu(sR,h,ce,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(re)>ee||Math.abs(z)>ee)&&(y.current=null)}),onPointerUp:oe(e.onPointerUp,L=>{const re=S.current,z=L.target;if(z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),S.current=null,y.current=null,re){const B=L.currentTarget,O={originalEvent:L,delta:re};xw(re,g.swipeDirection,g.swipeThreshold)?Pu(iR,p,O,{discrete:!0}):Pu(aR,m,O,{discrete:!0}),B.addEventListener("click",A=>A.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dR=e=>{const{__scopeToast:t,children:n,...r}=e,s=jh(Bc,t),[a,i]=f.useState(!1),[l,c]=f.useState(!1);return pR(()=>i(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(zc,{asChild:!0,children:o.jsx(Nh,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},hR="ToastTitle",YN=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(fe.div,{...r,ref:t})});YN.displayName=hR;var fR="ToastDescription",QN=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(fe.div,{...r,ref:t})});QN.displayName=fR;var XN="ToastAction",JN=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(e1,{altText:n,asChild:!0,children:o.jsx(pv,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${XN}\`. Expected non-empty \`string\`.`),null)});JN.displayName=XN;var ZN="ToastClose",pv=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=cR(ZN,n);return o.jsx(e1,{asChild:!0,children:o.jsx(fe.button,{type:"button",...r,ref:t,onClick:oe(e.onClick,s.onClose)})})});pv.displayName=ZN;var e1=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function t1(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),mR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...t1(r))}}),t}function Pu(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?dv(s,a):s.dispatchEvent(a)}var xw=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function pR(e=()=>{}){const t=ot(e);at(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function mR(e){return e.nodeType===e.ELEMENT_NODE}function gR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ff(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var vR=WN,n1=KN,r1=GN,s1=YN,o1=QN,a1=JN,i1=pv;function l1(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=l1(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function c1(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=l1(e))&&(r&&(r+=" "),r+=t);return r}const ww=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,bw=c1,Xi=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return bw(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],d=a==null?void 0:a[u];if(h===null)return null;const m=ww(h)||ww(d);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[d,m]=h;return m===void 0||(u[d]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:d,className:m,...p}=h;return Object.entries(p).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...u,d,m]:u},[]);return bw(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u1=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},c)=>f.createElement("svg",{ref:c,...xR,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:u1("lucide",s),...l},[...i.map(([u,h])=>f.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(e,t)=>{const n=f.forwardRef(({className:r,...s},a)=>f.createElement(wR,{ref:a,iconNode:t,className:u1(`lucide-${yR(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=le("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=le("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=le("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=le("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=le("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=le("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=le("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=le("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=le("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=le("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=le("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=le("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=le("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=le("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=le("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=le("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=le("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=le("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=le("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=le("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wv="-",qR=e=>{const t=YR(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(wv);return l[0]===""&&l.length!==1&&l.shift(),y1(l,t)||GR(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},y1=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?y1(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(wv);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Cw=/^\[(.+)\]$/,GR=e=>{if(Cw.test(e)){const t=Cw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},YR=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return XR(Object.entries(e.classGroups),n).forEach(([a,i])=>{vm(i,r,a,t)}),r},vm=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:_w(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(QR(s)){vm(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{vm(i,_w(t,a),n,r)})})},_w=(e,t)=>{let n=e;return t.split(wv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},QR=e=>e.isThemeGetter,XR=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,s]}):e,JR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},x1="!",ZR=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let u=0,h=0,d;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+a)===t)){c.push(l.slice(h,w)),h=w+a;continue}if(x==="/"){d=w;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(h),p=m.startsWith(x1),b=p?m.substring(1):m,g=d&&d>h?d-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:i}):i},eO=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},tO=e=>({cache:JR(e.cacheSize),parseClassName:ZR(e),...qR(e)}),nO=/\s+/,rO=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(nO);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:h,hasImportantModifier:d,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let b=!!p,g=r(b?m.substring(0,p):m);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const w=eO(h).join(":"),x=d?w+x1:w,v=x+g;if(a.includes(v))continue;a.push(v);const y=s(g,b);for(let S=0;S<y.length;++S){const j=y[S];a.push(x+j)}l=u+(l.length>0?" "+l:l)}return l};function sO(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=w1(t))&&(r&&(r+=" "),r+=n);return r}const w1=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=w1(e[r]))&&(n&&(n+=" "),n+=t);return n};function oO(e,...t){let n,r,s,a=i;function i(c){const u=t.reduce((h,d)=>d(h),e());return n=tO(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=rO(c,n);return s(c,h),h}return function(){return a(sO.apply(null,arguments))}}const Ze=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},b1=/^\[(?:([a-z-]+):)?(.+)\]$/i,aO=/^\d+\/\d+$/,iO=new Set(["px","full","screen"]),lO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hr=e=>fi(e)||iO.has(e)||aO.test(e),Ns=e=>Ji(e,"length",wO),fi=e=>!!e&&!Number.isNaN(Number(e)),Vf=e=>Ji(e,"number",fi),bl=e=>!!e&&Number.isInteger(Number(e)),fO=e=>e.endsWith("%")&&fi(e.slice(0,-1)),Me=e=>b1.test(e),js=e=>lO.test(e),pO=new Set(["length","size","percentage"]),mO=e=>Ji(e,pO,S1),gO=e=>Ji(e,"position",S1),vO=new Set(["image","url"]),yO=e=>Ji(e,vO,SO),xO=e=>Ji(e,"",bO),Sl=()=>!0,Ji=(e,t,n)=>{const r=b1.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},wO=e=>cO.test(e)&&!uO.test(e),S1=()=>!1,bO=e=>dO.test(e),SO=e=>hO.test(e),NO=()=>{const e=Ze("colors"),t=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),s=Ze("borderColor"),a=Ze("borderRadius"),i=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),u=Ze("grayscale"),h=Ze("hueRotate"),d=Ze("invert"),m=Ze("gap"),p=Ze("gradientColorStops"),b=Ze("gradientColorStopPositions"),g=Ze("inset"),w=Ze("margin"),x=Ze("opacity"),v=Ze("padding"),y=Ze("saturate"),S=Ze("scale"),j=Ze("sepia"),N=Ze("skew"),C=Ze("space"),_=Ze("translate"),k=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Me,t],R=()=>[Me,t],$=()=>["",Hr,Ns],L=()=>["auto",fi,Me],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",Me],M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[fi,Me];return{cacheSize:500,separator:":",theme:{colors:[Sl],spacing:[Hr,Ns],blur:["none","",js,Me],brightness:G(),borderColor:[e],borderRadius:["none","","full",js,Me],borderSpacing:R(),borderWidth:$(),contrast:G(),grayscale:A(),hueRotate:G(),invert:A(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[fO,Ns],inset:U(),margin:U(),opacity:G(),padding:R(),saturate:G(),scale:G(),sepia:A(),skew:G(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[js]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Me]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bl,Me]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",bl,Me]}],"grid-cols":[{"grid-cols":[Sl]}],"col-start-end":[{col:["auto",{span:["full",bl,Me]},Me]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Sl]}],"row-start-end":[{row:["auto",{span:[bl,Me]},Me]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,t]}],"min-w":[{"min-w":[Me,t,"min","max","fit"]}],"max-w":[{"max-w":[Me,t,"none","full","min","max","fit","prose",{screen:[js]},js]}],h:[{h:[Me,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,t,"auto","min","max","fit"]}],"font-size":[{text:["base",js,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vf]}],"font-family":[{font:[Sl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",fi,Vf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hr,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hr,Ns]}],"underline-offset":[{"underline-offset":["auto",Hr,Me]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),gO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Hr,Me]}],"outline-w":[{outline:[Hr,Ns]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Hr,Ns]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",js,xO]}],"shadow-color":[{shadow:[Sl]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",js,Me]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[bl,Me]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hr,Ns,Vf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jO=oO(NO);function Q(...e){return jO(c1(e))}const CO=vR,N1=f.forwardRef(({className:e,...t},n)=>o.jsx(n1,{ref:n,className:Q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));N1.displayName=n1.displayName;const _O=Xi("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),j1=f.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(r1,{ref:r,className:Q(_O({variant:t}),e),...n}));j1.displayName=r1.displayName;const kO=f.forwardRef(({className:e,...t},n)=>o.jsx(a1,{ref:n,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));kO.displayName=a1.displayName;const C1=f.forwardRef(({className:e,...t},n)=>o.jsx(i1,{ref:n,className:Q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(ps,{className:"h-4 w-4"})}));C1.displayName=i1.displayName;const _1=f.forwardRef(({className:e,...t},n)=>o.jsx(s1,{ref:n,className:Q("text-sm font-semibold",e),...t}));_1.displayName=s1.displayName;const k1=f.forwardRef(({className:e,...t},n)=>o.jsx(o1,{ref:n,className:Q("text-sm opacity-90",e),...t}));k1.displayName=o1.displayName;function EO(){const{toasts:e}=Mt();return o.jsxs(CO,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return o.jsxs(j1,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(_1,{children:n}),r&&o.jsx(k1,{children:r})]}),s,o.jsx(C1,{})]},t)}),o.jsx(N1,{})]})}var kw=["light","dark"],TO="(prefers-color-scheme: dark)",PO=f.createContext(void 0),AO={setTheme:e=>{},themes:[]},RO=()=>{var e;return(e=f.useContext(PO))!=null?e:AO};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let u=a==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=s?kw.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(b,g=!1,w=!0)=>{let x=i?i[b]:b,v=g?b+"|| ''":`'${x}'`,y="";return s&&w&&!g&&kw.includes(b)&&(y+=`d.style.colorScheme = '${b}';`),n==="class"?g||x?y+=`c.add(${v})`:y+="null":x&&(y+=`d[s](n,${v})`),y},p=e?`!function(){${h}${m(e)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${TO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${d}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var OO=e=>{switch(e){case"success":return MO;case"info":return $O;case"warning":return LO;case"error":return FO;default:return null}},IO=Array(12).fill(0),DO=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},IO.map((n,r)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),MO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),LO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$O=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),VO=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},ym=1,zO=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ym++,a=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,a,i=r.then(async c=>{if(a=["resolve",c],se.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(WO(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:h})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:h})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>i.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||ym++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gn=new zO,BO=(e,t)=>{let n=(t==null?void 0:t.id)||ym++;return gn.addToast({title:e,...t,id:n}),n},WO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",HO=BO,KO=()=>gn.toasts,qO=()=>gn.getActiveToasts();Object.assign(HO,{success:gn.success,info:gn.info,warning:gn.warning,error:gn.error,custom:gn.custom,message:gn.message,promise:gn.promise,dismiss:gn.dismiss,loading:gn.loading},{getHistory:KO,getToasts:qO});function GO(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}GO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Au(e){return e.label!==void 0}var YO=3,QO="32px",XO="16px",Ew=4e3,JO=356,ZO=14,eI=20,tI=200;function ar(...e){return e.filter(Boolean).join(" ")}function nI(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var rI=e=>{var t,n,r,s,a,i,l,c,u,h,d;let{invert:m,toast:p,unstyled:b,interacting:g,setHeights:w,visibleToasts:x,heights:v,index:y,toasts:S,expanded:j,removeToast:N,defaultRichColors:C,closeButton:_,style:k,cancelButtonStyle:E,actionButtonStyle:U,className:R="",descriptionClassName:$="",duration:L,position:re,gap:z,loadingIcon:B,expandByDefault:O,classNames:A,icons:M,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:ee}=e,[ae,ce]=se.useState(null),[Oe,ye]=se.useState(null),[F,de]=se.useState(!1),[J,we]=se.useState(!1),[Se,D]=se.useState(!1),[Y,te]=se.useState(!1),[ue,Xe]=se.useState(!1),[Zt,At]=se.useState(0),[en,jr]=se.useState(0),Rt=se.useRef(p.duration||L||Ew),Wr=se.useRef(null),tn=se.useRef(null),Be=y===0,Wt=y+1<=x,Ot=p.type,Ht=p.dismissible!==!1,it=p.className||"",Vn=p.descriptionClassName||"",W=se.useMemo(()=>v.findIndex(Pe=>Pe.toastId===p.id)||0,[v,p.id]),pe=se.useMemo(()=>{var Pe;return(Pe=p.closeButton)!=null?Pe:_},[p.closeButton,_]),I=se.useMemo(()=>p.duration||L||Ew,[p.duration,L]),ne=se.useRef(0),H=se.useRef(0),Ne=se.useRef(0),Ie=se.useRef(null),[Nt,nr]=re.split("-"),Co=se.useMemo(()=>v.reduce((Pe,Le,ze)=>ze>=W?Pe:Pe+Le.height,0),[v,W]),Na=VO(),nu=p.invert||m,cl=Ot==="loading";H.current=se.useMemo(()=>W*z+Co,[W,Co]),se.useEffect(()=>{Rt.current=I},[I]),se.useEffect(()=>{de(!0)},[]),se.useEffect(()=>{let Pe=tn.current;if(Pe){let Le=Pe.getBoundingClientRect().height;return jr(Le),w(ze=>[{toastId:p.id,height:Le,position:p.position},...ze]),()=>w(ze=>ze.filter(fn=>fn.toastId!==p.id))}},[w,p.id]),se.useLayoutEffect(()=>{if(!F)return;let Pe=tn.current,Le=Pe.style.height;Pe.style.height="auto";let ze=Pe.getBoundingClientRect().height;Pe.style.height=Le,jr(ze),w(fn=>fn.find(wt=>wt.toastId===p.id)?fn.map(wt=>wt.toastId===p.id?{...wt,height:ze}:wt):[{toastId:p.id,height:ze,position:p.position},...fn])},[F,p.title,p.description,w,p.id]);let zn=se.useCallback(()=>{we(!0),At(H.current),w(Pe=>Pe.filter(Le=>Le.toastId!==p.id)),setTimeout(()=>{N(p)},tI)},[p,N,w,H]);se.useEffect(()=>{if(p.promise&&Ot==="loading"||p.duration===1/0||p.type==="loading")return;let Pe;return j||g||ee&&Na?(()=>{if(Ne.current<ne.current){let Le=new Date().getTime()-ne.current;Rt.current=Rt.current-Le}Ne.current=new Date().getTime()})():Rt.current!==1/0&&(ne.current=new Date().getTime(),Pe=setTimeout(()=>{var Le;(Le=p.onAutoClose)==null||Le.call(p,p),zn()},Rt.current)),()=>clearTimeout(Pe)},[j,g,p,Ot,ee,Na,zn]),se.useEffect(()=>{p.delete&&zn()},[zn,p.delete]);function Cr(){var Pe,Le,ze;return M!=null&&M.loading?se.createElement("div",{className:ar(A==null?void 0:A.loader,(Pe=p==null?void 0:p.classNames)==null?void 0:Pe.loader,"sonner-loader"),"data-visible":Ot==="loading"},M.loading):B?se.createElement("div",{className:ar(A==null?void 0:A.loader,(Le=p==null?void 0:p.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Ot==="loading"},B):se.createElement(DO,{className:ar(A==null?void 0:A.loader,(ze=p==null?void 0:p.classNames)==null?void 0:ze.loader),visible:Ot==="loading"})}return se.createElement("li",{tabIndex:0,ref:tn,className:ar(R,it,A==null?void 0:A.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,A==null?void 0:A.default,A==null?void 0:A[Ot],(n=p==null?void 0:p.classNames)==null?void 0:n[Ot]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:C,"data-styled":!(p.jsx||p.unstyled||b),"data-mounted":F,"data-promise":!!p.promise,"data-swiped":ue,"data-removed":J,"data-visible":Wt,"data-y-position":Nt,"data-x-position":nr,"data-index":y,"data-front":Be,"data-swiping":Se,"data-dismissible":Ht,"data-type":Ot,"data-invert":nu,"data-swipe-out":Y,"data-swipe-direction":Oe,"data-expanded":!!(j||O&&F),style:{"--index":y,"--toasts-before":y,"--z-index":S.length-y,"--offset":`${J?Zt:H.current}px`,"--initial-height":O?"auto":`${en}px`,...k,...p.style},onDragEnd:()=>{D(!1),ce(null),Ie.current=null},onPointerDown:Pe=>{cl||!Ht||(Wr.current=new Date,At(H.current),Pe.target.setPointerCapture(Pe.pointerId),Pe.target.tagName!=="BUTTON"&&(D(!0),Ie.current={x:Pe.clientX,y:Pe.clientY}))},onPointerUp:()=>{var Pe,Le,ze,fn;if(Y||!Ht)return;Ie.current=null;let wt=Number(((Pe=tn.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rr=Number(((Le=tn.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_r=new Date().getTime()-((ze=Wr.current)==null?void 0:ze.getTime()),$t=ae==="x"?wt:rr,sr=Math.abs($t)/_r;if(Math.abs($t)>=eI||sr>.11){At(H.current),(fn=p.onDismiss)==null||fn.call(p,p),ye(ae==="x"?wt>0?"right":"left":rr>0?"down":"up"),zn(),te(!0),Xe(!1);return}D(!1),ce(null)},onPointerMove:Pe=>{var Le,ze,fn,wt;if(!Ie.current||!Ht||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;let rr=Pe.clientY-Ie.current.y,_r=Pe.clientX-Ie.current.x,$t=(ze=e.swipeDirections)!=null?ze:nI(re);!ae&&(Math.abs(_r)>1||Math.abs(rr)>1)&&ce(Math.abs(_r)>Math.abs(rr)?"x":"y");let sr={x:0,y:0};ae==="y"?($t.includes("top")||$t.includes("bottom"))&&($t.includes("top")&&rr<0||$t.includes("bottom")&&rr>0)&&(sr.y=rr):ae==="x"&&($t.includes("left")||$t.includes("right"))&&($t.includes("left")&&_r<0||$t.includes("right")&&_r>0)&&(sr.x=_r),(Math.abs(sr.x)>0||Math.abs(sr.y)>0)&&Xe(!0),(fn=tn.current)==null||fn.style.setProperty("--swipe-amount-x",`${sr.x}px`),(wt=tn.current)==null||wt.style.setProperty("--swipe-amount-y",`${sr.y}px`)}},pe&&!p.jsx?se.createElement("button",{"aria-label":G,"data-disabled":cl,"data-close-button":!0,onClick:cl||!Ht?()=>{}:()=>{var Pe;zn(),(Pe=p.onDismiss)==null||Pe.call(p,p)},className:ar(A==null?void 0:A.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(a=M==null?void 0:M.close)!=null?a:UO):null,p.jsx||f.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:se.createElement(se.Fragment,null,Ot||p.icon||p.promise?se.createElement("div",{"data-icon":"",className:ar(A==null?void 0:A.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Cr():null,p.type!=="loading"?p.icon||(M==null?void 0:M[Ot])||OO(Ot):null):null,se.createElement("div",{"data-content":"",className:ar(A==null?void 0:A.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},se.createElement("div",{"data-title":"",className:ar(A==null?void 0:A.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?se.createElement("div",{"data-description":"",className:ar($,Vn,A==null?void 0:A.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),f.isValidElement(p.cancel)?p.cancel:p.cancel&&Au(p.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||E,onClick:Pe=>{var Le,ze;Au(p.cancel)&&Ht&&((ze=(Le=p.cancel).onClick)==null||ze.call(Le,Pe),zn())},className:ar(A==null?void 0:A.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,f.isValidElement(p.action)?p.action:p.action&&Au(p.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||U,onClick:Pe=>{var Le,ze;Au(p.action)&&((ze=(Le=p.action).onClick)==null||ze.call(Le,Pe),!Pe.defaultPrevented&&zn())},className:ar(A==null?void 0:A.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function Tw(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sI(e,t){let n={};return[e,t].forEach((r,s)=>{let a=s===1,i=a?"--mobile-offset":"--offset",l=a?XO:QO;function c(u){["top","right","bottom","left"].forEach(h=>{n[`${i}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=l:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var oI=f.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:d,duration:m,style:p,visibleToasts:b=YO,toastOptions:g,dir:w=Tw(),gap:x=ZO,loadingIcon:v,icons:y,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:j}=e,[N,C]=se.useState([]),_=se.useMemo(()=>Array.from(new Set([r].concat(N.filter(ee=>ee.position).map(ee=>ee.position)))),[N,r]),[k,E]=se.useState([]),[U,R]=se.useState(!1),[$,L]=se.useState(!1),[re,z]=se.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=se.useRef(null),O=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=se.useRef(null),M=se.useRef(!1),G=se.useCallback(ee=>{C(ae=>{var ce;return(ce=ae.find(Oe=>Oe.id===ee.id))!=null&&ce.delete||gn.dismiss(ee.id),ae.filter(({id:Oe})=>Oe!==ee.id)})},[]);return se.useEffect(()=>gn.subscribe(ee=>{if(ee.dismiss){C(ae=>ae.map(ce=>ce.id===ee.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{DN.flushSync(()=>{C(ae=>{let ce=ae.findIndex(Oe=>Oe.id===ee.id);return ce!==-1?[...ae.slice(0,ce),{...ae[ce],...ee},...ae.slice(ce+1)]:[ee,...ae]})})})}),[]),se.useEffect(()=>{if(h!=="system"){z(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:ae})=>{z(ae?"dark":"light")})}catch{ee.addListener(({matches:ce})=>{try{z(ce?"dark":"light")}catch(Oe){console.error(Oe)}})}},[h]),se.useEffect(()=>{N.length<=1&&R(!1)},[N]),se.useEffect(()=>{let ee=ae=>{var ce,Oe;s.every(ye=>ae[ye]||ae.code===ye)&&(R(!0),(ce=B.current)==null||ce.focus()),ae.code==="Escape"&&(document.activeElement===B.current||(Oe=B.current)!=null&&Oe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),se.useEffect(()=>{if(B.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,M.current=!1)}},[B.current]),se.createElement("section",{ref:t,"aria-label":`${S} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((ee,ae)=>{var ce;let[Oe,ye]=ee.split("-");return N.length?se.createElement("ol",{key:ee,dir:w==="auto"?Tw():w,tabIndex:-1,ref:B,className:l,"data-sonner-toaster":!0,"data-theme":re,"data-y-position":Oe,"data-lifted":U&&N.length>1&&!a,"data-x-position":ye,style:{"--front-toast-height":`${((ce=k[0])==null?void 0:ce.height)||0}px`,"--width":`${JO}px`,"--gap":`${x}px`,...p,...sI(c,u)},onBlur:F=>{M.current&&!F.currentTarget.contains(F.relatedTarget)&&(M.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||M.current||(M.current=!0,A.current=F.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{$||R(!1)},onDragEnd:()=>R(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},N.filter(F=>!F.position&&ae===0||F.position===ee).map((F,de)=>{var J,we;return se.createElement(rI,{key:F.id,icons:y,index:de,toast:F,defaultRichColors:d,duration:(J=g==null?void 0:g.duration)!=null?J:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:b,closeButton:(we=g==null?void 0:g.closeButton)!=null?we:i,interacting:$,position:ee,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:G,toasts:N.filter(Se=>Se.position==F.position),heights:k.filter(Se=>Se.position==F.position),setHeights:E,expandByDefault:a,gap:x,loadingIcon:v,expanded:U,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const aI=({...e})=>{const{theme:t="system"}=RO();return o.jsx(oI,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var iI=wg[" useId ".trim().toString()]||(()=>{}),lI=0;function ln(e){const[t,n]=f.useState(iI());return at(()=>{e||n(r=>r??String(lI++))},[e]),e||(t?`radix-${t}`:"")}const cI=["top","right","bottom","left"],ho=Math.min,_n=Math.max,Dd=Math.round,Ru=Math.floor,Fr=e=>({x:e,y:e}),uI={left:"right",right:"left",bottom:"top",top:"bottom"},dI={start:"end",end:"start"};function xm(e,t,n){return _n(e,ho(t,n))}function us(e,t){return typeof e=="function"?e(t):e}function ds(e){return e.split("-")[0]}function Zi(e){return e.split("-")[1]}function bv(e){return e==="x"?"y":"x"}function Sv(e){return e==="y"?"height":"width"}const hI=new Set(["top","bottom"]);function Mr(e){return hI.has(ds(e))?"y":"x"}function Nv(e){return bv(Mr(e))}function fI(e,t,n){n===void 0&&(n=!1);const r=Zi(e),s=Nv(e),a=Sv(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Md(i)),[i,Md(i)]}function pI(e){const t=Md(e);return[wm(e),t,wm(t)]}function wm(e){return e.replace(/start|end/g,t=>dI[t])}const Pw=["left","right"],Aw=["right","left"],mI=["top","bottom"],gI=["bottom","top"];function vI(e,t,n){switch(e){case"top":case"bottom":return n?t?Aw:Pw:t?Pw:Aw;case"left":case"right":return t?mI:gI;default:return[]}}function yI(e,t,n,r){const s=Zi(e);let a=vI(ds(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(wm)))),a}function Md(e){return e.replace(/left|right|bottom|top/g,t=>uI[t])}function xI(e){return{top:0,right:0,bottom:0,left:0,...e}}function E1(e){return typeof e!="number"?xI(e):{top:e,right:e,bottom:e,left:e}}function Ld(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Rw(e,t,n){let{reference:r,floating:s}=e;const a=Mr(t),i=Nv(t),l=Sv(i),c=ds(t),u=a==="y",h=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:h,y:r.y-s.height};break;case"bottom":p={x:h,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Zi(t)){case"start":p[i]-=m*(n&&u?-1:1);break;case"end":p[i]+=m*(n&&u?-1:1);break}return p}const wI=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:d}=Rw(u,r,c),m=r,p={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y,data:S,reset:j}=await x({x:h,y:d,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});h=v??h,d=y??d,p={...p,[w]:{...p[w],...S}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:h,y:d}=Rw(u,m,c)),g=-1)}return{x:h,y:d,placement:m,strategy:s,middlewareData:p}};async function mc(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:m=!1,padding:p=0}=us(t,e),b=E1(p),w=l[m?d==="floating"?"reference":"floating":d],x=Ld(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=d==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),S=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},j=Ld(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(x.top-j.top+b.top)/S.y,bottom:(j.bottom-x.bottom+b.bottom)/S.y,left:(x.left-j.left+b.left)/S.x,right:(j.right-x.right+b.right)/S.x}}const bI=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:h=0}=us(e,t)||{};if(u==null)return{};const d=E1(h),m={x:n,y:r},p=Nv(s),b=Sv(p),g=await i.getDimensions(u),w=p==="y",x=w?"top":"left",v=w?"bottom":"right",y=w?"clientHeight":"clientWidth",S=a.reference[b]+a.reference[p]-m[p]-a.floating[b],j=m[p]-a.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let C=N?N[y]:0;(!C||!await(i.isElement==null?void 0:i.isElement(N)))&&(C=l.floating[y]||a.floating[b]);const _=S/2-j/2,k=C/2-g[b]/2-1,E=ho(d[x],k),U=ho(d[v],k),R=E,$=C-g[b]-U,L=C/2-g[b]/2+_,re=xm(R,L,$),z=!c.arrow&&Zi(s)!=null&&L!==re&&a.reference[b]/2-(L<R?E:U)-g[b]/2<0,B=z?L<R?L-R:L-$:0;return{[p]:m[p]+B,data:{[p]:re,centerOffset:L-re-B,...z&&{alignmentOffset:B}},reset:z}}}),SI=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=us(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=ds(s),v=Mr(l),y=ds(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(y||!g?[Md(l)]:pI(l)),N=b!=="none";!m&&N&&j.push(...yI(l,g,b,S));const C=[l,...j],_=await mc(t,w),k=[];let E=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&k.push(_[x]),d){const L=fI(s,i,S);k.push(_[L[0]],_[L[1]])}if(E=[...E,{placement:s,overflows:k}],!k.every(L=>L<=0)){var U,R;const L=(((U=a.flip)==null?void 0:U.index)||0)+1,re=C[L];if(re&&(!(d==="alignment"?v!==Mr(re):!1)||E.every(O=>O.overflows[0]>0&&Mr(O.placement)===v)))return{data:{index:L,overflows:E},reset:{placement:re}};let z=(R=E.filter(B=>B.overflows[0]<=0).sort((B,O)=>B.overflows[1]-O.overflows[1])[0])==null?void 0:R.placement;if(!z)switch(p){case"bestFit":{var $;const B=($=E.filter(O=>{if(N){const A=Mr(O.placement);return A===v||A==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(A=>A>0).reduce((A,M)=>A+M,0)]).sort((O,A)=>O[1]-A[1])[0])==null?void 0:$[0];B&&(z=B);break}case"initialPlacement":z=l;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function Ow(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Iw(e){return cI.some(t=>e[t]>=0)}const NI=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=us(e,t);switch(r){case"referenceHidden":{const a=await mc(t,{...s,elementContext:"reference"}),i=Ow(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Iw(i)}}}case"escaped":{const a=await mc(t,{...s,altBoundary:!0}),i=Ow(a,n.floating);return{data:{escapedOffsets:i,escaped:Iw(i)}}}default:return{}}}}},T1=new Set(["left","top"]);async function jI(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=ds(n),l=Zi(n),c=Mr(n)==="y",u=T1.has(i)?-1:1,h=a&&c?-1:1,d=us(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof b=="number"&&(p=l==="end"?b*-1:b),c?{x:p*h,y:m*u}:{x:m*u,y:p*h}}const CI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await jI(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},_I=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=us(e,t),u={x:n,y:r},h=await mc(t,c),d=Mr(ds(s)),m=bv(d);let p=u[m],b=u[d];if(a){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=p+h[w],y=p-h[x];p=xm(v,p,y)}if(i){const w=d==="y"?"top":"left",x=d==="y"?"bottom":"right",v=b+h[w],y=b-h[x];b=xm(v,b,y)}const g=l.fn({...t,[m]:p,[d]:b});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:a,[d]:i}}}}}},kI=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=us(e,t),h={x:n,y:r},d=Mr(s),m=bv(d);let p=h[m],b=h[d];const g=us(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=m==="y"?"height":"width",S=a.reference[m]-a.floating[y]+w.mainAxis,j=a.reference[m]+a.reference[y]-w.mainAxis;p<S?p=S:p>j&&(p=j)}if(u){var x,v;const y=m==="y"?"width":"height",S=T1.has(ds(s)),j=a.reference[d]-a.floating[y]+(S&&((x=i.offset)==null?void 0:x[d])||0)+(S?0:w.crossAxis),N=a.reference[d]+a.reference[y]+(S?0:((v=i.offset)==null?void 0:v[d])||0)-(S?w.crossAxis:0);b<j?b=j:b>N&&(b=N)}return{[m]:p,[d]:b}}}},EI=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=us(e,t),h=await mc(t,u),d=ds(s),m=Zi(s),p=Mr(s)==="y",{width:b,height:g}=a.floating;let w,x;d==="top"||d==="bottom"?(w=d,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=d,w=m==="end"?"top":"bottom");const v=g-h.top-h.bottom,y=b-h.left-h.right,S=ho(g-h[w],v),j=ho(b-h[x],y),N=!t.middlewareData.shift;let C=S,_=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=v),N&&!m){const E=_n(h.left,0),U=_n(h.right,0),R=_n(h.top,0),$=_n(h.bottom,0);p?_=b-2*(E!==0||U!==0?E+U:_n(h.left,h.right)):C=g-2*(R!==0||$!==0?R+$:_n(h.top,h.bottom))}await c({...t,availableWidth:_,availableHeight:C});const k=await i.getDimensions(l.floating);return b!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function Eh(){return typeof window<"u"}function el(e){return P1(e)?(e.nodeName||"").toLowerCase():"#document"}function Mn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zr(e){var t;return(t=(P1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function P1(e){return Eh()?e instanceof Node||e instanceof Mn(e).Node:!1}function wr(e){return Eh()?e instanceof Element||e instanceof Mn(e).Element:!1}function Vr(e){return Eh()?e instanceof HTMLElement||e instanceof Mn(e).HTMLElement:!1}function Dw(e){return!Eh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Mn(e).ShadowRoot}const TI=new Set(["inline","contents"]);function Wc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=br(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!TI.has(s)}const PI=new Set(["table","td","th"]);function AI(e){return PI.has(el(e))}const RI=[":popover-open",":modal"];function Th(e){return RI.some(t=>{try{return e.matches(t)}catch{return!1}})}const OI=["transform","translate","scale","rotate","perspective"],II=["transform","translate","scale","rotate","perspective","filter"],DI=["paint","layout","strict","content"];function jv(e){const t=Cv(),n=wr(e)?br(e):e;return OI.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||II.some(r=>(n.willChange||"").includes(r))||DI.some(r=>(n.contain||"").includes(r))}function MI(e){let t=fo(e);for(;Vr(t)&&!Fi(t);){if(jv(t))return t;if(Th(t))return null;t=fo(t)}return null}function Cv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const LI=new Set(["html","body","#document"]);function Fi(e){return LI.has(el(e))}function br(e){return Mn(e).getComputedStyle(e)}function Ph(e){return wr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fo(e){if(el(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dw(e)&&e.host||zr(e);return Dw(t)?t.host:t}function A1(e){const t=fo(e);return Fi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vr(t)&&Wc(t)?t:A1(t)}function gc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=A1(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Mn(s);if(a){const l=bm(i);return t.concat(i,i.visualViewport||[],Wc(s)?s:[],l&&n?gc(l):[])}return t.concat(s,gc(s,[],n))}function bm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function R1(e){const t=br(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Vr(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=Dd(n)!==a||Dd(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function _v(e){return wr(e)?e:e.contextElement}function pi(e){const t=_v(e);if(!Vr(t))return Fr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=R1(t);let i=(a?Dd(n.width):n.width)/r,l=(a?Dd(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const $I=Fr(0);function O1(e){const t=Mn(e);return!Cv()||!t.visualViewport?$I:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function FI(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Mn(e)?!1:t}function oa(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=_v(e);let i=Fr(1);t&&(r?wr(r)&&(i=pi(r)):i=pi(e));const l=FI(a,n,r)?O1(a):Fr(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,h=s.width/i.x,d=s.height/i.y;if(a){const m=Mn(a),p=r&&wr(r)?Mn(r):r;let b=m,g=bm(b);for(;g&&r&&p!==b;){const w=pi(g),x=g.getBoundingClientRect(),v=br(g),y=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,S=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,d*=w.y,c+=y,u+=S,b=Mn(g),g=bm(b)}}return Ld({width:h,height:d,x:c,y:u})}function kv(e,t){const n=Ph(e).scrollLeft;return t?t.left+n:oa(zr(e)).left+n}function I1(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:kv(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function UI(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=zr(r),l=t?Th(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Fr(1);const h=Fr(0),d=Vr(r);if((d||!d&&!a)&&((el(r)!=="body"||Wc(i))&&(c=Ph(r)),Vr(r))){const p=oa(r);u=pi(r),h.x=p.x+r.clientLeft,h.y=p.y+r.clientTop}const m=i&&!d&&!a?I1(i,c,!0):Fr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function VI(e){return Array.from(e.getClientRects())}function zI(e){const t=zr(e),n=Ph(e),r=e.ownerDocument.body,s=_n(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=_n(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+kv(e);const l=-n.scrollTop;return br(r).direction==="rtl"&&(i+=_n(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}function BI(e,t){const n=Mn(e),r=zr(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=Cv();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}const WI=new Set(["absolute","fixed"]);function HI(e,t){const n=oa(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Vr(e)?pi(e):Fr(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function Mw(e,t,n){let r;if(t==="viewport")r=BI(e,n);else if(t==="document")r=zI(zr(e));else if(wr(t))r=HI(t,n);else{const s=O1(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ld(r)}function D1(e,t){const n=fo(e);return n===t||!wr(n)||Fi(n)?!1:br(n).position==="fixed"||D1(n,t)}function KI(e,t){const n=t.get(e);if(n)return n;let r=gc(e,[],!1).filter(l=>wr(l)&&el(l)!=="body"),s=null;const a=br(e).position==="fixed";let i=a?fo(e):e;for(;wr(i)&&!Fi(i);){const l=br(i),c=jv(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&WI.has(s.position)||Wc(i)&&!c&&D1(e,i))?r=r.filter(h=>h!==i):s=l,i=fo(i)}return t.set(e,r),r}function qI(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?Th(t)?[]:KI(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,h)=>{const d=Mw(t,h,s);return u.top=_n(d.top,u.top),u.right=ho(d.right,u.right),u.bottom=ho(d.bottom,u.bottom),u.left=_n(d.left,u.left),u},Mw(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function GI(e){const{width:t,height:n}=R1(e);return{width:t,height:n}}function YI(e,t,n){const r=Vr(t),s=zr(t),a=n==="fixed",i=oa(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Fr(0);function u(){c.x=kv(s)}if(r||!r&&!a)if((el(t)!=="body"||Wc(s))&&(l=Ph(t)),r){const p=oa(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();a&&!r&&s&&u();const h=s&&!r&&!a?I1(s,l):Fr(0),d=i.left+l.scrollLeft-c.x-h.x,m=i.top+l.scrollTop-c.y-h.y;return{x:d,y:m,width:i.width,height:i.height}}function zf(e){return br(e).position==="static"}function Lw(e,t){if(!Vr(e)||br(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return zr(e)===n&&(n=n.ownerDocument.body),n}function M1(e,t){const n=Mn(e);if(Th(e))return n;if(!Vr(e)){let s=fo(e);for(;s&&!Fi(s);){if(wr(s)&&!zf(s))return s;s=fo(s)}return n}let r=Lw(e,t);for(;r&&AI(r)&&zf(r);)r=Lw(r,t);return r&&Fi(r)&&zf(r)&&!jv(r)?n:r||MI(e)||n}const QI=async function(e){const t=this.getOffsetParent||M1,n=this.getDimensions,r=await n(e.floating);return{reference:YI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XI(e){return br(e).direction==="rtl"}const JI={convertOffsetParentRelativeRectToViewportRelativeRect:UI,getDocumentElement:zr,getClippingRect:qI,getOffsetParent:M1,getElementRects:QI,getClientRects:VI,getDimensions:GI,getScale:pi,isElement:wr,isRTL:XI};function L1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZI(e,t){let n=null,r;const s=zr(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:h,top:d,width:m,height:p}=u;if(l||t(),!m||!p)return;const b=Ru(d),g=Ru(s.clientWidth-(h+m)),w=Ru(s.clientHeight-(d+p)),x=Ru(h),y={rootMargin:-b+"px "+-g+"px "+-w+"px "+-x+"px",threshold:_n(0,ho(1,c))||1};let S=!0;function j(N){const C=N[0].intersectionRatio;if(C!==c){if(!S)return i();C?i(!1,C):r=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!L1(u,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(j,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(e)}return i(!0),a}function eD(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=_v(e),h=s||a?[...u?gc(u):[],...gc(t)]:[];h.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const d=u&&l?ZI(u,n):null;let m=-1,p=null;i&&(p=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let b,g=c?oa(e):null;c&&w();function w(){const x=oa(e);g&&!L1(g,x)&&n(),g=x,b=requestAnimationFrame(w)}return n(),()=>{var x;h.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),d==null||d(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const tD=CI,nD=_I,rD=SI,sD=EI,oD=NI,$w=bI,aD=kI,iD=(e,t,n)=>{const r=new Map,s={platform:JI,...n},a={...s.platform,_c:r};return wI(e,t,{...s,platform:a})};var lD=typeof document<"u",cD=function(){},sd=lD?f.useLayoutEffect:cD;function $d(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!$d(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!$d(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function $1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fw(e,t){const n=$1(e);return Math.round(t*n)/n}function Bf(e){const t=f.useRef(e);return sd(()=>{t.current=e}),t}function uD(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,d]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);$d(m,r)||p(r);const[b,g]=f.useState(null),[w,x]=f.useState(null),v=f.useCallback(O=>{O!==N.current&&(N.current=O,g(O))},[]),y=f.useCallback(O=>{O!==C.current&&(C.current=O,x(O))},[]),S=a||b,j=i||w,N=f.useRef(null),C=f.useRef(null),_=f.useRef(h),k=c!=null,E=Bf(c),U=Bf(s),R=Bf(u),$=f.useCallback(()=>{if(!N.current||!C.current)return;const O={placement:t,strategy:n,middleware:m};U.current&&(O.platform=U.current),iD(N.current,C.current,O).then(A=>{const M={...A,isPositioned:R.current!==!1};L.current&&!$d(_.current,M)&&(_.current=M,ga.flushSync(()=>{d(M)}))})},[m,t,n,U,R]);sd(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[u]);const L=f.useRef(!1);sd(()=>(L.current=!0,()=>{L.current=!1}),[]),sd(()=>{if(S&&(N.current=S),j&&(C.current=j),S&&j){if(E.current)return E.current(S,j,$);$()}},[S,j,$,E,k]);const re=f.useMemo(()=>({reference:N,floating:C,setReference:v,setFloating:y}),[v,y]),z=f.useMemo(()=>({reference:S,floating:j}),[S,j]),B=f.useMemo(()=>{const O={position:n,left:0,top:0};if(!z.floating)return O;const A=Fw(z.floating,h.x),M=Fw(z.floating,h.y);return l?{...O,transform:"translate("+A+"px, "+M+"px)",...$1(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:A,top:M}},[n,l,z.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:$,refs:re,elements:z,floatingStyles:B}),[h,$,re,z,B])}const dD=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?$w({element:r.current,padding:s}).fn(n):{}:r?$w({element:r,padding:s}).fn(n):{}}}},hD=(e,t)=>({...tD(e),options:[e,t]}),fD=(e,t)=>({...nD(e),options:[e,t]}),pD=(e,t)=>({...aD(e),options:[e,t]}),mD=(e,t)=>({...rD(e),options:[e,t]}),gD=(e,t)=>({...sD(e),options:[e,t]}),vD=(e,t)=>({...oD(e),options:[e,t]}),yD=(e,t)=>({...dD(e),options:[e,t]});var xD="Arrow",F1=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(fe.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});F1.displayName=xD;var wD=F1;function Ev(e){const[t,n]=f.useState(void 0);return at(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Tv="Popper",[U1,tl]=Lt(Tv),[bD,V1]=U1(Tv),z1=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return o.jsx(bD,{scope:t,anchor:r,onAnchorChange:s,children:n})};z1.displayName=Tv;var B1="PopperAnchor",W1=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=V1(B1,n),i=f.useRef(null),l=Te(t,i);return f.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:o.jsx(fe.div,{...s,ref:l})});W1.displayName=B1;var Pv="PopperContent",[SD,ND]=U1(Pv),H1=f.forwardRef((e,t)=>{var F,de,J,we,Se,D;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:b,...g}=e,w=V1(Pv,n),[x,v]=f.useState(null),y=Te(t,Y=>v(Y)),[S,j]=f.useState(null),N=Ev(S),C=(N==null?void 0:N.width)??0,_=(N==null?void 0:N.height)??0,k=r+(a!=="center"?"-"+a:""),E=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},U=Array.isArray(u)?u:[u],R=U.length>0,$={padding:E,boundary:U.filter(CD),altBoundary:R},{refs:L,floatingStyles:re,placement:z,isPositioned:B,middlewareData:O}=uD({strategy:"fixed",placement:k,whileElementsMounted:(...Y)=>eD(...Y,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[hD({mainAxis:s+_,alignmentAxis:i}),c&&fD({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?pD():void 0,...$}),c&&mD({...$}),gD({...$,apply:({elements:Y,rects:te,availableWidth:ue,availableHeight:Xe})=>{const{width:Zt,height:At}=te.reference,en=Y.floating.style;en.setProperty("--radix-popper-available-width",`${ue}px`),en.setProperty("--radix-popper-available-height",`${Xe}px`),en.setProperty("--radix-popper-anchor-width",`${Zt}px`),en.setProperty("--radix-popper-anchor-height",`${At}px`)}}),S&&yD({element:S,padding:l}),_D({arrowWidth:C,arrowHeight:_}),m&&vD({strategy:"referenceHidden",...$})]}),[A,M]=G1(z),G=ot(b);at(()=>{B&&(G==null||G())},[B,G]);const ee=(F=O.arrow)==null?void 0:F.x,ae=(de=O.arrow)==null?void 0:de.y,ce=((J=O.arrow)==null?void 0:J.centerOffset)!==0,[Oe,ye]=f.useState();return at(()=>{x&&ye(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:B?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(we=O.transformOrigin)==null?void 0:we.x,(Se=O.transformOrigin)==null?void 0:Se.y].join(" "),...((D=O.hide)==null?void 0:D.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(SD,{scope:n,placedSide:A,onArrowChange:j,arrowX:ee,arrowY:ae,shouldHideArrow:ce,children:o.jsx(fe.div,{"data-side":A,"data-align":M,...g,ref:y,style:{...g.style,animation:B?void 0:"none"}})})})});H1.displayName=Pv;var K1="PopperArrow",jD={top:"bottom",right:"left",bottom:"top",left:"right"},q1=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=ND(K1,r),i=jD[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(wD,{...s,ref:n,style:{...s.style,display:"block"}})})});q1.displayName=K1;function CD(e){return e!==null}var _D=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,h]=G1(n),d={start:"0%",center:"50%",end:"100%"}[h],m=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=i?d:`${m}px`,g=`${-c}px`):u==="top"?(b=i?d:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=i?d:`${p}px`):u==="left"&&(b=`${r.floating.width+c}px`,g=i?d:`${p}px`),{data:{x:b,y:g}}}});function G1(e){const[t,n="center"]=e.split("-");return[t,n]}var Ah=z1,Av=W1,Rv=H1,Ov=q1,[Rh,mW]=Lt("Tooltip",[tl]),Oh=tl(),Y1="TooltipProvider",kD=700,Sm="tooltip.open",[ED,Iv]=Rh(Y1),Q1=e=>{const{__scopeTooltip:t,delayDuration:n=kD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(ED,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};Q1.displayName=Y1;var vc="Tooltip",[TD,Ih]=Rh(vc),X1=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=Iv(vc,e.__scopeTooltip),u=Oh(t),[h,d]=f.useState(null),m=ln(),p=f.useRef(0),b=i??c.disableHoverableContent,g=l??c.delayDuration,w=f.useRef(!1),[x,v]=$n({prop:r,defaultProp:s??!1,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(Sm))):c.onClose(),a==null||a(C)},caller:vc}),y=f.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),S=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w.current=!1,v(!0)},[v]),j=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),N=f.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,v(!0),p.current=0},g)},[g,v]);return f.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),o.jsx(Ah,{...u,children:o.jsx(TD,{scope:t,contentId:m,open:x,stateAttribute:y,trigger:h,onTriggerChange:d,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?N():S()},[c.isOpenDelayedRef,N,S]),onTriggerLeave:f.useCallback(()=>{b?j():(window.clearTimeout(p.current),p.current=0)},[j,b]),onOpen:S,onClose:j,disableHoverableContent:b,children:n})})};X1.displayName=vc;var Nm="TooltipTrigger",J1=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Ih(Nm,n),a=Iv(Nm,n),i=Oh(n),l=f.useRef(null),c=Te(t,l,s.onTriggerChange),u=f.useRef(!1),h=f.useRef(!1),d=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),o.jsx(Av,{asChild:!0,...i,children:o.jsx(fe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:oe(e.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:oe(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:oe(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:oe(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:oe(e.onBlur,s.onClose),onClick:oe(e.onClick,s.onClose)})})});J1.displayName=Nm;var PD="TooltipPortal",[gW,AD]=Rh(PD,{forceMount:void 0}),Ui="TooltipContent",Z1=f.forwardRef((e,t)=>{const n=AD(Ui,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=Ih(Ui,e.__scopeTooltip);return o.jsx(Xt,{present:r||i.open,children:i.disableHoverableContent?o.jsx(ej,{side:s,...a,ref:t}):o.jsx(RD,{side:s,...a,ref:t})})}),RD=f.forwardRef((e,t)=>{const n=Ih(Ui,e.__scopeTooltip),r=Iv(Ui,e.__scopeTooltip),s=f.useRef(null),a=Te(t,s),[i,l]=f.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:d}=r,m=f.useCallback(()=>{l(null),d(!1)},[d]),p=f.useCallback((b,g)=>{const w=b.currentTarget,x={x:b.clientX,y:b.clientY},v=LD(x,w.getBoundingClientRect()),y=$D(x,v),S=FD(g.getBoundingClientRect()),j=VD([...y,...S]);l(j),d(!0)},[d]);return f.useEffect(()=>()=>m(),[m]),f.useEffect(()=>{if(c&&h){const b=w=>p(w,h),g=w=>p(w,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",g)}}},[c,h,p,m]),f.useEffect(()=>{if(i){const b=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),y=!UD(x,i);v?m():y&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,i,u,m]),o.jsx(ej,{...e,ref:a})}),[OD,ID]=Rh(vc,{isInside:!1}),DD=$N("TooltipContent"),ej=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Ih(Ui,n),u=Oh(n),{onClose:h}=c;return f.useEffect(()=>(document.addEventListener(Sm,h),()=>document.removeEventListener(Sm,h)),[h]),f.useEffect(()=>{if(c.trigger){const d=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,h]),o.jsx(Qi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:o.jsxs(Rv,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(DD,{children:r}),o.jsx(OD,{scope:n,isInside:!0,children:o.jsx(Z2,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Z1.displayName=Ui;var tj="TooltipArrow",MD=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Oh(n);return ID(tj,n).isInside?null:o.jsx(Ov,{...s,...r,ref:t})});MD.displayName=tj;function LD(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function $D(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function FD(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function UD(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,d=c.x,m=c.y;h>r!=m>r&&n<(d-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function VD(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zD(t)}function zD(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var BD=Q1,WD=X1,HD=J1,nj=Z1;const rj=BD,KD=WD,qD=HD,sj=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(nj,{ref:r,sideOffset:t,className:Q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));sj.displayName=nj.displayName;var nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aa=typeof window>"u"||"Deno"in globalThis;function on(){}function GD(e,t){return typeof e=="function"?e(t):e}function jm(e){return typeof e=="number"&&e>=0&&e!==1/0}function oj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function so(e,t){return typeof e=="function"?e(t):e}function Hn(e,t){return typeof e=="function"?e(t):e}function Uw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Dv(i,t.options))return!1}else if(!yc(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Vw(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(ia(t.options.mutationKey)!==ia(a))return!1}else if(!yc(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Dv(e,t){return((t==null?void 0:t.queryKeyHashFn)||ia)(e)}function ia(e){return JSON.stringify(e,(t,n)=>Cm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function yc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>yc(e[n],t[n])):!1}function aj(e,t){if(e===t)return e;const n=zw(e)&&zw(t);if(n||Cm(e)&&Cm(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<i;h++){const d=n?h:a[h];(!n&&c.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=aj(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&u++)}return s===i&&u===s?e:l}return t}function Fd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function zw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cm(e){if(!Bw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Bw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Bw(e){return Object.prototype.toString.call(e)==="[object Object]"}function YD(e){return new Promise(t=>{setTimeout(t,e)})}function _m(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?aj(e,t):t}function QD(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function XD(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Mv=Symbol();function ij(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Mv?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function lj(e,t){return typeof e=="function"?e(...t):!!e}var Uo,Ms,yi,hb,JD=(hb=class extends nl{constructor(){super();Ce(this,Uo);Ce(this,Ms);Ce(this,yi);he(this,yi,t=>{if(!aa&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){T(this,Ms)||this.setEventListener(T(this,yi))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Ms))==null||t.call(this),he(this,Ms,void 0))}setEventListener(t){var n;he(this,yi,t),(n=T(this,Ms))==null||n.call(this),he(this,Ms,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){T(this,Uo)!==t&&(he(this,Uo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof T(this,Uo)=="boolean"?T(this,Uo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Uo=new WeakMap,Ms=new WeakMap,yi=new WeakMap,hb),Lv=new JD,xi,Ls,wi,fb,ZD=(fb=class extends nl{constructor(){super();Ce(this,xi,!0);Ce(this,Ls);Ce(this,wi);he(this,wi,t=>{if(!aa&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){T(this,Ls)||this.setEventListener(T(this,wi))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Ls))==null||t.call(this),he(this,Ls,void 0))}setEventListener(t){var n;he(this,wi,t),(n=T(this,Ls))==null||n.call(this),he(this,Ls,t(this.setOnline.bind(this)))}setOnline(t){T(this,xi)!==t&&(he(this,xi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return T(this,xi)}},xi=new WeakMap,Ls=new WeakMap,wi=new WeakMap,fb),Ud=new ZD;function km(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function eM(e){return Math.min(1e3*2**e,3e4)}function cj(e){return(e??"online")==="online"?Ud.isOnline():!0}var uj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Wf(e){return e instanceof uj}function dj(e){let t=!1,n=0,r=!1,s;const a=km(),i=g=>{var w;r||(m(new uj(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Lv.isFocused()&&(e.networkMode==="always"||Ud.isOnline())&&e.canRun(),h=()=>cj(e.networkMode)&&e.canRun(),d=g=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,g),s==null||s(),a.resolve(g))},m=g=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,g),s==null||s(),a.reject(g))},p=()=>new Promise(g=>{var w;s=x=>{(r||u())&&g(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(r)return;let g;const w=n===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(d).catch(x=>{var N;if(r)return;const v=e.retry??(aa?0:3),y=e.retryDelay??eM,S=typeof y=="function"?y(n,x):y,j=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(t||!j){m(x);return}n++,(N=e.onFail)==null||N.call(e,n,x),YD(S).then(()=>u()?void 0:p()).then(()=>{t?m(x):b()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():p().then(b),a)}}var tM=e=>setTimeout(e,0);function nM(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=tM;const a=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Et=nM(),Vo,pb,hj=(pb=class{constructor(){Ce(this,Vo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jm(this.gcTime)&&he(this,Vo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(aa?1/0:5*60*1e3))}clearGcTimeout(){T(this,Vo)&&(clearTimeout(T(this,Vo)),he(this,Vo,void 0))}},Vo=new WeakMap,pb),bi,zo,Wn,Bo,Gt,Oc,Wo,hr,Kr,mb,rM=(mb=class extends hj{constructor(t){super();Ce(this,hr);Ce(this,bi);Ce(this,zo);Ce(this,Wn);Ce(this,Bo);Ce(this,Gt);Ce(this,Oc);Ce(this,Wo);he(this,Wo,!1),he(this,Oc,t.defaultOptions),this.setOptions(t.options),this.observers=[],he(this,Bo,t.client),he(this,Wn,T(this,Bo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,he(this,bi,sM(this.options)),this.state=t.state??T(this,bi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=T(this,Gt))==null?void 0:t.promise}setOptions(t){this.options={...T(this,Oc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Wn).remove(this)}setData(t,n){const r=_m(this.state.data,t,this.options);return $e(this,hr,Kr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){$e(this,hr,Kr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=T(this,Gt))==null?void 0:r.promise;return(s=T(this,Gt))==null||s.cancel(t),n?n.then(on).catch(on):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,bi))}isActive(){return this.observers.some(t=>Hn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>so(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!oj(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,Gt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=T(this,Gt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),T(this,Wn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(T(this,Gt)&&(T(this,Wo)?T(this,Gt).cancel({revert:!0}):T(this,Gt).cancelRetry()),this.scheduleGc()),T(this,Wn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$e(this,hr,Kr).call(this,{type:"invalidate"})}fetch(t,n){var u,h,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(T(this,Gt))return T(this,Gt).continueRetry(),T(this,Gt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(he(this,Wo,!0),r.signal)})},a=()=>{const m=ij(this.options,n),b=(()=>{const g={client:T(this,Bo),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return he(this,Wo,!1),this.options.persister?this.options.persister(m,b,this):m(b)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:T(this,Bo),state:this.state,fetchFn:a};return s(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),he(this,zo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&$e(this,hr,Kr).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=m=>{var p,b,g,w;Wf(m)&&m.silent||$e(this,hr,Kr).call(this,{type:"error",error:m}),Wf(m)||((b=(p=T(this,Wn).config).onError)==null||b.call(p,m,this),(w=(g=T(this,Wn).config).onSettled)==null||w.call(g,this.state.data,m,this)),this.scheduleGc()};return he(this,Gt,dj({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,b,g,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){c(x);return}(b=(p=T(this,Wn).config).onSuccess)==null||b.call(p,m,this),(w=(g=T(this,Wn).config).onSettled)==null||w.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{$e(this,hr,Kr).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{$e(this,hr,Kr).call(this,{type:"pause"})},onContinue:()=>{$e(this,hr,Kr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),T(this,Gt).start()}},bi=new WeakMap,zo=new WeakMap,Wn=new WeakMap,Bo=new WeakMap,Gt=new WeakMap,Oc=new WeakMap,Wo=new WeakMap,hr=new WeakSet,Kr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fj(r.data,this.options),fetchMeta:t.meta??null};case"success":return he(this,zo,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Wf(s)&&s.revert&&T(this,zo)?{...T(this,zo),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Et.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),T(this,Wn).notify({query:this,type:"updated",action:t})})},mb);function fj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sM(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Tr,gb,oM=(gb=class extends nl{constructor(t={}){super();Ce(this,Tr);this.config=t,he(this,Tr,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Dv(s,n);let i=this.get(a);return i||(i=new rM({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){T(this,Tr).has(t.queryHash)||(T(this,Tr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=T(this,Tr).get(t.queryHash);n&&(t.destroy(),n===t&&T(this,Tr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return T(this,Tr).get(t)}getAll(){return[...T(this,Tr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Uw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Uw(t,r)):n}notify(t){Et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Tr=new WeakMap,gb),Pr,nn,Ho,Ar,ks,vb,aM=(vb=class extends hj{constructor(t){super();Ce(this,Ar);Ce(this,Pr);Ce(this,nn);Ce(this,Ho);this.mutationId=t.mutationId,he(this,nn,t.mutationCache),he(this,Pr,[]),this.state=t.state||pj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){T(this,Pr).includes(t)||(T(this,Pr).push(t),this.clearGcTimeout(),T(this,nn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){he(this,Pr,T(this,Pr).filter(n=>n!==t)),this.scheduleGc(),T(this,nn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){T(this,Pr).length||(this.state.status==="pending"?this.scheduleGc():T(this,nn).remove(this))}continue(){var t;return((t=T(this,Ho))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,c,u,h,d,m,p,b,g,w,x,v,y,S,j,N,C,_;const n=()=>{$e(this,Ar,ks).call(this,{type:"continue"})};he(this,Ho,dj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,E)=>{$e(this,Ar,ks).call(this,{type:"failed",failureCount:k,error:E})},onPause:()=>{$e(this,Ar,ks).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,nn).canRun(this)}));const r=this.state.status==="pending",s=!T(this,Ho).canStart();try{if(r)n();else{$e(this,Ar,ks).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=T(this,nn).config).onMutate)==null?void 0:i.call(a,t,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));E!==this.state.context&&$e(this,Ar,ks).call(this,{type:"pending",context:E,variables:t,isPaused:s})}const k=await T(this,Ho).start();return await((h=(u=T(this,nn).config).onSuccess)==null?void 0:h.call(u,k,t,this.state.context,this)),await((m=(d=this.options).onSuccess)==null?void 0:m.call(d,k,t,this.state.context)),await((b=(p=T(this,nn).config).onSettled)==null?void 0:b.call(p,k,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,k,null,t,this.state.context)),$e(this,Ar,ks).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(x=T(this,nn).config).onError)==null?void 0:v.call(x,k,t,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,k,t,this.state.context)),await((N=(j=T(this,nn).config).onSettled)==null?void 0:N.call(j,void 0,k,this.state.variables,this.state.context,this)),await((_=(C=this.options).onSettled)==null?void 0:_.call(C,void 0,k,t,this.state.context)),k}finally{$e(this,Ar,ks).call(this,{type:"error",error:k})}}finally{T(this,nn).runNext(this)}}},Pr=new WeakMap,nn=new WeakMap,Ho=new WeakMap,Ar=new WeakSet,ks=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Et.batch(()=>{T(this,Pr).forEach(r=>{r.onMutationUpdate(t)}),T(this,nn).notify({mutation:this,type:"updated",action:t})})},vb);function pj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qr,fr,Ic,yb,iM=(yb=class extends nl{constructor(t={}){super();Ce(this,Qr);Ce(this,fr);Ce(this,Ic);this.config=t,he(this,Qr,new Set),he(this,fr,new Map),he(this,Ic,0)}build(t,n,r){const s=new aM({mutationCache:this,mutationId:++du(this,Ic)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){T(this,Qr).add(t);const n=Ou(t);if(typeof n=="string"){const r=T(this,fr).get(n);r?r.push(t):T(this,fr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(T(this,Qr).delete(t)){const n=Ou(t);if(typeof n=="string"){const r=T(this,fr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&T(this,fr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Ou(t);if(typeof n=="string"){const r=T(this,fr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Ou(t);if(typeof n=="string"){const s=(r=T(this,fr).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Et.batch(()=>{T(this,Qr).forEach(t=>{this.notify({type:"removed",mutation:t})}),T(this,Qr).clear(),T(this,fr).clear()})}getAll(){return Array.from(T(this,Qr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Vw(n,r))}findAll(t={}){return this.getAll().filter(n=>Vw(t,n))}notify(t){Et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Et.batch(()=>Promise.all(t.map(n=>n.continue().catch(on))))}},Qr=new WeakMap,fr=new WeakMap,Ic=new WeakMap,yb);function Ou(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Ww(e){return{onFetch:(t,n)=>{var h,d,m,p,b;const r=t.options,s=(m=(d=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=ij(t.options,t.fetchOptions),v=async(y,S,j)=>{if(g)return Promise.reject();if(S==null&&y.pages.length)return Promise.resolve(y);const C=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};return w(U),U})(),_=await x(C),{maxPages:k}=t.options,E=j?XD:QD;return{pages:E(y.pages,_,k),pageParams:E(y.pageParams,S,k)}};if(s&&a.length){const y=s==="backward",S=y?lM:Hw,j={pages:a,pageParams:i},N=S(r,j);l=await v(j,N,y)}else{const y=e??a.length;do{const S=c===0?i[0]??r.initialPageParam:Hw(r,l);if(c>0&&S==null)break;l=await v(l,S),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Hw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function lM(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var gt,$s,Fs,Si,Ni,Us,ji,Ci,xb,cM=(xb=class{constructor(e={}){Ce(this,gt);Ce(this,$s);Ce(this,Fs);Ce(this,Si);Ce(this,Ni);Ce(this,Us);Ce(this,ji);Ce(this,Ci);he(this,gt,e.queryCache||new oM),he(this,$s,e.mutationCache||new iM),he(this,Fs,e.defaultOptions||{}),he(this,Si,new Map),he(this,Ni,new Map),he(this,Us,0)}mount(){du(this,Us)._++,T(this,Us)===1&&(he(this,ji,Lv.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,gt).onFocus())})),he(this,Ci,Ud.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,gt).onOnline())})))}unmount(){var e,t;du(this,Us)._--,T(this,Us)===0&&((e=T(this,ji))==null||e.call(this),he(this,ji,void 0),(t=T(this,Ci))==null||t.call(this),he(this,Ci,void 0))}isFetching(e){return T(this,gt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return T(this,$s).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,gt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=T(this,gt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(so(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return T(this,gt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=T(this,gt).get(r.queryHash),a=s==null?void 0:s.state.data,i=GD(t,a);if(i!==void 0)return T(this,gt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Et.batch(()=>T(this,gt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=T(this,gt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=T(this,gt);Et.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=T(this,gt);return Et.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Et.batch(()=>T(this,gt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(on).catch(on)}invalidateQueries(e,t={}){return Et.batch(()=>(T(this,gt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Et.batch(()=>T(this,gt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(on)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(on)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=T(this,gt).build(this,t);return n.isStaleByTime(so(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(on).catch(on)}fetchInfiniteQuery(e){return e.behavior=Ww(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(on).catch(on)}ensureInfiniteQueryData(e){return e.behavior=Ww(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ud.isOnline()?T(this,$s).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,gt)}getMutationCache(){return T(this,$s)}getDefaultOptions(){return T(this,Fs)}setDefaultOptions(e){he(this,Fs,e)}setQueryDefaults(e,t){T(this,Si).set(ia(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...T(this,Si).values()],n={};return t.forEach(r=>{yc(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){T(this,Ni).set(ia(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...T(this,Ni).values()],n={};return t.forEach(r=>{yc(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...T(this,Fs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Dv(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Mv&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...T(this,Fs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){T(this,gt).clear(),T(this,$s).clear()}},gt=new WeakMap,$s=new WeakMap,Fs=new WeakMap,Si=new WeakMap,Ni=new WeakMap,Us=new WeakMap,ji=new WeakMap,Ci=new WeakMap,xb),pn,Ue,Dc,rn,Ko,_i,Vs,zs,Mc,ki,Ei,qo,Go,Bs,Ti,He,Al,Em,Tm,Pm,Am,Rm,Om,Im,mj,wb,uM=(wb=class extends nl{constructor(t,n){super();Ce(this,He);Ce(this,pn);Ce(this,Ue);Ce(this,Dc);Ce(this,rn);Ce(this,Ko);Ce(this,_i);Ce(this,Vs);Ce(this,zs);Ce(this,Mc);Ce(this,ki);Ce(this,Ei);Ce(this,qo);Ce(this,Go);Ce(this,Bs);Ce(this,Ti,new Set);this.options=n,he(this,pn,t),he(this,zs,null),he(this,Vs,km()),this.options.experimental_prefetchInRender||T(this,Vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,Ue).addObserver(this),Kw(T(this,Ue),this.options)?$e(this,He,Al).call(this):this.updateResult(),$e(this,He,Am).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dm(T(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dm(T(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,$e(this,He,Rm).call(this),$e(this,He,Om).call(this),T(this,Ue).removeObserver(this)}setOptions(t){const n=this.options,r=T(this,Ue);if(this.options=T(this,pn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Hn(this.options.enabled,T(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");$e(this,He,Im).call(this),T(this,Ue).setOptions(this.options),n._defaulted&&!Fd(this.options,n)&&T(this,pn).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,Ue),observer:this});const s=this.hasListeners();s&&qw(T(this,Ue),r,this.options,n)&&$e(this,He,Al).call(this),this.updateResult(),s&&(T(this,Ue)!==r||Hn(this.options.enabled,T(this,Ue))!==Hn(n.enabled,T(this,Ue))||so(this.options.staleTime,T(this,Ue))!==so(n.staleTime,T(this,Ue)))&&$e(this,He,Em).call(this);const a=$e(this,He,Tm).call(this);s&&(T(this,Ue)!==r||Hn(this.options.enabled,T(this,Ue))!==Hn(n.enabled,T(this,Ue))||a!==T(this,Bs))&&$e(this,He,Pm).call(this,a)}getOptimisticResult(t){const n=T(this,pn).getQueryCache().build(T(this,pn),t),r=this.createResult(n,t);return hM(this,r)&&(he(this,rn,r),he(this,_i,this.options),he(this,Ko,T(this,Ue).state)),r}getCurrentResult(){return T(this,rn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){T(this,Ti).add(t)}getCurrentQuery(){return T(this,Ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=T(this,pn).defaultQueryOptions(t),r=T(this,pn).getQueryCache().build(T(this,pn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return $e(this,He,Al).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,rn)))}createResult(t,n){var k;const r=T(this,Ue),s=this.options,a=T(this,rn),i=T(this,Ko),l=T(this,_i),u=t!==r?t.state:T(this,Dc),{state:h}=t;let d={...h},m=!1,p;if(n._optimisticResults){const E=this.hasListeners(),U=!E&&Kw(t,n),R=E&&qw(t,r,n,s);(U||R)&&(d={...d,...fj(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:w}=d;p=d.data;let x=!1;if(n.placeholderData!==void 0&&p===void 0&&w==="pending"){let E;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=a.data,x=!0):E=typeof n.placeholderData=="function"?n.placeholderData((k=T(this,Ei))==null?void 0:k.state.data,T(this,Ei)):n.placeholderData,E!==void 0&&(w="success",p=_m(a==null?void 0:a.data,E,n),m=!0)}if(n.select&&p!==void 0&&!x)if(a&&p===(i==null?void 0:i.data)&&n.select===T(this,Mc))p=T(this,ki);else try{he(this,Mc,n.select),p=n.select(p),p=_m(a==null?void 0:a.data,p,n),he(this,ki,p),he(this,zs,null)}catch(E){he(this,zs,E)}T(this,zs)&&(b=T(this,zs),p=T(this,ki),g=Date.now(),w="error");const v=d.fetchStatus==="fetching",y=w==="pending",S=w==="error",j=y&&v,N=p!==void 0,_={status:w,fetchStatus:d.fetchStatus,isPending:y,isSuccess:w==="success",isError:S,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:d.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:S&&!N,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&N,isStale:$v(t,n),refetch:this.refetch,promise:T(this,Vs),isEnabled:Hn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=$=>{_.status==="error"?$.reject(_.error):_.data!==void 0&&$.resolve(_.data)},U=()=>{const $=he(this,Vs,_.promise=km());E($)},R=T(this,Vs);switch(R.status){case"pending":t.queryHash===r.queryHash&&E(R);break;case"fulfilled":(_.status==="error"||_.data!==R.value)&&U();break;case"rejected":(_.status!=="error"||_.error!==R.reason)&&U();break}}return _}updateResult(){const t=T(this,rn),n=this.createResult(T(this,Ue),this.options);if(he(this,Ko,T(this,Ue).state),he(this,_i,this.options),T(this,Ko).data!==void 0&&he(this,Ei,T(this,Ue)),Fd(n,t))return;he(this,rn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!T(this,Ti).size)return!0;const i=new Set(a??T(this,Ti));return this.options.throwOnError&&i.add("error"),Object.keys(T(this,rn)).some(l=>{const c=l;return T(this,rn)[c]!==t[c]&&i.has(c)})};$e(this,He,mj).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&$e(this,He,Am).call(this)}},pn=new WeakMap,Ue=new WeakMap,Dc=new WeakMap,rn=new WeakMap,Ko=new WeakMap,_i=new WeakMap,Vs=new WeakMap,zs=new WeakMap,Mc=new WeakMap,ki=new WeakMap,Ei=new WeakMap,qo=new WeakMap,Go=new WeakMap,Bs=new WeakMap,Ti=new WeakMap,He=new WeakSet,Al=function(t){$e(this,He,Im).call(this);let n=T(this,Ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(on)),n},Em=function(){$e(this,He,Rm).call(this);const t=so(this.options.staleTime,T(this,Ue));if(aa||T(this,rn).isStale||!jm(t))return;const r=oj(T(this,rn).dataUpdatedAt,t)+1;he(this,qo,setTimeout(()=>{T(this,rn).isStale||this.updateResult()},r))},Tm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,Ue)):this.options.refetchInterval)??!1},Pm=function(t){$e(this,He,Om).call(this),he(this,Bs,t),!(aa||Hn(this.options.enabled,T(this,Ue))===!1||!jm(T(this,Bs))||T(this,Bs)===0)&&he(this,Go,setInterval(()=>{(this.options.refetchIntervalInBackground||Lv.isFocused())&&$e(this,He,Al).call(this)},T(this,Bs)))},Am=function(){$e(this,He,Em).call(this),$e(this,He,Pm).call(this,$e(this,He,Tm).call(this))},Rm=function(){T(this,qo)&&(clearTimeout(T(this,qo)),he(this,qo,void 0))},Om=function(){T(this,Go)&&(clearInterval(T(this,Go)),he(this,Go,void 0))},Im=function(){const t=T(this,pn).getQueryCache().build(T(this,pn),this.options);if(t===T(this,Ue))return;const n=T(this,Ue);he(this,Ue,t),he(this,Dc,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},mj=function(t){Et.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(T(this,rn))}),T(this,pn).getQueryCache().notify({query:T(this,Ue),type:"observerResultsUpdated"})})},wb);function dM(e,t){return Hn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Kw(e,t){return dM(e,t)||e.state.data!==void 0&&Dm(e,t,t.refetchOnMount)}function Dm(e,t,n){if(Hn(t.enabled,e)!==!1&&so(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&$v(e,t)}return!1}function qw(e,t,n,r){return(e!==t||Hn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$v(e,n)}function $v(e,t){return Hn(t.enabled,e)!==!1&&e.isStaleByTime(so(t.staleTime,e))}function hM(e,t){return!Fd(e.getCurrentResult(),t)}var Ws,Hs,mn,Xr,os,od,Mm,bb,fM=(bb=class extends nl{constructor(n,r){super();Ce(this,os);Ce(this,Ws);Ce(this,Hs);Ce(this,mn);Ce(this,Xr);he(this,Ws,n),this.setOptions(r),this.bindMethods(),$e(this,os,od).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=T(this,Ws).defaultMutationOptions(n),Fd(this.options,r)||T(this,Ws).getMutationCache().notify({type:"observerOptionsUpdated",mutation:T(this,mn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ia(r.mutationKey)!==ia(this.options.mutationKey)?this.reset():((s=T(this,mn))==null?void 0:s.state.status)==="pending"&&T(this,mn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=T(this,mn))==null||n.removeObserver(this)}onMutationUpdate(n){$e(this,os,od).call(this),$e(this,os,Mm).call(this,n)}getCurrentResult(){return T(this,Hs)}reset(){var n;(n=T(this,mn))==null||n.removeObserver(this),he(this,mn,void 0),$e(this,os,od).call(this),$e(this,os,Mm).call(this)}mutate(n,r){var s;return he(this,Xr,r),(s=T(this,mn))==null||s.removeObserver(this),he(this,mn,T(this,Ws).getMutationCache().build(T(this,Ws),this.options)),T(this,mn).addObserver(this),T(this,mn).execute(n)}},Ws=new WeakMap,Hs=new WeakMap,mn=new WeakMap,Xr=new WeakMap,os=new WeakSet,od=function(){var r;const n=((r=T(this,mn))==null?void 0:r.state)??pj();he(this,Hs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Mm=function(n){Et.batch(()=>{var r,s,a,i,l,c,u,h;if(T(this,Xr)&&this.hasListeners()){const d=T(this,Hs).variables,m=T(this,Hs).context;(n==null?void 0:n.type)==="success"?((s=(r=T(this,Xr)).onSuccess)==null||s.call(r,n.data,d,m),(i=(a=T(this,Xr)).onSettled)==null||i.call(a,n.data,null,d,m)):(n==null?void 0:n.type)==="error"&&((c=(l=T(this,Xr)).onError)==null||c.call(l,n.error,d,m),(h=(u=T(this,Xr)).onSettled)==null||h.call(u,void 0,n.error,d,m))}this.listeners.forEach(d=>{d(T(this,Hs))})})},bb),gj=f.createContext(void 0),Fv=e=>{const t=f.useContext(gj);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pM=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(gj.Provider,{value:e,children:t})),vj=f.createContext(!1),mM=()=>f.useContext(vj);vj.Provider;function gM(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var vM=f.createContext(gM()),yM=()=>f.useContext(vM),xM=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},wM=e=>{f.useEffect(()=>{e.clearReset()},[e])},bM=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||lj(n,[e.error,r])),SM=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},NM=(e,t)=>e.isLoading&&e.isFetching&&!t,jM=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Gw=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function CM(e,t,n){var d,m,p,b,g;const r=mM(),s=yM(),a=Fv(),i=a.defaultQueryOptions(e);(m=(d=a.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||m.call(d,i),i._optimisticResults=r?"isRestoring":"optimistic",SM(i),xM(i,s),wM(s);const l=!a.getQueryCache().get(i.queryHash),[c]=f.useState(()=>new t(a,i)),u=c.getOptimisticResult(i),h=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(w=>{const x=h?c.subscribe(Et.batchCalls(w)):on;return c.updateResult(),x},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(i)},[i,c]),jM(i,u))throw Gw(i,c,s);if(bM({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((b=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||b.call(p,i,u),i.experimental_prefetchInRender&&!aa&&NM(u,r)){const w=l?Gw(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;w==null||w.catch(on).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function _M(e,t){return CM(e,uM)}function Hf(e,t){const n=Fv(),[r]=f.useState(()=>new fM(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(i=>r.subscribe(Et.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=f.useCallback((i,l)=>{r.mutate(i,l).catch(on)},[r]);if(s.error&&lj(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xc.apply(this,arguments)}var Ys;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ys||(Ys={}));const Yw="popstate";function kM(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:i,hash:l}=r.location;return Lm("",{pathname:a,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vd(s)}return TM(t,n,null,e)}function ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EM(){return Math.random().toString(36).substr(2,8)}function Qw(e,t){return{usr:e.state,key:e.key,idx:t}}function Lm(e,t,n,r){return n===void 0&&(n=null),xc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rl(t):t,{state:n,key:t&&t.key||r||EM()})}function Vd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function TM(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,l=Ys.Pop,c=null,u=h();u==null&&(u=0,i.replaceState(xc({},i.state,{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function d(){l=Ys.Pop;let w=h(),x=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:x})}function m(w,x){l=Ys.Push;let v=Lm(g.location,w,x);u=h()+1;let y=Qw(v,u),S=g.createHref(v);try{i.pushState(y,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}a&&c&&c({action:l,location:g.location,delta:1})}function p(w,x){l=Ys.Replace;let v=Lm(g.location,w,x);u=h();let y=Qw(v,u),S=g.createHref(v);i.replaceState(y,"",S),a&&c&&c({action:l,location:g.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof w=="string"?w:Vd(w);return v=v.replace(/ $/,"%20"),ft(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return l},get location(){return e(s,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yw,d),c=w,()=>{s.removeEventListener(Yw,d),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(w){return i.go(w)}};return g}var Xw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Xw||(Xw={}));function PM(e,t,n){return n===void 0&&(n="/"),AM(e,t,n,!1)}function AM(e,t,n,r){let s=typeof t=="string"?rl(t):t,a=Vi(s.pathname||"/",n);if(a==null)return null;let i=xj(e);RM(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=BM(a);l=VM(i[c],u,r)}return l}function xj(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=oo([r,c.relativePath]),h=n.concat(c);a.children&&a.children.length>0&&(ft(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xj(a.children,t,h,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:FM(u,a.index),routesMeta:h})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,i);else for(let c of wj(a.path))s(a,i,c)}),t}function wj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=wj(r.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function RM(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UM(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OM=/^:[\w-]+$/,IM=3,DM=2,MM=1,LM=10,$M=-2,Jw=e=>e==="*";function FM(e,t){let n=e.split("/"),r=n.length;return n.some(Jw)&&(r+=$M),t&&(r+=DM),n.filter(s=>!Jw(s)).reduce((s,a)=>s+(OM.test(a)?IM:a===""?MM:LM),r)}function UM(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function VM(e,t,n){let{routesMeta:r}=e,s={},a="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",d=zd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=zd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:oo([a,d.pathname]),pathnameBase:qM(oo([a,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(a=oo([a,d.pathnameBase]))}return i}function zd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=zM(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let g=l[d]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[d];return p&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function zM(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function BM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function WM(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rl(e):e;return{pathname:n?n.startsWith("/")?n:HM(n,t):t,search:GM(r),hash:YM(s)}}function HM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KM(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Uv(e,t){let n=KM(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vv(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=rl(e):(s=xc({},e),ft(!s.pathname||!s.pathname.includes("?"),Kf("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),Kf("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),Kf("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,l;if(i==null)l=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}l=d>=0?t[d]:"/"}let c=WM(s,l),u=i&&i!=="/"&&i.endsWith("/"),h=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const oo=e=>e.join("/").replace(/\/\/+/g,"/"),qM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bj=["post","put","patch","delete"];new Set(bj);const XM=["get",...bj];new Set(XM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wc.apply(this,arguments)}const Dh=f.createContext(null),Sj=f.createContext(null),ms=f.createContext(null),Mh=f.createContext(null),gs=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Nj=f.createContext(null);function JM(e,t){let{relative:n}=t===void 0?{}:t;sl()||ft(!1);let{basename:r,navigator:s}=f.useContext(ms),{hash:a,pathname:i,search:l}=Lh(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:oo([r,i])),s.createHref({pathname:c,search:l,hash:a})}function sl(){return f.useContext(Mh)!=null}function ya(){return sl()||ft(!1),f.useContext(Mh).location}function jj(e){f.useContext(ms).static||f.useLayoutEffect(e)}function xa(){let{isDataRoute:e}=f.useContext(gs);return e?hL():ZM()}function ZM(){sl()||ft(!1);let e=f.useContext(Dh),{basename:t,future:n,navigator:r}=f.useContext(ms),{matches:s}=f.useContext(gs),{pathname:a}=ya(),i=JSON.stringify(Uv(s,n.v7_relativeSplatPath)),l=f.useRef(!1);return jj(()=>{l.current=!0}),f.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=Vv(u,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:oo([t,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[t,r,i,a,e])}function eL(){let{matches:e}=f.useContext(gs),t=e[e.length-1];return t?t.params:{}}function Lh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(ms),{matches:s}=f.useContext(gs),{pathname:a}=ya(),i=JSON.stringify(Uv(s,r.v7_relativeSplatPath));return f.useMemo(()=>Vv(e,JSON.parse(i),a,n==="path"),[e,i,a,n])}function tL(e,t){return nL(e,t)}function nL(e,t,n,r){sl()||ft(!1);let{navigator:s}=f.useContext(ms),{matches:a}=f.useContext(gs),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=ya(),h;if(t){var d;let w=typeof t=="string"?rl(t):t;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||ft(!1),h=w}else h=u;let m=h.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=PM(e,{pathname:p}),g=iL(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:oo([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:oo([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,r);return t&&g?f.createElement(Mh.Provider,{value:{location:wc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ys.Pop}},g):g}function rL(){let e=dL(),t=QM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:s},n):null,null)}const sL=f.createElement(rL,null);class oL extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(gs.Provider,{value:this.props.routeContext},f.createElement(Nj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aL(e){let{routeContext:t,match:n,children:r}=e,s=f.useContext(Dh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(gs.Provider,{value:t},r)}function iL(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=i.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||ft(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:m,errors:p}=n,b=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,d,m)=>{let p,b=!1,g=null,w=null;n&&(p=l&&d.route.id?l[d.route.id]:void 0,g=d.route.errorElement||sL,c&&(u<0&&m===0?(b=!0,w=null):u===m&&(b=!0,w=d.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,m+1)),v=()=>{let y;return p?y=g:b?y=w:d.route.Component?y=f.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=h,f.createElement(aL,{match:d,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?f.createElement(oL,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var Cj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Cj||{}),Bd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bd||{});function lL(e){let t=f.useContext(Dh);return t||ft(!1),t}function cL(e){let t=f.useContext(Sj);return t||ft(!1),t}function uL(e){let t=f.useContext(gs);return t||ft(!1),t}function _j(e){let t=uL(),n=t.matches[t.matches.length-1];return n.route.id||ft(!1),n.route.id}function dL(){var e;let t=f.useContext(Nj),n=cL(Bd.UseRouteError),r=_j(Bd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hL(){let{router:e}=lL(Cj.UseNavigateStable),t=_j(Bd.UseNavigateStable),n=f.useRef(!1);return jj(()=>{n.current=!0}),f.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,wc({fromRouteId:t},a)))},[e,t])}function fL(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kj(e){let{to:t,replace:n,state:r,relative:s}=e;sl()||ft(!1);let{future:a,static:i}=f.useContext(ms),{matches:l}=f.useContext(gs),{pathname:c}=ya(),u=xa(),h=Vv(t,Uv(l,a.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(h);return f.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:s}),[u,d,s,n,r]),null}function Bn(e){ft(!1)}function pL(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ys.Pop,navigator:a,static:i=!1,future:l}=e;sl()&&ft(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:a,static:i,future:wc({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof r=="string"&&(r=rl(r));let{pathname:h="/",search:d="",hash:m="",state:p=null,key:b="default"}=r,g=f.useMemo(()=>{let w=Vi(h,c);return w==null?null:{location:{pathname:w,search:d,hash:m,state:p,key:b},navigationType:s}},[c,h,d,m,p,b,s]);return g==null?null:f.createElement(ms.Provider,{value:u},f.createElement(Mh.Provider,{children:n,value:g}))}function mL(e){let{children:t,location:n}=e;return tL($m(t),n)}new Promise(()=>{});function $m(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,s)=>{if(!f.isValidElement(r))return;let a=[...t,s];if(r.type===f.Fragment){n.push.apply(n,$m(r.props.children,a));return}r.type!==Bn&&ft(!1),!r.props.index||!r.props.children||ft(!1);let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=$m(r.props.children,a)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wd(){return Wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wd.apply(this,arguments)}function Ej(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function gL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vL(e,t){return e.button===0&&(!t||t==="_self")&&!gL(e)}const yL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wL="6";try{window.__reactRouterVersion=wL}catch{}const bL=f.createContext({isTransitioning:!1}),SL="startTransition",Zw=wg[SL];function NL(e){let{basename:t,children:n,future:r,window:s}=e,a=f.useRef();a.current==null&&(a.current=kM({window:s,v5Compat:!0}));let i=a.current,[l,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},h=f.useCallback(d=>{u&&Zw?Zw(()=>c(d)):c(d)},[c,u]);return f.useLayoutEffect(()=>i.listen(h),[i,h]),f.useEffect(()=>fL(r),[r]),f.createElement(pL,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const jL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bc=f.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:i,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=t,m=Ej(t,yL),{basename:p}=f.useContext(ms),b,g=!1;if(typeof u=="string"&&CL.test(u)&&(b=u,jL))try{let y=new URL(window.location.href),S=u.startsWith("//")?new URL(y.protocol+u):new URL(u),j=Vi(S.pathname,p);S.origin===y.origin&&j!=null?u=j+S.search+S.hash:g=!0}catch{}let w=JM(u,{relative:s}),x=EL(u,{replace:i,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:d});function v(y){r&&r(y),y.defaultPrevented||x(y)}return f.createElement("a",Wd({},m,{href:b||w,onClick:g||a?r:v,ref:n,target:c}))}),_L=f.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:i=!1,style:l,to:c,viewTransition:u,children:h}=t,d=Ej(t,xL),m=Lh(c,{relative:d.relative}),p=ya(),b=f.useContext(Sj),{navigator:g,basename:w}=f.useContext(ms),x=b!=null&&TL(m)&&u===!0,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,y=p.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(y=y.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&w&&(S=Vi(S,w)||S);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let N=y===v||!i&&y.startsWith(v)&&y.charAt(j)==="/",C=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),_={isActive:N,isPending:C,isTransitioning:x},k=N?r:void 0,E;typeof a=="function"?E=a(_):E=[a,N?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(_):l;return f.createElement(bc,Wd({},d,{"aria-current":k,className:E,ref:n,style:U,to:c,viewTransition:u}),typeof h=="function"?h(_):h)});var Fm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fm||(Fm={}));var e0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(e0||(e0={}));function kL(e){let t=f.useContext(Dh);return t||ft(!1),t}function EL(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:l}=t===void 0?{}:t,c=xa(),u=ya(),h=Lh(e,{relative:i});return f.useCallback(d=>{if(vL(d,n)){d.preventDefault();let m=r!==void 0?r:Vd(u)===Vd(h);c(e,{replace:m,state:s,preventScrollReset:a,relative:i,viewTransition:l})}},[u,c,h,r,s,n,e,a,i,l])}function TL(e,t){t===void 0&&(t={});let n=f.useContext(bL);n==null&&ft(!1);let{basename:r}=kL(Fm.useViewTransitionState),s=Lh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=Vi(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Vi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zd(s.pathname,i)!=null||zd(s.pathname,a)!=null}var Or=function(){return Or=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Or.apply(this,arguments)};function ol(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function PL(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(h){try{u(r.next(h))}catch(d){i(d)}}function c(h){try{u(r.throw(h))}catch(d){i(d)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function AL(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}const RL=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class zv extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class OL extends zv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class t0 extends zv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class n0 extends zv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Um;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Um||(Um={}));class IL{constructor(t,{headers:n={},customFetch:r,region:s=Um.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=RL(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return PL(this,arguments,void 0,function*(n,r={}){var s;let a,i;try{const{headers:l,method:c,body:u,signal:h,timeout:d}=r;let m={},{region:p}=r;p||(p=this.region);const b=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,b.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let w=h;d&&(i=new AbortController,a=setTimeout(()=>i.abort(),d),h?(w=i.signal,h.addEventListener("abort",()=>i.abort())):w=i.signal);const x=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:w}).catch(j=>{throw new OL(j)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new t0(x);if(!x.ok)throw new n0(x);let y=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return y==="application/json"?S=yield x.json():y==="application/octet-stream"||y==="application/pdf"?S=yield x.blob():y==="text/event-stream"?S=x:y==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof n0||l instanceof t0?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var DL=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ML=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let i=null,l=null,c=null,u=a.status,h=a.statusText;if(a.ok){var d,m;if(n.method!=="HEAD"){var p;const x=await a.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const g=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(m=a.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(i={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const g=await a.text();try{i=JSON.parse(g),Array.isArray(i)&&a.status===404&&(l=[],i=null,u=200,h="OK")}catch{a.status===404&&g===""?(u=204,h="No Content"):i={message:g}}if(i&&n.isMaybeSingle&&(!(i==null||(b=i.details)===null||b===void 0)&&b.includes("0 rows"))&&(i=null,u=200,h="OK"),i&&n.shouldThrowOnError)throw new DL(i)}return{error:i,data:l,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(a=>{var i;let l="";const c=a==null?void 0:a.cause;if(c){var u,h,d,m;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(d=a==null?void 0:a.name)!==null&&d!==void 0?d:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${b}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=a==null?void 0:a.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},LL=class extends ML{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const r0=new RegExp("[,()]");var Ua=class extends LL{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&r0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&r0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},$L=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Ua({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((i,l)=>i.concat(Object.keys(l)),[]);if(a.length>0){const i=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",i.join(","))}}return new Ua({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const i="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ua({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ua({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Ua({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},FL=class Tj{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new $L(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Tj(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([d,m])=>m!==void 0).map(([d,m])=>[d,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([d,m])=>{c.searchParams.append(d,m)})):(l="POST",u=n);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new Ua({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};class UL{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const VL="2.89.0",zL=`realtime-js/${VL}`,Pj="1.0.0",BL="2.0.0",s0=Pj,Vm=1e4,WL=1e3,HL=100;var As;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(As||(As={}));var _t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_t||(_t={}));var mr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(mr||(mr={}));var zm;(function(e){e.websocket="websocket"})(zm||(zm={}));var Io;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Io||(Io={}));class KL{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,n,r){var s,a;const i=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let b=new DataView(p),g=0;b.setUint8(g++,this.KINDS.userBroadcastPush),b.setUint8(g++,c.length),b.setUint8(g++,l.length),b.setUint8(g++,i.length),b.setUint8(g++,u.length),b.setUint8(g++,d.length),b.setUint8(g++,n),Array.from(c,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(i,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(u,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(d,x=>b.setUint8(g++,x.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,i,l,c]=r;return n({join_ref:s,ref:a,topic:i,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+a));c=c+a;const d=r.decode(t.slice(c,c+i));c=c+i;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,b={type:this.BROADCAST_EVENT,event:h,payload:p};return i>0&&(b.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Aj{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ye||(Ye={}));const o0=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=qL(i,e,t,s),a),{}):{}},qL=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=n[e];return a&&!r.includes(a)?Rj(a,i):Bm(i)},Rj=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return XL(t,n)}switch(e){case Ye.bool:return GL(t);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return YL(t);case Ye.json:case Ye.jsonb:return QL(t);case Ye.timestamp:return JL(t);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Bm(t);default:return Bm(t)}},Bm=e=>e,GL=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},YL=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QL=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},XL=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Rj(t,l))}return e},JL=e=>typeof e=="string"?e.replace(" ","T"):e,Oj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class qf{constructor(t,n,r={},s=Vm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var a0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(a0||(a0={}));class Gl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Gl.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Gl.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(a,(u,h)=>{i[u]||(c[u]=h)}),this.map(i,(u,h)=>{const d=a[u];if(d){const m=h.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),b=h.filter(w=>p.indexOf(w.presence_ref)<0),g=d.filter(w=>m.indexOf(w.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(p=>p.presence_ref),m=h.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var i0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(i0||(i0={}));var Yl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Yl||(Yl={}));var Gr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gr||(Gr={}));class ni{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qf(this,mr.join,this.params,this.timeout),this.rejoinTimer=new Aj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Gl(this),this.broadcastEndpointURL=Oj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Yl.PRESENCE]&&this.bindings[Yl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Gr.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Gr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Gr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let v=0;v<w;v++){const y=g[v],{filter:{event:S,schema:j,table:N,filter:C}}=y,_=p&&p[v];if(_&&_.event===S&&ni.isFilterValueEqual(_.schema,j)&&ni.isFilterValueEqual(_.table,N)&&ni.isFilterValueEqual(_.filter,C))x.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=_t.errored,t==null||t(Gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Gr.SUBSCRIBED);return}}).receive("error",p=>{this.state=_t.errored,t==null||t(Gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===_t.joined&&t===Yl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_t.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new qf(this,mr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_t.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new qf(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>HL){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=mr;if(r&&[l,c,u,h].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var b,g,w;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(m,r)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var b,g,w,x,v,y;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const S=p.id,j=(b=p.filter)===null||b===void 0?void 0:b.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(v=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const b=m.data,{schema:g,table:w,commit_timestamp:x,type:v,errors:y}=b;m=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(b))}p.callback(m,r)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ni.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(mr.close,{},t)}_onError(t){this._on(mr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=o0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=o0(t.columns,t.old_record)),n}}const Gf=()=>{},Iu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZL=[1e3,2e3,5e3,1e4],e4=1e4,t4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vm,this.transport=null,this.heartbeatIntervalMs=Iu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gf,this.ref=0,this.reconnectTimer=null,this.vsn=s0,this.logger=Gf,this.conn=null,this.sendBuffer=[],this.serializer=new KL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zm.websocket}`,this.httpEndpoint=Oj(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=UL.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case As.connecting:return Io.Connecting;case As.open:return Io.Open;case As.closing:return Io.Closing;default:return Io.Closed}}isConnected(){return this.connectionState()===Io.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new ni(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(WL,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Iu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===As.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===As.open||this.conn.readyState===As.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(mr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([t4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:zL};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(mr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Aj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Iu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,i,l,c,u,h,d,m,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Vm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Iu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Gf,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:s0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:b=>ZL[b-1]||e4,this.vsn){case Pj:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(b,g)=>g(JSON.stringify(b)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(b,g)=>g(JSON.parse(b));break;case BL:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Sc=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r4(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function s4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function o4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:i}){const l=r4(e.baseUrl,r,s),c=await s4(e.auth),u=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...i},body:a?JSON.stringify(a):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),m=d&&h?JSON.parse(h):h;if(!u.ok){const p=d?m:void 0,b=p==null?void 0:p.error;throw new Sc((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:p})}return{status:u.status,headers:u.headers,data:m}}}}function Du(e){return e.join("")}var a4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Du(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Du(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Du(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Du(e.namespace)}`}),!0}catch(t){if(t instanceof Sc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Sc&&n.status===409)return;throw n}}};function Ta(e){return e.join("")}var i4=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ta(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Sc&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Sc&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},l4=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=o4({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new a4(this.client,t),this.tableOps=new i4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},$h=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function lt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var c4=class extends $h{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Wm=class extends $h{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Bv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),u4=()=>Response,Hm=e=>{if(Array.isArray(e))return e.map(n=>Hm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Hm(r)}),t},d4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},h4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function f4(e,t){if(Nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p4(e){var t=f4(e,"string");return Nc(t)=="symbol"?t:t+""}function m4(e,t,n){return(t=p4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l0(Object(n),!0).forEach(function(r){m4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Yf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},g4=async(e,t,n)=>{e instanceof await u4()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,a=(r==null?void 0:r.statusCode)||s+"";t(new c4(Yf(r),s,a))}).catch(r=>{t(new Wm(Yf(r),r))}):t(new Wm(Yf(e),e))},v4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(d4(r)?(s.headers=Ee({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Ee(Ee({},s),n))};async function Hc(e,t,n,r,s,a){return new Promise((i,l)=>{e(n,v4(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>g4(c,l,r))})}async function jc(e,t,n,r){return Hc(e,"GET",t,n,r)}async function dr(e,t,n,r,s){return Hc(e,"POST",t,r,s,n)}async function Km(e,t,n,r,s){return Hc(e,"PUT",t,r,s,n)}async function y4(e,t,n,r){return Hc(e,"HEAD",t,Ee(Ee({},n),{},{noResolveJson:!0}),r)}async function Wv(e,t,n,r,s){return Hc(e,"DELETE",t,r,s,n)}var x4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}}};let Ij;Ij=Symbol.toStringTag;var w4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ij]="BlobDownloadBuilder",this.promise=null}asStream(){return new x4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}}};const b4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var S4=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Bv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let a;const i=Ee(Ee({},c0),r);let l=Ee(Ee({},s.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),r!=null&&r.headers&&(l=Ee(Ee({},l),r.headers));const u=s._removeEmptyFolders(t),h=s._getFinalPath(u),d=await(e=="PUT"?Km:dr)(s.fetch,`${s.url}/object/${h}`,a,Ee({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),i=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const u=Ee({upsert:c0.upsert},r),h=Ee(Ee({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:a,fullPath:(await Km(s.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(lt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=Ee({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await dr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(n.url+a.url),l=i.searchParams.get("token");if(!l)throw new $h("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await dr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await dr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),a=await dr(r.fetch,`${r.url}/object/sign/${s}`,Ee({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await dr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Ee(Ee({},i),{},{signedUrl:i.signedURL?encodeURI(`${r.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),i=()=>jc(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new w4(i,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Hm(await jc(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await y4(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r)&&r instanceof Wm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&r.push(i);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await Wv(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=Ee(Ee(Ee({},b4),t),{},{prefix:e||""});return{data:await dr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=Ee({},e);return{data:await dr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Dj="2.89.0",Mj={"X-Client-Info":`storage-js/${Dj}`};var N4=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Ee(Ee({},Mj),t),this.fetch=Bv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await jc(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await jc(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await dr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Km(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await dr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wv(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},j4=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ee(Ee({},Mj),t),this.fetch=Bv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await dr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await jc(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wv(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!h4(e))throw new $h("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new l4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const i=s[a];return typeof i!="function"?i:async(...l)=>{try{return{data:await i.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Hv={"X-Client-Info":`storage-js/${Dj}`,"Content-Type":"application/json"};var Lj=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function kn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Qf=class extends Lj{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},C4=class extends Lj{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Kv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},u0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k4=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const i=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";t(new Qf(u0(a),r,i))}).catch(()=>{const a=r+"";t(new Qf(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";t(new Qf(s.statusText||`HTTP ${r} error`,r,a))}}else t(new C4(u0(e),e))},E4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(_4(r)?(s.headers=Ee({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Ee(Ee({},s),n)):s};async function T4(e,t,n,r,s,a){return new Promise((i,l)=>{e(n,E4(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>k4(c,l,r))})}async function En(e,t,n,r,s){return T4(e,"POST",t,r,s,n)}var P4=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ee(Ee({},Hv),t),this.fetch=Kv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await En(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await En(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}}},A4=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ee(Ee({},Hv),t),this.fetch=Kv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await En(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await En(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await En(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}},R4=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ee(Ee({},Hv),t),this.fetch=Kv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await En(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(kn(n))return{data:null,error:n};throw n}}},O4=class extends R4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new I4(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},I4=class extends P4{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new D4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},D4=class extends A4{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Ee(Ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},M4=class extends N4{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new S4(this.url,this.headers,e,this.fetch)}get vectors(){return new O4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new j4(this.url+"/iceberg",this.headers,this.fetch)}};const $j="2.89.0",Va=30*1e3,qm=3,Xf=qm*Va,L4="http://localhost:9999",$4="supabase.auth.token",F4={"X-Client-Info":`gotrue-js/${$j}`},Gm="X-Supabase-Api-Version",Fj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V4=10*60*1e3;class Cc extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class z4 extends Cc{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function B4(e){return xe(e)&&e.name==="AuthApiError"}class Do extends Cc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class vs extends Cc{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class jn extends vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W4(e){return xe(e)&&e.name==="AuthSessionMissingError"}class Pa extends vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mu extends vs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Lu extends vs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H4(e){return xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class d0 extends vs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K4 extends vs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ym extends vs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Jf(e){return xe(e)&&e.name==="AuthRetryableFetchError"}class h0 extends vs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Qm extends vs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),f0=` 	
\r=`.split(""),q4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<f0.length;t+=1)e[f0[t].charCodeAt(0)]=-2;for(let t=0;t<Hd.length;t+=1)e[Hd[t].charCodeAt(0)]=t;return e})();function p0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hd[r]),t.queuedBits-=6}}function Uj(e,t,n){const r=q4[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function m0(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{Q4(i,r,n)};for(let i=0;i<e.length;i+=1)Uj(e.charCodeAt(i),s,a);return t.join("")}function G4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Y4(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}G4(r,t)}}function Q4(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function mi(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Uj(e.charCodeAt(s),n,r);return new Uint8Array(t)}function X4(e){const t=[];return Y4(e,n=>t.push(n)),new Uint8Array(t)}function Fo(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>p0(s,n,r)),p0(null,n,r),t.join("")}function J4(e){return Math.round(Date.now()/1e3)+e}function Z4(){return Symbol("auth-callback")}const Ut=()=>typeof window<"u"&&typeof document<"u",ko={tested:!1,writable:!1},Vj=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ko.tested)return ko.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ko.tested=!0,ko.writable=!0}catch{ko.tested=!0,ko.writable=!1}return ko.writable};function e5(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const zj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),t5=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",za=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Eo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ft=async(e,t)=>{await e.removeItem(t)};class Fh{constructor(){this.promise=new Fh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Fh.promiseConstructor=Promise;function Zf(e){const t=e.split(".");if(t.length!==3)throw new Qm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!U4.test(t[r]))throw new Qm("JWT not in base64url format");return{header:JSON.parse(m0(t[0])),payload:JSON.parse(m0(t[1])),signature:mi(t[2]),raw:{header:t[0],payload:t[1]}}}async function n5(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function r5(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function s5(e){return("0"+e.toString(16)).substr(-2)}function o5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,s5).join("")}async function a5(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function i5(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await a5(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Aa(e,t,n=!1){const r=o5();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await za(e,`${t}-code-verifier`,s);const a=await i5(r);return[a,r===a?"plain":"s256"]}const l5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c5(e){const t=e.headers.get(Gm);if(!t||!t.match(l5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function u5(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function d5(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const h5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ra(e){if(!h5.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ep(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function f5(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function g0(e){return JSON.parse(JSON.stringify(e))}const Ro=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),p5=[502,503,504];async function v0(e){var t;if(!t5(e))throw new Ym(Ro(e),0);if(p5.includes(e.status))throw new Ym(Ro(e),e.status);let n;try{n=await e.json()}catch(a){throw new Do(Ro(a),a)}let r;const s=c5(e);if(s&&s.getTime()>=Fj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new h0(Ro(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new jn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new h0(Ro(n),e.status,n.weak_password.reasons);throw new z4(Ro(n),e.status||500,r)}const m5=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ke(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Gm]||(a[Gm]=Fj["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await g5(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function g5(e,t,n,r,s,a){const i=m5(t,r,s,a);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new Ym(Ro(c),0)}if(l.ok||await v0(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await v0(c)}}function lr(e){var t;let n=null;x5(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=J4(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function y0(e){const t=lr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ds(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function v5(e){return{data:e,error:null}}function y5(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=ol(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function x0(e){return e}function x5(e){return e.access_token&&e.refresh_token&&e.expires_in}const tp=["global","local","others"];class w5{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=zj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=tp[0]){if(tp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tp.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ds})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ol(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:y5,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ds})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:x0});if(h.error)throw h.error;const d=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(xe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ra(t);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ds})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ra(t);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ds})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ra(t);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ds})}catch(r){if(xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ra(t.userId);try{const{data:n,error:r}=await ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ra(t.userId),Ra(t.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:x0});if(h.error)throw h.error;const d=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(xe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}}function w0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Oa={debug:!!(globalThis&&Vj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class b5 extends Bj{}async function S5(e,t,n){Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new b5(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Oa.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function N5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Wj(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function j5(e){return parseInt(e,16)}function C5(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function _5(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:h,uri:d,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=Wj(e.address),b=h?`${h}://${r}`:r,g=e.statement?`${e.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${d}
Version: ${m}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);v+=`
- ${y}`}x+=v}return`${w}
${x}`}class jt extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Kd extends jt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function k5({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new jt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Hj(i)){if(a.rp.id!==i)return new jt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function E5({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new jt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Hj(r)){if(n.rpId!==r)return new jt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class T5{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const P5=new T5;function A5(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=ol(e,["challenge","user","excludeCredentials"]),a=mi(t).buffer,i=Object.assign(Object.assign({},n),{id:mi(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:mi(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function R5(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ol(e,["challenge","allowCredentials"]),s=mi(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let i=0;i<n.length;i++){const l=n[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:mi(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function O5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Fo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Fo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function I5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Fo(new Uint8Array(s.authenticatorData)),clientDataJSON:Fo(new Uint8Array(s.clientDataJSON)),signature:Fo(new Uint8Array(s.signature)),userHandle:s.userHandle?Fo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Hj(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function b0(){var e,t;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function D5(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:k5({error:t,options:e})}}}async function M5(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",t)}:{data:null,error:new Kd("Empty credential response",t)}}catch(t){return{data:null,error:E5({error:t,options:e})}}}const L5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))r[a]=i;else if(n(i))r[a]=i;else if(t(i)){const l=r[a];t(l)?r[a]=qd(l,i):r[a]=qd(i)}else r[a]=i}return r}function F5(e,t){return qd(L5,e,t||{})}function U5(e,t){return qd($5,e,t||{})}class V5{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!i)return{data:null,error:l};const c=s??P5.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=F5(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:d}=await D5({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=U5(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:d}=await M5(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(i){return xe(i)?{data:null,error:i}:{data:null,error:new Do("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Cc("rpId is required for WebAuthn authentication")};try{if(!b0())return{data:null,error:new Do("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return xe(i)?{data:null,error:i}:{data:null,error:new Do("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Cc("rpId is required for WebAuthn registration")};try{if(!b0())return{data:null,error:new Do("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return xe(i)?{data:null,error:i}:{data:null,error:new Do("Unexpected error in register",i)}}}}N5();const z5={url:L4,storageKey:$4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:F4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function S0(e,t,n){return await n()}const Ia={};class _c{get jwks(){var t,n;return(n=(t=Ia[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ia[this.storageKey]=Object.assign(Object.assign({},Ia[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ia[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ia[this.storageKey]=Object.assign(Object.assign({},Ia[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},z5),t);if(this.storageKey=a.storageKey,this.instanceID=(n=_c.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,_c.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ut()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new w5({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=zj(a.fetch),this.lock=a.lock||S0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Ut()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=S5:this.lock=S0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new V5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Vj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=w0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=w0(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$j}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Ut()&&(n=e5(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ut()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),H4(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return xe(n)?this._returnResult({error:n}):this._returnResult({error:new Do("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:lr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:h,password:d,options:m}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Aa(this.storage,this.storageKey)),a=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:b},xform:lr})}else if("phone"in t){const{phone:h,password:d,options:m}=t;a=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:lr})}else throw new Mu("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return await Ft(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:l}=t;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else if("phone"in t){const{phone:a,password:i,options:l}=t;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else throw new Mu("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Pa;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,i,l,c,u,h,d,m;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:g,wallet:w,statement:x,options:v}=t;let y;if(Ut())if(typeof w=="object")y=w;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")y=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const S=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),j=await y.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=Wj(j[0]);let C=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const k=await y.request({method:"eth_chainId"});C=j5(k)}const _={domain:S.host,address:N,statement:x,uri:S.href,version:"1",chainId:C,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=_5(_),b=await y.request({method:"personal_sign",params:[C5(p),N]})}try{const{data:g,error:w}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:lr});if(w)throw w;if(!g||!g.session||!g.user){const x=new Pa;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(xe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,a,i,l,c,u,h,d,m,p;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:x,statement:v,options:y}=t;let S;if(Ut())if(typeof x=="object")S=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const j=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)b=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(h=y==null?void 0:y.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:w,error:x}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Fo(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:lr});if(x)throw x;if(!w||!w.session||!w.user){const v=new Pa;return this._returnResult({data:{user:null,session:null},error:v})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:x})}catch(w){if(xe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const n=await Eo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new K4;const{data:a,error:i}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:lr});if(await Ft(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new Pa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=t,l=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:lr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Pa;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Aa(this.storage,this.storageKey));const{error:d}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Mu("You must provide either an email or phone number.")}catch(l){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:lr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Aa(this.storage,this.storageKey));const u=await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:v5});return!((a=u.data)===null||a===void 0)&&a.url&&Ut()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new jn;const{error:s}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(xe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:i}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:i,error:l}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Mu("You must provide either an email or phone number and a type")}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Eo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Xf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await Eo(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=ep()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=f5(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ds}):await this._useSession(async n=>{var r,s,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ds})})}catch(n){if(xe(n))return W4(n)&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new jn;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Aa(this.storage,this.storageKey));const{data:u,error:h}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Ds});if(h)throw h;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=Zf(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new jn;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Ut())throw new Lu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Lu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new d0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new d0("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new Lu("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let m=h+d;c&&(m=parseInt(c));const p=m-h;p*1e3<=Va&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const b=m-d;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,h);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:d,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(xe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Eo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(B4(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Z4(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Aa(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,l,c,u,h;const{data:d,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ut()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(xe(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:h}=t,d=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:lr}),{data:m,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Pa}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(s){if(await Ft(this.storage,`${this.storageKey}-code-verifier`),xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await r5(async s=>(s>0&&await n5(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:lr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&Jf(a)&&Date.now()+i-r<Va})}catch(r){if(this._debug(n,"error",r),xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Eo(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Eo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await za(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:ep()}else if(s&&!s.user&&!s.user){const i=await Eo(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Ft(this.storage,this.storageKey+"-user"),await za(this.storage,this.storageKey,s)):s.user=ep()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xf;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Xf}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Jf(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fh;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new jn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),xe(a)){const i={data:null,error:a};return Jf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ft(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await za(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=g0(s);await za(this.storage,this.storageKey,a)}else{const s=g0(n);await za(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ft(this.storage,this.storageKey),await Ft(this.storage,this.storageKey+"-code-verifier"),await Ft(this.storage,this.storageKey+"-user"),this.userStorage&&await Ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Va);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Va);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Va}ms, refresh threshold is ${qm} ticks`),s<=qm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await Aa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?O5(t.webauthn.credential_response):I5(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:A5(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:R5(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Zf(r.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new jn})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new jn});const i=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new jn});const i=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Ut()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ke(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new jn})})}catch(t){if(xe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await ke(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jn})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+V4>s)return r;const{data:a,error:i}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});r=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=Zf(r);n!=null&&n.allowExpired||u5(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const h=d5(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,i,X4(`${l}.${c}`)))throw new Qm("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if(xe(r))return this._returnResult({data:null,error:r});throw r}}}_c.nextInstanceID={};const B5=_c,W5="2.89.0";let Rl="";typeof Deno<"u"?Rl="deno":typeof document<"u"?Rl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rl="react-native":Rl="node";const H5={"X-Client-Info":`supabase-js-${Rl}/${W5}`},K5={headers:H5},q5={schema:"public"},G5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y5={};function kc(e){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function Q5(e,t){if(kc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X5(e){var t=Q5(e,"string");return kc(t)=="symbol"?t:t+""}function J5(e,t,n){return(t=X5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N0(Object(n),!0).forEach(function(r){J5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N0(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Z5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),e3=()=>Headers,t3=(e,t,n)=>{const r=Z5(n),s=e3();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,vt(vt({},i),{},{headers:u}))}};function n3(e){return e.endsWith("/")?e:e+"/"}function r3(e,t){var n,r;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,m={db:vt(vt({},c),s),auth:vt(vt({},u),a),realtime:vt(vt({},h),i),storage:{},global:vt(vt(vt({},d),l),{},{headers:vt(vt({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function s3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var o3=class extends B5{constructor(e){super(e)}},a3=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=s3(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:q5,realtime:Y5,auth:vt(vt({},G5),{},{storageKey:i}),global:K5},c=r3(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=t3(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new FL(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new M4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new IL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:l,debug:c,throwOnError:u},h,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o3({url:this.authUrl.href,headers:vt(vt({},m),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:l,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new n4(this.realtimeUrl.href,vt(vt({},e),{},{params:vt(vt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const i3=(e,t,n)=>new a3(e,t,n);function l3(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}l3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const c3="https://txoltggjkukflwuigqst.supabase.co",u3="sb_publishable_JEx5V53j31YBi2Lt7Vpiaw_LPAp50aR",De=i3(c3,u3,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Kj=f.createContext(void 0);function d3({children:e}){const[t,n]=f.useState(null),[r,s]=f.useState(null),[a,i]=f.useState(!0);f.useEffect(()=>{const{data:{subscription:h}}=De.auth.onAuthStateChange((d,m)=>{s(m),n((m==null?void 0:m.user)??null),i(!1)});return De.auth.getSession().then(({data:{session:d}})=>{s(d),n((d==null?void 0:d.user)??null),i(!1)}),()=>h.unsubscribe()},[]);const l=async(h,d)=>{const{error:m}=await De.auth.signInWithPassword({email:h,password:d});return{error:m}},c=async(h,d)=>{const m=`${window.location.origin}/`,{error:p}=await De.auth.signUp({email:h,password:d,options:{emailRedirectTo:m}});return{error:p}},u=async()=>{await De.auth.signOut(),s(null),n(null)};return o.jsx(Kj.Provider,{value:{user:t,session:r,loading:a,signIn:l,signUp:c,signOut:u},children:e})}function Sn(){const e=f.useContext(Kj);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const h3={save:"Save",cancel:"Cancel",delete:"Delete",create:"Create",update:"Update",search:"Search",loading:"Loading...",back:"Back",import:"Import",export:"Export",write:"Write",rename:"Rename",copy:"Copied",error:"Error",success:"Success",comingSoon:"Coming Soon",newFolder:"New Folder",newProject:"New Project",items:"items",name:"Name",email:"Email",password:"Password",add:"Add",remove:"Remove",get:"Get",proceed:"Proceed",close:"Close",view:"View",edit:"Edit",select:"Select",or:"or",language:"Display Language",languagePlaceholder:"Select language...",words:"words",chars:"chars",draft:"Draft",history:"History",restore:"Restore",copyBtn:"Copy",confirmDeleteTitle:"Are you sure?",confirmDeleteDesc:"This action cannot be undone. This version will be permanently deleted.",noVersions:"No versions saved yet",editInEditor:"Edit in Main Editor",restored:"Restored",restoredDesc:"Version loaded to editor",deleted:"Deleted",deletedDesc:"Version removed from history",copied:"Copied",copiedDesc:"Content copied to clipboard",copyError:"Could not copy content",unsaved:"Unsaved",title:"Title",description:"Description",tags:"Tags",done:"Done",copyAll:"Copy All",score:"Score",regenerate:"Regenerate",rewrite:"Rewrite"},f3={dashboard:"Dashboard",dnaLab:"DNA Lab",personas:"Personas",writer:"Writer",tubeClone:"TubeClone",notes:"Notes",settings:"Settings",logout:"Logout",workspace:"Workspace",collapse:"Collapse",home:"Home",dna:"DNA"},p3={title:"Settings",description:"Customize your preferences",language:{title:"Display Language",description:"Select the language for the interface"},aiModel:{title:"AI Model",description:"Select AI model for each step (DNA Extraction, Outline, Script Generation)",perStep:"Select model per step",dnaLab:"DNA Lab: Extraction Model",writerInput:"Writer Input: Outline Model",writerOutline:"Writer Outline: Script Model",persona:"Persona: Generation Model"}},m3={title:"Dashboard",subtitle:"Manage your viral projects.",stats:{totalProjects:"Total Projects",dnaTemplates:"DNA Templates",creditsUsed:"Credits Used",contact:"Contact"},search:{placeholder:"Search projects and folders..."},folders:"Folders",recentProjects:"Recent Projects",scripts:"Scripts",noProjects:"No projects yet. Create your first script!",noProjectsSearch:"No matching projects found.",noScriptsFolder:"No scripts in this folder.",createScript:"Create Script",createFolder:{title:"Create New Folder",label:"Folder Name",placeholder:"My Folder..."},renameProject:{title:"Rename Project",label:"Project Name",placeholder:"Project Name..."},quickActions:{extractDna:"Extract DNA",extractDnaDesc:"Analyze viral content patterns",newScript:"New Script",newScriptDesc:"Generate content with AI"},moveToFolder:"Move to Folder",removeFromFolder:"Remove from Folder"},g3={title:"DNA Lab",subtitle:"Extract viral patterns from successful content",library:"Library",extract:"Extract",extractNewDna:"Extract New DNA",createManually:"Create DNA Manually",searchPlaceholder:"Search DNA...",noDna:"No DNA yet. Create your first DNA!",virals:"Viral Videos",flops:"Flop Videos",addViral:"Add Viral",addFlop:"Add Flop",overrideLogic:"Override Logic",overrideLogicPlaceholder:"Override default analysis logic...",language:"Language",aiModel:"AI Model",analyzing:"Scanning...",analyzeExtract:"Analyze & Extract DNA",createDna:"Create DNA",exported:"Exported",exportSuccess:"DNA Exported Successfully",imported:"Imported",importSuccess:"DNA Imported Successfully",importFailed:"Import Failed",scanResults:{title:"Content Scan Results",description:"We've scanned your data. Review and deselect outliers (e.g., wrong niche/tone) before deep analysis.",outlier:"Outlier",topic:"Topic",tone:"Tone",quality:"Quality",proceed:"Proceed with",videos:"Videos"},variant:{title:"Title",titlePlaceholder:"e.g., How I Built a SaaS in 2 Days",youtubeUrl:"YouTube URL",transcript:"Script / Transcript",comments:"Comments / Feedback",notes:"Description / Notes",get:"Get",pastePlaceholder:"Paste content here...",commentsPlaceholder:"Paste comments or feedback here...",notesPlaceholder:"e.g., Summary of tech stack..."},manual:{title:"Create DNA Manually",name:"Name",namePlaceholder:"e.g., Storytelling Master",niche:"Niche",nichePlaceholder:"e.g., Tech",tone:"Tone",tonePlaceholder:"e.g., High Energy",hookType:"Hook Type",hookTypePlaceholder:"e.g., Question, Story, Statistic",patterns:"Patterns (comma separated)",patternsPlaceholder:"e.g., Emotional Hook, 3-Act Structure",structure:"Structure (comma separated)",structurePlaceholder:"e.g., Hook, Problem, Solution, CTA",pacing:"Pacing",pacingPlaceholder:"e.g., Fast paced with constant cuts"},view:{backToLibrary:"Back to Library",evolution:"DNA Evolution",hookType:"Hook Type",hookExamples:"Hook Examples",structure:"Structure",pacing:"Pacing",retentionTactics:"Retention Tactics",xFactors:"X-Factors",vocabulary:"Vocabulary",patterns:"Patterns",sourceUrl:"Source URL",saveChanges:"Save Changes",myNotes:"My Notes / Constraints",myNotesPlaceholder:"Add mandatory elements or your notes here (optional)...",niche:"Niche / Category",nichePlaceholder:"e.g., Health & Fitness, Crypto, Gaming...",targetWordCount:"Target Word Count",wordCountPlaceholder:"e.g., 3316",calcFromViral:"Calculated from viral script. AI will aim for this range.",linguisticFingerprint:"Linguistic Fingerprint (The Voice)",personaRole:"Persona / Role",personaRolePlaceholder:"e.g., Practical Finance Guide",toneAnalysis:"Tone Analysis",toneAnalysisPlaceholder:"Describe tone...",signatureKeywords:"Signature Keywords",signatureKeywordsPlaceholder:"e.g., Trap, Survival Mode, Freedom, System...",hookAngle:"Hook Angle (Psychology)",angleCategory:"Angle / Category",angleCategoryPlaceholder:"e.g., Negative, Curiosity, Paradox...",deconstruction:"Deconstruction",deconstructionPlaceholder:"How the hook works psychologically...",linguisticPacing:"Pacing (Linguistic Rhythm)",pacingPlaceholder:"Describe pacing...",highDopamine:"HIGH DOPAMINE (KEEP)",addHigh:"Add High Dopamine",confusionPoints:"CONFUSION POINTS (FIX)",addConfusion:"Add Confusion Point",objections:"OBJECTIONS (ADDRESS)",addObjection:"Add Objection",corePatterns:"CORE PATTERNS (70% SAFE)",addCore:"Add Core Pattern",viralXFactors:"VIRAL X-FACTORS (30% MAGIC)",addViral:"Add Viral Factor",flopAvoidance:"FLOP AVOIDANCE",addFlop:"Add Flop Avoidance",hookExamplesTitle:"HOOK EXAMPLES",addExample:"Add Example",audiencePsychology:"AUDIENCE PSYCHOLOGY",emotionalArc:"Emotional Arc",structuralSkeleton:"Structural Skeleton (Advanced)",estTotal:"Est. Total",sectionTone:"Section Tone",sectionTonePlaceholder:"e.g., Urgent, Curious, Calm",sectionPacing:"Linguistic Pacing (Speed)",sectionPacingPlaceholder:"Detailed pacing instructions...",contentFocus:"Content Focus",contentFocusPlaceholder:"What happens here? Main goal...",openLoop:"Open Loop (Optional)",openLoopPlaceholder:"Curiosity gap...",closesLoop:"Closes Loop (Optional)",closesLoopPlaceholder:"Loop closing reference...",audienceInteraction:"Audience Interaction / CTA",viralVideo:"Viral Video (to learn from)",flopVideo:"Flop Video (to learn defects)",videoUrl:"Video URL (optional)",pasteTranscript:"Paste video transcript here...",evolveBtn:"Evolve Now",evolving:"Evolving...",evolutionComplete:"Evolution Complete",changesMade:"changes made",audienceValue:"Audience Value (Takeaway) *",audienceValuePlaceholder:"What value does the viewer get? (Mandatory)",antiPattern:"Anti-Pattern (Mistake to Avoid)",antiPatternPlaceholder:"Specific mistake to avoid here...",addDetailedSection:"Add Detailed Section",ctaPlaceholder:"Explicit CTA or implicit trigger...",aiLearnsWarning:"AI learns from these patterns. DO NOT copy exact wording.",persuasionFlow:"Persuasion Flow (Psychological Guidance)",framework:"Framework",logicalProgression:"Logical Progression",proofSequence:"Proof Sequence",mainObjection:"Main Objection",counterTactic:"Counter Tactic",retentionHooks:"Retention Hooks (Re-hook at Word Count Milestones)",atWordCount:"At Word Count",technique:"Technique",example:"Example",addRetentionHook:"Add Retention Hook",transitionFormulas:"Transition Formulas (Section Transition Formulas)",from:"From",to:"To",formula:"Formula",addTransitionFormula:"Add Transition Formula",audiencePsychologyPlaceholder:"Describe the audience's emotional state, fears, desires...",sourceTranscript:"Source Transcript"}},v3={title:"Writer Tool",subtitle:"Create viral scripts with AI assistance",newScript:"New Script",aiModelOutline:"AI Model (Outline)",configureGen:"Configure Gen",configureGenDesc:"Generation Configuration",noDna:"No DNA",noPersona:"No Persona",addViralRef:"Add Viral Reference",addFlopRef:"Add Flop Reference",dnaPattern:"DNA Pattern",selectDnaPlaceholder:"Select DNA Pattern...",audiencePersona:"Audience Persona",selectPersonaPlaceholder:"Select Persona...",targetCountry:"Target Country",cultureAdapt:"Cultural Adaptation?",targetWordCount:"Target Word Count",wordCountDesc:"AI will attempt to reach this word count",allowInnovation:"Allow Structure Innovation?",allowInnovationDesc:"AI can modify structure if necessary",mode:{newIdea:"New Idea",newIdeaDesc:"Start from scratch with your topic",rewrite:"Rewrite / Improve",rewriteDesc:"Improve existing script",competitor:"Competitor",popular:"Popular"},steps:{input:"Input",outline:"Outline",script:"Script",step1Desc:"Enter Topic & Ideas",step2Desc:"Generate & Edit Outline",step3Desc:"Write & Refine Script"},yourIdea:"Your Idea",ideaDesc:"Describe the core idea for AI to develop",competitorScript:"Competitor Script",topicLabel:"Topic",topicPlaceholder:"What is the video about?...",keyPointsLabel:"Key Points",keyPointsPlaceholder:"Key points to include...",uniqueAngle:"Unique Angle",uniqueAnglePlaceholder:"What makes this different?...",aiSuggest:"AI Suggest",viralReferences:"Viral References",viralReferencesSubtitle:"Successful patterns to learn from",flopReferences:"Flop References",flopReferencesSubtitle:"Mistakes to avoid",addReference:"Add Reference",refScript:"Script / Transcript",refComments:"Comments",refScriptPlaceholder:"Paste content...",refCommentsPlaceholder:"Paste comments...",estWords:"Est. Words",scripts:"scripts",scriptModel:"Script Model",outlineVersions:"Outline Versions",version:"Version",hasScript:"Has Script",current:"Current",contentSections:"Content Sections",sectionsCount:"sections in script",addSection:"Add Section",insertSection:"Insert Section",newSection:"New Section",sectionTitlePh:"Section title...",wordsPh:"Words",words:"words",sectionContentPh:"Section content...",notesPh:"Notes (optional)...",uniqueAngleIntegrated:"Unique Angle Integrated",angleIntegrated:"Unique Angle Integrated",improveSectionPlaceholder:"Ideas to improve this section...",wordsSuffix:"words",addIdeasPh:"Add ideas to improve...",rewrite:"Rewrite",competitorDesc:"Analyze and improve upon an existing script",competitorScriptLabel:"Competitor Script",competitorScriptPlaceholder:"Paste competitor script here...",uniqueAngleOptional:"Unique Angle (Optional)",enterTopicFirst:"Please enter a topic first",pasteCompetitorFirst:"Please paste competitor script first",backToInput:"Back to Input",writeFullScript:"Write Full Script",starting:"Starting...",seoMetadata:"SEO Metadata",generateScriptFirst:"Generate script first",seoGenerated:"SEO Metadata Generated!",generateSeo:"Generate SEO",titleLabel:"Title",titlePlaceholder:"Enter video title...",descriptionLabel:"Description",descriptionPlaceholder:"Enter video description...",tagsLabel:"Tags",tagsPlaceholder:"Enter tags (comma separated)...",scriptResults:"Script Results",done:"Done",copyAll:"Copy All",model:"Model",score:"Score",selectMode:{title:"Start New Project",subtitle:"Choose how you want to create your script",newIdea:{title:"New Idea",description:"Start from scratch with your topic and ideas"},competitor:{title:"Improve Competitor",description:"Analyze and improve upon an existing script"}},input:{topic:"Topic",topicPlaceholder:"What is your video about?",keyPoints:"Key Points",keyPointsPlaceholder:"Main points to cover...",uniqueAngle:"Unique Angle",uniqueAnglePlaceholder:"What makes your approach special?",targetWordCount:"Target Word Count",competitorScript:"Competitor Script",competitorScriptPlaceholder:"Paste competitor script here...",generateOutline:"Generate Outline",selectDna:"Select DNA",selectPersona:"Select Persona",noDna:"No DNA",noPersona:"No Persona",viralReferences:"Viral References",flopReferences:"Flop References",addReference:"Add Reference",allowStructureInnovation:"Allow Structure Innovation"},outline:{suggestAngle:"Suggest Unique Angle",regenerate:"Regenerate",generateScript:"Generate Script",addSection:"Add Section",section:"Section",content:"Content",wordCount:"Word Count",notes:"Notes",history:"History",editOutline:"Edit Outline",saveOutline:"Save Outline",totalWords:"Total Words"},script:{score:"Score Script",scoring:"Scoring...",regenerate:"Regenerate",generateSeo:"Generate SEO",copyScript:"Copy Script",scriptComplete:"Script Complete",scriptSaved:"Your script has been saved",seoGenerated:"SEO Generated",seoDescription:"Title, description and tags generated",history:"History",rewriteSection:"Rewrite Section",rewritePlaceholder:"Rewrite instructions...",noScore:"No Score Yet",clickScore:"Click 'Score Script' to analyze your script's viral potential"},generating:{outline:"Generating outline...",script:"Generating script...",section:"Writing section"}},y3={title:"Audience Personas",subtitle:"Define and manage your target audience (Manual or AI Analysis)",createPersona:"Create Persona",searchPlaceholder:"Search personas...",noPersonas:"No personas yet. Create your first persona!",dialog:{createTitle:"Create Audience Persona",editTitle:"Edit Persona",description:"Define target audience manually or analyze content to reverse-engineer them.",manualTab:"Manual Description",analyzeTab:"Analyze Content (AI)",descriptionLabel:"Description",descriptionPlaceholder:"Describe your target audience... e.g. Young professionals 25-35...",formatWithAi:"Format Description with AI",source:"Source",scriptLabel:"Script / Transcript",scriptPlaceholder:"Paste video transcript here...",youtubeLabel:"Import from YouTube (Optional)",commentsLabel:"Comments",addSource:"Add Another Source",reverseEngineer:"Reverse-Engineer Audience with AI",nameLabel:"Name",namePlaceholder:"Enter persona name...",ageRangeLabel:"Age Range",ageRangePlaceholder:"e.g. 25-35",knowledgeLevelLabel:"Knowledge Level",platformLabel:"Platform",platformPlaceholder:"Select platform...",targetCountryLabel:"Target Country / Region",targetCountryPlaceholder:"e.g. USA, UK, Vietnam, Japan, Global...",toneLabel:"Preferred Tone",tonePlaceholder:"Friendly & Direct, Inspiring",painPointsLabel:"Pain Points",painPointsPlaceholder:"Time management, Career growth...",motivationsLabel:"Motivations (Why they watch)",motivationsPlaceholder:"Want to get rich quick, Need validation...",objectionsLabel:"Objections (Why they skip)",objectionsPlaceholder:"Too complex, Fake guru vibes...",selectModelPlaceholder:"Select AI model...",maxComments:"max",fetched:"fetched"},knowledgeLevels:{completeBeginner:"1 - Complete Beginner",beginner:"2 - Beginner",intermediate:"3 - Intermediate",advanced:"4 - Advanced",expert:"5 - Expert"},knowledge:{beginner1:"1 - Complete Beginner",beginner2:"2 - Beginner",intermediate:"3 - Intermediate",advanced:"4 - Advanced",expert:"5 - Expert"},knowledgeProfile:"3D Knowledge Profile",card:{knowledge:"Knowledge",painPoints:"Pain Points",motivations:"Motivations",tone:"Tone",knowledgeProfile:"3D Knowledge Profile",domain:"Domain",engagement:"Engagement",skepticism:"Skepticism",demographics:"Demographics Inference",age:"Age",occupation:"Occupation",digitalFluency:"Digital Fluency",contentPreferences:"Content Prefs",attention:"Attention"},age:"Age",intermediate:"Intermediate",domain:"Domain",engagement:"Engagement",skepticism:"Skepticism",painPoints:"Pain Points",demographics:"Demographics",occupation:"Occupation",digitalFluency:"Digital Fluency",contentPrefs:"Content Preferences",attention:"Attention",motivations:"Motivations",tone:"Tone",trustProfile:{title:"Trust Profile (What proof type they trust most)",primaryLabel:"Primary Trust Type",primaryPlaceholder:"e.g. data, story, visual-proof, experiential, celebrity-endorsement (AI will auto-fill)",secondaryLabel:"Secondary Trust Type (Optional)",secondaryPlaceholder:"e.g. social-proof, authority (AI will auto-fill)",reasoningLabel:"Reasoning",reasoningPlaceholder:"Why does this audience trust this proof type? (e.g. Gen Z is skeptical  need data + social proof)"},attentionSpan:{title:"Attention Span (Focus Capacity)",placeholder:"e.g. short, medium, long (AI will auto-fill based on content)"},actionBarriers:{title:"Action Barriers (Blockers to Taking Action)",placeholder:"e.g. time-constraint, skepticism, cost-concern (AI will auto-fill, comma-separated)"}},x3={title:"Quick Notes",subtitle:"Capture ideas and useful info",newNote:"New Note",searchPlaceholder:"Search notes...",noNotes:"No notes yet",noContent:"No content",selectNote:"Select a note",selectNoteDescription:"Select a note from the list to view and edit, or create a new note.",titlePlaceholder:"Note title...",contentPlaceholder:"Write your note...",color:"Color",untitled:"Untitled Note"},w3={title:"TubeClone",subtitle:"Research & optimize your YouTube metadata",newResearch:"New Research",library:"Library",research:"Research",selectOrCreate:"Select or create a project to start research",noProjects:"No research projects yet. Create your first project!",projectName:"Project Name",projectNamePlaceholder:"Research project name...",step:{keyword:"Keyword Analysis",competitors:"Competitor Research",metadata:"Generate Metadata"},config:{title:"Research Configuration",projectName:"Project Name",projectNamePlaceholder:"My YouTube Research",competitorUrl:"Competitor Video URL (Optional)",fetch:"Fetch",pasteUrlHelp:"Paste a URL to auto-fill search keywords, detecting category and tags.",keywordsLabel:"Search Keywords / Niche",keywordsPlaceholder:"e.g. 'coding tutorials', 'vegan recipes', 'minecraft gameplay'",keywordsHelp:"These keywords will be used to find competitor videos.",category:"Category",published:"Published",tags:"Tags",noTags:"No tags found",targetCountry:"Target Country",videosToAnalyze:"Videos to Analyze",timeRange:"Time Range (Past)",startResearch:"Start Research",warningReSearch:"Warning: Changing keywords might require re-searching."},toast:{error:"Error",enterUrl:"Please enter a YouTube URL first",apiKeyMissing:"YouTube API Key is not configured. Please add it in Settings.",invalidUrl:"Invalid YouTube URL",videoFound:"Video Found",fetchFailed:"Failed to fetch video details"}},b3={welcome:"Welcome to LOG",welcomeBack:"Welcome Back",createAccount:"Create your account",enterCredentials:"Enter your credentials to continue",startCreating:"Start creating viral content today",signIn:"Sign In",signUp:"Sign Up",signUpAction:"Sign Up",signInAction:"Sign In",email:"Email",emailPlaceholder:"you@example.com",password:"Password",passwordPlaceholder:"",passwordMinLength:"Must be at least 6 characters",fullName:"Name",namePlaceholder:"Your Name",forgotPassword:"Forgot Password?",noAccount:"Don't have an account?",hasAccount:"Already have an account?",continueWithGoogle:"Continue with Google",orContinueWith:"or continue with email",createAccountAction:"Create Account",accountCreated:"Account Created!",accountCreatedDesc:"You can sign in with your credentials.",passwordTooShort:"Password too short",passwordTooShortDesc:"Password must be at least 6 characters",viewPricing:"View Pricing",termsAgreement:"By creating an account, you agree to our",termsOfService:"Terms of Service",and:"and",privacyPolicy:"Privacy Policy",features:{extractDna:"Extract Viral DNA",extractDnaDesc:"Analyze high-performing videos",aiPowered:"AI-Powered Creation",aiPoweredDesc:"Generate scripts in seconds",personas:"Audience Personas",personasDesc:"Understand your viewers",rapidIteration:"Rapid Iteration",rapidIterationDesc:"Test and refine faster"},unlockSecrets:"Unlock the secrets",ofViralContent:"of viral content",heroDescription:"Extract patterns from successful videos, generate scripts that resonate, and build your audience faster than ever."},S3={starter:"Starter",pro:"Pro",ultra:"Ultra"},N3={justNow:"Just now",minAgo:"min ago",hourAgo:"hour ago",hoursAgo:"hours ago",dayAgo:"day ago",daysAgo:"days ago"},j3={common:h3,nav:f3,settings:p3,dashboard:m3,dnaLab:g3,writer:v3,personas:y3,notes:x3,tubeClone:w3,auth:b3,tier:S3,time:N3},C3={save:"Lu",cancel:"Hy",delete:"Xa",create:"To mi",update:"Cp nht",search:"Tm kim",loading:"ang ti...",back:"Quay li",import:"Nhp",export:"Xut",write:"Vit",rename:"i tn",copy:" sao chp",error:"Li",success:"Thnh cng",comingSoon:"Sp ra mt",newFolder:"Th mc mi",newProject:"D n mi",items:"mc",name:"Tn",email:"Email",password:"Mt khu",add:"Thm",remove:"Xa",get:"Ly",proceed:"Tip tc",close:"ng",view:"Xem",edit:"Chnh sa",select:"Chn",or:"hoc",language:"Ngn ng hin th",languagePlaceholder:"Chn ngn ng...",words:"t",chars:"k t",draft:"Bn nhp",history:"Lch s",restore:"Khi phc",copyBtn:"Sao chp",confirmDeleteTitle:"Bn c chc chn khng?",confirmDeleteDesc:"Hnh ng ny khng th hon tc. Phin bn ny s b xa vnh vin.",noVersions:"Cha c phin bn no",editInEditor:"Chnh sa",restored:" khi phc",restoredDesc:"Phin bn  c ti vo trnh son tho",deleted:" xa",deletedDesc:"Phin bn  b xa khi lch s",copied:" sao chp",copiedDesc:"Ni dung  c sao chp vo clipboard",copyError:"Khng th sao chp ni dung",unsaved:"Cha lu",title:"Tiu ",description:"M t",tags:"Th",done:"Hon tt",copyAll:"Sao chp tt c",score:"Chm im",model:"M hnh",regenerate:"To li",rewrite:"Vit li"},_3={dashboard:"Bng iu khin",dnaLab:"Phng th nghim DNA",personas:"Nhn vt mc tiu",writer:"Vit bi",tubeClone:"TubeClone",notes:"Ghi ch",settings:"Ci t",logout:"ng xut",workspace:"Khng gian lm vic",collapse:"Thu gn",home:"Trang ch",dna:"DNA"},k3={title:"Ci t",description:"Ty chnh cc thit lp ca bn",language:{title:"Ngn ng hin th",description:"Chn ngn ng bn mun s dng cho giao din"},aiModel:{title:"M hnh AI",description:"La chn m hnh AI hin c sn  tng bc (Trch xut DNA, Dn , To kch bn)",perStep:"Chn m hnh theo tng bc",dnaLab:"DNA Lab: Chn m hnh khi trch xut DNA",writerInput:"Writer Input: Chn m hnh  to dn ",writerOutline:"Writer Outline: Chn m hnh  vit kch bn",persona:"Persona: Chn m hnh  to nhn vt mc tiu"}},E3={title:"Bng iu khin",subtitle:"Qun l cc d n viral ca bn.",stats:{totalProjects:"Tng d n",dnaTemplates:"Mu DNA",creditsUsed:"Tn dng  dng",contact:"Lin h"},search:{placeholder:"Tm kim d n v th mc..."},folders:"Th mc",recentProjects:"D n gn y",scripts:"Kch bn",noProjects:"Cha c d n. Hy to kch bn u tin!",noProjectsSearch:"Khng tm thy d n ph hp.",noScriptsFolder:"Cha c kch bn trong th mc ny.",createScript:"To kch bn",createFolder:{title:"To th mc mi",label:"Tn th mc",placeholder:"Th mc ca ti..."},renameProject:{title:"i tn d n",label:"Tn d n",placeholder:"Tn d n..."},quickActions:{extractDna:"Trch xut DNA",extractDnaDesc:"Phn tch mu ni dung viral",newScript:"Kch bn mi",newScriptDesc:"To ni dung vi AI"},moveToFolder:"Di chuyn vo th mc",removeFromFolder:"Xa khi th mc"},T3={title:"Phng th nghim DNA",subtitle:"Trch xut mu viral t ni dung thnh cng",library:"Th vin",extract:"Trch xut",extractNewDna:"Trch xut DNA mi",createManually:"To DNA th cng",searchPlaceholder:"Tm kim DNA...",noDna:"Cha c DNA. Hy to DNA u tin!",virals:"Video Viral",flops:"Video Flop",addViral:"Thm Viral",addFlop:"Thm Flop",overrideLogic:"Ghi  logic",overrideLogicPlaceholder:"Ghi  logic phn tch mc nh...",language:"Ngn ng",aiModel:"M hnh AI",analyzing:"ang qut...",analyzeExtract:"Phn tch & Trch xut DNA",createDna:"To DNA",exported:" xut",exportSuccess:"Xut DNA thnh cng",imported:" nhp",importSuccess:"Nhp DNA thnh cng",importFailed:"Nhp tht bi",scanResults:{title:"Kt qu qut ni dung",description:"Chng ti  qut d liu ca bn. Xem li v b chn cc ngoi l (v d: sai niche/tone) trc khi phn tch su.",outlier:"Ngoi l",topic:"Ch ",tone:"Ging iu",quality:"Cht lng",proceed:"Tip tc vi",videos:"Video"},variant:{title:"Tiu ",titlePlaceholder:"V d: Cch ti xy dng SaaS trong 2 ngy",youtubeUrl:"ng dn YouTube",transcript:"Kch bn / Phin m",comments:"Bnh lun / Phn hi",notes:"M t / Ghi ch",get:"Ly",pastePlaceholder:"Dn ni dung vo y...",commentsPlaceholder:"Dn bnh lun hoc phn hi vo y...",notesPlaceholder:"V d: Tm tt cng ngh s dng..."},manual:{title:"To DNA th cng",name:"Tn",namePlaceholder:"V d: Bc thy k chuyn",niche:"Niche",nichePlaceholder:"V d: Cng ngh",tone:"Ging iu",tonePlaceholder:"V d: Nng lng cao",hookType:"Loi Hook",hookTypePlaceholder:"V d: Cu hi, Cu chuyn, Thng k",patterns:"Mu (ngn cch bi du phy)",patternsPlaceholder:"V d: Hook cm xc, Cu trc 3 hi",structure:"Cu trc (ngn cch bi du phy)",structurePlaceholder:"V d: Hook, Vn , Gii php, CTA",pacing:"Nhp ",pacingPlaceholder:"V d: Nhp nhanh vi ct cnh lin tc"},view:{backToLibrary:"Quay li Th vin",evolution:"Tin ha DNA",hookType:"Loi Hook",hookExamples:"V d Hook",structure:"Cu trc",pacing:"Nhp ",retentionTactics:"Chin thut gi chn",xFactors:"Yu t X",vocabulary:"T vng",patterns:"Mu",sourceUrl:"URL ngun",saveChanges:"Lu thay i",myNotes:"Ghi ch / Rng buc ca ti",myNotesPlaceholder:"Thm cc yu t bt buc hoc ghi ch ca bn vo y (ty chn)...",niche:"Niche / Danh mc",nichePlaceholder:"V d: Sc khe & Th hnh, Crypto, Gaming...",targetWordCount:"S t mc tiu",wordCountPlaceholder:"V d: 3316",calcFromViral:"Tnh ton t kch bn viral. AI s nhm n phm vi ny.",linguisticFingerprint:"Du n ngn ng (The Voice)",personaRole:"Persona / Vai tr",personaRolePlaceholder:"V d: Ngi hng dn thc t ti chnh",toneAnalysis:"Phn tch ging iu",toneAnalysisPlaceholder:"M t ging iu...",signatureKeywords:"T kha c trng",signatureKeywordsPlaceholder:"V d: By, Ch  sinh tn, T do, H thng...",hookAngle:"Gc  Hook (Tm l hc)",angleCategory:"Gc  / Danh mc",angleCategoryPlaceholder:"V d: Tiu cc, T m, Nghch l...",deconstruction:"Phn tch (Deconstruction)",deconstructionPlaceholder:"Cch hook hot ng v mt tm l...",linguisticPacing:"Nhp  (Nhp iu ngn ng)",pacingPlaceholder:"M t nhp ...",highDopamine:"DOPAMINE CAO (GI)",addHigh:"Thm Dopamine cao",confusionPoints:"IM GY KH HIU (SA)",addConfusion:"Thm im gy kh hiu",objections:"PHN I (GII QUYT)",addObjection:"Thm phn i",corePatterns:"MU CT LI (70% AN TON)",addCore:"Thm mu ct li",viralXFactors:"YU T VIRAL X (30% MA THUT)",addViral:"Thm yu t Viral",flopAvoidance:"TRNH FLOP",addFlop:"Thm mc trnh Flop",hookExamplesTitle:"V D HOOK",addExample:"Thm v d",audiencePsychology:"TM L KHN GI",emotionalArc:"Cung bc cm xc",structuralSkeleton:"Khung sn cu trc (Nng cao)",estTotal:"c tnh tng",sectionTone:"Ging iu phn",sectionTonePlaceholder:"V d: Khn cp, T m, Bnh tnh",sectionPacing:"Nhp  ngn ng (Tc )",sectionPacingPlaceholder:"Hng dn chi tit v nhp ...",contentFocus:"Trng tm ni dung",contentFocusPlaceholder:"Chuyn g xy ra  y? Mc tiu chnh...",openLoop:"M vng lp (Ty chn)",openLoopPlaceholder:"Khong trng t m...",closesLoop:"ng vng lp (Ty chn)",closesLoopPlaceholder:"Tham chiu ng vng lp...",audienceInteraction:"Tng tc khn gi / CTA",viralVideo:"Video Viral ( hc hi)",flopVideo:"Video Flop ( rt kinh nghim)",videoUrl:"URL Video (ty chn)",pasteTranscript:"Dn phin m video vo y...",evolveBtn:"Tin ha ngay",evolving:"ang tin ha...",evolutionComplete:"Tin ha hon tt",changesMade:"thay i  thc hin",audienceValue:"Gi tr khn gi (Bi hc) *",audienceValuePlaceholder:"Ngi xem nhn c g? (Bt buc)",antiPattern:"Mu chng (Li sai cn trnh)",antiPatternPlaceholder:"Li c th cn trnh  y...",addDetailedSection:"Thm phn chi tit",ctaPlaceholder:"CTA r rng hoc kch thch ngm...",aiLearnsWarning:"AI hc t cc mu ny. NG sao chp nguyn vn.",persuasionFlow:"Persuasion Flow (Dn dt tm l)",framework:"Framework",logicalProgression:"Logical Progression",proofSequence:"Proof Sequence",mainObjection:"Main Objection",counterTactic:"Counter Tactic",retentionHooks:"Retention Hooks (im re-hook theo s t)",atWordCount:"At Word Count",technique:"Technique",example:"Example",addRetentionHook:"Add Retention Hook",transitionFormulas:"Transition Formulas (Cng thc chuyn section)",from:"From",to:"To",formula:"Formula",addTransitionFormula:"Add Transition Formula",audiencePsychologyPlaceholder:"M t trng thi cm xc, ni s, mong mun ca khn gi...",sourceTranscript:"Bn ghi ngun"}},P3={title:"Cng c vit ni dung",subtitle:"To kch bn viral vi s h tr ca AI",newScript:"Kch bn mi",aiModelOutline:"M hnh AI (Dn )",configureGen:"Cu hnh to",configureGenDesc:"Cu hnh to ni dung",noDna:"Khng s dng DNA",noPersona:"Khng s dng Persona",addViralRef:"Thm tham kho Viral",addFlopRef:"Thm tham kho Flop",dnaPattern:"Mu DNA",selectDnaPlaceholder:"Chn mu DNA...",audiencePersona:"Nhn vt khn gi",selectPersonaPlaceholder:"Chn nhn vt mc tiu...",targetCountry:"Quc gia mc tiu",cultureAdapt:"Thch ng vn ha?",targetWordCount:"S t mc tiu",wordCountDesc:"AI s c gng t c s t ny",allowInnovation:"Cho php i mi cu trc?",allowInnovationDesc:"AI c th thay i cu trc nu cn thit",mode:{newIdea:" tng mi",newIdeaDesc:"Bt u t u vi ch  ca bn",rewrite:"Vit li / Ci thin",rewriteDesc:"Ci thin kch bn hin c",competitor:"i th",popular:"Ph bin"},steps:{input:"Nhp liu",outline:"Dn ",script:"Kch bn",step1Desc:"Nhp ch  &  tng",step2Desc:"To & Chnh sa dn ",step3Desc:"Vit & Tinh chnh kch bn"},yourIdea:" tng ca bn",ideaDesc:"M t  tng ct li  AI pht trin",competitorScript:"Kch bn i th",topicLabel:"Ch ",topicPlaceholder:"Video ni v iu g?...",keyPointsLabel:"im chnh",keyPointsPlaceholder:"Cc  chnh cn c...",uniqueAngle:"Gc nhn c o",uniqueAnglePlaceholder:"iu g lm video ny khc bit?...",aiSuggest:"AI Gi ",viralReferences:"Tham kho Viral",viralReferencesSubtitle:"Cc mu thnh cng  hc hi",flopReferences:"Tham kho Flop",flopReferencesSubtitle:"Cc li cn trnh",addReference:"Thm tham kho",refScript:"Kch bn / Phin m",refComments:"Bnh lun",refScriptPlaceholder:"Dn ni dung...",refCommentsPlaceholder:"Dn bnh lun...",estWords:"c tnh t",scripts:"kch bn",scriptModel:"M hnh vit",outlineVersions:"Phin bn dn ",version:"Phin bn",hasScript:"C kch bn",current:"Hin ti",contentSections:"Cc phn ni dung",sectionsCount:"phn trong kch bn",addSection:"Thm phn",insertSection:"Chn phn",newSection:"Phn mi",sectionTitlePh:"Tiu  phn...",wordsPh:"S t",words:"t",sectionContentPh:"Ni dung phn...",notesPh:"Ghi ch (ty chn)...",uniqueAngleIntegrated:" tch hp gc nhn c o",angleIntegrated:"Gc nhn c o  c tch hp",improveSectionPlaceholder:" tng  ci thin phn ny...",wordsSuffix:"t",addIdeasPh:"Thm  tng  ci thin...",rewrite:"Vit li",competitorDesc:"Phn tch v ci thin kch bn hin c",competitorScriptLabel:"Kch bn i th",competitorScriptPlaceholder:"Dn kch bn i th vo y...",uniqueAngleOptional:"Gc nhn c o (Ty chn)",enterTopicFirst:"Vui lng nhp ch  trc",pasteCompetitorFirst:"Vui lng dn kch bn i th trc",backToInput:"Quay li nhp liu",writeFullScript:"Vit ton b kch bn",starting:"ang bt u...",seoMetadata:"Metadata SEO",generateScriptFirst:"Hy to kch bn trc",seoGenerated:" to SEO metadata!",generateSeo:"To SEO",titleLabel:"Tiu ",titlePlaceholder:"Nhp tiu  video...",descriptionLabel:"M t",descriptionPlaceholder:"Nhp m t video...",tagsLabel:"Th",tagsPlaceholder:"Nhp th (cch nhau bi du phy)...",scriptResults:"Kch bn",done:"Hon thnh",copyAll:"Sao chp tt c",model:"M hnh",score:"im s",selectMode:{title:"Bt u d n mi",subtitle:"Chn cch bn mun to kch bn",newIdea:{title:" tng mi",description:"Bt u t u vi ch  v  tng ca bn"},competitor:{title:"Ci thin i th",description:"Phn tch v ci thin kch bn hin c"}},input:{topic:"Ch ",topicPlaceholder:"Video ca bn ni v iu g?",keyPoints:"im chnh",keyPointsPlaceholder:"Cc im chnh cn  cp...",uniqueAngle:"Gc nhn c o",uniqueAnglePlaceholder:"iu g lm cho cch tip cn ca bn c bit?",targetWordCount:"S t mc tiu",competitorScript:"Kch bn i th",competitorScriptPlaceholder:"Dn kch bn ca i th vo y...",generateOutline:"To dn ",selectDna:"Chn DNA",selectPersona:"Chn Persona",noDna:"Khng c DNA",noPersona:"Khng c Persona",noPersonaOption:"Khng s dng Persona",viralReferences:"Tham kho Viral",flopReferences:"Tham kho Flop",addReference:"Thm tham kho",allowStructureInnovation:"Cho php i mi cu trc"},outline:{suggestAngle:"Gi  gc nhn c o",regenerate:"To li",generateScript:"To kch bn",addSection:"Thm phn",section:"Phn",content:"Ni dung",wordCount:"S t",notes:"Ghi ch",history:"Lch s",editOutline:"Chnh sa dn ",saveOutline:"Lu dn ",totalWords:"Tng s t"},script:{score:"Chm im kch bn",scoring:"ang chm im...",regenerate:"To li",generateSeo:"To SEO",copyScript:"Sao chp kch bn",scriptComplete:"Hon thnh kch bn",scriptSaved:"Kch bn ca bn  c lu",seoGenerated:" to SEO",seoDescription:"Tiu , m t v th  c to",history:"Lch s",rewriteSection:"Vit li phn",rewritePlaceholder:"Hng dn vit li...",noScore:"Cha c im s",clickScore:"Nhn 'Chm im'  phn tch tim nng viral"},generating:{outline:"ang to dn ...",script:"ang to kch bn...",section:"ang vit phn"}},A3={title:"Nhn vt mc tiu",subtitle:"Xc nh v qun l i tng mc tiu ca bn (Th cng hoc Phn tch AI)",createPersona:"To Persona",searchPlaceholder:"Tm kim persona...",noPersonas:"Cha c persona. Hy to persona u tin!",dialog:{createTitle:"To Persona khn gi",editTitle:"Chnh sa Persona",description:"Xc nh i tng mc tiu th cng hoc phn tch ni dung  reverse-engineer h.",manualTab:"M t th cng",analyzeTab:"Phn tch ni dung (AI)",descriptionLabel:"M t",descriptionPlaceholder:"M t i tng mc tiu ca bn... V d: Chuyn gia tr t 25-35 tui...",formatWithAi:"nh dng m t vi AI",source:"Ngun",scriptLabel:"Kch bn / Phin m",scriptPlaceholder:"Dn phin m video vo y...",youtubeLabel:"Nhp t YouTube (Ty chn)",commentsLabel:"Bnh lun",addSource:"Thm ngun khc",reverseEngineer:"Reverse-Engineer khn gi vi AI",nameLabel:"Tn",namePlaceholder:"Nhp tn persona...",ageRangeLabel:" tui",ageRangePlaceholder:"V d: 25-35",knowledgeLevelLabel:"Trnh  kin thc",platformLabel:"Nn tng",platformPlaceholder:"Chn nn tng...",targetCountryLabel:"Quc gia / Khu vc mc tiu",targetCountryPlaceholder:"V d: USA, UK, Vit Nam, Nht Bn, Ton cu...",toneLabel:"Ging iu a thch",tonePlaceholder:"Thn thin & Trc tip, Truyn cm hng",painPointsLabel:"im au",painPointsPlaceholder:"Qun l thi gian, Pht trin s nghip...",motivationsLabel:"ng lc (Ti sao h xem)",motivationsPlaceholder:"Mun lm giu nhanh, Cn s cng nhn...",objectionsLabel:"Phn i (Ti sao h b qua)",objectionsPlaceholder:"Qu phc tp, Ging guru gi...",selectModelPlaceholder:"Chn m hnh AI...",maxComments:"ti a",fetched:" tm np"},knowledgeLevels:{completeBeginner:"1 - Hon ton mi",beginner:"2 - Ngi mi",intermediate:"3 - Trung cp",advanced:"4 - Nng cao",expert:"5 - Chuyn gia"},knowledge:{beginner1:"1 - Hon ton mi",beginner2:"2 - Ngi mi",intermediate:"3 - Trung cp",advanced:"4 - Nng cao",expert:"5 - Chuyn gia"},knowledgeProfile:"H s kin thc 3D",card:{knowledge:"Kin thc",painPoints:"im au",motivations:"ng lc",tone:"Ging iu",knowledgeProfile:"H s kin thc 3D",domain:"Lnh vc",engagement:"Tng tc",skepticism:"Hoi nghi",demographics:"Suy lun nhn khu hc",age:"Tui",occupation:"Ngh nghip",digitalFluency:"K nng s",contentPreferences:"S thch ni dung",attention:"S ch "},age:"Tui",intermediate:"Trung cp",domain:"Lnh vc",engagement:"Tng tc",skepticism:"Hoi nghi",painPoints:"im au",demographics:"Nhn khu hc",occupation:"Ngh nghip",digitalFluency:"K nng s",contentPrefs:"S thch ni dung",attention:"S ch ",motivations:"ng lc",tone:"Ging iu",trustProfile:{title:"Trust Profile (Loi proof ngi xem tin tng nht)",primaryLabel:"Primary Trust Type",primaryPlaceholder:"VD: data, story, visual-proof, experiential, celebrity-endorsement (AI s t fill)",secondaryLabel:"Secondary Trust Type (Optional)",secondaryPlaceholder:"VD: social-proof, authority (AI s t fill)",reasoningLabel:"Reasoning",reasoningPlaceholder:"Ti sao audience ny tin vo loi proof ny? (VD: Gen Z skeptical  cn data + social proof)"},attentionSpan:{title:"Attention Span (Kh nng tp trung)",placeholder:"VD: short, medium, long (AI s t fill da vo ni dung)"},actionBarriers:{title:"Action Barriers (Ro cn hnh ng)",placeholder:"VD: time-constraint, skepticism, cost-concern (AI s t fill, cch nhau bi du phy)"}},R3={title:"Ghi ch nhanh",subtitle:"Ghi li  tng v thng tin hu ch",newNote:"Ghi ch mi",searchPlaceholder:"Tm kim ghi ch...",noNotes:"Cha c ghi ch",noContent:"Khng c ni dung",selectNote:"Chn mt ghi ch",selectNoteDescription:"Chn mt ghi ch t danh sch  xem v chnh sa, hoc to ghi ch mi.",titlePlaceholder:"Tiu  ghi ch...",contentPlaceholder:"Vit ghi ch ca bn...",color:"Mu sc",untitled:"Ghi ch khng tn"},O3={title:"TubeClone",subtitle:"Nghin cu & ti u ha metadata YouTube ca bn",newResearch:"Nghin cu mi",library:"Th vin",research:"Nghin cu",selectOrCreate:"Chn hoc to d n  bt u nghin cu",noProjects:"Cha c d n nghin cu. Hy to d n u tin!",projectName:"Tn d n",projectNamePlaceholder:"Tn d n nghin cu...",step:{keyword:"Phn tch t kha",competitors:"Nghin cu i th",metadata:"To Metadata"},config:{title:"Cu hnh Nghin cu",projectName:"Tn D n",projectNamePlaceholder:"Nghin cu YouTube ca ti",competitorUrl:"URL Video i th (Ty chn)",fetch:"Ly d liu",pasteUrlHelp:"Dn URL  t ng in t kha, pht hin danh mc v th.",keywordsLabel:"T kha tm kim / Niche",keywordsPlaceholder:"V d: 'hng dn lp trnh', 'cng thc chay', 'gameplay minecraft'",keywordsHelp:"Cc t kha ny s c dng  tm video i th.",category:"Danh mc",published:" xut bn",tags:"Th",noTags:"Khng tm thy th",targetCountry:"Quc gia Mc tiu",videosToAnalyze:"S lng video phn tch",timeRange:"Khong thi gian (Qu kh)",startResearch:"Bt u Nghin cu",warningReSearch:"Cnh bo: Thay i t kha c th yu cu tm kim li."},toast:{error:"Li",enterUrl:"Vui lng nhp URL YouTube trc",apiKeyMissing:"Cha cu hnh API Key YouTube. Vui lng thm trong Ci t.",invalidUrl:"URL YouTube khng hp l",videoFound:" tm thy Video",fetchFailed:"Khng th ly thng tin video"}},I3={welcome:"Cho mng n vi LOG",welcomeBack:"Cho mng tr li",createAccount:"To ti khon ca bn",enterCredentials:"Nhp thng tin ng nhp  tip tc",startCreating:"Bt u to ni dung viral ngay hm nay",signIn:"ng nhp",signUp:"ng k",signUpAction:"ng k",signInAction:"ng nhp",email:"Email",emailPlaceholder:"you@example.com",password:"Mt khu",passwordPlaceholder:"",passwordMinLength:"Phi c t nht 6 k t",fullName:"Tn",namePlaceholder:"Tn ca bn",forgotPassword:"Qun mt khu?",noAccount:"Cha c ti khon?",hasAccount:" c ti khon?",continueWithGoogle:"Tip tc vi Google",orContinueWith:"hoc tip tc vi email",createAccountAction:"To ti khon",accountCreated:" to ti khon!",accountCreatedDesc:"Bn c th ng nhp vi thng tin ca mnh.",passwordTooShort:"Mt khu qu ngn",passwordTooShortDesc:"Mt khu phi c t nht 6 k t",viewPricing:"Xem bng gi",termsAgreement:"Bng cch to ti khon, bn ng  vi",termsOfService:"iu khon dch v",and:"v",privacyPolicy:"Chnh sch bo mt",features:{extractDna:"Trch xut mu DNA viral",extractDnaDesc:"Phn tch video hiu sut cao",aiPowered:"To ni dung bng AI",aiPoweredDesc:"To kch bn trong vi giy",personas:"Nhn vt khn gi",personasDesc:"Hiu ngi xem ca bn",rapidIteration:"Lp li nhanh chng",rapidIterationDesc:"Kim tra v tinh chnh nhanh hn"},unlockSecrets:"M kha b mt",ofViralContent:"ca ni dung viral",heroDescription:"Trch xut mu t video thnh cng, to kch bn gy ting vang v xy dng khn gi nhanh hn bao gi ht."},D3={starter:"Khi u",pro:"Chuyn nghip",ultra:"Cao cp"},M3={justNow:"Va xong",minAgo:"pht trc",hourAgo:"gi trc",hoursAgo:"gi trc",dayAgo:"ngy trc",daysAgo:"ngy trc"},L3={common:C3,nav:_3,settings:k3,dashboard:E3,dnaLab:T3,writer:P3,personas:A3,notes:R3,tubeClone:O3,auth:I3,tier:D3,time:M3},$3={en:j3,vi:L3},qj=f.createContext(void 0);function F3({children:e}){const[t,n]=f.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("app-language");if(a==="en"||a==="vi")return a}return"en"}),r=a=>{n(a),localStorage.setItem("app-language",a)};f.useEffect(()=>{localStorage.getItem("app-language")||localStorage.setItem("app-language",t)},[]);const s=a=>{const i=a.split(".");let l=$3[t];for(const c of i)if(l&&typeof l=="object"&&c in l)l=l[c];else return console.warn(`Translation missing for key: ${a}`),a;return typeof l=="string"?l:a};return o.jsx(qj.Provider,{value:{language:t,setLanguage:r,t:s},children:e})}function dn(){const e=f.useContext(qj);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e}const np=768;function U3(){const[e,t]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${np-1}px)`),r=()=>{t(window.innerWidth<np)};return n.addEventListener("change",r),t(window.innerWidth<np),()=>n.removeEventListener("change",r)},[]),!!e}const qv=Xi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?Gi:"button";return o.jsx(i,{className:Q(qv({variant:t,size:n,className:e})),ref:a,...s})});V.displayName="Button";const ie=f.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:Q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ie.displayName="Input";var V3="Separator",j0="horizontal",z3=["horizontal","vertical"],Gj=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=j0,...s}=e,a=B3(r)?r:j0,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(fe.div,{"data-orientation":a,...l,...s,ref:t})});Gj.displayName=V3;function B3(e){return z3.includes(e)}var Yj=Gj;const Qj=f.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx(Yj,{ref:s,decorative:n,orientation:t,className:Q("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Qj.displayName=Yj.displayName;var rp="focusScope.autoFocusOnMount",sp="focusScope.autoFocusOnUnmount",C0={bubbles:!1,cancelable:!0},W3="FocusScope",Uh=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=f.useState(null),u=ot(s),h=ot(a),d=f.useRef(null),m=Te(t,g=>c(g)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let g=function(y){if(p.paused||!l)return;const S=y.target;l.contains(S)?d.current=S:Es(d.current,{select:!0})},w=function(y){if(p.paused||!l)return;const S=y.relatedTarget;S!==null&&(l.contains(S)||Es(d.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const j of y)j.removedNodes.length>0&&Es(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,p.paused]),f.useEffect(()=>{if(l){k0.add(p);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(rp,C0);l.addEventListener(rp,u),l.dispatchEvent(x),x.defaultPrevented||(H3(Q3(Xj(l)),{select:!0}),document.activeElement===g&&Es(l))}return()=>{l.removeEventListener(rp,u),setTimeout(()=>{const x=new CustomEvent(sp,C0);l.addEventListener(sp,h),l.dispatchEvent(x),x.defaultPrevented||Es(g??document.body,{select:!0}),l.removeEventListener(sp,h),k0.remove(p)},0)}}},[l,u,h,p]);const b=f.useCallback(g=>{if(!n&&!r||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[y,S]=K3(v);y&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&Es(y,{select:!0})):g.shiftKey&&x===y&&(g.preventDefault(),n&&Es(S,{select:!0})):x===v&&g.preventDefault()}},[n,r,p.paused]);return o.jsx(fe.div,{tabIndex:-1,...i,ref:m,onKeyDown:b})});Uh.displayName=W3;function H3(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Es(r,{select:t}),document.activeElement!==n)return}function K3(e){const t=Xj(e),n=_0(t,e),r=_0(t.reverse(),e);return[n,r]}function Xj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function _0(e,t){for(const n of e)if(!q3(n,{upTo:t}))return n}function q3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function G3(e){return e instanceof HTMLInputElement&&"select"in e}function Es(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&G3(e)&&t&&e.select()}}var k0=Y3();function Y3(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=E0(e,t),e.unshift(t)},remove(t){var n;e=E0(e,t),(n=e[0])==null||n.resume()}}}function E0(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Q3(e){return e.filter(t=>t.tagName!=="A")}var op=0;function Gv(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??T0()),document.body.insertAdjacentElement("beforeend",e[1]??T0()),op++,()=>{op===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),op--}},[])}function T0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ad="right-scroll-bar-position",id="width-before-scroll-bar",X3="with-scroll-bars-hidden",J3="--removed-body-scroll-bar-size";function ap(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Z3(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var e$=typeof window<"u"?f.useLayoutEffect:f.useEffect,P0=new WeakMap;function t$(e,t){var n=Z3(null,function(r){return e.forEach(function(s){return ap(s,r)})});return e$(function(){var r=P0.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||ap(l,null)}),a.forEach(function(l){s.has(l)||ap(l,i)})}P0.set(n,e)},[e]),n}function n$(e){return e}function r$(e,t){t===void 0&&(t=n$);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var h=i;i=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){i.push(h),u()},filter:function(h){return i=i.filter(h),n}}}};return s}function s$(e){e===void 0&&(e={});var t=r$(null);return t.options=Or({async:!0,ssr:!1},e),t}var Jj=function(e){var t=e.sideCar,n=ol(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,Or({},n))};Jj.isSideCarExport=!0;function o$(e,t){return e.useMedium(t),Jj}var Zj=s$(),ip=function(){},Vh=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:ip,onWheelCapture:ip,onTouchMoveCapture:ip}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,d=e.shards,m=e.sideCar,p=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,y=e.gapMode,S=ol(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=t$([n,t]),C=Or(Or({},S),s);return f.createElement(f.Fragment,null,h&&f.createElement(j,{sideCar:Zj,removeScrollBar:u,shards:d,noRelative:p,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?f.cloneElement(f.Children.only(l),Or(Or({},C),{ref:N})):f.createElement(v,Or({},C,{className:c,ref:N}),l))});Vh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vh.classNames={fullWidth:id,zeroRight:ad};var a$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function i$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=a$();return t&&e.setAttribute("nonce",t),e}function l$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function c$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var u$=function(){var e=0,t=null;return{add:function(n){e==0&&(t=i$())&&(l$(t,n),c$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},d$=function(){var e=u$();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},eC=function(){var e=d$(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},h$={left:0,top:0,right:0,gap:0},lp=function(e){return parseInt(e||"",10)||0},f$=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[lp(n),lp(r),lp(s)]},p$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return h$;var t=f$(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},m$=eC(),gi="data-scroll-locked",g$=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(X3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(gi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ad,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(id,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ad," .").concat(ad,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(id," .").concat(id,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gi,`] {
    `).concat(J3,": ").concat(l,`px;
  }
`)},A0=function(){var e=parseInt(document.body.getAttribute(gi)||"0",10);return isFinite(e)?e:0},v$=function(){f.useEffect(function(){return document.body.setAttribute(gi,(A0()+1).toString()),function(){var e=A0()-1;e<=0?document.body.removeAttribute(gi):document.body.setAttribute(gi,e.toString())}},[])},y$=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;v$();var a=f.useMemo(function(){return p$(s)},[s]);return f.createElement(m$,{styles:g$(a,!t,s,n?"":"!important")})},Xm=!1;if(typeof window<"u")try{var $u=Object.defineProperty({},"passive",{get:function(){return Xm=!0,!0}});window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{Xm=!1}var Da=Xm?{passive:!1}:!1,x$=function(e){return e.tagName==="TEXTAREA"},tC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!x$(e)&&n[t]==="visible")},w$=function(e){return tC(e,"overflowY")},b$=function(e){return tC(e,"overflowX")},R0=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nC(e,r);if(s){var a=rC(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},S$=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},N$=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nC=function(e,t){return e==="v"?w$(t):b$(t)},rC=function(e,t){return e==="v"?S$(t):N$(t)},j$=function(e,t){return e==="h"&&t==="rtl"?-1:1},C$=function(e,t,n,r,s){var a=j$(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,h=i>0,d=0,m=0;do{if(!l)break;var p=rC(e,l),b=p[0],g=p[1],w=p[2],x=g-w-a*b;(b||x)&&nC(e,l)&&(d+=x,m+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(d)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},Fu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},O0=function(e){return[e.deltaX,e.deltaY]},I0=function(e){return e&&"current"in e?e.current:e},_$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},k$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},E$=0,Ma=[];function T$(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(E$++)[0],a=f.useState(eC)[0],i=f.useRef(e);f.useEffect(function(){i.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=AL([e.lockRef.current],(e.shards||[]).map(I0),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=Fu(g),v=n.current,y="deltaX"in g?g.deltaX:v[0]-x[0],S="deltaY"in g?g.deltaY:v[1]-x[1],j,N=g.target,C=Math.abs(y)>Math.abs(S)?"h":"v";if("touches"in g&&C==="h"&&N.type==="range")return!1;var _=R0(C,N);if(!_)return!0;if(_?j=C:(j=C==="v"?"h":"v",_=R0(C,N)),!_)return!1;if(!r.current&&"changedTouches"in g&&(y||S)&&(r.current=j),!j)return!0;var k=r.current||j;return C$(k,w,g,k==="h"?y:S,!0)},[]),c=f.useCallback(function(g){var w=g;if(!(!Ma.length||Ma[Ma.length-1]!==a)){var x="deltaY"in w?O0(w):Fu(w),v=t.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&_$(j.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var y=(i.current.shards||[]).map(I0).filter(Boolean).filter(function(j){return j.contains(w.target)}),S=y.length>0?l(w,y[0]):!i.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=f.useCallback(function(g,w,x,v){var y={name:g,delta:w,target:x,should:v,shadowParent:P$(x)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(S){return S!==y})},1)},[]),h=f.useCallback(function(g){n.current=Fu(g),r.current=void 0},[]),d=f.useCallback(function(g){u(g.type,O0(g),g.target,l(g,e.lockRef.current))},[]),m=f.useCallback(function(g){u(g.type,Fu(g),g.target,l(g,e.lockRef.current))},[]);f.useEffect(function(){return Ma.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Da),document.addEventListener("touchmove",c,Da),document.addEventListener("touchstart",h,Da),function(){Ma=Ma.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Da),document.removeEventListener("touchmove",c,Da),document.removeEventListener("touchstart",h,Da)}},[]);var p=e.removeScrollBar,b=e.inert;return f.createElement(f.Fragment,null,b?f.createElement(a,{styles:k$(s)}):null,p?f.createElement(y$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function P$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const A$=o$(Zj,T$);var zh=f.forwardRef(function(e,t){return f.createElement(Vh,Or({},e,{ref:t,sideCar:A$}))});zh.classNames=Vh.classNames;var R$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},La=new WeakMap,Uu=new WeakMap,Vu={},cp=0,sC=function(e){return e&&(e.host||sC(e.parentNode))},O$=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},I$=function(e,t,n,r){var s=O$(t,Array.isArray(e)?e:[e]);Vu[n]||(Vu[n]=new WeakMap);var a=Vu[n],i=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var h=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(r),b=p!==null&&p!=="false",g=(La.get(m)||0)+1,w=(a.get(m)||0)+1;La.set(m,g),a.set(m,w),i.push(m),g===1&&b&&Uu.set(m,!0),w===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(t),l.clear(),cp++,function(){i.forEach(function(d){var m=La.get(d)-1,p=a.get(d)-1;La.set(d,m),a.set(d,p),m||(Uu.has(d)||d.removeAttribute(r),Uu.delete(d)),p||d.removeAttribute(n)}),cp--,cp||(La=new WeakMap,La=new WeakMap,Uu=new WeakMap,Vu={})}},Yv=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=R$(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),I$(r,s,n,"aria-hidden")):function(){return null}},Bh="Dialog",[oC,aC]=Lt(Bh),[D$,Sr]=oC(Bh),iC=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,h]=$n({prop:r,defaultProp:s??!1,onChange:a,caller:Bh});return o.jsx(D$,{scope:t,triggerRef:l,contentRef:c,contentId:ln(),titleId:ln(),descriptionId:ln(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(d=>!d),[h]),modal:i,children:n})};iC.displayName=Bh;var lC="DialogTrigger",cC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Sr(lC,n),a=Te(t,s.triggerRef);return o.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Jv(s.open),...r,ref:a,onClick:oe(e.onClick,s.onOpenToggle)})});cC.displayName=lC;var Qv="DialogPortal",[M$,uC]=oC(Qv,{forceMount:void 0}),dC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=Sr(Qv,t);return o.jsx(M$,{scope:t,forceMount:n,children:f.Children.map(r,i=>o.jsx(Xt,{present:n||a.open,children:o.jsx(zc,{asChild:!0,container:s,children:i})}))})};dC.displayName=Qv;var Gd="DialogOverlay",hC=f.forwardRef((e,t)=>{const n=uC(Gd,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Sr(Gd,e.__scopeDialog);return a.modal?o.jsx(Xt,{present:r||a.open,children:o.jsx($$,{...s,ref:t})}):null});hC.displayName=Gd;var L$=ra("DialogOverlay.RemoveScroll"),$$=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Sr(Gd,n);return o.jsx(zh,{as:L$,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(fe.div,{"data-state":Jv(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),la="DialogContent",fC=f.forwardRef((e,t)=>{const n=uC(la,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=Sr(la,e.__scopeDialog);return o.jsx(Xt,{present:r||a.open,children:a.modal?o.jsx(F$,{...s,ref:t}):o.jsx(U$,{...s,ref:t})})});fC.displayName=la;var F$=f.forwardRef((e,t)=>{const n=Sr(la,e.__scopeDialog),r=f.useRef(null),s=Te(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return Yv(a)},[]),o.jsx(pC,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oe(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:oe(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:oe(e.onFocusOutside,a=>a.preventDefault())})}),U$=f.forwardRef((e,t)=>{const n=Sr(la,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(pC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),pC=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=Sr(la,n),c=f.useRef(null),u=Te(t,c);return Gv(),o.jsxs(o.Fragment,{children:[o.jsx(Uh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Qi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Jv(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(z$,{titleId:l.titleId}),o.jsx(W$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Xv="DialogTitle",mC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Sr(Xv,n);return o.jsx(fe.h2,{id:s.titleId,...r,ref:t})});mC.displayName=Xv;var gC="DialogDescription",vC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Sr(gC,n);return o.jsx(fe.p,{id:s.descriptionId,...r,ref:t})});vC.displayName=gC;var yC="DialogClose",xC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Sr(yC,n);return o.jsx(fe.button,{type:"button",...r,ref:t,onClick:oe(e.onClick,()=>s.onOpenChange(!1))})});xC.displayName=yC;function Jv(e){return e?"open":"closed"}var wC="DialogTitleWarning",[V$,bC]=T2(wC,{contentName:la,titleName:Xv,docsSlug:"dialog"}),z$=({titleId:e})=>{const t=bC(wC),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},B$="DialogDescriptionWarning",W$=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bC(B$).contentName}}.`;return f.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Zv=iC,ey=cC,ty=dC,Kc=hC,qc=fC,Gc=mC,Yc=vC,Wh=xC;const SC=Zv,H$=ey,K$=ty,NC=f.forwardRef(({className:e,...t},n)=>o.jsx(Kc,{className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));NC.displayName=Kc.displayName;const q$=Xi("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ny=f.forwardRef(({side:e="right",className:t,children:n,...r},s)=>o.jsxs(K$,{children:[o.jsx(NC,{}),o.jsxs(qc,{ref:s,className:Q(q$({side:e}),t),...r,children:[n,o.jsxs(Wh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(ps,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ny.displayName=qc.displayName;const jC=({className:e,...t})=>o.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});jC.displayName="SheetHeader";const CC=f.forwardRef(({className:e,...t},n)=>o.jsx(Gc,{ref:n,className:Q("text-lg font-semibold text-foreground",e),...t}));CC.displayName=Gc.displayName;const G$=f.forwardRef(({className:e,...t},n)=>o.jsx(Yc,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));G$.displayName=Yc.displayName;function D0({className:e,...t}){return o.jsx("div",{className:Q("animate-pulse rounded-md bg-muted",e),...t})}const Y$="sidebar:state",Q$=60*60*24*7,X$="16rem",J$="18rem",Z$="3rem",eF="b",_C=f.createContext(null);function Qc(){const e=f.useContext(_C);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const kC=f.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:s,children:a,...i},l)=>{const c=U3(),[u,h]=f.useState(!1),[d,m]=f.useState(e),p=t??d,b=f.useCallback(v=>{const y=typeof v=="function"?v(p):v;n?n(y):m(y),document.cookie=`${Y$}=${y}; path=/; max-age=${Q$}`},[n,p]),g=f.useCallback(()=>c?h(v=>!v):b(v=>!v),[c,b,h]);f.useEffect(()=>{const v=y=>{y.key===eF&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const w=p?"expanded":"collapsed",x=f.useMemo(()=>({state:w,open:p,setOpen:b,isMobile:c,openMobile:u,setOpenMobile:h,toggleSidebar:g}),[w,p,b,c,u,h,g]);return o.jsx(_C.Provider,{value:x,children:o.jsx(rj,{delayDuration:0,children:o.jsx("div",{style:{"--sidebar-width":X$,"--sidebar-width-icon":Z$,...s},className:Q("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...i,children:a})})})});kC.displayName="SidebarProvider";const EC=f.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},i)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:h}=Qc();return n==="none"?o.jsx("div",{className:Q("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:s}):l?o.jsx(SC,{open:u,onOpenChange:h,...a,children:o.jsx(ny,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":J$},side:e,children:o.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):o.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[o.jsx("div",{className:Q("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),o.jsx("div",{className:Q("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:o.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});EC.displayName="Sidebar";const TC=f.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:s}=Qc();return o.jsx(V,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Q("h-7 w-7",e),onClick:a=>{t==null||t(a),s()},...n,children:o.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})})});TC.displayName="SidebarTrigger";const tF=f.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Qc();return o.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Q("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});tF.displayName="SidebarRail";const PC=f.forwardRef(({className:e,...t},n)=>o.jsx("main",{ref:n,className:Q("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));PC.displayName="SidebarInset";const nF=f.forwardRef(({className:e,...t},n)=>o.jsx(ie,{ref:n,"data-sidebar":"input",className:Q("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));nF.displayName="SidebarInput";const AC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"header",className:Q("flex flex-col gap-2 p-2",e),...t}));AC.displayName="SidebarHeader";const RC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"footer",className:Q("flex flex-col gap-2 p-2",e),...t}));RC.displayName="SidebarFooter";const rF=f.forwardRef(({className:e,...t},n)=>o.jsx(Qj,{ref:n,"data-sidebar":"separator",className:Q("mx-2 w-auto bg-sidebar-border",e),...t}));rF.displayName="SidebarSeparator";const OC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"content",className:Q("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));OC.displayName="SidebarContent";const IC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group",className:Q("relative flex w-full min-w-0 flex-col p-2",e),...t}));IC.displayName="SidebarGroup";const DC=f.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Gi:"div";return o.jsx(s,{ref:r,"data-sidebar":"group-label",className:Q("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});DC.displayName="SidebarGroupLabel";const sF=f.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Gi:"button";return o.jsx(s,{ref:r,"data-sidebar":"group-action",className:Q("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});sF.displayName="SidebarGroupAction";const MC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group-content",className:Q("w-full text-sm",e),...t}));MC.displayName="SidebarGroupContent";const Jm=f.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu",className:Q("flex w-full min-w-0 flex-col gap-1",e),...t}));Jm.displayName="SidebarMenu";const Ol=f.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Q("group/menu-item relative",e),...t}));Ol.displayName="SidebarMenuItem";const oF=Xi("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Il=f.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:s,className:a,...i},l)=>{const c=e?Gi:"button",{isMobile:u,state:h}=Qc(),d=o.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:Q(oF({variant:n,size:r}),a),...i});return s?(typeof s=="string"&&(s={children:s}),o.jsxs(KD,{children:[o.jsx(qD,{asChild:!0,children:d}),o.jsx(sj,{side:"right",align:"center",hidden:h!=="collapsed"||u,...s})]})):d});Il.displayName="SidebarMenuButton";const aF=f.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},s)=>{const a=t?Gi:"button";return o.jsx(a,{ref:s,"data-sidebar":"menu-action",className:Q("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});aF.displayName="SidebarMenuAction";const iF=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Q("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));iF.displayName="SidebarMenuBadge";const lF=f.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const s=f.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return o.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Q("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&o.jsx(D0,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),o.jsx(D0,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});lF.displayName="SidebarMenuSkeleton";const cF=f.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Q("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));cF.displayName="SidebarMenuSub";const uF=f.forwardRef(({...e},t)=>o.jsx("li",{ref:t,...e}));uF.displayName="SidebarMenuSubItem";const dF=f.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...s},a)=>{const i=e?Gi:"a";return o.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:Q("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});dF.displayName="SidebarMenuSubButton";const Yd=f.forwardRef(({className:e,activeClassName:t,pendingClassName:n,to:r,...s},a)=>o.jsx(_L,{ref:a,to:r,className:({isActive:i,isPending:l})=>Q(e,i&&t,l&&n),...s}));Yd.displayName="NavLink";const hF=[{titleKey:"nav.dashboard",url:"/",icon:p1},{titleKey:"nav.dnaLab",url:"/dna-lab",icon:bo},{titleKey:"nav.personas",url:"/personas",icon:$i},{titleKey:"nav.writer",url:"/writer",icon:uo},{titleKey:"nav.tubeClone",url:"/tubeclone",icon:Dn},{titleKey:"nav.notes",url:"/notes",icon:gm}];function fF(){const{state:e,toggleSidebar:t}=Qc(),{signOut:n}=Sn(),{t:r}=dn(),s=e==="collapsed";return o.jsxs(EC,{collapsible:"icon",className:"border-r border-border/50",children:[o.jsx(AC,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-primary",children:o.jsx(jR,{className:"h-5 w-5 text-primary-foreground"})}),!s&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-lg font-semibold tracking-tight",children:"LOG"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Content Platform"})]})]})}),o.jsx(OC,{children:o.jsxs(IC,{children:[o.jsx(DC,{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground/70",children:r("nav.workspace")}),o.jsx(MC,{children:o.jsx(Jm,{children:hF.map(a=>o.jsx(Ol,{children:o.jsx(Il,{asChild:!0,tooltip:r(a.titleKey),children:o.jsxs(Yd,{to:a.url,end:a.url==="/",className:"flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200 hover:bg-accent",activeClassName:"bg-primary/10 text-primary",children:[o.jsx(a.icon,{className:"h-5 w-5 shrink-0"}),o.jsx("span",{children:r(a.titleKey)})]})})},a.titleKey))})})]})}),o.jsx(RC,{className:"p-2 space-y-2",children:o.jsxs(Jm,{children:[o.jsx(Ol,{children:o.jsx(Il,{asChild:!0,tooltip:s?"Expand Sidebar":r("nav.collapse"),children:o.jsxs(V,{variant:"ghost",onClick:t,className:"w-full justify-start gap-3 rounded-lg px-3 py-2.5 text-sm font-medium hover:bg-accent",children:[s?o.jsx(MR,{className:"h-5 w-5 shrink-0"}):o.jsx(DR,{className:"h-5 w-5 shrink-0"}),!s&&o.jsx("span",{children:r("nav.collapse")})]})})}),o.jsx(Ol,{children:o.jsx(Il,{asChild:!0,tooltip:r("nav.settings"),children:o.jsxs(Yd,{to:"/settings",className:"flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200 hover:bg-accent",activeClassName:"bg-primary/10 text-primary",children:[o.jsx(g1,{className:"h-5 w-5 shrink-0"}),o.jsx("span",{children:r("nav.settings")})]})})}),o.jsx(Ol,{children:o.jsx(Il,{asChild:!0,tooltip:r("nav.logout"),children:o.jsxs(V,{variant:"ghost",onClick:n,className:"w-full justify-start gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-destructive hover:bg-destructive/10 hover:text-destructive",children:[o.jsx(PR,{className:"h-5 w-5 shrink-0"}),!s&&o.jsx("span",{children:r("nav.logout")})]})})})]})})]})}const pF=[{titleKey:"nav.home",url:"/",icon:p1},{titleKey:"nav.dna",url:"/dna-lab",icon:bo},{titleKey:"nav.personas",url:"/personas",icon:$i},{titleKey:"nav.writer",url:"/writer",icon:uo},{titleKey:"nav.tubeClone",url:"/tubeclone",icon:Dn}];function mF(){const{t:e}=dn();return o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 border-t border-border/50 bg-card/80 backdrop-blur-xl md:hidden",children:o.jsx("div",{className:"flex items-center justify-around px-2 py-2 safe-area-pb",children:pF.map(t=>o.jsxs(Yd,{to:t.url,end:t.url==="/",className:"flex flex-col items-center gap-1 rounded-lg px-3 py-2 text-muted-foreground transition-colors",activeClassName:"text-primary",children:[o.jsx(t.icon,{className:"h-5 w-5"}),o.jsx("span",{className:"text-[10px] font-medium",children:e(t.titleKey)})]},t.titleKey))})})}var LC={exports:{}},$C={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=f;function gF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vF=typeof Object.is=="function"?Object.is:gF,yF=zi.useState,xF=zi.useEffect,wF=zi.useLayoutEffect,bF=zi.useDebugValue;function SF(e,t){var n=t(),r=yF({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return wF(function(){s.value=n,s.getSnapshot=t,up(s)&&a({inst:s})},[e,n,t]),xF(function(){return up(s)&&a({inst:s}),e(function(){up(s)&&a({inst:s})})},[e]),bF(n),n}function up(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vF(e,n)}catch{return!0}}function NF(e,t){return t()}var jF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?NF:SF;$C.useSyncExternalStore=zi.useSyncExternalStore!==void 0?zi.useSyncExternalStore:jF;LC.exports=$C;var CF=LC.exports;function _F(){return CF.useSyncExternalStore(kF,()=>!0,()=>!1)}function kF(){return()=>{}}var ry="Avatar",[EF,yW]=Lt(ry),[TF,FC]=EF(ry),UC=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=f.useState("idle");return o.jsx(TF,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(fe.span,{...r,ref:t})})});UC.displayName=ry;var VC="AvatarImage",zC=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,i=FC(VC,n),l=PF(r,a),c=ot(u=>{s(u),i.onImageLoadingStatusChange(u)});return at(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(fe.img,{...a,ref:t,src:r}):null});zC.displayName=VC;var BC="AvatarFallback",WC=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=FC(BC,n),[i,l]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?o.jsx(fe.span,{...s,ref:t}):null});WC.displayName=BC;function M0(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function PF(e,{referrerPolicy:t,crossOrigin:n}){const r=_F(),s=f.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[i,l]=f.useState(()=>M0(a,e));return at(()=>{l(M0(a,e))},[a,e]),at(()=>{const c=d=>()=>{l(d)};if(!a)return;const u=c("loaded"),h=c("error");return a.addEventListener("load",u),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",h)}},[a,n,t]),i}var HC=UC,KC=zC,qC=WC;const sy=f.forwardRef(({className:e,...t},n)=>o.jsx(HC,{ref:n,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));sy.displayName=HC.displayName;const GC=f.forwardRef(({className:e,...t},n)=>o.jsx(KC,{ref:n,className:Q("aspect-square h-full w-full",e),...t}));GC.displayName=KC.displayName;const oy=f.forwardRef(({className:e,...t},n)=>o.jsx(qC,{ref:n,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));oy.displayName=qC.displayName;const L0={dna_evolution:["pro","ultra"],ai_suggest_angle:["pro","ultra"],batch_dna:["pro","ultra"],structure_innovation:["pro","ultra"],flop_analysis:["pro","ultra"],tubeclone:["ultra"]},zu={starter:0,pro:1,ultra:2};function YC(){const{user:e}=Sn(),[t,n]=f.useState({tier:"starter",startedAt:null,expiresAt:null,isExpired:!1,loading:!0}),r=f.useCallback(async()=>{if(!e){n(u=>({...u,tier:"starter",loading:!1}));return}try{const{data:u,error:h}=await De.from("profiles").select("*").eq("id",e.id).single();if(h){console.error("Error fetching subscription:",h),n(x=>({...x,tier:"starter",loading:!1}));return}const d=u,m=d==null?void 0:d.subscription_tier,p=d==null?void 0:d.subscription_started_at,b=d==null?void 0:d.subscription_expires_at,g=b?new Date(b):null,w=g?g<new Date:!1;n({tier:w?"starter":m||"starter",startedAt:p?new Date(p):null,expiresAt:g,isExpired:w,loading:!1})}catch(u){console.error("Error in fetchSubscription:",u),n(h=>({...h,tier:"starter",loading:!1}))}},[e]);f.useEffect(()=>{r()},[r]);const s=f.useCallback(u=>L0[u].includes(t.tier),[t.tier]),a=f.useCallback(u=>zu[t.tier]>=zu[u],[t.tier]),i=f.useMemo(()=>a("pro"),[a]),l=f.useMemo(()=>t.tier==="ultra",[t.tier]),c=f.useCallback(u=>L0[u].reduce((d,m)=>zu[m]<zu[d]?m:d),[]);return{...t,canAccessFeature:s,hasMinimumTier:a,isPro:i,isUltra:l,getRequiredTier:c,refetch:r}}const AF=Xi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Re({className:e,variant:t,...n}){return o.jsx("div",{className:Q(AF({variant:t}),e),...n})}const RF={starter:{icon:dt,label:"Starter",className:"bg-gray-500/10 text-gray-400 border-gray-500/20"},pro:{icon:ns,label:"Pro",className:"bg-blue-500/10 text-blue-500 border-blue-500/20"},ultra:{icon:Rd,label:"Ultra",className:"bg-amber-500/10 text-amber-500 border-amber-500/20"}};function OF({children:e}){var d;const{user:t}=Sn(),{tier:n,loading:r}=YC(),s=xa(),[a,i]=f.useState(null);f.useEffect(()=>{t&&De.from("profiles").select("full_name, avatar_url").eq("id",t.id).maybeSingle().then(({data:m})=>i(m))},[t]);const l=(a==null?void 0:a.full_name)||((d=t==null?void 0:t.email)==null?void 0:d.split("@")[0])||"User",c=l.slice(0,2).toUpperCase(),u=RF[n],h=u.icon;return o.jsx(kC,{children:o.jsxs("div",{className:"flex min-h-screen w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsx(fF,{})}),o.jsxs(PC,{className:"flex flex-1 flex-col",children:[o.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b border-border/50 bg-background/80 px-4 backdrop-blur-xl md:h-16 md:px-6",children:[o.jsx(TC,{className:"hidden md:flex"}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"flex items-center gap-3",children:[!r&&o.jsxs(Re,{variant:"outline",className:`cursor-pointer gap-1 ${u.className}`,onClick:()=>s("/pricing"),children:[o.jsx(h,{className:"h-3 w-3"}),o.jsx("span",{className:"hidden sm:inline",children:u.label})]}),o.jsx("span",{className:"text-sm font-medium text-foreground hidden sm:block",children:l}),o.jsxs(sy,{className:"h-8 w-8",children:[o.jsx(GC,{src:(a==null?void 0:a.avatar_url)||void 0,alt:l}),o.jsx(oy,{className:"bg-primary/10 text-primary text-xs",children:c})]})]})]}),o.jsx("main",{className:"flex-1 overflow-auto pb-20 md:pb-0",children:e})]}),o.jsx(mF,{})]})})}const Qd=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Qd.displayName="Card";const Zm=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));Zm.displayName="CardHeader";const eg=f.forwardRef(({className:e,...t},n)=>o.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t}));eg.displayName="CardTitle";const QC=f.forwardRef(({className:e,...t},n)=>o.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));QC.displayName="CardDescription";const Xd=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));Xd.displayName="CardContent";const XC=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t}));XC.displayName="CardFooter";var ay="Progress",iy=100,[IF,xW]=Lt(ay),[DF,MF]=IF(ay),JC=f.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=LF,...i}=e;(s||s===0)&&!$0(s)&&console.error($F(`${s}`,"Progress"));const l=$0(s)?s:iy;r!==null&&!F0(r,l)&&console.error(FF(`${r}`,"Progress"));const c=F0(r,l)?r:null,u=Jd(c)?a(c,l):void 0;return o.jsx(DF,{scope:n,value:c,max:l,children:o.jsx(fe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Jd(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":t_(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});JC.displayName=ay;var ZC="ProgressIndicator",e_=f.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=MF(ZC,n);return o.jsx(fe.div,{"data-state":t_(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});e_.displayName=ZC;function LF(e,t){return`${Math.round(e/t*100)}%`}function t_(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Jd(e){return typeof e=="number"}function $0(e){return Jd(e)&&!isNaN(e)&&e>0}function F0(e,t){return Jd(e)&&!isNaN(e)&&e<=t&&e>=0}function $F(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${iy}\`.`}function FF(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${iy} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n_=JC,UF=e_;const al=f.forwardRef(({className:e,value:t,...n},r)=>o.jsx(n_,{ref:r,className:Q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(UF,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));al.displayName=n_.displayName;const Nl=[{id:1,title:"Welcome to ScriptLab!",description:"Your AI-powered content creation studio. Let's take a quick tour of the key features that will help you create viral content.",icon:dt,color:"text-primary",tips:["Create scripts based on proven viral formulas","Extract DNA from successful videos","Build personas for your target audience"]},{id:2,title:"DNA Extraction",description:"Extract the viral DNA from any YouTube video. Our AI analyzes successful content to identify patterns, hooks, pacing, and retention tactics.",icon:bo,color:"text-purple-500",tips:["Paste any YouTube URL to start extraction","AI analyzes transcript, structure, and engagement","Save DNA templates for future script generation"],action:{label:"Try DNA Extraction",path:"/dna-lab"}},{id:3,title:"Script Generation",description:"Generate viral-ready scripts using your extracted DNA templates. Choose between original ideas or rewriting existing content.",icon:uo,color:"text-blue-500",tips:["Select a DNA template for consistent style","Add viral and flop references for context","Use version history to track changes"],action:{label:"Create Your First Script",path:"/writer"}},{id:4,title:"Audience Personas",description:"Define your target audience with detailed personas. The AI uses these to tailor content for maximum engagement.",icon:$i,color:"text-green-500",tips:["Create personas with demographics and preferences","Define pain points and knowledge level","Apply personas to scripts for targeted content"],action:{label:"Create a Persona",path:"/personas"}},{id:5,title:"Pro Tips",description:"Here are some tips to get the most out of ScriptLab and create content that resonates with your audience.",icon:_h,color:"text-yellow-500",tips:["Add both viral AND flop references for balanced AI learning","Use the score feature to evaluate script quality","Organize scripts into folders for better management","Check version history to restore previous drafts"]}];function VF({onComplete:e,onSkip:t}){const[n,r]=f.useState(0),s=Nl[n],a=(n+1)/Nl.length*100,i=n===Nl.length-1,l=()=>{i?e():r(u=>u+1)},c=()=>{r(u=>Math.max(0,u-1))};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm p-4",children:o.jsx(Qd,{className:"w-full max-w-lg border-border/50 shadow-2xl",children:o.jsxs(Xd,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 ${s.color}`,children:o.jsx(s.icon,{className:"h-5 w-5"})}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",n+1," of ",Nl.length]})]}),o.jsx(V,{variant:"ghost",size:"icon",onClick:t,children:o.jsx(ps,{className:"h-4 w-4"})})]}),o.jsx(al,{value:a,className:"mb-6 h-1"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:s.title}),o.jsx("p",{className:"text-muted-foreground mb-4",children:s.description}),o.jsx("ul",{className:"space-y-2",children:s.tips.map((u,h)=>o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx(sa,{className:"h-4 w-4 text-primary mt-0.5 shrink-0"}),o.jsx("span",{className:"text-sm",children:u})]},h))})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(V,{variant:"ghost",onClick:c,disabled:n===0,children:[o.jsx(bR,{className:"h-4 w-4 mr-1"}),"Previous"]}),o.jsx("div",{className:"flex gap-1",children:Nl.map((u,h)=>o.jsx("button",{className:`h-2 w-2 rounded-full transition-colors ${h===n?"bg-primary":h<n?"bg-primary/50":"bg-muted"}`,onClick:()=>r(h)},h))}),o.jsxs(V,{onClick:l,children:[i?"Get Started":"Next",!i&&o.jsx(Dr,{className:"h-4 w-4 ml-1"})]})]})]})})})}function zF(){const{user:e}=Sn(),[t,n]=f.useState(!1),[r,s]=f.useState(!0);f.useEffect(()=>{if(!e){s(!1);return}(async()=>{const{data:u}=await De.from("profiles").select("created_at").eq("id",e.id).maybeSingle();if(u){const h=`onboarding_completed_${e.id}`;if(!localStorage.getItem(h)){const m=new Date(u.created_at);(new Date().getTime()-m.getTime())/(1e3*60)<5&&n(!0)}}s(!1)})()},[e]);const a=()=>{e&&localStorage.setItem(`onboarding_completed_${e.id}`,"true"),n(!1)};return{showOnboarding:t,loading:r,completeOnboarding:a,skipOnboarding:()=>{a()},resetOnboarding:()=>{e&&(localStorage.removeItem(`onboarding_completed_${e.id}`),n(!0))}}}const ve=f.forwardRef(({className:e,variant:t="default",...n},r)=>o.jsx("div",{ref:r,className:Q("rounded-2xl border border-border/50 bg-card/80 backdrop-blur-sm transition-all duration-300 overflow-hidden",t==="default"&&"shadow-sm hover:shadow-md",t==="elevated"&&"shadow-md hover:shadow-lg hover:-translate-y-0.5",t==="subtle"&&"bg-card/50",e),...n}));ve.displayName="GlassCard";const ut=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));ut.displayName="GlassCardHeader";const xt=f.forwardRef(({className:e,...t},n)=>o.jsx("h3",{ref:n,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));xt.displayName="GlassCardTitle";const Ur=f.forwardRef(({className:e,...t},n)=>o.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Ur.displayName="GlassCardDescription";const be=f.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));be.displayName="GlassCardContent";function U0({title:e,value:t,icon:n,iconColor:r="text-primary"}){return o.jsx(ve,{className:"h-full",children:o.jsxs(be,{className:"p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"rounded-lg bg-muted/50 p-2",children:o.jsx(n,{className:`h-4 w-4 ${r}`})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:e})]}),o.jsx("span",{className:"text-2xl font-bold",children:t})]})})}function Nr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ca(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const r_=6048e5,BF=864e5;let WF={};function Hh(){return WF}function Ec(e,t){var l,c,u,h;const n=Hh(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=Nr(e),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Zd(e){return Ec(e,{weekStartsOn:1})}function s_(e){const t=Nr(e),n=t.getFullYear(),r=ca(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Zd(r),a=ca(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=Zd(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function V0(e){const t=Nr(e);return t.setHours(0,0,0,0),t}function z0(e){const t=Nr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function HF(e,t){const n=V0(e),r=V0(t),s=+n-z0(n),a=+r-z0(r);return Math.round((s-a)/BF)}function KF(e){const t=s_(e),n=ca(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Zd(n)}function qF(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function GF(e){if(!qF(e)&&typeof e!="number")return!1;const t=Nr(e);return!isNaN(Number(t))}function YF(e){const t=Nr(e),n=ca(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const QF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},XF=(e,t,n)=>{let r;const s=QF[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function dp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const JF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tU={date:dp({formats:JF,defaultWidth:"full"}),time:dp({formats:ZF,defaultWidth:"full"}),dateTime:dp({formats:eU,defaultWidth:"full"})},nU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rU=(e,t,n,r)=>nU[e];function jl(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const sU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uU=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dU={ordinalNumber:uU,era:jl({values:sU,defaultWidth:"wide"}),quarter:jl({values:oU,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jl({values:aU,defaultWidth:"wide"}),day:jl({values:iU,defaultWidth:"wide"}),dayPeriod:jl({values:lU,defaultWidth:"wide",formattingValues:cU,defaultFormattingWidth:"wide"})};function Cl(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?fU(l,d=>d.test(i)):hU(l,d=>d.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=t.slice(i.length);return{value:u,rest:h}}}function hU(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function fU(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function pU(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const mU=/^(\d+)(th|st|nd|rd)?/i,gU=/\d+/i,vU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yU={any:[/^b/i,/^(a|c)/i]},xU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wU={any:[/1/i,/2/i,/3/i,/4/i]},bU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_U={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kU={ordinalNumber:pU({matchPattern:mU,parsePattern:gU,valueCallback:e=>parseInt(e,10)}),era:Cl({matchPatterns:vU,defaultMatchWidth:"wide",parsePatterns:yU,defaultParseWidth:"any"}),quarter:Cl({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:wU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Cl({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:SU,defaultParseWidth:"any"}),day:Cl({matchPatterns:NU,defaultMatchWidth:"wide",parsePatterns:jU,defaultParseWidth:"any"}),dayPeriod:Cl({matchPatterns:CU,defaultMatchWidth:"any",parsePatterns:_U,defaultParseWidth:"any"})},EU={code:"en-US",formatDistance:XF,formatLong:tU,formatRelative:rU,localize:dU,match:kU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function TU(e){const t=Nr(e);return HF(t,YF(t))+1}function PU(e){const t=Nr(e),n=+Zd(t)-+KF(t);return Math.round(n/r_)+1}function o_(e,t){var h,d,m,p;const n=Nr(e),r=n.getFullYear(),s=Hh(),a=(t==null?void 0:t.firstWeekContainsDate)??((d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,i=ca(e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const l=Ec(i,t),c=ca(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=Ec(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function AU(e,t){var l,c,u,h;const n=Hh(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=o_(e,t),a=ca(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ec(a,t)}function RU(e,t){const n=Nr(e),r=+Ec(n,t)-+AU(n,t);return Math.round(r/r_)+1}function Ke(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Cs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ke(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Ke(n+1,2)},d(e,t){return Ke(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Ke(e.getHours()%12||12,t.length)},H(e,t){return Ke(e.getHours(),t.length)},m(e,t){return Ke(e.getMinutes(),t.length)},s(e,t){return Ke(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ke(s,t.length)}},$a={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B0={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Cs.y(e,t)},Y:function(e,t,n,r){const s=o_(e,r),a=s>0?s:1-s;if(t==="YY"){const i=a%100;return Ke(i,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ke(a,t.length)},R:function(e,t){const n=s_(e);return Ke(n,t.length)},u:function(e,t){const n=e.getFullYear();return Ke(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ke(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ke(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Cs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ke(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=RU(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Ke(s,t.length)},I:function(e,t,n){const r=PU(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Ke(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Cs.d(e,t)},D:function(e,t,n){const r=TU(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ke(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ke(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ke(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ke(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=$a.noon:r===0?s=$a.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=$a.evening:r>=12?s=$a.afternoon:r>=4?s=$a.morning:s=$a.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Cs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Cs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ke(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ke(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Cs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Cs.s(e,t)},S:function(e,t){return Cs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return H0(r);case"XXXX":case"XX":return Oo(r);case"XXXXX":case"XXX":default:return Oo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return H0(r);case"xxxx":case"xx":return Oo(r);case"xxxxx":case"xxx":default:return Oo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+W0(r,":");case"OOOO":default:return"GMT"+Oo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+W0(r,":");case"zzzz":default:return"GMT"+Oo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Ke(r,t.length)},T:function(e,t,n){const r=e.getTime();return Ke(r,t.length)}};function W0(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+Ke(a,2)}function H0(e,t){return e%60===0?(e>0?"-":"+")+Ke(Math.abs(e)/60,2):Oo(e,t)}function Oo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Ke(Math.trunc(r/60),2),a=Ke(r%60,2);return n+s+t+a}const K0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},a_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},OU=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return K0(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",K0(r,t)).replace("{{time}}",a_(s,t))},IU={p:a_,P:OU},DU=/^D+$/,MU=/^Y+$/,LU=["D","DD","YY","YYYY"];function $U(e){return DU.test(e)}function FU(e){return MU.test(e)}function UU(e,t,n){const r=VU(e,t,n);if(console.warn(r),LU.includes(e))throw new RangeError(r)}function VU(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,WU=/^'([^]*?)'?$/,HU=/''/g,KU=/[a-zA-Z]/;function i_(e,t,n){var h,d,m,p;const r=Hh(),s=r.locale??EU,a=r.firstWeekContainsDate??((d=(h=r.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,i=r.weekStartsOn??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,l=Nr(e);if(!GF(l))throw new RangeError("Invalid time value");let c=t.match(BU).map(b=>{const g=b[0];if(g==="p"||g==="P"){const w=IU[g];return w(b,s.formatLong)}return b}).join("").match(zU).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:qU(b)};if(B0[g])return{isToken:!0,value:b};if(g.match(KU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(FU(g)||$U(g))&&UU(g,t,String(e));const w=B0[g[0]];return w(l,g,s.localize,u)}).join("")}function qU(e){const t=e.match(WU);return t?t[1].replace(HU,"'"):e}function GU({title:e,subtitle:t,status:n="draft",mode:r,date:s,language:a="English",onClick:i}){const l=n==="done";return o.jsx(ve,{variant:"elevated",className:"cursor-pointer transition-all hover:border-primary/50 h-[140px]",onClick:i,children:o.jsxs(be,{className:"p-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Re,{variant:"outline",className:`text-xs uppercase ${l?"bg-green-500/10 text-green-600 border-green-500/30":"bg-muted text-muted-foreground"}`,children:n}),r&&o.jsx(Re,{variant:"secondary",className:"text-xs gap-1",children:r==="new-idea"?o.jsxs(o.Fragment,{children:[o.jsx(_h,{className:"h-3 w-3"}),"Idea"]}):r==="rewrite"?o.jsxs(o.Fragment,{children:[o.jsx(Jr,{className:"h-3 w-3"}),"Rewrite"]}):null})]}),o.jsxs("div",{className:"flex-1 mt-2 space-y-1 min-h-0",children:[o.jsx("h3",{className:"font-semibold line-clamp-1",children:e}),t&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:i_(new Date(s),"dd/MM/yyyy")}),o.jsx("span",{className:"uppercase",children:a})]})]})})}function YU({title:e,description:t,icon:n,to:r,gradient:s}){return o.jsx(bc,{to:r,className:"group block",children:o.jsx(ve,{variant:"elevated",className:"overflow-hidden",children:o.jsx(be,{className:"p-0",children:o.jsxs("div",{className:`p-6 ${s||"bg-gradient-to-br from-primary/5 to-primary/10"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"rounded-xl bg-card/80 p-3 shadow-sm backdrop-blur-sm",children:o.jsx(n,{className:"h-6 w-6 text-primary"})}),o.jsx(fs,{className:"h-5 w-5 text-muted-foreground opacity-0 transition-all duration-300 group-hover:translate-x-1 group-hover:opacity-100"})]}),o.jsxs("div",{className:"mt-4 space-y-1",children:[o.jsx("h3",{className:"font-semibold",children:e}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})]})})})})}function ys(){const[e,t]=f.useState(null),[n,r]=f.useState(!0),{user:s}=Sn(),{toast:a}=Mt(),i=f.useCallback(async()=>{if(!s){t(null),r(!1);return}try{const{data:c,error:u}=await De.from("user_settings").select("*").eq("user_id",s.id).maybeSingle();if(u)throw u;t(c)}catch(c){console.error("Error fetching settings:",c)}finally{r(!1)}},[s]);return f.useEffect(()=>{i()},[i]),{settings:e,loading:n,saveSettings:async c=>{if(!s)return null;try{if(e){const{data:u,error:h}=await De.from("user_settings").update(c).eq("id",e.id).select().single();if(h)throw h;return t(u),a({title:"Success",description:"Settings saved successfully"}),u}else{const{data:u,error:h}=await De.from("user_settings").insert({...c,user_id:s.id}).select().single();if(h)throw h;return t(u),a({title:"Success",description:"Settings saved successfully"}),u}}catch(u){return console.error("Error saving settings:",u),a({title:"Error",description:"Failed to save settings",variant:"destructive"}),null}},refetch:i}}const Pt=async(e,t,n="google/gemini-3-flash-preview")=>{var r,s,a,i;if(!t)throw new Error("OpenRouter API Key not configured. Please enter your key in Settings.");try{const l=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:n,messages:e})});if(!l.ok){const d=((r=(await l.json().catch(()=>({}))).error)==null?void 0:r.message)||`HTTP ${l.status}`;throw l.status===429?new Error("Rate limit exceeded. Please try again later."):l.status===401||l.status===402?new Error("Invalid OpenRouter API Key or out of credits."):new Error(`OpenRouter error: ${d}`)}const u=(i=(a=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:a.message)==null?void 0:i.content;if(!u)throw new Error("No response received from AI");return u}catch(l){throw console.error("OpenRouter Error:",l),new Error(l.message||"Could not connect to OpenRouter")}},hn=e=>{let t=e.replace(/^```json\s*/,"").replace(/^```\s*/,"").replace(/\s*```$/,"");try{return JSON.parse(t)}catch{const r=t.match(/(\{[\s\S]*\}|\[[\s\S]*\])/);if(!r)throw console.error("Failed to extract JSON from:",e),new Error("Could not parse JSON from response");try{return JSON.parse(r[0])}catch(s){throw console.error("JSON Parse Error:",s,"Extracted:",r[0]),new Error("Extracted text was not valid JSON")}}},QU=`
<conflict_resolution_framework>
When DNA and Persona provide conflicting guidance, use this priority matrix to make consistent, quality-driven decisions.

<priority_matrix>

 Content Element       DNA %    Persona % Resolution Rule                                  

 Structure/Flow        100%     0%        DNA defines architecture - follow exactly        
 Pacing/Rhythm         100%     0%        DNA controls tempo and sentence structure        
 Vocabulary            30%      70%       Persona's words, DNA's complexity level          
 Tone/Voice            40%      60%       Persona's tone, DNA's energy level               
 Hook Strategy         80%      20%       DNA's psychological trigger in Persona's voice   
 Objection Handling    20%      80%       Persona's objections, DNA's rhetorical method    
 Examples/Stories      50%      50%       DNA's format, Persona-relevant content           
 Complexity/Depth      40%      60%       Adapt to Persona level, keep DNA progression     

</priority_matrix>

<resolution_examples>

EXAMPLE 1: Tone Conflict
<scenario>
DNA: "Authoritative, expert-driven"
Persona: "Casual, friendly"
Conflict Type: Direct contradiction in voice
</scenario>

<resolution>
Priority: 60% Persona, 40% DNA

 WRONG (100% DNA): "The utilization of this methodology facilitates optimal outcomes..."
 WRONG (100% Persona): "So like, here's a thing you might want to try maybe..."
 RIGHT (Balanced): "Here's how this works  and trust me, the results speak for themselves."

Explanation: Uses casual words ("here's how") and friendly framing ("trust me"), but maintains authoritative confidence ("results speak for themselves"). Persona's tone dominates, DNA's authority energy preserved.
</resolution>

EXAMPLE 2: Vocabulary vs Knowledge Level
<scenario>
DNA: Uses advanced technical terms (ROI, CAC, LTV, conversion rate)
Persona: Beginner knowledge level, needs plain language
Conflict Type: Vocabulary complexity mismatch
</scenario>

<resolution>
Priority: 70% Persona (simplify vocabulary)

 WRONG (100% DNA): "Your CAC should be 3x lower than LTV for optimal ROI."
 RIGHT (Simplified): "You want to spend way less to get a customer than what they're worth to you over time  ideally about 3 times less. That's how you make money."

Explanation: Same DNA concept (3x ratio formula), translated to beginner-accessible language. Structure preserved, vocabulary adapted.
</resolution>

EXAMPLE 3: Hook Strategy Adaptation
<scenario>
DNA: Contrarian hook (challenge common belief aggressively)
Persona: Empathetic, non-confrontational audience
Conflict Type: Hook aggressiveness vs audience sensitivity
</scenario>

<resolution>
Priority: 80% DNA strategy, 20% Persona voice

 WRONG (100% DNA): "Everything you know about X is DEAD WRONG."
 WRONG (100% Persona): "Hey, let me gently share some thoughts about X..."
 RIGHT (Blended): "I used to believe the same thing about X... until I discovered this one detail that changed everything."

Explanation: Keeps contrarian psychology (DNA)  challenges belief, creates curiosity gap. Delivers in empathetic voice (Persona)  "I used to believe" creates connection, not confrontation.
</resolution>

</resolution_examples>

<decision_tree>
Follow this systematic process when conflicts arise:

STEP 1: IDENTIFY Conflict Type
 Structural (sections, flow, architecture)  DNA wins 100%
 Linguistic (word choice, grammar, vocabulary)  Persona wins 70%
 Strategic (hooks, retention tactics, viral psychology)  DNA wins 80%
 Audience Fit (objections, examples, knowledge level)  Persona wins 80%

STEP 2: CHECK for Deal-Breakers
 Is DNA strategy proven viral? If YES  Bias toward DNA
 Is Persona mismatch severe (expert terms for beginners)? If YES  Bias toward Persona
 Is platform critical (formal tone on TikTok)? If YES  Bias toward Persona/Platform
 If multiple deal-breakers  Flag for user decision, don't force-blend

STEP 3: APPLY Priority %
Use the percentage split from the matrix:
- 100/0: One side completely overrides
- 80/20: Strong preference, minor adaptation
- 60/40: Lean toward one, significant influence from other
- 50/50: True balance, blend both equally

STEP 4: VALIDATE Output Quality
Ask these questions before finalizing:
 Does it sound natural? (Not forced or "Franken-content")
 Does it respect Persona's intelligence level?
 Does it preserve DNA's viral psychology mechanisms?
 Would a real human speak/write this way?
</decision_tree>

<edge_cases>

CASE 1: DNA Without Persona Context
If DNA extracted from generic viral content (no specific audience):
 Persona takes 80% priority across all elements EXCEPT Structure
 Keep DNA skeleton, adapt everything else to Persona

CASE 2: Generic/Vague Persona
If Persona has minimal detail or is too generic ("wants value"):
 DNA takes 80% priority - use proven patterns as primary guide
 Make conservative assumptions for Persona elements

CASE 3: Both Highly Specific and Conflicting
When both DNA and Persona are detailed but contradictory:
 Follow matrix strictly
 Document adaptation: "Adapted DNA [element X] to fit Persona [constraint Y]"
 If irreconcilable  Flag to user

CASE 4: Platform-Specific Overrides
Platform conventions override both DNA and Persona:
 TikTok/Instagram Reels  Always casual, always fast-paced
 LinkedIn/Medium  DNA structure sacred, adapt tone only
 YouTube  Balance 50/50 unless strong Persona specification
 Email/Newsletter  Persona 70%, DNA structure 30%

CASE 5: Knowledge Level Safety Net
Automatic simplification rule:
IF (DNA complexity > Persona knowledgeLevel + 1):
    Simplify vocabulary automatically (override DNA %)
    Maintain DNA structure and logic
    Add "explain like I'm [knowledge level]" constraint

</edge_cases>

<anti_patterns>
Common mistakes to AVOID:

1.  Franken-Content: Randomly mixing DNA and Persona without strategy
    Instead: Apply matrix consistently across entire script

2.  Ignoring Platform: Using formal tone on TikTok because DNA says so
    Instead: Platform > DNA tone (use edge case rules)

3.  Over-Simplification: Beginner persona = treat audience like children
    Instead: Simplify vocabulary, not intelligence or insight quality

4.  Forcing Conflicts: Trying to blend when fundamental incompatibility exists
    Instead: Choose the stronger strategy or flag to user

5.  Inconsistent Application: Using different rules for different sections
    Instead: Apply same conflict resolution logic throughout entire script
</anti_patterns>

</conflict_resolution_framework>`,l_=(e,t)=>{var r;const n=[];if(e!=null&&e.tone&&(t!=null&&t.preferred_tone)){const s=e.tone.toLowerCase(),a=t.preferred_tone.toLowerCase(),i=[{dna:"authoritative",persona:"casual",conflict:"DNA is authoritative but Persona prefers casual tone"},{dna:"formal",persona:"casual",conflict:"DNA is formal but Persona prefers casual tone"},{dna:"aggressive",persona:"empathetic",conflict:"DNA is aggressive but Persona prefers empathetic tone"},{dna:"serious",persona:"humorous",conflict:"DNA is serious but Persona prefers humorous tone"}];for(const l of i)s.includes(l.dna)&&a.includes(l.persona)&&n.push(l.conflict)}if(e!=null&&e.vocabulary&&(t!=null&&t.knowledge_level)){const s=e.vocabulary.toLowerCase().includes("technical")||e.vocabulary.toLowerCase().includes("jargon")||e.vocabulary.toLowerCase().includes("advanced")||e.vocabulary.toLowerCase().includes("expert"),a=t.knowledge_level==="beginner";s&&a&&n.push("DNA uses advanced vocabulary but Persona is beginner level - will auto-simplify")}if((r=e==null?void 0:e.analysis_data)!=null&&r.audiencePsychology&&(t!=null&&t.knowledge_profile)){const s=e.analysis_data.audiencePsychology.toLowerCase(),a=t.knowledge_profile.domainKnowledge;s.includes("expert")&&a<3&&n.push("DNA targets expert audience but Persona has intermediate/beginner knowledge")}if(e!=null&&e.tone&&(t!=null&&t.platform)){const s=e.tone.toLowerCase().includes("formal")||e.tone.toLowerCase().includes("professional"),a=["tiktok","instagram","shorts","reels"].includes(t.platform.toLowerCase());s&&a&&n.push(`DNA has formal tone but Persona platform is ${t.platform} (requires casual, fast-paced style)`)}return n},XU=(e,t)=>{const n=l_(e,t);if(n.length===0)return`<alignment_status>
 No major conflicts detected between DNA and Persona.
Strategy: Follow DNA structure with Persona voice.
</alignment_status>`;let r=`<conflict_resolution_strategy>

<detected_conflicts>
${n.map((s,a)=>`${a+1}. ${s}`).join(`
`)}
</detected_conflicts>

<resolution_actions>
`;return n.forEach((s,a)=>{s.includes("vocabulary")||s.includes("beginner")?r+=`${a+1}. SIMPLIFY VOCABULARY (70% Persona priority)
   - Use plain language for technical concepts
   - Maintain DNA's logical progression and structure
   - Explain jargon when first introduced

`:s.includes("tone")&&!s.includes("platform")?r+=`${a+1}. ADAPT TONE (60% Persona, 40% DNA)
   - Use Persona's preferred tone (${t.preferred_tone||"not specified"})
   - Keep DNA's energy and confidence level
   - Blend: Casual words with authoritative insights

`:s.includes("platform")?r+=`${a+1}. PLATFORM OVERRIDE
   - Platform requirements take precedence: ${t.platform} conventions
   - Adjust pacing and tone to platform norms
   - Keep DNA structure if compatible with platform

`:s.includes("expert")&&s.includes("knowledge")&&(r+=`${a+1}. KNOWLEDGE LEVEL ADJUSTMENT (60% Persona)
   - Simplify content to match Persona's knowledge level
   - Use examples and analogies for complex concepts
   - Maintain DNA's structural progression

`)}),r+=`</resolution_actions>

<application_instruction>
Apply these resolutions consistently throughout the entire script. Do not switch strategies mid-content.
</application_instruction>

</conflict_resolution_strategy>`,r};function JU(e,t){var u,h,d;let n=100;const r=ZU(e.voiceProfile.signatureKeywords),s=t.knowledgeLevel||"intermediate";s==="beginner"&&r>7?n-=20:s==="advanced"&&r<4&&(n-=10);const a=((u=t.contentConsumption)==null?void 0:u.attentionSpan)||"medium",i=e.targetWordCount||0;if(a==="short"&&i>600?n-=20:a==="long"&&i<400&&(n-=10),(h=t.trustProfile)!=null&&h.primary){const m=t.trustProfile.primary,p=tg(m);((d=e.persuasionFlow)==null?void 0:d.proofSequence.some(g=>m==="data"?g==="data":m==="story"?g==="personal-story"||g==="case-study":m==="authority"?g==="expert-quote":m==="social-proof"?g==="social-proof":g===p||g.toLowerCase().includes(m.toLowerCase())))||(n-=20)}const l=e.voiceProfile.toneAnalysis.toLowerCase(),c=(t.preferredTone||"").toLowerCase();return c&&!l.includes(c)&&(n-=15),Math.max(0,Math.min(100,n))}function ZU(e){if(!e||e.length===0)return 5;let t=0;return e.forEach(n=>{const r=n.split(" ").reduce((s,a)=>s+a.length,0)/n.split(" ").length;r>8?t+=2:r>5&&(t+=1)}),Math.min(10,Math.max(1,Math.round(t/e.length*5)))}function eV(e,t){var a;const n={},r=((a=t.contentConsumption)==null?void 0:a.attentionSpan)||"medium",s=r==="short"?.75:r==="long"?1.25:1;return e.structuralSkeleton.forEach(i=>{const l=Math.round(i.wordCount*s),c=i.title.toLowerCase();let u=50,h=300;c.includes("hook")?(u=30,h=80):c.includes("cta")||c.includes("conclusion")?(u=25,h=60):(c.includes("main")||c.includes("content"))&&(u=120,h=250),n[i.title]=Math.max(u,Math.min(h,l))}),n}function tV(e,t){var i;const n=t.trustProfile;let r=((i=e.persuasionFlow)==null?void 0:i.proofSequence)||["personal-story","data"];if(n!=null&&n.primary){const l=tg(n.primary),c=n.secondary?tg(n.secondary):null;r=[l,...c?[c]:[],...r.filter(u=>u!==l&&u!==c)]}const s={};return e.structuralSkeleton.filter(l=>l.title.toLowerCase().includes("main")||l.title.toLowerCase().includes("content")||l.title.toLowerCase().includes("proof")).forEach((l,c)=>{const u=r[c%r.length];s[l.title]=u}),{primary:r[0],sequence:r,placements:s}}function tg(e){switch(e){case"data":return"data";case"story":return"personal-story";case"authority":return"expert-quote";case"social-proof":return"social-proof";case"visual-proof":return"before-after-demo";case"experiential":return"hands-on-example";case"celebrity-endorsement":return"influencer-quote";case"scientific-method":return"peer-reviewed-study";case"community-driven":return"community-testimonial";default:return e}}function nV(e,t){var a;const n=[],r=t.objectionTimeline||[],s=((a=e.frictionPoints)==null?void 0:a.filter(i=>i.type==="objection"))||[];return r.length>0?r.forEach(i=>{const l=q0(e,i.atWordCount);n.push({atWordCount:i.atWordCount,inSection:(l==null?void 0:l.title)||"Unknown Section",objection:i.objection,counterTactic:i.counterTactic})}):s.forEach((i,l)=>{const c=200+l*250,u=q0(e,c);n.push({atWordCount:c,inSection:(u==null?void 0:u.title)||"Main Content",objection:i.point,counterTactic:i.solution||"Address with proof and evidence"})}),n}function q0(e,t){let n=0;for(const r of e.structuralSkeleton)if(n+=r.wordCount,n>=t)return r;return e.structuralSkeleton[e.structuralSkeleton.length-1]||null}function rV(e,t){var h,d,m;const n=JU(e,t),r=eV(e,t),s=tV(e,t),a=nV(e,t),i=[],l=((h=t.preferredTone)==null?void 0:h.toLowerCase())||"",c=e.voiceProfile.toneAnalysis.toLowerCase();l&&!c.includes(l)&&i.push(`iu chnh tone t "${c}" sang "${l}"`),t.knowledgeLevel==="beginner"&&(i.push("Thm gii thch cho thut ng k thut"),i.push("S dng v d n gin, d hiu"));const u=[];return n<60&&u.push(` Match score thp (${n}/100) - DNA v Persona khng ph hp lm`),(d=t.actionBarriers)!=null&&d.includes("skepticism")&&!((m=e.persuasionFlow)!=null&&m.proofSequence.includes("data"))&&u.push(" Persona rt skeptical nhng DNA thiu data-driven proof"),{matchScore:n,adaptedWordCounts:r,proofStrategy:s,objectionPlacements:a,toneAdjustments:i,warnings:u}}const c_=`
 TTS-OPTIMIZED OUTPUT (CRITICAL):
- NO markdown symbols: no *, #, **, _, ~, \`, etc.
- NO section titles or headers in the output
- NO film/video directions: no [B-roll], [Cut to], [VISUAL], (pause), etc.
- NO parenthetical notes or brackets of any kind
- ONLY clean, speakable text that can be read aloud naturally
- Write as if you are speaking directly to the audience
`,sV=`You are an expert viral content strategist. Your task is to create a detailed script outline that follows the provided DNA structure.

<task>
Generate a JSON outline with sections that match the DNA skeleton exactly.
</task>

<critical_rules>
1. SECTION COUNT: The number of sections MUST exactly match the DNA skeleton
2. SECTION TITLES: Use the exact titles from the DNA skeleton
3. WORD COUNTS: Match the DNA skeleton's word count targets
4. NO ADDITIONS: Do NOT add separate "Hook" or "CTA" sections unless they're in the DNA
5. UNIQUE ANGLE: If provided, integrate it into relevant sections and document it in the notes field
</critical_rules>

<unique_angle_integration>
When a "Unique Angle" is provided:
- Identify which section(s) it applies to
- In the \`notes\` field, write: "Unique Angle Integration: [How this angle is applied in this section]"
- Ensure the angle is woven into the content description, not just mentioned
</unique_angle_integration>

<output_format>
Respond with ONLY valid JSON (no markdown, no explanations):
{
  "sections": [
    {
      "title": "Section name from DNA",
      "wordCount": 150,
      "content": "Detailed description of what this section should cover",
      "notes": "Optional: Unique Angle Integration or other strategic notes"
    }
  ],
  "totalWordCount": 600
}
</output_format>`,oV=`You are an expert viral content scriptwriter. Your task is to write a complete, engaging script based on the provided outline.

<task>
Transform the outline into a compelling script that combines:
- DNA strategy (structure, pacing, viral patterns)
- Persona voice (tone, vocabulary, knowledge level)
- Unique angle (if specified in outline notes)
</task>

<critical_rules>
1. STRUCTURE ADHERENCE: Follow the outline exactly - one section in outline = one section in output
2. DNA PATTERNS: Apply the Content DNA's proven viral patterns, pacing, and retention tactics
3. PERSONA VOICE: Write in the Target Audience's preferred tone and vocabulary level
4. UNIQUE ANGLE: If any section notes mention "Unique Angle Integration", ensure that perspective is present
5. QUALITY: Content must be DETAILED and valuable, not generic or superficial
6. TTS-OPTIMIZED: Write ONLY spoken voiceover text (no [VISUAL] cues, no scene descriptions)
7. NATURAL FLOW: Use conversational, engaging language appropriate for the audience
</critical_rules>

<output_format>
IMPORTANT: Separate each section with the exact delimiter: |||SECTION|||

Example structure:
[Section 1 complete voiceover text here - detailed, engaging, natural]
|||SECTION|||
[Section 2 complete voiceover text here]
|||SECTION|||
[Section 3 complete voiceover text here]
...

Notes:
- Write one section for each outline section
- Do NOT include the section titles in the output
- Do NOT include word count markers
- Just clean, spoken-word text with the delimiter between sections
</output_format>

<dna_persona_priority>
When DNA and Persona conflict:
- STRUCTURE/PACING: Follow DNA (section flow, sentence rhythm)
- VOCABULARY/TONE: Follow Persona (word choice, formality level)
- EXAMPLES: Use DNA format but Persona-relevant content
</dna_persona_priority>

${c_}`,aV=`You are an expert content analyst specializing in viral content evaluation.

<task>
Analyze the provided script and score its viral potential across 5 key dimensions.
</task>

<evaluation_criteria>
1. Hook Strength (0-100): Does the opening grab attention in the first 3 seconds?
2. Structure & Flow (0-100): Is the progression logical, engaging, and well-paced?
3. Engagement Tactics (0-100): Are there pattern interrupts, curiosity loops, and retention hooks?
4. Clarity & Messaging (0-100): Is the core message clear and valuable?
5. Call-to-Action (0-100): Is the CTA compelling and aligned with audience psychology?
</evaluation_criteria>

<output_format>
Respond with ONLY valid JSON (no markdown, no explanations):
{
  "score": 85,
  "breakdown": {
    "hook": 90,
    "structure": 85,
    "engagement": 80,
    "clarity": 88,
    "callToAction": 82
  },
  "strengths": [
    "Specific strength observed in the script",
    "Another concrete strength with evidence"
  ],
  "improvements": [
    "Specific weakness to address",
    "Another area that needs work"
  ],
  "suggestions": [
    "Actionable suggestion to improve hook",
    "Concrete suggestion to boost engagement"
  ]
}
</output_format>

<scoring_guidelines>
- 90-100: Exceptional, viral-ready
- 75-89: Strong, minor tweaks needed
- 60-74: Good foundation, needs improvement
- 40-59: Weak, major revisions required
- 0-39: Poor, needs complete rewrite
</scoring_guidelines>`,iV=(e,t,n,r)=>{var a,i,l,c,u;let s=`You are an expert content writer. Your task is to rewrite a specific section of a script while maintaining quality and coherence.

<section_context>
Section Title: "${e}"
${r.targetWordCount?`Target Word Count: ~${r.targetWordCount} words`:""}
</section_context>

<current_content>
${t}
</current_content>

<rewrite_instructions>
${n?`User Request: ${n}`:"Make it more engaging and impactful."}
</rewrite_instructions>

<critical_rules>
1. PRESERVE FACTS: Keep all key information, numbers, and logical steps from CURRENT CONTENT
   - Do NOT invent new facts or data
   - Do NOT remove essential information
2. IMPROVE STYLE: Enhance voice, tone, and pacing to match DNA constraints
3. TTS-OPTIMIZED: Write ONLY spoken voiceover (no visual cues, no scene directions)
4. COHERENCE: Ensure smooth flow with previous sections
</critical_rules>`;return r.previousSections&&r.previousSections.length>0&&(s+=`

<previous_sections>
Context (do NOT repeat this content):
${r.previousSections.slice(-2).join(`
---
`)}
</previous_sections>`),r.dna&&(s+=`

<dna_strategy>
Apply these Content DNA patterns:
- Pacing: ${r.dna.pacing||"medium"}
- Core Patterns: ${((i=(a=r.dna.analysis_data)==null?void 0:a.corePatterns)==null?void 0:i.join(" | "))||"None specified"}
- Avoid (Flop Patterns): ${((c=(l=r.dna.analysis_data)==null?void 0:l.flopAvoidance)==null?void 0:c.join(" | "))||"None"}
- Audience Psychology: ${((u=r.dna.analysis_data)==null?void 0:u.audiencePsychology)||"Not specified"}
</dna_strategy>`),r.persona&&(s+=`

<persona_voice>
Target Audience characteristics:
- Name: ${r.persona.name}
- Preferred Tone: ${r.persona.preferred_tone||"casual"}
- Vocabulary Level: ${r.persona.vocabulary||"conversational"}
- Knowledge Level: ${r.persona.knowledge_level||"intermediate"}
</persona_voice>`),r.dna&&r.persona&&(s+=`

<conflict_resolution>
When DNA and Persona conflict:
- Use DNA for: Structure, pacing, sentence rhythm
- Use Persona for: Word choice, vocabulary, formality level
</conflict_resolution>`),s+=`

<output_format>
Write ONLY the rewritten section content.
- No explanations
- No meta-commentary
- No formatting markers
- Just clean, spoken-word text
</output_format>

${c_}`,s},u_=(e,t)=>!t||!e?"":l_(e,t).length>0?`

${QU}

${XU(e,t)}`:`

 DNA-PERSONA ALIGNMENT: No major conflicts detected. Follow DNA structure with Persona voice.`,lV=async(e,t,n="google/gemini-3-flash-preview")=>{var c,u,h,d,m,p,b,g,w,x,v,y,S,j,N,C,_,k;if(!t)throw new Error("OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.");if(!e.topic)throw new Error("Topic l bt buc");let r=null;e.dna&&e.persona&&(r=rV(e.dna,e.persona),console.log(" DNA-Persona Adaptation:",{matchScore:r.matchScore,warnings:r.warnings,toneAdjustments:r.toneAdjustments}));let s=sV;if(e.targetWordCount&&(s+=`

TARGET TOTAL WORD COUNT: ${e.targetWordCount}`,s+=`
INSTRUCTION: Scale the section word counts so they sum up to approximately ${e.targetWordCount}.`),e.language&&e.language!=="en"){const U={vi:"Vietnamese",es:"Spanish",fr:"French",ja:"Japanese",ko:"Korean"}[e.language]||"English";s+=`

IMPORTANT: Write the output in ${U}. Keep the JSON keys in English, but the content values must be in the specified language.`}if(e.country){const U={US:"United States",GB:"United Kingdom",VN:"Vietnam",JP:"Japan",KR:"South Korea",IN:"India",DE:"Germany",FR:"France",BR:"Brazil",ID:"Indonesia",TH:"Thailand",PH:"Philippines",AU:"Australia",CA:"Canada",MX:"Mexico",ES:"Spain",IT:"Italy",RU:"Russia",PL:"Poland",NL:"Netherlands"}[e.country]||e.country;s+=`

TARGET REGION: ${U}
Adapt the content for ${U} audience - consider local culture, references, examples, and communication style.`}if(s+=u_(e.dna,e.persona),r&&(s+=`

 DNA-PERSONA MATCH SCORE: ${r.matchScore}/100`,r.matchScore>=80?s+=" (Excellent match - DNA and Persona are highly compatible)":r.matchScore>=60?s+=" (Good match - minor adjustments needed)":s+=" ( Low compatibility - significant calibration required)"),e.persona?(s+=`

TARGET AUDIENCE (PRIMARY - Your defined persona):
- Name: ${e.persona.name}
- Age Range: ${e.persona.age_range||"Not specified"}
- Knowledge Level: ${e.persona.knowledge_level||"intermediate"}
- Pain Points: ${((c=e.persona.pain_points)==null?void 0:c.join(", "))||"Not specified"}
- Preferred Tone: ${e.persona.preferred_tone||"casual"}
- Vocabulary: ${e.persona.vocabulary||"conversational"}`,e.persona.trust_profile&&(s+=`
- Trust Profile: Primary = ${e.persona.trust_profile.primary}${e.persona.trust_profile.secondary?`, Secondary = ${e.persona.trust_profile.secondary}`:""} (${e.persona.trust_profile.reasoning})`),((u=e.persona.action_barriers)==null?void 0:u.length)>0&&(s+=`
- Action Barriers: ${e.persona.action_barriers.join(", ")}`),e.persona.content_consumption&&(s+=`
- Attention Span: ${e.persona.content_consumption.attentionSpan||"medium"}`,e.persona.content_consumption.preferredFormats&&(s+=`
- Preferred Formats: ${e.persona.content_consumption.preferredFormats.join(", ")}`)),((h=e.persona.objections)==null?void 0:h.length)>0&&(s+=`
- General Objections: ${e.persona.objections.join(", ")}`)):(m=(d=e.dna)==null?void 0:d.analysis_data)!=null&&m.audiencePsychology&&(s+=`

TARGET AUDIENCE (Inferred from source DNA):
${e.dna.analysis_data.audiencePsychology}`),e.dna){const E=(p=e.dna.analysis_data)==null?void 0:p.structuralSkeleton,U=e.dna.structure;s+=`

CONTENT DNA STRATEGY (The "Winning Formula"):`;const R=(b=e.dna.analysis_data)==null?void 0:b.hookAngle;if(R?s+=`
- Hook Angle: ${R.angleCategory||e.dna.hook_type||"Custom"} (${R.deconstruction||"No details"})`:s+=`
- Hook Type: ${e.dna.hook_type||"Not specified"}`,(g=e.dna.analysis_data)!=null&&g.audiencePsychology&&(s+=`
- Audience Psychology: ${e.dna.analysis_data.audiencePsychology}`),(x=(w=e.dna.analysis_data)==null?void 0:w.corePatterns)!=null&&x.length&&(s+=`
- Success Patterns: ${e.dna.analysis_data.corePatterns.join(" | ")}`),(y=(v=e.dna.analysis_data)==null?void 0:v.flopAvoidance)!=null&&y.length&&(s+=`
-  FLOP AVOIDANCE (Do NOT do this): ${e.dna.analysis_data.flopAvoidance.join(" | ")}`),s+=`
- Pacing: ${e.dna.pacing||"medium"}`,s+=`
- Tone: ${e.dna.tone||"engaging"}`,s+=`
- Retention Tactics: ${((S=e.dna.retention_tactics)==null?void 0:S.join(", "))||"Not specified"}`,E&&E.length>0?s+=`

REQUIRED STRUCTURE (Follow this EXACTLY unless innovation is allowed):
${E.map(($,L)=>{const re=(r==null?void 0:r.adaptedWordCounts[$.title])||$.wordCount;return`${L+1}. ${$.title} (Target: ~${re} words) ${$.contentFocus?`[Focus: ${$.contentFocus}]`:""} ${$.pacing?`[Pacing: ${$.pacing}]`:""}`}).join(`
`)}`:U&&U.length>0&&(s+=`

REQUIRED STRUCTURE:
${U.join("  ")}`),e.allowStructureInnovation?s+=`

INNOVATION ALLOWED: You may deviate from the DNA structure by 15-25% to add novelty or better fit the topic. You can merge sections or add new relevant ones, but keep the core "DNA" feeling.`:s+=`

STRICT ADHERENCE REQUIRED: You MUST follow the provided DNA structure/sections EXACTLY. Do not add or remove sections. Match the outline to the DNA steps 1-to-1.`,r!=null&&r.proofStrategy&&(s+=`

 PROOF STRATEGY (Optimized for target audience trust profile):
- Primary Proof Type: ${r.proofStrategy.primary}
- Proof Sequence: ${r.proofStrategy.sequence.join("  ")}
- Section-specific Proof Placements:`,Object.entries(r.proofStrategy.placements).forEach(([$,L])=>{s+=`
  * "${$}": Use ${L}`}),s+=`

INSTRUCTION: Place the specified proof types in their designated sections to maximize persuasiveness for this specific audience.`),r!=null&&r.objectionPlacements&&r.objectionPlacements.length>0&&(s+=`

 OBJECTION HANDLING TIMELINE (Address these at specific word count milestones):`,r.objectionPlacements.forEach(($,L)=>{s+=`
${L+1}. At ~${$.atWordCount} words (in "${$.inSection}"):
   Objection: "${$.objection}"
   Counter with: ${$.counterTactic}`}),s+=`

INSTRUCTION: Proactively address these objections at the specified word count milestones to prevent drop-offs.`),r!=null&&r.toneAdjustments&&r.toneAdjustments.length>0&&(s+=`

 TONE CALIBRATION (Persona-specific adjustments):`,r.toneAdjustments.forEach($=>{s+=`
- ${$}`})),r!=null&&r.warnings&&r.warnings.length>0&&(s+=`

 DNA-PERSONA COMPATIBILITY WARNINGS:`,r.warnings.forEach($=>{s+=`
- ${$}`}),s+=`

INSTRUCTION: Be mindful of these compatibility issues and adjust your approach accordingly.`),(j=e.dna.analysis_data)!=null&&j.retentionHooks&&e.dna.analysis_data.retentionHooks.length>0&&(s+=`

 RETENTION HOOKS (Re-engagement at word count milestones):`,e.dna.analysis_data.retentionHooks.forEach($=>{s+=`
- At ~${$.atWordCount} words: ${$.technique} (e.g., "${$.example}")`}),s+=`

INSTRUCTION: Use these retention hooks at the specified word counts to prevent audience drop-off.`),(N=e.dna.analysis_data)!=null&&N.persuasionFlow){const $=e.dna.analysis_data.persuasionFlow;s+=`

 PERSUASION FLOW:
- Framework: ${$.framework}
- Logical Progression: ${((C=$.logicalProgression)==null?void 0:C.join("  "))||"Not specified"}`,(_=$.objectionHandling)!=null&&_.mainObjection&&(s+=`
- Main Objection: "${$.objectionHandling.mainObjection}"
  Counter Tactic: ${$.objectionHandling.counterTactic}
  Placement: ${$.objectionHandling.placement}`)}(k=e.dna.analysis_data)!=null&&k.transitions&&e.dna.analysis_data.transitions.length>0&&(s+=`

 TRANSITION FORMULAS (Use these between sections):`,e.dna.analysis_data.transitions.forEach(($,L)=>{s+=`
${L+1}. ${$.from}  ${$.to}: ${$.formula}${$.example?` (e.g., "${$.example}")`:""}`})),e.dna.hook_examples&&e.dna.hook_examples.length>0&&(s+=`

 HOOK EXAMPLES (CRITICAL - Study the PATTERN, do NOT copy exact wording):
${e.dna.hook_examples.map(($,L)=>`${L+1}. "${$}"`).join(`
`)}

INSTRUCTION: Analyze the psychological triggers and structural patterns in these hooks. Then create an ENTIRELY ORIGINAL hook using the same psychological strategy but DIFFERENT words and examples. Copying any phrase verbatim is STRICTLY PROHIBITED.`)}e.uniqueAngle&&(s+=`

=== UNIQUE ANGLE / NEW IDEA ===
"${e.uniqueAngle}"

INSTRUCTION: You MUST weave this unique angle into the content strategy of the outline. Don't just copy the DNA patterns; adapt them to serve this specific new angle.`);let a=`Create an outline for a script about: ${e.topic}`;e.keyPoints&&(a+=`

Key points to cover:
${e.keyPoints}`),e.uniqueAngle&&(a+=`

Unique angle/hook:
${e.uniqueAngle}`);const l=await Pt([{role:"system",content:s},{role:"user",content:a}],t,n);return hn(l)},cV=async(e,t,n,r="google/gemini-3-flash-preview")=>{var l,c,u,h,d,m,p,b,g,w,x,v,y,S,j,N,C,_;if(!n)throw new Error("API Key ERROR. PLEASE CONTACT ADMIN.");let s=oV;if(t.language&&t.language!=="en"){const E={vi:"Vietnamese",es:"Spanish",fr:"French",ja:"Japanese",ko:"Korean"}[t.language]||"English";s+=`

IMPORTANT: Write the script in ${E}.`}if(t.country){const E={US:"United States",GB:"United Kingdom",VN:"Vietnam",JP:"Japan",KR:"South Korea",IN:"India",DE:"Germany",FR:"France",BR:"Brazil",ID:"Indonesia",TH:"Thailand",PH:"Philippines",AU:"Australia",CA:"Canada",MX:"Mexico",ES:"Spain",IT:"Italy",RU:"Russia",PL:"Poland",NL:"Netherlands"}[t.country]||t.country;s+=`

TARGET REGION: ${E}
Adapt content for ${E} audience - use local culture, references, examples.`}if(s+=u_(t.dna,t.persona),t.persona?s+=`

TARGET AUDIENCE (PRIMARY - Your defined persona):
- Name: ${t.persona.name}
- Age Range: ${t.persona.age_range||"Not specified"}
- Knowledge Level: ${t.persona.knowledge_level||"intermediate"}
- Pain Points: ${((l=t.persona.pain_points)==null?void 0:l.join(", "))||"Not specified"}
- Preferred Tone: ${t.persona.preferred_tone||"casual"}
- Vocabulary: ${t.persona.vocabulary||"conversational"}
- Objections to Address: ${((c=t.persona.objections)==null?void 0:c.join(", "))||"Not specified"}`:(h=(u=t.dna)==null?void 0:u.analysis_data)!=null&&h.audiencePsychology&&(s+=`

TARGET AUDIENCE (Inferred from source DNA):
${t.dna.analysis_data.audiencePsychology}`),t.dna){s+=`

=== CONTENT DNA STRATEGY ===`,s+=`
USE THIS FOR STRUCTURE, PACING, AND STRATEGY.`;const k=(d=t.dna.analysis_data)==null?void 0:d.hookAngle;k&&(s+=`
- Hook Angle: ${k.angleCategory} - ${k.deconstruction}`),(m=t.dna.analysis_data)!=null&&m.audiencePsychology&&(s+=`
- Audience Psychology: ${t.dna.analysis_data.audiencePsychology}`),(b=(p=t.dna.analysis_data)==null?void 0:p.corePatterns)!=null&&b.length&&(s+=`
-  CORE STRATEGIES (Apply these): ${t.dna.analysis_data.corePatterns.join(`
  * `)}`),(w=(g=t.dna.analysis_data)==null?void 0:g.viralXFactors)!=null&&w.length&&(s+=`
-  X-FACTORS (The 'Secret Sauce'): ${t.dna.analysis_data.viralXFactors.join(`
  * `)}`),(v=(x=t.dna.analysis_data)==null?void 0:x.flopAvoidance)!=null&&v.length&&(s+=`
-  FLOP AVOIDANCE (Strictly Avoid): ${t.dna.analysis_data.flopAvoidance.join(`
  * `)}`),(S=(y=t.dna.analysis_data)==null?void 0:y.objections)!=null&&S.length&&(s+=`
-  OBJECTIONS TO PRE-EMPT: ${t.dna.analysis_data.objections.join(", ")}`),s+=`

- Structure: ${((j=t.dna.structure)==null?void 0:j.join("  "))||"Follow Outline"}`,s+=`
- Pacing: ${t.dna.pacing||((C=(N=t.dna.analysis_data)==null?void 0:N.pacingAndTone)==null?void 0:C.pacing)||"medium"}`,s+=`
- Retention Tactics: ${((_=t.dna.retention_tactics)==null?void 0:_.join(", "))||"Not specified"}`,t.dna.hook_examples&&t.dna.hook_examples.length>0&&(s+=`

 HOOK EXAMPLES (CRITICAL - Study the PATTERN, do NOT copy exact wording):
${t.dna.hook_examples.map((E,U)=>`${U+1}. "${E}"`).join(`
`)}

INSTRUCTION: Analyze the psychological triggers. Create an ENTIRELY ORIGINAL hook using the same strategy but DIFFERENT words. Copying any phrase verbatim is STRICTLY PROHIBITED.`)}const a=`
OUTLINE TO FOLLOW (${e.sections.length} sections):

${e.sections.map((k,E)=>`${E+1}. ${k.title} (Target: ${k.wordCount} words)
   Content: ${k.content}
   ${k.notes?`Notes: ${k.notes}`:""}`).join(`

`)}

Total Target Words: ${e.totalWordCount}
`,i=[{role:"system",content:s},{role:"user",content:`Write a complete script following this outline:
${a}`}];return await Pt(i,n,r)},uV=async(e,t,n="google/gemini-3-flash-preview")=>{var i,l,c,u;if(!t)throw new Error("OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.");if(!e.topic)throw new Error("Topic l bt buc");let r=`You are an expert viral content scriptwriter. Your job is to create compelling, engaging scripts that capture attention and drive engagement.

Based on the provided inputs, write a complete script that:
1. Opens with a powerful hook that grabs attention in the first 3 seconds
2. Uses proven viral patterns and retention tactics
3. Maintains engagement throughout with pattern interrupts
4. Ends with a clear call-to-action

Write the script in a natural, conversational tone. Include [VISUAL] cues where relevant.`;if(e.language&&e.language!=="en"){const d={vi:"Vietnamese",es:"Spanish",fr:"French",ja:"Japanese",ko:"Korean"}[e.language]||"English";r+=`

IMPORTANT: Write the script in ${d}.`}if(e.country){const d={US:"United States",GB:"United Kingdom",VN:"Vietnam",JP:"Japan",KR:"South Korea",IN:"India",DE:"Germany",FR:"France",BR:"Brazil",ID:"Indonesia",TH:"Thailand",PH:"Philippines",AU:"Australia",CA:"Canada",MX:"Mexico",ES:"Spain",IT:"Italy",RU:"Russia",PL:"Poland",NL:"Netherlands"}[e.country]||e.country;r+=`

TARGET REGION: ${d}
Adapt the content for ${d} audience - consider local culture, references, examples, and communication style.`}e.persona&&(r+=`

TARGET AUDIENCE:
- Name: ${e.persona.name}
- Age Range: ${e.persona.age_range||"Not specified"}
- Knowledge Level: ${e.persona.knowledge_level||"intermediate"}
- Pain Points: ${((i=e.persona.pain_points)==null?void 0:i.join(", "))||"Not specified"}
- Preferred Tone: ${e.persona.preferred_tone||"casual"}
- Vocabulary: ${e.persona.vocabulary||"conversational"}`),e.dna&&(r+=`

CONTENT DNA PATTERNS:
- Hook Type: ${e.dna.hook_type||"Not specified"}
- Structure: ${((l=e.dna.structure)==null?void 0:l.join("  "))||"Not specified"}
- Pacing: ${e.dna.pacing||"medium"}
- Retention Tactics: ${((c=e.dna.retention_tactics)==null?void 0:c.join(", "))||"Not specified"}
- Tone: ${e.dna.tone||"engaging"}
- Patterns: ${((u=e.dna.patterns)==null?void 0:u.join(", "))||"Not specified"}`),e.customPrompt&&(r+=`

ADDITIONAL INSTRUCTIONS:
${e.customPrompt}`);let s=`Write a script about: ${e.topic}`;return e.keyPoints&&(s+=`

Key points to cover:
${e.keyPoints}`),e.uniqueAngle&&(s+=`

Unique angle/hook:
${e.uniqueAngle}`),await Pt([{role:"system",content:r},{role:"user",content:s}],t,n)},dV=async(e,t,n="google/gemini-3-flash-preview",r,s)=>{var c;if(!t)throw new Error("OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.");if(!e)throw new Error("Script l bt buc");let a=aV;r&&(a+=`

Evaluate against these DNA patterns:
- Hook Type: ${r.hook_type||"Not specified"}
- Structure: ${((c=r.structure)==null?void 0:c.join("  "))||"Not specified"}
- Tone: ${r.tone||"engaging"}`),s&&(a+=`

Target audience:
- Name: ${s.name}
- Knowledge Level: ${s.knowledge_level||"intermediate"}`);const i=[{role:"system",content:a},{role:"user",content:`Score this script:

${e}`}],l=await Pt(i,t,n);return hn(l)},hV=(e,t)=>{const n=e.reduce((h,d)=>h+d.wordCount,0);if(n===0||t<=0)return e;const r=80,a=Math.floor(t*.35),i=t/n;let l=e.map(h=>{const d=Math.round(h.wordCount*i),m=Math.max(r,Math.min(a,d));return{...h,wordCount:m}});const c=l.reduce((h,d)=>h+d.wordCount,0),u=t-c;if(u!==0){const h=l.map((d,m)=>({idx:m,room:u>0?a-d.wordCount:d.wordCount-r})).filter(d=>d.room>0);if(h.length>0){const d=h.reduce((b,g)=>b+g.room,0);h.forEach(({idx:b,room:g})=>{const w=g/d,x=Math.round(u*w);l[b].wordCount+=x});const m=l.reduce((b,g)=>b+g.wordCount,0),p=t-m;if(p!==0){const b=l.reduce((g,w,x)=>w.wordCount>l[g].wordCount?x:g,0);l[b].wordCount+=p}}}return l},fV=(e,t=500)=>{const n=e.trim().split(/\s+/).filter(Boolean);return n.length<=t?e:n.slice(-t).join(" ")},pV=async(e,t,n,r="google/gemini-3-flash-preview",s)=>{var m,p;if(!n)throw new Error("OpenRouter API Key cha c cu hnh.");let a=e.sections;t.targetWordCount&&t.targetWordCount>0&&(a=hV(a,t.targetWordCount));const i=2,l=[];let c="";const u=[];for(let b=0;b<a.length;b+=i)u.push(a.slice(b,b+i));const h=a.length;let d=0;for(let b=0;b<u.length;b++){const g=u[b],w=g.reduce((N,C)=>N+C.wordCount,0);d+=g.length;const x=g.map(N=>N.title).join(" & ");s==null||s(d,h,`Writing "${x}"...`);let v=`You are an expert viral content scriptwriter. Write the following ${g.length} section(s) in one continuous, seamless flow.

RULES:
1. Write ONLY spoken voiceover content (no visual cues, no markdown).
2. Create natural transitions between sections without forced phrases.
3. Be DETAILED, insightful, and valuable - not generic.

 STRICT WORD COUNT (CRITICAL):
- TOTAL for this chunk: EXACTLY ${w} words
- Tolerance: 5% ONLY (${Math.floor(w*.95)}-${Math.ceil(w*1.05)} words)
- Count your words before finalizing
- Going significantly over or under is NOT acceptable

 TTS-OPTIMIZED OUTPUT (CRITICAL):
- NO markdown symbols: no *, #, **, _, ~, \`, etc.
- NO section titles or headers in the output
- NO film/video directions: no [B-roll], [Cut to], [VISUAL], (pause), etc.
- NO parenthetical notes or brackets of any kind
- ONLY clean, speakable text that can be read aloud naturally`;if(t.language&&t.language!=="en"&&(v+=`

IMPORTANT: Write in ${{vi:"Vietnamese",es:"Spanish",fr:"French",ja:"Japanese",ko:"Korean"}[t.language]||"English"}.`),t.country){const C={US:"United States",GB:"United Kingdom",VN:"Vietnam",JP:"Japan",KR:"South Korea",IN:"India",DE:"Germany",FR:"France",BR:"Brazil",ID:"Indonesia",TH:"Thailand",PH:"Philippines",AU:"Australia",CA:"Canada",MX:"Mexico",ES:"Spain",IT:"Italy",RU:"Russia",PL:"Poland",NL:"Netherlands"}[t.country]||t.country;v+=`

TARGET REGION: ${C}
Adapt the content for ${C} audience - consider local culture, references, examples, and communication style.`}t.dna&&(v+=`

CONTENT DNA:
- Tone: ${((p=(m=t.dna.analysis_data)==null?void 0:m.linguisticFingerprint)==null?void 0:p.toneAnalysis)||t.dna.tone||"engaging"}
- Pacing: ${t.dna.pacing||"medium"}`),t.persona&&(v+=`

TARGET AUDIENCE:
- Knowledge Level: ${t.persona.knowledge_level||"intermediate"}
- Preferred Tone: ${t.persona.preferred_tone||"casual"}`);let y="";if(c.length>0){const N=fV(c,500);y+=`=== PREVIOUS CONTEXT (last 500 words - maintain flow) ===
${N}

`}y+=`=== SECTIONS TO WRITE ===
`,g.forEach((N,C)=>{y+=`${C+1}. "${N.title}" (~${N.wordCount} words)
`,y+=`   Content: ${N.content}
`,N.notes&&(y+=`   Notes: ${N.notes}
`),y+=`
`}),y+=`TOTAL TARGET: ${w} words

`,g.length>1&&(y+=`OUTPUT FORMAT: Use |||SECTION||| delimiter between sections.

`),y+="Write the content now:";const j=await Pt([{role:"system",content:v},{role:"user",content:y}],n,r);l.push(j),c+=`
`+j}return l.join(`
|||SECTION|||
`)},mV=async(e,t,n,r,s="google/gemini-3-flash-preview")=>{var u;const i=[{role:"user",content:`You are a viral content strategist. Suggest 3 unique angles for creating content about this topic.

TOPIC: ${e}

${t?`DNA STYLE:
- Hook Type: ${t.hook_type||"engaging"}
- Tone: ${t.tone||"conversational"}
- Niche: ${t.niche||"general"}`:""}

${n?`TARGET AUDIENCE:
- Name: ${n.name}
- Knowledge Level: ${n.knowledge_level||"intermediate"}
- Pain Points: ${((u=n.pain_points)==null?void 0:u.join(", "))||"Not specified"}`:""}

Respond in JSON format:
{
  "angles": [
    { "angle": "The unique angle/hook", "reasoning": "Why this angle works" },
    { "angle": "Another angle", "reasoning": "Why this works" },
    { "angle": "Third angle", "reasoning": "Why this works" }
  ]
}`}],l=await Pt(i,r,s);return hn(l).angles||[]},gV=async(e,t,n,r,s,a="google/gemini-3-flash-preview")=>{const l=[{role:"user",content:iV(e,t,n,r)}];return await Pt(l,s,a)},vV=async(e,t,n,r,s="google/gemini-3-flash-preview")=>{const i=[{role:"user",content:`You are an SEO expert for video content. Generate optimized metadata for this script.

SCRIPT CONTENT:
"""
${e.substring(0,2e3)}${e.length>2e3?"...":""}
"""

${t?`CONTENT STYLE: ${t.niche||"general"} - ${t.tone||"engaging"}`:""}
${n?`TARGET AUDIENCE: ${n.name||"General audience"}`:""}

Generate SEO-optimized metadata. Respond in JSON:
{
  "title": "Catchy, SEO-friendly title (50-60 chars)",
  "description": "Compelling description with keywords (150-160 chars)",
  "tags": ["tag1", "tag2", "tag3", "tag4", "tag5"]
}`}],l=await Pt(i,r,s),c=hn(l);return{title:c.title||"",description:c.description||"",tags:c.tags||[]}};function d_(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),{user:s}=Sn(),{toast:a}=Mt(),{settings:i}=ys(),l=f.useCallback(async()=>{if(!s){t([]),r(!1);return}try{const{data:y,error:S}=await De.from("scripts").select("*").order("created_at",{ascending:!1});if(S)throw S;const j=(y||[]).map(N=>({...N,outline_history:N.outline_history||[],script_history:N.script_history||[],outline_model:N.outline_model||"google/gemini-3-flash-preview",script_model:N.script_model||"google/gemini-3-flash-preview"}));t(j)}catch(y){console.error("Error fetching scripts:",y),a({title:"Error",description:"Failed to fetch scripts",variant:"destructive"})}finally{r(!1)}},[s,a]);return f.useEffect(()=>{l()},[l]),{scripts:e,loading:n,generateOutline:async y=>{const S=i==null?void 0:i.openrouter_api_key;if(!S)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{const j=y.model||"google/gemini-3-flash-preview";return await lV(y,S,j)}catch(j){console.error("Error generating outline:",j);const N=j instanceof Error?j.message:"Failed to generate outline";return a({title:"Error",description:N,variant:"destructive"}),null}},generateScriptFromOutline:async(y,S)=>{const j=i==null?void 0:i.openrouter_api_key;if(!j)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{const N=S.model||"google/gemini-3-flash-preview";return await cV(y,S,j,N)}catch(N){console.error("Error generating script from outline:",N);const C=N instanceof Error?N.message:"Failed to generate script";return a({title:"Error",description:C,variant:"destructive"}),null}},generateScriptSectionBySection:async(y,S,j)=>{const N=i==null?void 0:i.openrouter_api_key;if(!N)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{const C=S.model||"google/gemini-3-flash-preview";return await pV(y,S,N,C,j)}catch(C){console.error("Error generating script section by section:",C);const _=C instanceof Error?C.message:"Failed to generate script";return a({title:"Error",description:_,variant:"destructive"}),null}},generateScript:async y=>{const S=i==null?void 0:i.openrouter_api_key;if(!S)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{return await uV(y,S,"google/gemini-3-flash-preview")}catch(j){console.error("Error generating script:",j);const N=j instanceof Error?j.message:"Failed to generate script";return a({title:"Error",description:N,variant:"destructive"}),null}},scoreScript:async(y,S,j)=>{const N=i==null?void 0:i.openrouter_api_key;if(!N)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{return await dV(y,N,"google/gemini-3-flash-preview",S,j)}catch(C){console.error("Error scoring script:",C);const _=C instanceof Error?C.message:"Failed to score script";return a({title:"Error",description:_,variant:"destructive"}),null}},createScript:async y=>{if(!s)return null;try{const S={title:y.title||"New Script",user_id:s.id,topic:y.topic,key_points:y.key_points,unique_angle:y.unique_angle,generation_mode:y.generation_mode,persona_id:y.persona_id,dna_id:y.dna_id,blueprint_id:y.blueprint_id,blueprint_content:y.blueprint_content,full_script:y.full_script,score:y.score,score_breakdown:y.score_breakdown,status:y.status},{data:j,error:N}=await De.from("scripts").insert(S).select().single();if(N)throw N;const C={...j,outline_history:j.outline_history||[],script_history:j.script_history||[],outline_model:j.outline_model||"google/gemini-3-flash-preview",script_model:j.script_model||"google/gemini-3-flash-preview"};return t(_=>[C,..._]),a({title:"Success",description:"Script saved successfully"}),C}catch(S){return console.error("Error creating script:",S),a({title:"Error",description:"Failed to save script",variant:"destructive"}),null}},updateScript:async(y,S)=>{try{const j={...S,outline_history:S.outline_history?S.outline_history:void 0,script_history:S.script_history?S.script_history:void 0},{data:N,error:C}=await De.from("scripts").update(j).eq("id",y).select().single();if(C)throw C;const _={...N,outline_history:N.outline_history||[],script_history:N.script_history||[],outline_model:N.outline_model||"google/gemini-3-flash-preview",script_model:N.script_model||"google/gemini-3-flash-preview"};return t(k=>k.map(E=>E.id===y?_:E)),a({title:"Success",description:"Script updated successfully"}),_}catch(j){return console.error("Error updating script:",j),a({title:"Error",description:"Failed to update script",variant:"destructive"}),null}},deleteScript:async y=>{try{const{error:S}=await De.from("scripts").delete().eq("id",y);if(S)throw S;return t(j=>j.filter(N=>N.id!==y)),a({title:"Success",description:"Script deleted successfully"}),!0}catch(S){return console.error("Error deleting script:",S),a({title:"Error",description:"Failed to delete script",variant:"destructive"}),!1}},refetch:l,suggestUniqueAngle:async(y,S,j,N)=>{const C=i==null?void 0:i.openrouter_api_key;if(!C)return a({title:"Error",description:"API Key not configured.",variant:"destructive"}),[];try{return await mV(y,S,j,C,N)}catch(_){return console.error("Error suggesting angles:",_),a({title:"Error",description:"Failed to suggest angles",variant:"destructive"}),[]}},rewriteSection:async(y,S,j,N,C)=>{const _=i==null?void 0:i.openrouter_api_key;if(!_)return a({title:"Error",description:"API Key not configured.",variant:"destructive"}),null;try{return await gV(y,S,j,N,_,C)}catch(k){return console.error("Error rewriting section:",k),a({title:"Error",description:"Failed to rewrite section",variant:"destructive"}),null}},generateSEO:async(y,S,j,N)=>{const C=i==null?void 0:i.openrouter_api_key;if(!C)return a({title:"Error",description:"API Key not configured.",variant:"destructive"}),null;try{return await vV(y,S,j,C,N)}catch(_){return console.error("Error generating SEO:",_),a({title:"Error",description:"Failed to generate SEO",variant:"destructive"}),null}}}}const yV="modulepreload",xV=function(e){return"/"+e},G0={},wV=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=xV(c),c in G0)return;G0[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":yV,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},bV=`You are a content structure analyst. Your ONLY task is to identify and extract the structural skeleton of video transcripts.

<task>
Analyze the provided video transcripts and identify their natural section boundaries and word counts.
</task>

<instructions>
For EACH video provided:

1. READ the full transcript carefully
2. IDENTIFY natural section breaks by detecting:
   - Topic shifts
   - Tone changes
   - Functional purpose changes (Hook  Context  Main Content  CTA)
   - Narrative flow transitions

3. For each section, determine:
   - Functional title (what PURPOSE does this section serve?)
   - Exact word count
   - Start and end positions (word indices)

4. Apply REASONABLE LIMITS per section type:
   - Hook/Attention Grab: 30-80 words
   - Opening/Context: 60-150 words
   - Main Content: 120-250 words
   - Transition/Support: 40-100 words
   - CTA/Conclusion: 25-60 words

5. If analyzing multiple videos:
   - Compare structures side-by-side
   - Find CONSENSUS pattern (sections appearing in 2+ videos)
   - Calculate MEDIAN word count for each section type
   - Output the consensus structure

</instructions>

<output_format>
Return valid JSON with this structure:

{
  "videoStructures": [
    {
      "videoIndex": 0,
      "totalWords": 850,
      "sections": [
        {
          "title": "Hook - Pattern Interrupt",
          "wordCount": 52,
          "startWord": 0,
          "endWord": 52,
          "functionalType": "hook"
        },
        {
          "title": "Problem Setup",
          "wordCount": 135,
          "startWord": 52,
          "endWord": 187,
          "functionalType": "opening"
        }
      ]
    }
  ],
  "consensusStructure": [
    {
      "title": "The Pattern Interrupt Hook",
      "wordCount": 48,
      "functionalType": "hook",
      "rationale": "MEDIAN of 38, 48, 52 words across 3 videos"
    },
    {
      "title": "The Problem Context",
      "wordCount": 125,
      "functionalType": "opening",
      "rationale": "MEDIAN of 115, 125, 135 words"
    }
  ]
}
</output_format>

<critical_rules>
1. DO NOT analyze tone, pacing, or patterns - ONLY structure
2. DO NOT add metadata beyond structure - that comes later
3. Word counts MUST be exact (count from transcript)
4. Section titles should be FUNCTIONAL (describe purpose, not content)
5. For multiple videos: MUST calculate median, NOT copy from one video
6. MUST respect word count limits - adjust outliers to median
</critical_rules>`,SV=`You are a viral content pattern analyst. You will receive a PRE-DEFINED structure and must enrich it with detailed metadata.

<task>
Given a structural skeleton and video transcripts, analyze each section to extract:
- Tone and emotional texture
- Linguistic pacing (sentence rhythm)
- Content focus (abstract formula)
- Audience value
- Engagement triggers
- Open/closed loops
- Patterns and anti-patterns
</task>

<input_format>
You will receive:
1. Consensus Structure: Pre-defined sections with titles and word counts
2. Video Transcripts: Source material for analysis
3. Comments (optional): Audience feedback
</input_format>

<instructions>
For EACH section in the provided structure:

1. LOCATE the section in the transcripts (using word count ranges)
2. ANALYZE that specific section for:
   - tone: Emotional quality (Urgent, Sincere, Playful, Authoritative, etc.)
   - pacing: Sentence rhythm (e.g., "Staccato. Short bursts." or "Long flowing sentences")
   - contentFocus: ABSTRACT formula (what happens, not specifics)
   - audienceValue: What value viewer gets (MANDATORY)
   - audienceInteraction: CTA or engagement trigger (MANDATORY)
   - antiPattern: What to avoid
   - openLoop: Unanswered question opened here (or null)
   - closesLoop: Which loop does this close (or null)
   - transitionOut: How it bridges to next section

3. EXTRACT global patterns:
   - linguisticFingerprint: Persona role, tone analysis, syntax patterns, signature keywords
   - hookAngle: Category and psychological mechanism
   - corePatterns: Success patterns that work
   - viralXFactors: Unique elements
   - flopAvoidance: Anti-patterns from flop videos
   - highDopamine: High engagement moments
   - confusionPoints: Where viewers got lost
   - objections: Common pushbacks

</instructions>

<output_format>
Return complete DNA with enriched structural skeleton:

{
  "name": "Pattern name",
  "niche": "Content category",
  "audiencePsychology": "2-3 sentences about audience needs",

  "linguisticFingerprint": {
    "personaRole": "Mentor/Insider/Guide/etc",
    "toneAnalysis": "Detailed tone description",
    "syntaxPatterns": "Sentence structure analysis",
    "signatureKeywords": ["keyword1", "keyword2"]
  },

  "hookAngle": {
    "angleCategory": "Contrarian/Curiosity Gap/Pattern Interrupt/etc",
    "deconstruction": "Why this hook works psychologically"
  },

  "pacingAndTone": {
    "pacing": "Global linguistic rhythm description"
  },

  "emotionalArc": [
    { "section": "Hook", "emotion": "Shock/Curiosity" },
    { "section": "Build", "emotion": "Anticipation" }
  ],

  "structuralSkeleton": [
    {
      "title": "Section title from input structure",
      "wordCount": 48,
      "tone": "Urgent, Pattern Interrupt",
      "pacing": "Staccato. Short bursts.",
      "contentFocus": "Abstract formula of what happens",
      "audienceValue": "What viewer gets",
      "audienceInteraction": "CTA or trigger",
      "antiPattern": "What to avoid",
      "openLoop": "Unanswered question or null",
      "closesLoop": "Which loop closes or null",
      "transitionOut": "How it bridges to next"
    }
  ],

  "highDopamine": ["Engagement elements"],
  "confusionPoints": ["Where viewers got lost"],
  "objections": ["Common pushbacks"],
  "corePatterns": ["Success patterns"],
  "viralXFactors": ["Unique elements"],
  "flopAvoidance": ["Anti-patterns"],

  "persuasionFlow": {
    "framework": "PAS|BAB|Story-Based|Custom",
    "proofSequence": ["personal-story", "data", "case-study"],
    "objectionHandling": {
      "placement": "after-solution-before-proof",
      "mainObjection": "Main skepticism to address",
      "counterTactic": "How to counter it"
    },
    "logicalProgression": ["Step 1", "Step 2", "Step 3"]
  },

  "retentionHooks": [
    {
      "atWordCount": 200,
      "technique": "pattern-interrupt|reframe|teaser|mini-cliffhanger",
      "example": "Example phrase or tactic"
    }
  ],

  "transitions": [
    {
      "from": "Section A title",
      "to": "Section B title",
      "formula": "Abstract transition formula",
      "example": "Optional concrete example"
    }
  ]
}
</output_format>

<critical_rules>
1. MUST use exact section titles and word counts from input structure
2. DO NOT add or remove sections - only enrich existing ones
3. contentFocus must be ABSTRACT (no specific details from source)
4. audienceValue and audienceInteraction are MANDATORY for every section
5. If a section doesn't have an open/closed loop, use null
6. persuasionFlow framework: PAS (Problem-Agitate-Solution), BAB (Before-After-Bridge), Story-Based, or Custom
7. retentionHooks: Map to WORD COUNT milestones (200, 500, 800...), NOT time
8. transitions: Cng thc chuyn i gia cc sections (abstract, reusable)
</critical_rules>`,NV=`You are an expert Viral Content Analyst. Your task is to reverse-engineer the "DNA" (structural patterns, psychological triggers, and linguistic fingerprints) of high-performing video scripts.

<task>
Analyze the provided video transcripts and comments to extract reusable content patterns that can be applied to new scripts.
</task>

<golden_rules>
These rules override all other instructions:

RULE 1: ABSTRACTION OVER COPYING
You MUST generalize specific details into reusable formulas. Never copy literal values from the source material.

Examples of proper abstraction:
| Input Type      | Specific Example     |  Abstracted Formula                              |
|-----------------|----------------------|----------------------------------------------------|
| Numbers/Money   | "$1,234"             | "Use precise, non-round numbers for credibility"   |
| Names           | "John Smith"         | "Reference a specific authority figure"            |
| Dates/Time      | "Last Tuesday"       | "Anchor to recent, relatable timeframe"            |
| Locations       | "Caf in NYC"        | "Ground story in vivid, relatable setting"         |
| Events          | "My car crash"       | "Open with high-stakes personal anecdote"          |

 WRONG: contentFocus = "Talk about how I lost $500 on Bitcoin"
 RIGHT: contentFocus = "Describe personal financial setback to build empathy and hook"

RULE 2: MANDATORY AUDIENCE INTERACTION
Every section MUST have an 'audienceInteraction' field:
- Explicit CTA: "Subscribe now!"  Record exactly
- Implicit trigger: No direct CTA  Identify psychological engagement mechanism
  Examples: "Let me know thoughts" (comment bait), Cliffhanger ending (retention), Rhetorical question (internal engagement)

RULE 3: MULTI-VIDEO SYNTHESIS (When analyzing multiple videos)
- IDENTIFY: Patterns appearing in 2+ videos (consensus patterns)
- RANK: By frequency (all videos > most videos > some videos)
- ABSTRACT: Common formula, not specific examples from one video
- OUTPUT: Skeleton reflects CONSENSUS structure, not individual video's unique approach
- UNIFY: Find underlying patterns when structures differ
</golden_rules>

<analysis_methodology>
Follow this systematic process:

1. CONTRAST ANALYSIS
   Compare Viral vs Flop content. Identify the "Content Gap" - what makes one succeed and the other fail?

2. MULTI-VIDEO PATTERN DETECTION
   - Scan all videos for recurring elements
   - Weight patterns by frequency across videos
   - Abstract common formulas that transcend specific examples

3. CROSS-VIDEO STRUCTURE ANALYSIS (CRITICAL - Do this FIRST before extracting skeleton)
   STEP 3A: For EACH video, identify its natural structure by reading the full transcript:
   - Where does the Hook end? (usually when main promise/question is stated)
   - Where does Story/Context start and end?
   - Where does the Main Content/Payoff begin?
   - Where does CTA/Conclusion start?
   - Count EXACT word count for each section

   STEP 3B: Compare structures across ALL videos:
   - List out each video's structure side-by-side
   - Example:
     Video 1: Hook (45w)  Problem Setup (120w)  Solution (180w)  Social Proof (80w)  CTA (35w)
     Video 2: Hook (52w)  Story (95w)  Insight (200w)  Example (90w)  CTA (40w)
     Video 3: Hook (38w)  Context (110w)  Main Point (175w)  Evidence (85w)  CTA (42w)

   STEP 3C: Find CONSENSUS structure pattern:
   - Identify sections that appear in 2+ videos (even if names differ)
   - Calculate MEDIAN word count for each section type
   - Example consensus: Hook (~45w), Context/Setup (~110w), Core Content (~180w), Support (~85w), CTA (~40w)

   STEP 3D: Apply REASONABLE LIMITS:
   - Hook: 30-80 words (attention span limit)
   - Opening sections: 60-150 words
   - Main content sections: 120-250 words
   - Transition sections: 40-100 words
   - CTA: 25-60 words
   - If any video has sections outside these ranges, FLAG IT and adjust to median

4. STRUCTURAL SKELETON EXTRACTION
   Based on Step 3's consensus analysis, create the skeleton with:
   - Section titles that reflect FUNCTION (not content)
   - Word counts that are MEDIAN across videos (not copied from one video)
   - Realistic proportions (Hook shouldn't be 300 words!)

5. SECTION ANALYSIS
   For each section in the skeleton, identify:
   - Tone and emotional texture
   - Linguistic pacing (sentence rhythm, NOT video editing speed)
   - Abstract content focus (the formula, not the specifics)
   - Audience value delivered

6. CURIOSITY LOOP MAPPING
   Track where curiosity gaps open and close throughout the script

7. EMOTIONAL ARC MAPPING
   Chart the viewer's emotional journey from hook to CTA
</analysis_methodology>

<output_schema>
Return a single valid JSON object with this exact structure:

{
  "name": "Pattern name (e.g., 'The Reluctant Expert', 'The Contrarian Educator')",
  "niche": "Content category (e.g., Personal Finance, Health Optimization, SaaS Marketing)",
  "targetWordCount": 0,  // Average word count calculated from viral inputs

  "audiencePsychology": "2-3 sentences describing audience's emotional state, fears, and desires. What psychological need does this content address?",

  "linguisticFingerprint": {
    "personaRole": "Speaker's adopted role (e.g., Mentor, Insider, Skeptic, Guide, Authority)",
    "toneAnalysis": "Detailed tone description (e.g., 'Authoritative yet empathetic', 'Playfully provocative')",
    "syntaxPatterns": "Sentence structure analysis (e.g., 'Frequent rhetorical questions', 'Short punchy statements with occasional long explanatory sentence')",
    "signatureKeywords": ["recurring_keyword1", "recurring_keyword2", "distinctive_phrase"]
  },

  "hookAngle": {
    "angleCategory": "Hook type (e.g., Contrarian, Curiosity Gap, Social Proof, Pattern Interrupt, Fear/Urgency)",
    "deconstruction": "Psychological mechanism: Why does this hook capture attention? What emotional trigger does it activate?"
  },

  "pacingAndTone": {
    "pacing": "Global linguistic rhythm description (e.g., 'Sharp, punchy sentences. Rapid-fire delivery with strategic pauses.', 'Slow build with increasing intensity')"
  },

  "emotionalArc": [
    { "section": "Hook", "emotion": "Shock/Curiosity/Intrigue" },
    { "section": "Build", "emotion": "Anticipation/Tension/Investment" },
    { "section": "Payoff", "emotion": "Satisfaction/Surprise/Relief" },
    { "section": "CTA", "emotion": "Empowerment/Urgency" }
  ],

  "structuralSkeleton": [
    {
      "title": "Abstract functional name (e.g., 'The Pattern Interrupt', 'The Credibility Anchor', 'The Value Proposition') - NOT specific content",
      "wordCount": 150,  // MEDIAN word count from Step 3C analysis, NOT copied from one video. MUST respect limits from Step 3D.
      "tone": "Section-specific tone (e.g., Urgent, Sincere, Playful, Authoritative)",
      "pacing": "Linguistic rhythm for this section (e.g., 'Staccato. Short bursts.', 'One long flowing sentence for impact.')",
      "contentFocus": "ABSTRACT formula of what happens here. NO specific details from source material.",
      "audienceValue": "What tangible value does viewer extract from this section? (MANDATORY)",
      "audienceInteraction": "Explicit CTA or implicit engagement trigger (MANDATORY - see Rule 2)",
      "antiPattern": "Specific mistake to AVOID (e.g., 'Don't use vague language', 'No slow meandering intro')",
      "openLoop": "If curiosity gap opens here, describe the unanswered question. Else null.",
      "closesLoop": "If this answers a previous open loop, reference which one. Else null.",
      "transitionOut": "How does this section bridge to the next? What's the connective tissue?"
    }
  ],

  "highDopamine": [
    "Specific engagement elements that triggered high viewer response (identified from comments/metrics)"
  ],

  "confusionPoints": [
    "Moments where viewers got lost or needed clarification (identified from comments)"
  ],

  "objections": [
    "Common pushbacks, disagreements, or skepticism expressed in comments"
  ],

  "corePatterns": [
    "Pattern Name: Why it works (psychological/structural mechanism)"
  ],

  "viralXFactors": [
    "Unique Element: Why it stood out from typical content in this niche"
  ],

  "flopAvoidance": [
    "Specific anti-patterns extracted from Flop content that MUST be avoided"
  ]
}
</output_schema>

<example_analysis>
Example of proper Step 3 execution:

INPUT: 3 viral videos about productivity

STEP 3A - Individual Analysis:
Video 1 (850 words total):
  - Hook: "You're wasting 3 hours every day..." (52 words)
  - Problem Setup: Common productivity myths (135 words)
  - Solution Framework: The 3-rule system (220 words)
  - Implementation: How to apply it (280 words)
  - Social Proof: Success stories (98 words)
  - CTA: Try it today (45 words)

Video 2 (920 words total):
  - Hook: "I doubled my output..." (48 words)
  - Backstory: My struggle with productivity (115 words)
  - The Breakthrough: What changed everything (245 words)
  - Tactical Steps: Exact process (310 words)
  - Common Mistakes: What to avoid (140 words)
  - CTA: Download the template (42 words)

Video 3 (780 words total):
  - Hook: Bold claim about productivity (38 words)
  - Context: Why most advice fails (125 words)
  - Core Method: The system explained (210 words)
  - Examples: Real-world applications (255 words)
  - Objection Handling: FAQs (95 words)
  - CTA: Join the community (37 words)

STEP 3B - Side-by-Side Comparison:
All have: Hook (~45w avg), Context/Setup (~125w avg), Main Content (~225w avg), Support/Details (~260w avg), Extra Section (~110w avg), CTA (~40w avg)

STEP 3C - Consensus Pattern:
 Hook: MEDIAN = 48 words (range: 38-52, all within limits)
 Opening Context: MEDIAN = 125 words (Setup/Backstory/Context - same function)
 Core Method: MEDIAN = 220 words (Solution/Breakthrough/Method - same function)
 Deep Dive: MEDIAN = 270 words (Implementation/Tactics/Examples)
 Validation: MEDIAN = 110 words (Social Proof/Mistakes/Objections)
 CTA: MEDIAN = 42 words

STEP 3D - Validation:
 Hook 48w: Within 30-80w limit
 Opening 125w: Within 60-150w limit
 Core 220w: Within 120-250w limit
 Deep Dive 270w: EXCEEDS 250w limit  ADJUST to 240w (closer to limit)
 Validation 110w: Within 40-150w limit
 CTA 42w: Within 25-60w limit

FINAL SKELETON:
[
  { "title": "The Pattern Interrupt Hook", "wordCount": 48, ... },
  { "title": "The Problem Context", "wordCount": 125, ... },
  { "title": "The Core Method", "wordCount": 220, ... },
  { "title": "The Implementation Deep Dive", "wordCount": 240, ... },  // Adjusted from 270
  { "title": "The Validation Layer", "wordCount": 110, ... },
  { "title": "The Action CTA", "wordCount": 42, ... }
]
</example_analysis>

<critical_notes>
1. Pacing = LINGUISTIC rhythm (sentence length, breath patterns), NOT video editing speed
2. wordCount = MEDIAN from cross-video analysis (Step 3C), NOT copied from one video
3. MANDATORY: Complete Step 3 (Cross-Video Structure Analysis) BEFORE building skeleton
4. Apply word count limits from Step 3D - reject outliers (e.g., 300-word hooks)
5. If analyzing only 1 video: Still apply reasonable limits. Hook max 80w, CTA max 60w.
6. If no Flop content provided: Focus only on viral pattern extraction
7. Structural skeleton sections: Use functional names that describe PURPOSE, not content
8. Every recommendation must be actionable and generalizable
</critical_notes>`,jV=`You are a DNA Evolution AI. Your task is to REFINE an existing Content DNA by integrating insights from new video content.

<task>
Intelligently merge new patterns with existing DNA. This is NOT simple list concatenation - you must learn, generalize, and consolidate.
</task>

<evolution_rules>
1. LEARN: Extract new patterns, hooks, and tactics from viral videos
2. LEARN: Identify new anti-patterns from flop videos
3. COMPARE: Evaluate new insights against existing DNA patterns
4. MERGE: Consolidate similar patterns (avoid duplicates)
5. REPLACE: Swap weak/specific patterns with stronger/general ones
6. REMOVE: Eliminate redundant or conflicting patterns
7. QUALITY: No hard limits on list length - keep what's valuable
8. GENERALIZE: Extract principles, not just specific examples
9. RESOLVE: When new content contradicts existing DNA, keep the stronger pattern
</evolution_rules>

<consolidation_logic>
Decision tree for handling new patterns:

IF new pattern is similar to existing pattern:
   MERGE into one stronger, more general pattern

IF new pattern is clearly superior:
   REPLACE the existing weak pattern

IF new pattern is unique AND valuable:
   ADD it to the DNA

IF existing patterns are now redundant:
   REMOVE them

Hook examples special case:
   Keep max 4-5 highest quality examples
   Prioritize recent additions if quality is equal
   Ensure diversity in hook types
</consolidation_logic>

<output_format>
Return valid JSON with complete evolved DNA:

{
  "evolvedDna": {
    // Complete DNA object with ALL fields
    // (same schema as DNA_EXTRACTION_PROMPT output)
  },
  "changesSummary": [
    "Merged 'Pattern X' and 'Pattern Y' into unified 'Pattern Z'",
    "Replaced weak hook example #2 with stronger version from new viral video",
    "Added 'new insight' to flopAvoidance based on recent flop analysis",
    "Removed 3 redundant items from corePatterns (consolidated into 2 stronger patterns)",
    "Updated audiencePsychology to reflect deeper understanding"
  ]
}
</output_format>

<quality_standards>
Evolved DNA should be:
- More general and reusable than before
- Free of duplicates and redundancies
- Consolidated where possible
- Stronger and more actionable
- Validated against both old and new evidence
</quality_standards>`,CV=`You are a Content Auditor. Perform a quick pre-analysis scan of the provided video transcripts and comments.

<task>
For EACH video, assess its fundamental characteristics to identify outliers and quality issues before full DNA extraction.
</task>

<assessment_criteria>
For each video, determine:
1. Topic/Niche: 1-2 word category
2. Primary Tone: Single adjective (e.g., Authoritative, Casual, Urgent)
3. Quality Score: 0-100 based on clarity, value, and coherence
4. Outlier Status: True if it deviates significantly in Topic or Tone from the group majority
</assessment_criteria>

<output_format>
Return a JSON array with one object per video:

[
  {
    "index": 0,
    "type": "viral",
    "topic": "Productivity",
    "tone": "Motivational",
    "qualityScore": 85,
    "isOutlier": false,
    "reason": "Aligns with group. Clear messaging and strong structure."
  },
  {
    "index": 1,
    "type": "viral",
    "topic": "Health",
    "tone": "Skeptical",
    "qualityScore": 92,
    "isOutlier": true,
    "reason": "Different niche from majority. Consider excluding from pattern extraction."
  }
]
</output_format>

<outlier_detection>
A video is an outlier if:
- Topic differs significantly from 70%+ of other videos
- Tone contradicts the dominant tone pattern
- Quality score is 30+ points below group average
- Structure is fundamentally different (e.g., tutorial vs. storytelling)

Recommendation: Flag outliers for potential exclusion from DNA synthesis.
</outlier_detection>`,ly=(e,t)=>{var c,u,h,d,m,p,b,g,w,x,v,y,S,j,N,C,_;const n={personaRole:((c=e.linguisticFingerprint)==null?void 0:c.personaRole)||((u=e.voiceProfile)==null?void 0:u.personaRole)||"",toneAnalysis:((h=e.linguisticFingerprint)==null?void 0:h.toneAnalysis)||((d=e.voiceProfile)==null?void 0:d.toneAnalysis)||"",syntaxPatterns:((m=e.linguisticFingerprint)==null?void 0:m.syntaxPatterns)||((p=e.voiceProfile)==null?void 0:p.syntaxPatterns)||"",signatureKeywords:(((b=e.linguisticFingerprint)==null?void 0:b.signatureKeywords)||((g=e.voiceProfile)==null?void 0:g.signatureKeywords)||[]).slice(0,7),globalPacing:((w=e.pacingAndTone)==null?void 0:w.pacing)||((x=e.voiceProfile)==null?void 0:x.globalPacing)||e.pacing||"medium"},r=[...(e.corePatterns||[]).map(k=>({pattern:k,tag:"safe"})),...(e.viralXFactors||[]).map(k=>({pattern:k,tag:"experimental"}))],s=[...(e.confusionPoints||[]).map(k=>({type:"confusion",point:k,solution:void 0})),...(e.objections||[]).map(k=>({type:"objection",point:k,solution:void 0})),...(e.flopAvoidance||[]).map(k=>({type:"anti-pattern",point:k,solution:void 0}))],a=e.persuasionFlow||{framework:"Custom",proofSequence:["personal-story","data"],objectionHandling:{placement:"after-solution-before-proof",mainObjection:((v=e.objections)==null?void 0:v[0])||"skepticism",counterTactic:"provide evidence and social proof"},logicalProgression:["Establish credibility","Present problem","Offer solution","Prove with evidence"]},i=e.retentionHooks||[{atWordCount:200,technique:"pattern-interrupt",example:"Reframe the core problem"},{atWordCount:500,technique:"teaser",example:"Preview upcoming insight"}],l=e.transitions||[];return{name:e.name||"Extracted DNA",niche:e.niche||"",targetWordCount:t,audiencePsychology:e.audiencePsychology||"",voiceProfile:n,hookAngle:e.hookAngle||{angleCategory:"",deconstruction:""},emotionalArc:e.emotionalArc||[],structuralSkeleton:e.structuralSkeleton||[],patterns:r,persuasionFlow:a,retentionHooks:i,transitions:l,frictionPoints:s,highDopamine:e.highDopamine||[],linguisticFingerprint:e.linguisticFingerprint,pacingAndTone:e.pacingAndTone,confusionPoints:e.confusionPoints,objections:e.objections,corePatterns:e.corePatterns,viralXFactors:e.viralXFactors,tone:((y=e.pacingAndTone)==null?void 0:y.tone)||e.tone||"",patterns_legacy:e.corePatterns||[],vocabulary:((j=(S=e.linguisticFingerprint)==null?void 0:S.signatureKeywords)==null?void 0:j.join(", "))||"",hook_type:((N=e.hookAngle)==null?void 0:N.angleCategory)||"",hook_examples:e.hook_examples||[],structure:((C=e.structuralSkeleton)==null?void 0:C.map(k=>k.title))||[],pacing:((_=e.pacingAndTone)==null?void 0:_.pacing)||e.pacing||"",retention_tactics:e.highDopamine||[],x_factors:e.viralXFactors||[]}},_V=async(e,t,n="google/gemini-3-flash-preview")=>{if(!t)throw new Error("API Key required");const r=e.viralVideos.map((u,h)=>{var d;return`VIDEO #${h} (VIRAL): Title: ${u.title}. Transcript: ${(d=u.transcript)==null?void 0:d.substring(0,500)}...`}).join(`

`),s=e.flopVideos.map((u,h)=>{var d;return`VIDEO #${h} (FLOP): Title: ${u.title}. Transcript: ${(d=u.transcript)==null?void 0:d.substring(0,500)}...`}).join(`

`),a=[r,s].filter(Boolean).join(`

---

`),l=await Pt([{role:"system",content:CV},{role:"user",content:a}],t,n);return hn(l).map(u=>{var m,p;const h=((m=u.type)==null?void 0:m.toLowerCase())==="viral"||!u.type&&u.index<e.viralVideos.length,d=h?e.viralVideos[u.index]:e.flopVideos[u.index];return{...u,type:h?"viral":"flop",title:d==null?void 0:d.title,wordCount:((p=d==null?void 0:d.transcript)==null?void 0:p.split(/\s+/).length)||0}})},h_=async(e,t,n="google/gemini-3-flash-preview")=>{if(!t)throw new Error("OpenRouter API Key cha c cu hnh.");let r=[];e.viralVideos.forEach((l,c)=>{r.push(`=== VIRAL VIDEO ${c+1}: ${l.title||"Untitled"} ===`),l.transcript&&r.push(`TRANSCRIPT:
${l.transcript}`)}),e.flopVideos.length>0&&e.flopVideos.forEach((l,c)=>{r.push(`=== FLOP (AVOID) ${c+1}: ${l.title} ===`),r.push(`TRANSCRIPT:
${l.transcript}`)});const s=r.join(`

`),a=[{role:"system",content:bV},{role:"user",content:`Analyze structures and find consensus:

${s}`}],i=await Pt(a,t,n);return hn(i)},f_=async(e,t,n,r="google/gemini-3-flash-preview")=>{if(!n)throw new Error("OpenRouter API Key cha c cu hnh.");let s=`=== PRE-DEFINED CONSENSUS STRUCTURE ===
`;s+=JSON.stringify(e,null,2),s+=`

=== VIDEO TRANSCRIPTS FOR ANALYSIS ===

`,t.viralVideos.forEach((d,m)=>{s+=`VIRAL VIDEO ${m+1}: ${d.title}
`,s+=`TRANSCRIPT: ${d.transcript}
`,d.comments&&(s+=`COMMENTS: ${d.comments}
`),s+=`
`}),t.flopVideos.length>0&&(s+=`
=== FLOP VIDEOS (FOR ANTI-PATTERNS) ===

`,t.flopVideos.forEach((d,m)=>{s+=`FLOP ${m+1}: ${d.title}
`,s+=`TRANSCRIPT: ${d.transcript}

`}));const i=await Pt([{role:"system",content:SV},{role:"user",content:s}],n,r),l=hn(i),c=t.viralVideos.filter(d=>d.transcript),u=c.reduce((d,m)=>{var p;return d+(((p=m.transcript)==null?void 0:p.split(/\s+/).length)||0)},0),h=c.length>0?Math.round(u/c.length):0;return ly(l,h)},kV=async(e,t,n="google/gemini-3-flash-preview")=>{const r=await h_(e,t,n);return await f_(r.consensusStructure,e,t,n)},cy=async(e,t,n="google/gemini-3-flash-preview")=>{if(!t)throw new Error("OpenRouter API Key cha c cu hnh.");const r=e.viralVideos.filter(h=>h.transcript),s=r.reduce((h,d)=>{var m;return h+(((m=d.transcript)==null?void 0:m.split(/\s+/).length)||0)},0),a=r.length>0?Math.round(s/r.length):0,i=3,l=[];for(let h=0;h<e.viralVideos.length;h+=i)l.push(e.viralVideos.slice(h,h+i));const c=[];for(const h of l){let d=[];h.forEach((w,x)=>{d.push(`=== VIRAL VIDEO ${x+1}: ${w.title||"Untitled"} ===`),w.transcript&&d.push(`TRANSCRIPT:
${w.transcript}`),w.comments&&d.push(`COMMENTS:
${w.comments}`)}),c.length===0&&e.flopVideos.length>0&&e.flopVideos.forEach((w,x)=>{d.push(`=== FLOP (AVOID) ${x+1}: ${w.title} ===`),d.push(`TRANSCRIPT:
${w.transcript}`)});const m=d.join(`

`);let p=NV.replace("Extract the complete",`AVERAGE WORD COUNT: ${a} words.
Extract the complete`);e.overrideLogic&&(p+=`

ADDITIONAL: ${e.overrideLogic}`);const b=[{role:"system",content:p},{role:"user",content:`Analyze batch and extract DNA:

${m}`}],g=await Pt(b,t,n);c.push(hn(g))}const u=TV(c,a);return ly(u,a)},EV=async(e,t,n="google/gemini-3-flash-preview",r)=>cy({viralVideos:[{title:"",transcript:e,comments:"",notes:r?`Source: ${r}`:""}],flopVideos:[]},t,n),Y0=e=>{if(!e||e.length===0)return e;const t={hook:{min:30,max:80},opening:{min:60,max:150},main:{min:120,max:250},transition:{min:40,max:100},cta:{min:25,max:60}},n=r=>{const s=r.toLowerCase();return s.includes("hook")||s.includes("pattern interrupt")||s.includes("attention")?"hook":s.includes("cta")||s.includes("call to action")||s.includes("conclusion")?"cta":s.includes("context")||s.includes("setup")||s.includes("intro")?"opening":s.includes("transition")||s.includes("bridge")?"transition":"main"};return e.map((r,s)=>{const a=n(r.title),i=t[a],l=r.wordCount||0;if(l<i.min||l>i.max){console.warn(`[DNA Validation] Section "${r.title}" has ${l} words, expected ${i.min}-${i.max}. Adjusting...`);const c=Math.max(i.min,Math.min(i.max,l));return{...r,wordCount:c}}return r})},TV=(e,t)=>{if(e.length===0)throw new Error("No batch results to merge");if(e.length===1){const p={...e[0],targetWordCount:t};return p.structuralSkeleton&&(p.structuralSkeleton=Y0(p.structuralSkeleton)),p}const n=(p,b=.5)=>{const g=new Map,w=p.length;return p.forEach(x=>{if(!x)return;[...new Set(x)].forEach(y=>{g.set(y,(g.get(y)||0)+1)})}),Array.from(g.entries()).filter(([x,v])=>v/w>=b).sort((x,v)=>v[1]-x[1]).map(([x])=>x)},r=p=>{if(!p||p.length===0)return[];const b=p.filter(w=>w&&w.length>0);return b.length===0?[]:(b.sort((w,x)=>w.length-x.length),b[Math.floor(b.length/2)].map((w,x)=>{const y=b.map(j=>j[x]).filter(Boolean).map(j=>j.wordCount||0).filter(j=>j>0),S=y.length>0?Math.round(y.reduce((j,N)=>j+N,0)/y.length):w.wordCount;return{...w,wordCount:S}}))},s=p=>{const b=p.filter(g=>g&&g.trim().length>0);return b.length===0?"":b.reduce((g,w)=>w.length>g.length?w:g)},a=e.map(p=>p.corePatterns).filter(Boolean),i=e.map(p=>p.viralXFactors).filter(Boolean),l=e.map(p=>p.flopAvoidance).filter(Boolean),c=e.map(p=>p.highDopamine).filter(Boolean),u=e.map(p=>p.confusionPoints).filter(Boolean),h=e.map(p=>p.objections).filter(Boolean),d=e.map(p=>p.structuralSkeleton).filter(Boolean);return{name:s(e.map(p=>p.name)),niche:s(e.map(p=>p.niche)),targetWordCount:t,audiencePsychology:s(e.map(p=>p.audiencePsychology)),linguisticFingerprint:{personaRole:s(e.map(p=>{var b;return(b=p.linguisticFingerprint)==null?void 0:b.personaRole})),toneAnalysis:s(e.map(p=>{var b;return(b=p.linguisticFingerprint)==null?void 0:b.toneAnalysis})),syntaxPatterns:s(e.map(p=>{var b;return(b=p.linguisticFingerprint)==null?void 0:b.syntaxPatterns})),signatureKeywords:n(e.map(p=>{var b;return(b=p.linguisticFingerprint)==null?void 0:b.signatureKeywords}).filter(Boolean),.4)},hookAngle:e.map(p=>p.hookAngle).filter(p=>p&&p.deconstruction).sort((p,b)=>{var g,w;return(((g=b.deconstruction)==null?void 0:g.length)||0)-(((w=p.deconstruction)==null?void 0:w.length)||0)})[0]||{angleCategory:"",deconstruction:""},pacingAndTone:{pacing:s(e.map(p=>{var b;return(b=p.pacingAndTone)==null?void 0:b.pacing}))},emotionalArc:e.map(p=>p.emotionalArc).filter(p=>p&&p.length>0).sort((p,b)=>b.length-p.length)[0]||[],structuralSkeleton:Y0(r(d)),corePatterns:n(a,.5),viralXFactors:n(i,.4),flopAvoidance:n(l,.5),highDopamine:n(c,.5),confusionPoints:n(u,.3),objections:n(h,.4)}},p_=async(e,t,n,r="google/gemini-3-flash-preview")=>{var u;if(!n)throw new Error("OpenRouter API Key cha c cu hnh.");let s=`EXISTING DNA TO EVOLVE:
\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\`

`;t.viralVideos&&t.viralVideos.length>0&&(s+=`NEW VIRAL VIDEOS TO LEARN FROM:
`,t.viralVideos.forEach((h,d)=>{s+=`
--- VIRAL VIDEO ${d+1} ${h.url?`(${h.url})`:""} ---
`,s+=h.transcript.substring(0,4e3),s+=`
`}),s+=`
`),t.flopVideos&&t.flopVideos.length>0&&(s+=`NEW FLOP VIDEOS TO LEARN MISTAKES FROM:
`,t.flopVideos.forEach((h,d)=>{s+=`
--- FLOP VIDEO ${d+1} ${h.url?`(${h.url})`:""} ---
`,s+=h.transcript.substring(0,4e3),s+=`
`}),s+=`
`),s+=`
Analyze the new content, learn from it, and EVOLVE the DNA. Return the complete evolved DNA and a summary of changes.`;const i=await Pt([{role:"system",content:jV},{role:"user",content:s}],n,r),l=hn(i);return{evolvedDna:ly(l.evolvedDna||e,((u=l.evolvedDna)==null?void 0:u.targetWordCount)||e.targetWordCount||0),changesSummary:l.changesSummary||["Evolution completed without detailed changes"]}},PV=Object.freeze(Object.defineProperty({__proto__:null,enrichStructureWithPatterns:f_,evolveDna:p_,extractDnaFromContent:cy,extractDnaFromTranscript:EV,extractDnaWithTwoSteps:kV,extractStructure:h_,scanContent:_V},Symbol.toStringTag,{value:"Module"}));function uy(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),{user:s}=Sn(),{toast:a}=Mt(),{settings:i}=ys(),l=f.useCallback(async()=>{if(!s){t([]),r(!1);return}try{const{data:g,error:w}=await De.from("dnas").select("*").order("created_at",{ascending:!1});if(w)throw w;const x=(g||[]).map(v=>({...v,vocabulary:Array.isArray(v.vocabulary)?v.vocabulary.join(", "):v.vocabulary,analysis_data:v.analysis_data}));t(x)}catch(g){console.error("Error fetching DNAs:",g),a({title:"Error",description:"Failed to fetch DNA patterns",variant:"destructive"})}finally{r(!1)}},[s,a]);return f.useEffect(()=>{l()},[l]),{dnas:e,loading:n,scanDnaContent:async g=>{const w=i==null?void 0:i.openrouter_api_key;if(!w)return a({title:"Error",description:"OpenRouter API Key required. Please configure in Settings.",variant:"destructive"}),null;try{return await wV(()=>Promise.resolve().then(()=>PV),void 0).then(v=>v.scanContent(g,w))}catch(x){return console.error("Error scanning content:",x),a({title:"Error",description:"Failed to scan content: "+(x instanceof Error?x.message:"Unknown error"),variant:"destructive"}),null}},extractDna:async(g,w)=>{const x=i==null?void 0:i.openrouter_api_key;if(!x)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh. Vui lng nhp key vo Settings.",variant:"destructive"}),null;try{return await cy(g,x,w||"google/gemini-3-flash-preview")}catch(v){console.error("Error extracting DNA:",v);const y=v instanceof Error?v.message:"Failed to extract DNA patterns";return a({title:"Error",description:y,variant:"destructive"}),null}},createDna:async g=>{if(!s)return null;try{const w={name:g.name||"New DNA",user_id:s.id,niche:g.niche,source_url:g.source_url,source_transcript:g.source_transcript,hook_type:g.hook_type,hook_examples:g.hook_examples,structure:g.structure,pacing:g.pacing,retention_tactics:g.retention_tactics,x_factors:g.x_factors,tone:g.tone,vocabulary:g.vocabulary?g.vocabulary.split(",").map(S=>S.trim()).filter(Boolean):[],patterns:g.patterns},{data:x,error:v}=await De.from("dnas").insert(w).select().single();if(v)throw v;const y={...x,vocabulary:Array.isArray(x.vocabulary)?x.vocabulary.join(", "):x.vocabulary,analysis_data:x.analysis_data};return t(S=>[y,...S]),a({title:"Success",description:"DNA pattern saved successfully"}),y}catch(w){return console.error("Error creating DNA:",w),a({title:"Error",description:"Failed to save DNA pattern",variant:"destructive"}),null}},createDnaFromExtracted:async(g,w,x)=>{var v,y,S,j,N;if(!s)return null;try{const C={audiencePsychology:g.audiencePsychology,linguisticFingerprint:g.linguisticFingerprint,hookAngle:g.hookAngle,pacingAndTone:g.pacingAndTone,structuralSkeleton:g.structuralSkeleton,targetWordCount:g.targetWordCount,highDopamine:g.highDopamine,confusionPoints:g.confusionPoints,objections:g.objections,corePatterns:g.corePatterns,viralXFactors:g.viralXFactors,flopAvoidance:g.flopAvoidance},_={name:g.name,user_id:s.id,niche:g.niche,source_url:x||null,source_transcript:w||null,hook_type:g.hook_type||((v=g.hookAngle)==null?void 0:v.angleCategory),hook_examples:g.hook_examples||[],structure:g.structure||((y=g.structuralSkeleton)==null?void 0:y.map(R=>R.title)),pacing:g.pacing||((S=g.pacingAndTone)==null?void 0:S.pacing),retention_tactics:g.retention_tactics||g.highDopamine,x_factors:g.x_factors||g.viralXFactors,tone:g.tone||((j=g.linguisticFingerprint)==null?void 0:j.toneAnalysis),vocabulary:g.vocabulary?g.vocabulary.split(",").map(R=>R.trim()).filter(Boolean):((N=g.linguisticFingerprint)==null?void 0:N.signatureKeywords)||[],patterns:g.patterns||g.corePatterns,analysis_data:C},{data:k,error:E}=await De.from("dnas").insert(_).select().single();if(E)throw E;const U={...k,vocabulary:Array.isArray(k.vocabulary)?k.vocabulary.join(", "):k.vocabulary,analysis_data:k.analysis_data};return t(R=>[U,...R]),a({title:"Success",description:"DNA pattern saved successfully"}),U}catch(C){return console.error("Error creating DNA:",C),a({title:"Error",description:"Failed to save DNA pattern: "+C.message,variant:"destructive"}),null}},updateDna:async(g,w)=>{try{const x={...w,vocabulary:w.vocabulary?w.vocabulary.split(",").map(j=>j.trim()).filter(Boolean):void 0,analysis_data:w.analysis_data},{data:v,error:y}=await De.from("dnas").update(x).eq("id",g).select().single();if(y)throw y;const S={...v,vocabulary:Array.isArray(v.vocabulary)?v.vocabulary.join(", "):v.vocabulary,analysis_data:v.analysis_data};return t(j=>j.map(N=>N.id===g?S:N)),a({title:"Success",description:"DNA pattern updated successfully"}),S}catch(x){return console.error("Error updating DNA:",x),a({title:"Error",description:"Failed to update DNA pattern",variant:"destructive"}),null}},deleteDna:async g=>{try{const{error:w}=await De.from("dnas").delete().eq("id",g);if(w)throw w;return t(x=>x.filter(v=>v.id!==g)),a({title:"Success",description:"DNA pattern deleted successfully"}),!0}catch(w){return console.error("Error deleting DNA:",w),a({title:"Error",description:"Failed to delete DNA pattern: "+(w instanceof Error?w.message:"Unknown error"),variant:"destructive"}),!1}},evolveDna:async(g,w)=>{var y,S,j,N,C,_,k,E,U,R,$,L,re,z,B,O,A,M;const x=i==null?void 0:i.openrouter_api_key;if(!x)return a({title:"Error",description:"OpenRouter API Key cha c cu hnh.",variant:"destructive"}),{success:!1};const v=e.find(G=>G.id===g);if(!v||!v.analysis_data)return a({title:"Error",description:"DNA not found or has no analysis data.",variant:"destructive"}),{success:!1};try{const G="google/gemini-3-flash-preview",ee={name:v.name,niche:v.niche||"",targetWordCount:(y=v.analysis_data)==null?void 0:y.targetWordCount,audiencePsychology:((S=v.analysis_data)==null?void 0:S.audiencePsychology)||"",linguisticFingerprint:((j=v.analysis_data)==null?void 0:j.linguisticFingerprint)||{personaRole:"",toneAnalysis:"",signatureKeywords:[]},hookAngle:((N=v.analysis_data)==null?void 0:N.hookAngle)||{angleCategory:"",deconstruction:""},pacingAndTone:((C=v.analysis_data)==null?void 0:C.pacingAndTone)||{pacing:""},structuralSkeleton:((_=v.analysis_data)==null?void 0:_.structuralSkeleton)||[],highDopamine:((k=v.analysis_data)==null?void 0:k.highDopamine)||[],confusionPoints:((E=v.analysis_data)==null?void 0:E.confusionPoints)||[],objections:((U=v.analysis_data)==null?void 0:U.objections)||[],corePatterns:((R=v.analysis_data)==null?void 0:R.corePatterns)||[],viralXFactors:(($=v.analysis_data)==null?void 0:$.viralXFactors)||[],flopAvoidance:((L=v.analysis_data)==null?void 0:L.flopAvoidance)||[],hook_examples:v.hook_examples||[]},ae=await p_(ee,w,x,G),ce={id:crypto.randomUUID(),timestamp:new Date().toISOString(),input_type:w.viralVideos&&w.flopVideos?"mixed":w.viralVideos?"viral":"flop",source_urls:[...((re=w.viralVideos)==null?void 0:re.map(J=>J.url).filter(Boolean))||[],...((z=w.flopVideos)==null?void 0:z.map(J=>J.url).filter(Boolean))||[]],transcript_preview:(((O=(B=w.viralVideos)==null?void 0:B[0])==null?void 0:O.transcript)||((M=(A=w.flopVideos)==null?void 0:A[0])==null?void 0:M.transcript)||"").substring(0,200)+"...",changes_made:ae.changesSummary},ye=[...v.learning_history||[],ce],F={analysis_data:{...v.analysis_data,targetWordCount:ae.evolvedDna.targetWordCount,audiencePsychology:ae.evolvedDna.audiencePsychology,linguisticFingerprint:ae.evolvedDna.linguisticFingerprint,hookAngle:ae.evolvedDna.hookAngle,pacingAndTone:ae.evolvedDna.pacingAndTone,structuralSkeleton:ae.evolvedDna.structuralSkeleton,highDopamine:ae.evolvedDna.highDopamine,confusionPoints:ae.evolvedDna.confusionPoints,objections:ae.evolvedDna.objections,corePatterns:ae.evolvedDna.corePatterns,viralXFactors:ae.evolvedDna.viralXFactors,flopAvoidance:ae.evolvedDna.flopAvoidance},hook_examples:ae.evolvedDna.hook_examples,learning_history:ye},{error:de}=await De.from("dnas").update(F).eq("id",g);if(de)throw de;return t(J=>J.map(we=>we.id===g?{...we,...F}:we)),a({title:"DNA Evolved!",description:`${ae.changesSummary.length} changes made to your DNA.`}),{success:!0,changesSummary:ae.changesSummary}}catch(G){return console.error("Error evolving DNA:",G),a({title:"Error",description:"Failed to evolve DNA: "+(G instanceof Error?G.message:"Unknown error"),variant:"destructive"}),{success:!1}}},refetch:l}}function AV(){const{user:e}=Sn(),{toast:t}=Mt(),n=Fv(),{data:r=[],isLoading:s}=_M({queryKey:["folders",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:c,error:u}=await De.from("folders").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(u)throw u;return c},enabled:!!e}),a=Hf({mutationFn:async c=>{if(!e)throw new Error("Not authenticated");const{data:u,error:h}=await De.from("folders").insert({name:c,user_id:e.id}).select().single();if(h)throw h;return u},onSuccess:()=>{n.invalidateQueries({queryKey:["folders"]}),t({title:"Folder created"})},onError:c=>{t({title:"Error",description:c.message,variant:"destructive"})}}),i=Hf({mutationFn:async({id:c,name:u})=>{const{error:h}=await De.from("folders").update({name:u}).eq("id",c);if(h)throw h},onSuccess:()=>{n.invalidateQueries({queryKey:["folders"]})}}),l=Hf({mutationFn:async c=>{const{error:u}=await De.from("folders").delete().eq("id",c);if(u)throw u},onSuccess:()=>{n.invalidateQueries({queryKey:["folders"]}),t({title:"Folder deleted"})}});return{folders:r,loading:s,createFolder:c=>a.mutateAsync(c),updateFolder:(c,u)=>i.mutateAsync({id:c,name:u}),deleteFolder:c=>l.mutateAsync(c)}}const Q0=5;function RV(){const[e,t]=f.useState(null),[n,r]=f.useState(!0),[s,a]=f.useState(null),{user:i}=Sn(),l=f.useCallback(async()=>{var u,h;if(!i){t(null),r(!1);return}r(!0),a(null);try{const{data:d,error:m}=await De.from("user_settings").select("openrouter_api_key").eq("user_id",i.id).single();if(m||!(d!=null&&d.openrouter_api_key)){a("No API key configured"),t(null),r(!1);return}const p=await fetch("https://openrouter.ai/api/v1/auth/key",{method:"GET",headers:{Authorization:`Bearer ${d.openrouter_api_key}`}});if(!p.ok)throw new Error("Failed to fetch key info from OpenRouter");const b=await p.json();t({total_credits:(((u=b.data)==null?void 0:u.limit)||0)*Q0,total_usage:(((h=b.data)==null?void 0:h.usage)||0)*Q0})}catch(d){console.error("Error fetching OpenRouter credits:",d),a(d instanceof Error?d.message:"Failed to fetch credits")}finally{r(!1)}},[i]);f.useEffect(()=>{l()},[l]);const c=e?e.total_credits-e.total_usage:null;return{credits:e,remaining:c,loading:n,error:s,refetch:l}}var OV=f.createContext(void 0);function wa(e){const t=f.useContext(OV);return e||t||"ltr"}var hp="rovingFocusGroup.onEntryFocus",IV={bubbles:!1,cancelable:!0},Xc="RovingFocusGroup",[ng,m_,DV]=Yi(Xc),[MV,g_]=Lt(Xc,[DV]),[LV,$V]=MV(Xc),v_=f.forwardRef((e,t)=>o.jsx(ng.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(ng.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(FV,{...e,ref:t})})}));v_.displayName=Xc;var FV=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...d}=e,m=f.useRef(null),p=Te(t,m),b=wa(a),[g,w]=$n({prop:i,defaultProp:l??null,onChange:c,caller:Xc}),[x,v]=f.useState(!1),y=ot(u),S=m_(n),j=f.useRef(!1),[N,C]=f.useState(0);return f.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(hp,y),()=>_.removeEventListener(hp,y)},[y]),o.jsx(LV,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(_=>w(_),[w]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:f.useCallback(()=>C(_=>_-1),[]),children:o.jsx(fe.div,{tabIndex:x||N===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:oe(e.onMouseDown,()=>{j.current=!0}),onFocus:oe(e.onFocus,_=>{const k=!j.current;if(_.target===_.currentTarget&&k&&!x){const E=new CustomEvent(hp,IV);if(_.currentTarget.dispatchEvent(E),!E.defaultPrevented){const U=S().filter(z=>z.focusable),R=U.find(z=>z.active),$=U.find(z=>z.id===g),re=[R,$,...U].filter(Boolean).map(z=>z.ref.current);w_(re,h)}}j.current=!1}),onBlur:oe(e.onBlur,()=>v(!1))})})}),y_="RovingFocusGroupItem",x_=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=ln(),u=a||c,h=$V(y_,n),d=h.currentTabStopId===u,m=m_(n),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:g}=h;return f.useEffect(()=>{if(r)return p(),()=>b()},[r,p,b]),o.jsx(ng.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(fe.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:oe(e.onMouseDown,w=>{r?h.onItemFocus(u):w.preventDefault()}),onFocus:oe(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:oe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=zV(w,h.orientation,h.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const S=y.indexOf(w.currentTarget);y=h.loop?BV(y,S+1):y.slice(S+1)}setTimeout(()=>w_(y))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:g!=null}):i})})});x_.displayName=y_;var UV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zV(e,t,n){const r=VV(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return UV[r]}function w_(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function BV(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var WV=v_,HV=x_,rg=["Enter"," "],KV=["ArrowDown","PageUp","Home"],b_=["ArrowUp","PageDown","End"],qV=[...KV,...b_],GV={ltr:[...rg,"ArrowRight"],rtl:[...rg,"ArrowLeft"]},YV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jc="Menu",[Tc,QV,XV]=Yi(Jc),[ba,S_]=Lt(Jc,[XV,tl,g_]),Zc=tl(),N_=g_(),[j_,So]=ba(Jc),[JV,eu]=ba(Jc),C_=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=e,l=Zc(t),[c,u]=f.useState(null),h=f.useRef(!1),d=ot(a),m=wa(s);return f.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),o.jsx(Ah,{...l,children:o.jsx(j_,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:o.jsx(JV,{scope:t,onClose:f.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:h,dir:m,modal:i,children:r})})})};C_.displayName=Jc;var ZV="MenuAnchor",dy=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Zc(n);return o.jsx(Av,{...s,...r,ref:t})});dy.displayName=ZV;var hy="MenuPortal",[e6,__]=ba(hy,{forceMount:void 0}),k_=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=So(hy,t);return o.jsx(e6,{scope:t,forceMount:n,children:o.jsx(Xt,{present:n||a.open,children:o.jsx(zc,{asChild:!0,container:s,children:r})})})};k_.displayName=hy;var Jn="MenuContent",[t6,fy]=ba(Jn),E_=f.forwardRef((e,t)=>{const n=__(Jn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=So(Jn,e.__scopeMenu),i=eu(Jn,e.__scopeMenu);return o.jsx(Tc.Provider,{scope:e.__scopeMenu,children:o.jsx(Xt,{present:r||a.open,children:o.jsx(Tc.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(n6,{...s,ref:t}):o.jsx(r6,{...s,ref:t})})})})}),n6=f.forwardRef((e,t)=>{const n=So(Jn,e.__scopeMenu),r=f.useRef(null),s=Te(t,r);return f.useEffect(()=>{const a=r.current;if(a)return Yv(a)},[]),o.jsx(py,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:oe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),r6=f.forwardRef((e,t)=>{const n=So(Jn,e.__scopeMenu);return o.jsx(py,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),s6=ra("MenuContent.ScrollLock"),py=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:m,onDismiss:p,disableOutsideScroll:b,...g}=e,w=So(Jn,n),x=eu(Jn,n),v=Zc(n),y=N_(n),S=QV(n),[j,N]=f.useState(null),C=f.useRef(null),_=Te(t,C,w.onContentChange),k=f.useRef(0),E=f.useRef(""),U=f.useRef(0),R=f.useRef(null),$=f.useRef("right"),L=f.useRef(0),re=b?zh:f.Fragment,z=b?{as:s6,allowPinchZoom:!0}:void 0,B=A=>{var F,de;const M=E.current+A,G=S().filter(J=>!J.disabled),ee=document.activeElement,ae=(F=G.find(J=>J.ref.current===ee))==null?void 0:F.textValue,ce=G.map(J=>J.textValue),Oe=g6(ce,M,ae),ye=(de=G.find(J=>J.textValue===Oe))==null?void 0:de.ref.current;(function J(we){E.current=we,window.clearTimeout(k.current),we!==""&&(k.current=window.setTimeout(()=>J(""),1e3))})(M),ye&&setTimeout(()=>ye.focus())};f.useEffect(()=>()=>window.clearTimeout(k.current),[]),Gv();const O=f.useCallback(A=>{var G,ee;return $.current===((G=R.current)==null?void 0:G.side)&&y6(A,(ee=R.current)==null?void 0:ee.area)},[]);return o.jsx(t6,{scope:n,searchRef:E,onItemEnter:f.useCallback(A=>{O(A)&&A.preventDefault()},[O]),onItemLeave:f.useCallback(A=>{var M;O(A)||((M=C.current)==null||M.focus(),N(null))},[O]),onTriggerLeave:f.useCallback(A=>{O(A)&&A.preventDefault()},[O]),pointerGraceTimerRef:U,onPointerGraceIntentChange:f.useCallback(A=>{R.current=A},[]),children:o.jsx(re,{...z,children:o.jsx(Uh,{asChild:!0,trapped:s,onMountAutoFocus:oe(a,A=>{var M;A.preventDefault(),(M=C.current)==null||M.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Qi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:m,onDismiss:p,children:o.jsx(WV,{asChild:!0,...y,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:oe(c,A=>{x.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Rv,{role:"menu","aria-orientation":"vertical","data-state":H_(w.open),"data-radix-menu-content":"",dir:x.dir,...v,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:oe(g.onKeyDown,A=>{const G=A.target.closest("[data-radix-menu-content]")===A.currentTarget,ee=A.ctrlKey||A.altKey||A.metaKey,ae=A.key.length===1;G&&(A.key==="Tab"&&A.preventDefault(),!ee&&ae&&B(A.key));const ce=C.current;if(A.target!==ce||!qV.includes(A.key))return;A.preventDefault();const ye=S().filter(F=>!F.disabled).map(F=>F.ref.current);b_.includes(A.key)&&ye.reverse(),p6(ye)}),onBlur:oe(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(k.current),E.current="")}),onPointerMove:oe(e.onPointerMove,Pc(A=>{const M=A.target,G=L.current!==A.clientX;if(A.currentTarget.contains(M)&&G){const ee=A.clientX>L.current?"right":"left";$.current=ee,L.current=A.clientX}}))})})})})})})});E_.displayName=Jn;var o6="MenuGroup",my=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(fe.div,{role:"group",...r,ref:t})});my.displayName=o6;var a6="MenuLabel",T_=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(fe.div,{...r,ref:t})});T_.displayName=a6;var eh="MenuItem",X0="menu.itemSelect",Kh=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=f.useRef(null),i=eu(eh,e.__scopeMenu),l=fy(eh,e.__scopeMenu),c=Te(t,a),u=f.useRef(!1),h=()=>{const d=a.current;if(!n&&d){const m=new CustomEvent(X0,{bubbles:!0,cancelable:!0});d.addEventListener(X0,p=>r==null?void 0:r(p),{once:!0}),dv(d,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(P_,{...s,ref:c,disabled:n,onClick:oe(e.onClick,h),onPointerDown:d=>{var m;(m=e.onPointerDown)==null||m.call(e,d),u.current=!0},onPointerUp:oe(e.onPointerUp,d=>{var m;u.current||(m=d.currentTarget)==null||m.click()}),onKeyDown:oe(e.onKeyDown,d=>{const m=l.searchRef.current!=="";n||m&&d.key===" "||rg.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Kh.displayName=eh;var P_=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,i=fy(eh,n),l=N_(n),c=f.useRef(null),u=Te(t,c),[h,d]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const b=c.current;b&&p((b.textContent??"").trim())},[a.children]),o.jsx(Tc.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(HV,{asChild:!0,...l,focusable:!r,children:o.jsx(fe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:oe(e.onPointerMove,Pc(b=>{r?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:oe(e.onPointerLeave,Pc(b=>i.onItemLeave(b))),onFocus:oe(e.onFocus,()=>d(!0)),onBlur:oe(e.onBlur,()=>d(!1))})})})}),i6="MenuCheckboxItem",A_=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(M_,{scope:e.__scopeMenu,checked:n,children:o.jsx(Kh,{role:"menuitemcheckbox","aria-checked":th(n)?"mixed":n,...s,ref:t,"data-state":yy(n),onSelect:oe(s.onSelect,()=>r==null?void 0:r(th(n)?!0:!n),{checkForDefaultPrevented:!1})})})});A_.displayName=i6;var R_="MenuRadioGroup",[l6,c6]=ba(R_,{value:void 0,onValueChange:()=>{}}),O_=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=ot(r);return o.jsx(l6,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(my,{...s,ref:t})})});O_.displayName=R_;var I_="MenuRadioItem",D_=f.forwardRef((e,t)=>{const{value:n,...r}=e,s=c6(I_,e.__scopeMenu),a=n===s.value;return o.jsx(M_,{scope:e.__scopeMenu,checked:a,children:o.jsx(Kh,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":yy(a),onSelect:oe(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});D_.displayName=I_;var gy="MenuItemIndicator",[M_,u6]=ba(gy,{checked:!1}),L_=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=u6(gy,n);return o.jsx(Xt,{present:r||th(a.checked)||a.checked===!0,children:o.jsx(fe.span,{...s,ref:t,"data-state":yy(a.checked)})})});L_.displayName=gy;var d6="MenuSeparator",$_=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});$_.displayName=d6;var h6="MenuArrow",F_=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Zc(n);return o.jsx(Ov,{...s,...r,ref:t})});F_.displayName=h6;var vy="MenuSub",[f6,U_]=ba(vy),V_=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:s}=e,a=So(vy,t),i=Zc(t),[l,c]=f.useState(null),[u,h]=f.useState(null),d=ot(s);return f.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),o.jsx(Ah,{...i,children:o.jsx(j_,{scope:t,open:r,onOpenChange:d,content:u,onContentChange:h,children:o.jsx(f6,{scope:t,contentId:ln(),triggerId:ln(),trigger:l,onTriggerChange:c,children:n})})})};V_.displayName=vy;var Dl="MenuSubTrigger",z_=f.forwardRef((e,t)=>{const n=So(Dl,e.__scopeMenu),r=eu(Dl,e.__scopeMenu),s=U_(Dl,e.__scopeMenu),a=fy(Dl,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},h=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>h,[h]),f.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),o.jsx(dy,{asChild:!0,...u,children:o.jsx(P_,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":H_(n.open),...e,ref:Sh(t,s.onTriggerChange),onClick:d=>{var m;(m=e.onClick)==null||m.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:oe(e.onPointerMove,Pc(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:oe(e.onPointerLeave,Pc(d=>{var p,b;h();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(b=n.content)==null?void 0:b.dataset.side,w=g==="right",x=w?-5:5,v=m[w?"left":"right"],y=m[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:v,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:oe(e.onKeyDown,d=>{var p;const m=a.searchRef.current!=="";e.disabled||m&&d.key===" "||GV[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});z_.displayName=Dl;var B_="MenuSubContent",W_=f.forwardRef((e,t)=>{const n=__(Jn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=So(Jn,e.__scopeMenu),i=eu(Jn,e.__scopeMenu),l=U_(B_,e.__scopeMenu),c=f.useRef(null),u=Te(t,c);return o.jsx(Tc.Provider,{scope:e.__scopeMenu,children:o.jsx(Xt,{present:r||a.open,children:o.jsx(Tc.Slot,{scope:e.__scopeMenu,children:o.jsx(py,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:oe(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:oe(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:oe(e.onKeyDown,h=>{var p;const d=h.currentTarget.contains(h.target),m=YV[i.dir].includes(h.key);d&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),h.preventDefault())})})})})})});W_.displayName=B_;function H_(e){return e?"open":"closed"}function th(e){return e==="indeterminate"}function yy(e){return th(e)?"indeterminate":e?"checked":"unchecked"}function p6(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function m6(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function g6(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=m6(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function v6(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,d=c.x,m=c.y;h>r!=m>r&&n<(d-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function y6(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return v6(n,t)}function Pc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var x6=C_,w6=dy,b6=k_,S6=E_,N6=my,j6=T_,C6=Kh,_6=A_,k6=O_,E6=D_,T6=L_,P6=$_,A6=F_,R6=V_,O6=z_,I6=W_,qh="DropdownMenu",[D6,wW]=Lt(qh,[S_]),Jt=S_(),[M6,K_]=D6(qh),q_=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Jt(t),u=f.useRef(null),[h,d]=$n({prop:s,defaultProp:a??!1,onChange:i,caller:qh});return o.jsx(M6,{scope:t,triggerId:ln(),triggerRef:u,contentId:ln(),open:h,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(m=>!m),[d]),modal:l,children:o.jsx(x6,{...c,open:h,onOpenChange:d,dir:r,modal:l,children:n})})};q_.displayName=qh;var G_="DropdownMenuTrigger",Y_=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=K_(G_,n),i=Jt(n);return o.jsx(w6,{asChild:!0,...i,children:o.jsx(fe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Sh(t,a.triggerRef),onPointerDown:oe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:oe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Y_.displayName=G_;var L6="DropdownMenuPortal",Q_=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Jt(t);return o.jsx(b6,{...r,...n})};Q_.displayName=L6;var X_="DropdownMenuContent",J_=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=K_(X_,n),a=Jt(n),i=f.useRef(!1);return o.jsx(S6,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:oe(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:oe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});J_.displayName=X_;var $6="DropdownMenuGroup",F6=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(N6,{...s,...r,ref:t})});F6.displayName=$6;var U6="DropdownMenuLabel",Z_=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(j6,{...s,...r,ref:t})});Z_.displayName=U6;var V6="DropdownMenuItem",ek=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(C6,{...s,...r,ref:t})});ek.displayName=V6;var z6="DropdownMenuCheckboxItem",tk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(_6,{...s,...r,ref:t})});tk.displayName=z6;var B6="DropdownMenuRadioGroup",W6=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(k6,{...s,...r,ref:t})});W6.displayName=B6;var H6="DropdownMenuRadioItem",nk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(E6,{...s,...r,ref:t})});nk.displayName=H6;var K6="DropdownMenuItemIndicator",rk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(T6,{...s,...r,ref:t})});rk.displayName=K6;var q6="DropdownMenuSeparator",sk=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(P6,{...s,...r,ref:t})});sk.displayName=q6;var G6="DropdownMenuArrow",Y6=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(A6,{...s,...r,ref:t})});Y6.displayName=G6;var Q6=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:s,defaultOpen:a}=e,i=Jt(t),[l,c]=$n({prop:r,defaultProp:a??!1,onChange:s,caller:"DropdownMenuSub"});return o.jsx(R6,{...i,open:l,onOpenChange:c,children:n})},X6="DropdownMenuSubTrigger",ok=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(O6,{...s,...r,ref:t})});ok.displayName=X6;var J6="DropdownMenuSubContent",ak=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jt(n);return o.jsx(I6,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ak.displayName=J6;var Z6=q_,e8=Y_,t8=Q_,ik=J_,lk=Z_,ck=ek,uk=tk,dk=nk,hk=rk,fk=sk,n8=Q6,pk=ok,mk=ak;const J0=Z6,Z0=e8,r8=n8,gk=f.forwardRef(({className:e,inset:t,children:n,...r},s)=>o.jsxs(pk,{ref:s,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,o.jsx(Dr,{className:"ml-auto h-4 w-4"})]}));gk.displayName=pk.displayName;const vk=f.forwardRef(({className:e,...t},n)=>o.jsx(mk,{ref:n,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vk.displayName=mk.displayName;const sg=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(t8,{children:o.jsx(ik,{ref:r,sideOffset:t,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));sg.displayName=ik.displayName;const Ba=f.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(ck,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));Ba.displayName=ck.displayName;const s8=f.forwardRef(({className:e,children:t,checked:n,...r},s)=>o.jsxs(uk,{ref:s,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hk,{children:o.jsx(wo,{className:"h-4 w-4"})})}),t]}));s8.displayName=uk.displayName;const o8=f.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(dk,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hk,{children:o.jsx(NR,{className:"h-2 w-2 fill-current"})})}),t]}));o8.displayName=dk.displayName;const a8=f.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(lk,{ref:r,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));a8.displayName=lk.displayName;const yk=f.forwardRef(({className:e,...t},n)=>o.jsx(fk,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));yk.displayName=fk.displayName;const ua=Zv,i8=ey,l8=ty,xk=f.forwardRef(({className:e,...t},n)=>o.jsx(Kc,{ref:n,className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));xk.displayName=Kc.displayName;const po=f.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(l8,{children:[o.jsx(xk,{}),o.jsxs(qc,{ref:r,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(Wh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(ps,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));po.displayName=qc.displayName;const mo=({className:e,...t})=>o.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});mo.displayName="DialogHeader";const nh=({className:e,...t})=>o.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});nh.displayName="DialogFooter";const go=f.forwardRef(({className:e,...t},n)=>o.jsx(Gc,{ref:n,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));go.displayName=Gc.displayName;const Gh=f.forwardRef(({className:e,...t},n)=>o.jsx(Yc,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Gh.displayName=Yc.displayName;var c8="Label",wk=f.forwardRef((e,t)=>o.jsx(fe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));wk.displayName=c8;var bk=wk;const u8=Xi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=f.forwardRef(({className:e,...t},n)=>o.jsx(bk,{ref:n,className:Q(u8(),e),...t}));K.displayName=bk.displayName;function d8(){const e=xa(),{t}=dn(),{toast:n}=Mt(),{scripts:r,loading:s,updateScript:a,deleteScript:i}=d_(),{dnas:l,loading:c}=uy(),{folders:u,loading:h,createFolder:d,deleteFolder:m}=AV(),{credits:p,loading:b,error:g,refetch:w}=RV(),[x,v]=f.useState(""),[y,S]=f.useState(!1),[j,N]=f.useState(""),[C,_]=f.useState(null),[k,E]=f.useState(!1),[U,R]=f.useState(null),[$,L]=f.useState(""),re=r.length,z=l.length,B=[{title:t("dashboard.quickActions.extractDna"),description:t("dashboard.quickActions.extractDnaDesc"),icon:bo,to:"/dna-lab"},{title:t("dashboard.quickActions.newScript"),description:t("dashboard.quickActions.newScriptDesc"),icon:uo,to:"/writer"}],O=()=>b?"Loading...":g?g.includes("No API key")?"No API Key":"Error":(p==null?void 0:p.total_usage)!==void 0?`$${p.total_usage.toFixed(2)}`:"N/A",A=r.filter(F=>{const de=F.title.toLowerCase().includes(x.toLowerCase())||F.topic&&F.topic.toLowerCase().includes(x.toLowerCase());return C?de&&F.folder_id===C:de}),M=r.filter(F=>!F.folder_id),G=async()=>{j.trim()&&(await d(j),N(""),S(!1))},ee=async()=>{!U||!$.trim()||(await a(U,{title:$}),E(!1),R(null),L(""))},ae=async F=>{await i(F)},ce=async(F,de)=>{await a(F,{folder_id:de}),n({title:de?"Moved to folder":"Removed from folder",description:de?"Script has been moved to the folder":"Script has been moved to root"})},Oe=(F,de)=>{R(F),L(de),E(!0)},ye=u.find(F=>F.id===C);return o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4",children:[o.jsx(U0,{title:t("dashboard.stats.totalProjects"),value:re,icon:mv,iconColor:"text-blue-500"}),o.jsx(U0,{title:t("dashboard.stats.dnaTemplates"),value:z,icon:dt,iconColor:"text-purple-500"}),o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl border border-border/50 bg-card/80",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"rounded-xl bg-emerald-500/10 p-2.5",children:o.jsx(CR,{className:"h-5 w-5 text-emerald-500"})}),o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("dashboard.stats.creditsUsed")})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg font-semibold",children:O()}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>w(),disabled:b,children:o.jsx(Jr,{className:`h-4 w-4 ${b?"animate-spin":""}`})})]})]}),o.jsxs("a",{href:"https://www.facebook.com/logdd.pitre",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-4 rounded-2xl border border-border/50 bg-card/80 hover:border-primary/50 hover:bg-card transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"rounded-xl bg-blue-500/10 p-2.5",children:o.jsx(kR,{className:"h-5 w-5 text-blue-500"})}),o.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:t("dashboard.stats.contact")})]}),o.jsx("span",{className:"text-lg font-semibold",children:"LONG"})]})]}),o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsx("div",{children:ye?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>_(null),children:[" ",t("common.back")]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[o.jsx(vv,{className:"h-6 w-6 text-primary"}),ye.name]}),o.jsxs("p",{className:"text-muted-foreground",children:[A.length," scripts in this folder"]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t("dashboard.title")}),o.jsx("p",{className:"text-muted-foreground",children:t("dashboard.subtitle")})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>S(!0),children:[o.jsx(ER,{className:"h-4 w-4"}),t("common.newFolder")]}),o.jsx(V,{size:"sm",className:"gap-2",asChild:!0,children:o.jsxs(bc,{to:"/writer",children:[o.jsx(tt,{className:"h-4 w-4"}),t("common.newProject")]})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Dn,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{placeholder:t("dashboard.search.placeholder"),value:x,onChange:F=>v(F.target.value),className:"pl-10"})]}),!C&&o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:B.map(F=>o.jsx(YU,{...F},F.title))}),!C&&u.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:t("dashboard.folders")}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:u.map(F=>{const de=r.filter(J=>J.folder_id===F.id).length;return o.jsxs("div",{className:"relative group p-4 rounded-2xl border border-border/50 bg-card/80 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>_(F.id),children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:o.jsx(Uf,{className:"h-5 w-5 text-primary"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium truncate",children:F.name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[de," items"]})]})]}),o.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsxs(J0,{children:[o.jsx(Z0,{asChild:!0,onClick:J=>J.stopPropagation(),children:o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-background/80 backdrop-blur-sm",children:o.jsx(Sw,{className:"h-4 w-4"})})}),o.jsx(sg,{align:"end",children:o.jsxs(Ba,{onClick:J=>{J.stopPropagation(),m(F.id)},className:"text-destructive focus:text-destructive",children:[o.jsx(bt,{className:"h-4 w-4 mr-2"}),t("common.delete")]})})]})})]},F.id)})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:t(C?"dashboard.scripts":"dashboard.recentProjects")}),s?o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[1,2,3,4].map(F=>o.jsx("div",{className:"h-32 animate-pulse rounded-2xl bg-muted/50"},F))}):(C?A:M.filter(F=>F.title.toLowerCase().includes(x.toLowerCase())||F.topic&&F.topic.toLowerCase().includes(x.toLowerCase()))).length>0?o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:(C?A:M.filter(F=>F.title.toLowerCase().includes(x.toLowerCase())||F.topic&&F.topic.toLowerCase().includes(x.toLowerCase()))).map(F=>o.jsxs("div",{className:"relative group",children:[o.jsx(GU,{title:F.title,status:F.status||"draft",mode:F.generation_mode||void 0,date:F.created_at,onClick:()=>e(`/writer/${F.id}`)}),o.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsxs(J0,{children:[o.jsx(Z0,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 bg-background/80 backdrop-blur-sm",children:o.jsx(Sw,{className:"h-4 w-4"})})}),o.jsxs(sg,{align:"end",children:[o.jsxs(Ba,{onClick:()=>Oe(F.id,F.title),children:[o.jsx(LR,{className:"h-4 w-4 mr-2"}),t("common.rename")]}),u.length>0&&o.jsxs(r8,{children:[o.jsxs(gk,{children:[o.jsx(fs,{className:"h-4 w-4 mr-2"}),t("dashboard.moveToFolder")]}),o.jsxs(vk,{children:[F.folder_id&&o.jsxs(Ba,{onClick:()=>ce(F.id,null),children:[o.jsx(Uf,{className:"h-4 w-4 mr-2"}),t("dashboard.removeFromFolder")]}),u.filter(de=>de.id!==F.folder_id).map(de=>o.jsxs(Ba,{onClick:()=>ce(F.id,de.id),children:[o.jsx(Uf,{className:"h-4 w-4 mr-2"}),de.name]},de.id))]})]}),o.jsx(yk,{}),o.jsxs(Ba,{onClick:()=>ae(F.id),className:"text-destructive focus:text-destructive",children:[o.jsx(bt,{className:"h-4 w-4 mr-2"}),t("common.delete")]})]})]})})]},F.id))}):o.jsxs("div",{className:"rounded-2xl border border-dashed border-border/50 p-12 text-center",children:[o.jsx("p",{className:"text-muted-foreground",children:t(x?"dashboard.noProjectsSearch":C?"dashboard.noScriptsFolder":"dashboard.noProjects")}),o.jsx(V,{className:"mt-4",asChild:!0,children:o.jsxs(bc,{to:"/writer",children:[o.jsx(tt,{className:"mr-2 h-4 w-4"}),t("dashboard.createScript")]})})]})]}),o.jsx(ua,{open:y,onOpenChange:S,children:o.jsxs(po,{children:[o.jsx(mo,{children:o.jsx(go,{children:t("dashboard.createFolder.title")})}),o.jsx("div",{className:"space-y-4 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:t("dashboard.createFolder.label")}),o.jsx(ie,{value:j,onChange:F=>N(F.target.value),placeholder:t("dashboard.createFolder.placeholder"),onKeyDown:F=>F.key==="Enter"&&G()})]})}),o.jsxs(nh,{children:[o.jsx(V,{variant:"outline",onClick:()=>S(!1),children:t("common.cancel")}),o.jsx(V,{onClick:G,children:t("common.create")})]})]})}),o.jsx(ua,{open:k,onOpenChange:E,children:o.jsxs(po,{children:[o.jsx(mo,{children:o.jsx(go,{children:t("dashboard.renameProject.title")})}),o.jsx("div",{className:"space-y-4 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:t("dashboard.renameProject.label")}),o.jsx(ie,{value:$,onChange:F=>L(F.target.value),placeholder:t("dashboard.renameProject.placeholder"),onKeyDown:F=>F.key==="Enter"&&ee()})]})}),o.jsxs(nh,{children:[o.jsx(V,{variant:"outline",onClick:()=>E(!1),children:t("common.cancel")}),o.jsx(V,{onClick:ee,children:t("common.save")})]})]})})]})}const h8=()=>o.jsx(d8,{});function f8(){const[e,t]=f.useState(!0),[n,r]=f.useState(""),[s,a]=f.useState(""),[i,l]=f.useState(""),[c,u]=f.useState(!1),[h,d]=f.useState(!1),[m,p]=f.useState(!1),{user:b,signIn:g,signUp:w}=Sn(),{toast:x}=Mt(),{t:v}=dn();if(b)return o.jsx(kj,{to:"/",replace:!0});const y=async()=>{p(!0);try{const{error:N}=await De.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});N&&x({title:"Error",description:N.message,variant:"destructive"})}finally{p(!1)}},S=async N=>{if(N.preventDefault(),s.length<6){x({title:v("auth.passwordTooShort"),description:v("auth.passwordTooShortDesc"),variant:"destructive"});return}d(!0);try{const{error:C}=e?await g(n,s):await w(n,s);if(C){let _=C.message;C.message.includes("Invalid login credentials")?_="Invalid email or password. Please try again.":C.message.includes("User already registered")&&(_="This email is already registered. Please sign in instead."),x({title:"Error",description:_,variant:"destructive"})}else e||(x({title:v("auth.accountCreated"),description:v("auth.accountCreatedDesc")}),t(!0),a(""))}finally{d(!1)}},j=[{icon:bo,text:v("auth.features.extractDna"),description:v("auth.features.extractDnaDesc")},{icon:dt,text:v("auth.features.aiPowered"),description:v("auth.features.aiPoweredDesc")},{icon:sa,text:v("auth.features.personas"),description:v("auth.features.personasDesc")},{icon:ns,text:v("auth.features.rapidIteration"),description:v("auth.features.rapidIterationDesc")}];return o.jsxs("div",{className:"min-h-screen flex overflow-hidden",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative p-12 flex-col justify-between",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-background to-accent/30"}),o.jsxs("div",{className:"absolute inset-0 opacity-30",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-72 h-72 bg-primary/30 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"rounded-2xl bg-primary/20 backdrop-blur-sm p-3 border border-primary/20",children:o.jsx(dt,{className:"h-7 w-7 text-primary"})}),o.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"Viral DNA"})]})}),o.jsxs("div",{className:"relative z-10 space-y-10",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight leading-tight",children:[v("auth.unlockSecrets"),o.jsx("br",{}),o.jsx("span",{className:"bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:v("auth.ofViralContent")})]}),o.jsx("p",{className:"mt-6 text-lg text-muted-foreground max-w-md leading-relaxed",children:v("auth.heroDescription")})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:j.map((N,C)=>o.jsxs("div",{className:"group p-4 rounded-2xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/30 hover:bg-card/80 transition-all duration-300",children:[o.jsx("div",{className:"rounded-xl bg-primary/10 p-2.5 w-fit mb-3 group-hover:bg-primary/20 transition-colors",children:o.jsx(N.icon,{className:"h-5 w-5 text-primary"})}),o.jsx("p",{className:"font-medium text-sm",children:N.text}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N.description})]},C))})]}),o.jsxs("div",{className:"relative z-10 flex items-center justify-between text-sm text-muted-foreground",children:[o.jsx("span",{children:" 2026 logdd. All rights reserved."}),o.jsx(bc,{to:"/pricing",className:"text-primary hover:underline",children:v("auth.viewPricing")})]})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-6 lg:p-12 bg-background",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"lg:hidden flex items-center gap-3 mb-8 justify-center",children:[o.jsx("div",{className:"rounded-2xl bg-primary/20 p-3",children:o.jsx(dt,{className:"h-7 w-7 text-primary"})}),o.jsx("span",{className:"text-2xl font-bold",children:"Viral DNA"})]}),o.jsxs(ve,{className:"border-0 shadow-2xl",children:[o.jsxs(ut,{className:"text-center pb-2",children:[o.jsx(xt,{className:"text-2xl",children:v(e?"auth.welcomeBack":"auth.createAccount")}),o.jsx(Ur,{children:v(e?"auth.enterCredentials":"auth.startCreating")})]}),o.jsxs(be,{className:"pt-4 space-y-6",children:[o.jsx(V,{type:"button",variant:"outline",className:"w-full rounded-xl h-12 gap-3 font-medium hover:bg-accent/50 transition-all",onClick:y,disabled:m,children:m?o.jsx(We,{className:"h-5 w-5 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),v("auth.continueWithGoogle")]})}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-border"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-card px-3 text-muted-foreground",children:v("auth.orContinueWith")})})]}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[!e&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"name",children:v("auth.fullName")}),o.jsxs("div",{className:"relative",children:[o.jsx(KR,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{id:"name",type:"text",placeholder:v("auth.namePlaceholder"),value:i,onChange:N=>l(N.target.value),className:"pl-10 rounded-xl h-12"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"email",children:v("auth.email")}),o.jsxs("div",{className:"relative",children:[o.jsx(AR,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{id:"email",type:"email",placeholder:v("auth.emailPlaceholder"),value:n,onChange:N=>r(N.target.value),className:"pl-10 rounded-xl h-12",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{htmlFor:"password",children:v("auth.password")}),o.jsxs("div",{className:"relative",children:[o.jsx(TR,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{id:"password",type:c?"text":"password",placeholder:v("auth.passwordPlaceholder"),value:s,onChange:N=>a(N.target.value),className:"pl-10 pr-10 rounded-xl h-12",required:!0,minLength:6}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:c?o.jsx(_R,{className:"h-4 w-4"}):o.jsx(h1,{className:"h-4 w-4"})})]}),!e&&o.jsx("p",{className:"text-xs text-muted-foreground",children:v("auth.passwordMinLength")})]}),e&&o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"text-sm text-primary hover:underline",children:v("auth.forgotPassword")})}),o.jsx(V,{type:"submit",className:"w-full rounded-xl h-12 gap-2 font-medium",disabled:h,children:h?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsxs(o.Fragment,{children:[v(e?"auth.signIn":"auth.createAccountAction"),o.jsx(fs,{className:"h-4 w-4"})]})})]}),o.jsxs("div",{className:"text-center text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:e?v("auth.noAccount")+" ":v("auth.hasAccount")+" "}),o.jsx("button",{type:"button",onClick:()=>{t(!e),a("")},className:"font-semibold text-primary hover:underline",children:v(e?"auth.signUpAction":"auth.signInAction")})]}),!e&&o.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[v("auth.termsAgreement")," ",o.jsx("a",{href:"#",className:"text-primary hover:underline",children:v("auth.termsOfService")})," ",v("auth.and")," ",o.jsx("a",{href:"#",className:"text-primary hover:underline",children:v("auth.privacyPolicy")})]})]})]})]})})]})}const Ae=f.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:Q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ae.displayName="Textarea";function ss(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var fp="rovingFocusGroup.onEntryFocus",p8={bubbles:!1,cancelable:!0},tu="RovingFocusGroup",[og,Sk,m8]=Yi(tu),[g8,Nk]=Lt(tu,[m8]),[v8,y8]=g8(tu),jk=f.forwardRef((e,t)=>o.jsx(og.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(og.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(x8,{...e,ref:t})})}));jk.displayName=tu;var x8=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...d}=e,m=f.useRef(null),p=Te(t,m),b=wa(a),[g,w]=$n({prop:i,defaultProp:l??null,onChange:c,caller:tu}),[x,v]=f.useState(!1),y=ot(u),S=Sk(n),j=f.useRef(!1),[N,C]=f.useState(0);return f.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(fp,y),()=>_.removeEventListener(fp,y)},[y]),o.jsx(v8,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(_=>w(_),[w]),onItemShiftTab:f.useCallback(()=>v(!0),[]),onFocusableItemAdd:f.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:f.useCallback(()=>C(_=>_-1),[]),children:o.jsx(fe.div,{tabIndex:x||N===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:ss(e.onMouseDown,()=>{j.current=!0}),onFocus:ss(e.onFocus,_=>{const k=!j.current;if(_.target===_.currentTarget&&k&&!x){const E=new CustomEvent(fp,p8);if(_.currentTarget.dispatchEvent(E),!E.defaultPrevented){const U=S().filter(z=>z.focusable),R=U.find(z=>z.active),$=U.find(z=>z.id===g),re=[R,$,...U].filter(Boolean).map(z=>z.ref.current);kk(re,h)}}j.current=!1}),onBlur:ss(e.onBlur,()=>v(!1))})})}),Ck="RovingFocusGroupItem",_k=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=ln(),u=a||c,h=y8(Ck,n),d=h.currentTabStopId===u,m=Sk(n),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:g}=h;return f.useEffect(()=>{if(r)return p(),()=>b()},[r,p,b]),o.jsx(og.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(fe.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:ss(e.onMouseDown,w=>{r?h.onItemFocus(u):w.preventDefault()}),onFocus:ss(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:ss(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=S8(w,h.orientation,h.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const S=y.indexOf(w.currentTarget);y=h.loop?N8(y,S+1):y.slice(S+1)}setTimeout(()=>kk(y))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:g!=null}):i})})});_k.displayName=Ck;var w8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function b8(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function S8(e,t,n){const r=b8(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return w8[r]}function kk(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function N8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var j8=jk,C8=_k;function _8(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Ek=e=>{const{present:t,children:n}=e,r=k8(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=Te(r.ref,E8(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};Ek.displayName="Presence";function k8(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),i=e?"mounted":"unmounted",[l,c]=_8(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Bu(r.current);a.current=l==="mounted"?u:"none"},[l]),at(()=>{const u=r.current,h=s.current;if(h!==e){const m=a.current,p=Bu(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),at(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,d=p=>{const g=Bu(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=p=>{p.target===t&&(a.current=Bu(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Bu(e){return(e==null?void 0:e.animationName)||"none"}function E8(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Yh="Tabs",[T8,bW]=Lt(Yh,[Nk]),Tk=Nk(),[P8,xy]=T8(Yh),Pk=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,h=wa(l),[d,m]=$n({prop:r,onChange:s,defaultProp:a??"",caller:Yh});return o.jsx(P8,{scope:n,baseId:ln(),value:d,onValueChange:m,orientation:i,dir:h,activationMode:c,children:o.jsx(fe.div,{dir:h,"data-orientation":i,...u,ref:t})})});Pk.displayName=Yh;var Ak="TabsList",Rk=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=xy(Ak,n),i=Tk(n);return o.jsx(j8,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(fe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});Rk.displayName=Ak;var Ok="TabsTrigger",Ik=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=xy(Ok,n),l=Tk(n),c=Lk(i.baseId,r),u=$k(i.baseId,r),h=r===i.value;return o.jsx(C8,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(fe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:ss(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:ss(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:ss(e.onFocus,()=>{const d=i.activationMode!=="manual";!h&&!s&&d&&i.onValueChange(r)})})})});Ik.displayName=Ok;var Dk="TabsContent",Mk=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,l=xy(Dk,n),c=Lk(l.baseId,r),u=$k(l.baseId,r),h=r===l.value,d=f.useRef(h);return f.useEffect(()=>{const m=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(Ek,{present:s||h,children:({present:m})=>o.jsx(fe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:m&&a})})});Mk.displayName=Dk;function Lk(e,t){return`${e}-trigger-${t}`}function $k(e,t){return`${e}-content-${t}`}var A8=Pk,Fk=Rk,Uk=Ik,Vk=Mk;const Bi=A8,da=f.forwardRef(({className:e,...t},n)=>o.jsx(Fk,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));da.displayName=Fk.displayName;const Pn=f.forwardRef(({className:e,...t},n)=>o.jsx(Uk,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Pn.displayName=Uk.displayName;const An=f.forwardRef(({className:e,...t},n)=>o.jsx(Vk,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));An.displayName=Vk.displayName;function Ac(e,[t,n]){return Math.min(n,Math.max(t,e))}function wy(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var R8=[" ","Enter","ArrowUp","ArrowDown"],O8=[" ","Enter"],ha="Select",[Qh,Xh,I8]=Yi(ha),[il,SW]=Lt(ha,[I8,tl]),Jh=tl(),[D8,No]=il(ha),[M8,L8]=il(ha),zk=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:d,disabled:m,required:p,form:b}=e,g=Jh(t),[w,x]=f.useState(null),[v,y]=f.useState(null),[S,j]=f.useState(!1),N=wa(u),[C,_]=$n({prop:r,defaultProp:s??!1,onChange:a,caller:ha}),[k,E]=$n({prop:i,defaultProp:l,onChange:c,caller:ha}),U=f.useRef(null),R=w?b||!!w.closest("form"):!0,[$,L]=f.useState(new Set),re=Array.from($).map(z=>z.props.value).join(";");return o.jsx(Ah,{...g,children:o.jsxs(D8,{required:p,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:ln(),value:k,onValueChange:E,open:C,onOpenChange:_,dir:N,triggerPointerDownPosRef:U,disabled:m,children:[o.jsx(Qh.Provider,{scope:t,children:o.jsx(M8,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(z=>{L(B=>new Set(B).add(z))},[]),onNativeOptionRemove:f.useCallback(z=>{L(B=>{const O=new Set(B);return O.delete(z),O})},[]),children:n})}),R?o.jsxs(hE,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:d,value:k,onChange:z=>E(z.target.value),disabled:m,form:b,children:[k===void 0?o.jsx("option",{value:""}):null,Array.from($)]},re):null]})})};zk.displayName=ha;var Bk="SelectTrigger",Wk=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=Jh(n),i=No(Bk,n),l=i.disabled||r,c=Te(t,i.onTriggerChange),u=Xh(n),h=f.useRef("touch"),[d,m,p]=pE(g=>{const w=u().filter(y=>!y.disabled),x=w.find(y=>y.value===i.value),v=mE(w,g,x);v!==void 0&&i.onValueChange(v.value)}),b=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Av,{asChild:!0,...a,children:o.jsx(fe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":fE(i.value)?"":void 0,...s,ref:c,onClick:oe(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&b(g)}),onPointerDown:oe(s.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:oe(s.onKeyDown,g=>{const w=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(w&&g.key===" ")&&R8.includes(g.key)&&(b(),g.preventDefault())})})})});Wk.displayName=Bk;var Hk="SelectValue",Kk=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...l}=e,c=No(Hk,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,d=Te(t,c.onValueNodeChange);return at(()=>{u(h)},[u,h]),o.jsx(fe.span,{...l,ref:d,style:{pointerEvents:"none"},children:fE(c.value)?o.jsx(o.Fragment,{children:i}):a})});Kk.displayName=Hk;var $8="SelectIcon",qk=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(fe.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});qk.displayName=$8;var F8="SelectPortal",Gk=e=>o.jsx(zc,{asChild:!0,...e});Gk.displayName=F8;var fa="SelectContent",Yk=f.forwardRef((e,t)=>{const n=No(fa,e.__scopeSelect),[r,s]=f.useState();if(at(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?ga.createPortal(o.jsx(Qk,{scope:e.__scopeSelect,children:o.jsx(Qh.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(Xk,{...e,ref:t})});Yk.displayName=fa;var cr=10,[Qk,jo]=il(fa),U8="SelectContentImpl",V8=ra("SelectContent.RemoveScroll"),Xk=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:d,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=No(fa,n),[y,S]=f.useState(null),[j,N]=f.useState(null),C=Te(t,F=>S(F)),[_,k]=f.useState(null),[E,U]=f.useState(null),R=Xh(n),[$,L]=f.useState(!1),re=f.useRef(!1);f.useEffect(()=>{if(y)return Yv(y)},[y]),Gv();const z=f.useCallback(F=>{const[de,...J]=R().map(D=>D.ref.current),[we]=J.slice(-1),Se=document.activeElement;for(const D of F)if(D===Se||(D==null||D.scrollIntoView({block:"nearest"}),D===de&&j&&(j.scrollTop=0),D===we&&j&&(j.scrollTop=j.scrollHeight),D==null||D.focus(),document.activeElement!==Se))return},[R,j]),B=f.useCallback(()=>z([_,y]),[z,_,y]);f.useEffect(()=>{$&&B()},[$,B]);const{onOpenChange:O,triggerPointerDownPosRef:A}=v;f.useEffect(()=>{if(y){let F={x:0,y:0};const de=we=>{var Se,D;F={x:Math.abs(Math.round(we.pageX)-(((Se=A.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(we.pageY)-(((D=A.current)==null?void 0:D.y)??0))}},J=we=>{F.x<=10&&F.y<=10?we.preventDefault():y.contains(we.target)||O(!1),document.removeEventListener("pointermove",de),A.current=null};return A.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",J,{capture:!0})}}},[y,O,A]),f.useEffect(()=>{const F=()=>O(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[O]);const[M,G]=pE(F=>{const de=R().filter(Se=>!Se.disabled),J=de.find(Se=>Se.ref.current===document.activeElement),we=mE(de,F,J);we&&setTimeout(()=>we.ref.current.focus())}),ee=f.useCallback((F,de,J)=>{const we=!re.current&&!J;(v.value!==void 0&&v.value===de||we)&&(k(F),we&&(re.current=!0))},[v.value]),ae=f.useCallback(()=>y==null?void 0:y.focus(),[y]),ce=f.useCallback((F,de,J)=>{const we=!re.current&&!J;(v.value!==void 0&&v.value===de||we)&&U(F)},[v.value]),Oe=r==="popper"?ag:Jk,ye=Oe===ag?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:d,collisionBoundary:m,collisionPadding:p,sticky:b,hideWhenDetached:g,avoidCollisions:w}:{};return o.jsx(Qk,{scope:n,content:y,viewport:j,onViewportChange:N,itemRefCallback:ee,selectedItem:_,onItemLeave:ae,itemTextRefCallback:ce,focusSelectedItem:B,selectedItemText:E,position:r,isPositioned:$,searchRef:M,children:o.jsx(zh,{as:V8,allowPinchZoom:!0,children:o.jsx(Uh,{asChild:!0,trapped:v.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:oe(s,F=>{var de;(de=v.trigger)==null||de.focus({preventScroll:!0}),F.preventDefault()}),children:o.jsx(Qi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(Oe,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:F=>F.preventDefault(),...x,...ye,onPlaced:()=>L(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:oe(x.onKeyDown,F=>{const de=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!de&&F.key.length===1&&G(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let we=R().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(F.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const Se=F.target,D=we.indexOf(Se);we=we.slice(D+1)}setTimeout(()=>z(we)),F.preventDefault()}})})})})})})});Xk.displayName=U8;var z8="SelectItemAlignedPosition",Jk=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=No(fa,n),i=jo(fa,n),[l,c]=f.useState(null),[u,h]=f.useState(null),d=Te(t,C=>h(C)),m=Xh(n),p=f.useRef(!1),b=f.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=i,y=f.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&w&&x){const C=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),E=x.getBoundingClientRect();if(a.dir!=="rtl"){const Se=E.left-_.left,D=k.left-Se,Y=C.left-D,te=C.width+Y,ue=Math.max(te,_.width),Xe=window.innerWidth-cr,Zt=Ac(D,[cr,Math.max(cr,Xe-ue)]);l.style.minWidth=te+"px",l.style.left=Zt+"px"}else{const Se=_.right-E.right,D=window.innerWidth-k.right-Se,Y=window.innerWidth-C.right-D,te=C.width+Y,ue=Math.max(te,_.width),Xe=window.innerWidth-cr,Zt=Ac(D,[cr,Math.max(cr,Xe-ue)]);l.style.minWidth=te+"px",l.style.right=Zt+"px"}const U=m(),R=window.innerHeight-cr*2,$=g.scrollHeight,L=window.getComputedStyle(u),re=parseInt(L.borderTopWidth,10),z=parseInt(L.paddingTop,10),B=parseInt(L.borderBottomWidth,10),O=parseInt(L.paddingBottom,10),A=re+z+$+O+B,M=Math.min(w.offsetHeight*5,A),G=window.getComputedStyle(g),ee=parseInt(G.paddingTop,10),ae=parseInt(G.paddingBottom,10),ce=C.top+C.height/2-cr,Oe=R-ce,ye=w.offsetHeight/2,F=w.offsetTop+ye,de=re+z+F,J=A-de;if(de<=ce){const Se=U.length>0&&w===U[U.length-1].ref.current;l.style.bottom="0px";const D=u.clientHeight-g.offsetTop-g.offsetHeight,Y=Math.max(Oe,ye+(Se?ae:0)+D+B),te=de+Y;l.style.height=te+"px"}else{const Se=U.length>0&&w===U[0].ref.current;l.style.top="0px";const Y=Math.max(ce,re+g.offsetTop+(Se?ee:0)+ye)+J;l.style.height=Y+"px",g.scrollTop=de-ce+g.offsetTop}l.style.margin=`${cr}px 0`,l.style.minHeight=M+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,g,w,x,a.dir,r]);at(()=>y(),[y]);const[S,j]=f.useState();at(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=f.useCallback(C=>{C&&b.current===!0&&(y(),v==null||v(),b.current=!1)},[y,v]);return o.jsx(W8,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(fe.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Jk.displayName=z8;var B8="SelectPopperPosition",ag=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=cr,...a}=e,i=Jh(n);return o.jsx(Rv,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ag.displayName=B8;var[W8,by]=il(fa,{}),ig="SelectViewport",Zk=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=jo(ig,n),i=by(ig,n),l=Te(t,a.onViewportChange),c=f.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Qh.Slot,{scope:n,children:o.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:oe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&d){const p=Math.abs(c.current-h.scrollTop);if(p>0){const b=window.innerHeight-cr*2,g=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),x=Math.max(g,w);if(x<b){const v=x+p,y=Math.min(b,v),S=v-y;d.style.height=y+"px",d.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Zk.displayName=ig;var eE="SelectGroup",[H8,K8]=il(eE),q8=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=ln();return o.jsx(H8,{scope:n,id:s,children:o.jsx(fe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});q8.displayName=eE;var tE="SelectLabel",nE=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=K8(tE,n);return o.jsx(fe.div,{id:s.id,...r,ref:t})});nE.displayName=tE;var rh="SelectItem",[G8,rE]=il(rh),sE=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,l=No(rh,n),c=jo(rh,n),u=l.value===r,[h,d]=f.useState(a??""),[m,p]=f.useState(!1),b=Te(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,r,s)}),g=ln(),w=f.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(G8,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(v=>{d(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(Qh.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(fe.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:b,onFocus:oe(i.onFocus,()=>p(!0)),onBlur:oe(i.onBlur,()=>p(!1)),onClick:oe(i.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:oe(i.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:oe(i.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:oe(i.onPointerMove,v=>{var y;w.current=v.pointerType,s?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:oe(i.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:oe(i.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(O8.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});sE.displayName=rh;var Ml="SelectItemText",oE=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=No(Ml,n),l=jo(Ml,n),c=rE(Ml,n),u=L8(Ml,n),[h,d]=f.useState(null),m=Te(t,x=>d(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),p=h==null?void 0:h.textContent,b=f.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return at(()=>(g(b),()=>w(b)),[g,w,b]),o.jsxs(o.Fragment,{children:[o.jsx(fe.span,{id:c.textId,...a,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ga.createPortal(a.children,i.valueNode):null]})});oE.displayName=Ml;var aE="SelectItemIndicator",iE=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return rE(aE,n).isSelected?o.jsx(fe.span,{"aria-hidden":!0,...r,ref:t}):null});iE.displayName=aE;var lg="SelectScrollUpButton",lE=f.forwardRef((e,t)=>{const n=jo(lg,e.__scopeSelect),r=by(lg,e.__scopeSelect),[s,a]=f.useState(!1),i=Te(t,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(uE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});lE.displayName=lg;var cg="SelectScrollDownButton",cE=f.forwardRef((e,t)=>{const n=jo(cg,e.__scopeSelect),r=by(cg,e.__scopeSelect),[s,a]=f.useState(!1),i=Te(t,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(uE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});cE.displayName=cg;var uE=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=jo("SelectScrollButton",n),i=f.useRef(null),l=Xh(n),c=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),at(()=>{var h;const u=l().find(d=>d.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(fe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:oe(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:oe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:oe(s.onPointerLeave,()=>{c()})})}),Y8="SelectSeparator",dE=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(fe.div,{"aria-hidden":!0,...r,ref:t})});dE.displayName=Y8;var ug="SelectArrow",Q8=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Jh(n),a=No(ug,n),i=jo(ug,n);return a.open&&i.position==="popper"?o.jsx(Ov,{...s,...r,ref:t}):null});Q8.displayName=ug;var X8="SelectBubbleInput",hE=f.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=f.useRef(null),a=Te(r,s),i=wy(t);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const d=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(d)}},[i,t]),o.jsx(fe.select,{...n,style:{...zN,...n.style},ref:a,defaultValue:t})});hE.displayName=X8;function fE(e){return e===""||e===void 0}function pE(e){const t=ot(e),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(i=>{const l=n.current+i;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function mE(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=J8(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function J8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Z8=zk,gE=Wk,ez=Kk,tz=qk,nz=Gk,vE=Yk,rz=Zk,yE=nE,xE=sE,sz=oE,oz=iE,wE=lE,bE=cE,SE=dE;const Yn=Z8,Qn=ez,Rn=f.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(gE,{ref:r,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(tz,{asChild:!0,children:o.jsx(Gs,{className:"h-4 w-4 opacity-50"})})]}));Rn.displayName=gE.displayName;const NE=f.forwardRef(({className:e,...t},n)=>o.jsx(wE,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(pm,{className:"h-4 w-4"})}));NE.displayName=wE.displayName;const jE=f.forwardRef(({className:e,...t},n)=>o.jsx(bE,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Gs,{className:"h-4 w-4"})}));jE.displayName=bE.displayName;const On=f.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(nz,{children:o.jsxs(vE,{ref:s,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(NE,{}),o.jsx(rz,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(jE,{})]})}));On.displayName=vE.displayName;const az=f.forwardRef(({className:e,...t},n)=>o.jsx(yE,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));az.displayName=yE.displayName;const _e=f.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(xE,{ref:r,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(oz,{children:o.jsx(wo,{className:"h-4 w-4"})})}),o.jsx(sz,{children:t})]}));_e.displayName=xE.displayName;const iz=f.forwardRef(({className:e,...t},n)=>o.jsx(SE,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));iz.displayName=SE.displayName;const lz=e=>{try{const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=e.match(t);return n?n[1]:null}catch{return null}},cz=async(e,t,n=200)=>{var s;if(!t)throw new Error("YouTube API Key not configured. Please enter your key in Settings.");const r=lz(e);if(!r)throw new Error("Invalid YouTube URL.");try{let a=[],i;const l=Math.ceil(n/100);for(let c=0;c<l&&a.length<n;c++){const u=new URLSearchParams({part:"snippet",videoId:r,key:t,maxResults:"100",order:"relevance",textFormat:"plainText"});i&&u.append("pageToken",i);const h=await fetch(`https://www.googleapis.com/youtube/v3/commentThreads?${u.toString()}`),d=await h.json();if(!h.ok){const m=((s=d.error)==null?void 0:s.message)||"Unknown YouTube API error";throw m.includes("disabled")?new Error("Comments are disabled for this video."):m.includes("API key not valid")?new Error("Invalid API Key. Please check your Settings."):m.includes("commentsDisabled")?new Error("Comments are disabled for this video."):new Error(m)}if(d.items){const m=d.items.map(p=>{const b=p.snippet.topLevelComment.snippet;return{author:b.authorDisplayName,text:b.textDisplay,likeCount:b.likeCount,authorProfileImageUrl:b.authorProfileImageUrl,publishedAt:b.publishedAt}});a=a.concat(m)}if(i=d.nextPageToken,!i)break}return a.sort((c,u)=>u.likeCount-c.likeCount).slice(0,n)}catch(a){throw console.error("YouTube Fetch Error:",a),new Error(a.message||"Could not fetch comments.")}};function CE(){const[e,t]=f.useState(!1),{toast:n}=Mt(),{settings:r}=ys();return{fetchComments:async(a,i=200)=>{if(!a)return n({title:"Error",description:"Please enter a video URL",variant:"destructive"}),[];const l=r==null?void 0:r.youtube_api_key;if(!l)return n({title:"Error",description:"YouTube API Key not configured. Please enter your key in Settings.",variant:"destructive"}),[];t(!0);try{const c=await cz(a,l,i);return n({title:"Success",description:`Fetched ${c.length} comments`}),c}catch(c){console.error("Error fetching YouTube comments:",c);const u=c instanceof Error?c.message:"Could not fetch comments";return n({title:"Error",description:u,variant:"destructive"}),[]}finally{t(!1)}},loading:e}}var Zh="Collapsible",[uz,NW]=Lt(Zh),[dz,Sy]=uz(Zh),_E=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:i,...l}=e,[c,u]=$n({prop:r,defaultProp:s??!1,onChange:i,caller:Zh});return o.jsx(dz,{scope:n,disabled:a,contentId:ln(),open:c,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),children:o.jsx(fe.div,{"data-state":jy(c),"data-disabled":a?"":void 0,...l,ref:t})})});_E.displayName=Zh;var kE="CollapsibleTrigger",EE=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=Sy(kE,n);return o.jsx(fe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":jy(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:oe(e.onClick,s.onOpenToggle)})});EE.displayName=kE;var Ny="CollapsibleContent",TE=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Sy(Ny,e.__scopeCollapsible);return o.jsx(Xt,{present:n||s.open,children:({present:a})=>o.jsx(hz,{...r,ref:t,present:a})})});TE.displayName=Ny;var hz=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=e,i=Sy(Ny,n),[l,c]=f.useState(r),u=f.useRef(null),h=Te(t,u),d=f.useRef(0),m=d.current,p=f.useRef(0),b=p.current,g=i.open||l,w=f.useRef(g),x=f.useRef(void 0);return f.useEffect(()=>{const v=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(v)},[]),at(()=>{const v=u.current;if(v){x.current=x.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const y=v.getBoundingClientRect();d.current=y.height,p.current=y.width,w.current||(v.style.transitionDuration=x.current.transitionDuration,v.style.animationName=x.current.animationName),c(r)}},[i.open,r]),o.jsx(fe.div,{"data-state":jy(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&s})});function jy(e){return e?"open":"closed"}var fz=_E;const ri=fz,si=EE,oi=TE,pz={dna_evolution:{name:"DNA Evolution",description:"Learn from new videos to improve your DNA profile"},ai_suggest_angle:{name:"AI Suggest Angle",description:"AI automatically suggests unique angles for your content"},batch_dna:{name:"Batch DNA",description:"Analyze multiple videos at once to create a combined DNA"},structure_innovation:{name:"Structure Innovation",description:"Allow AI to creatively transform script structure"},flop_analysis:{name:"Flop Analysis",description:"Analyze failed videos to avoid similar mistakes"},tubeclone:{name:"TubeClone",description:"Replicate success patterns from top-performing videos"}},mz={starter:{name:"Starter",color:"bg-gray-500"},pro:{name:"Pro",color:"bg-gradient-to-r from-blue-500 to-purple-500"},ultra:{name:"Ultra",color:"bg-gradient-to-r from-amber-500 to-orange-500"}};function gz({feature:e,requiredTier:t,isModal:n,onClose:r}){const s=xa(),a=pz[e],i=mz[t],l=()=>{s("/pricing"),r==null||r()},c=o.jsxs("div",{className:"relative bg-gradient-to-br from-primary/5 via-transparent to-primary/10 border border-primary/20 rounded-xl p-4 space-y-3",children:[n&&r&&o.jsx("button",{onClick:r,className:"absolute top-2 right-2 text-muted-foreground hover:text-foreground",children:o.jsx(ps,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:o.jsx(Rd,{className:"h-5 w-5 text-primary"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-sm",children:a.name}),o.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]})]}),o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsxs(Re,{className:`${i.color} text-white border-0`,children:[o.jsx(dt,{className:"h-3 w-3 mr-1"}),"Requires ",i.name]}),o.jsxs(V,{size:"sm",onClick:l,className:"gap-1",children:[o.jsx(Rd,{className:"h-3 w-3"}),"Upgrade"]})]})]});return n?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:o.jsx("div",{className:"w-full max-w-md mx-4",children:c})}):c}function Xo({feature:e,children:t,showUpgradePrompt:n=!0,fallback:r,hideCompletely:s=!1}){const{canAccessFeature:a,getRequiredTier:i,loading:l}=YC();if(l)return null;if(a(e))return o.jsx(o.Fragment,{children:t});if(s)return null;if(r)return o.jsx(o.Fragment,{children:r});if(n){const c=i(e);return o.jsx(gz,{feature:e,requiredTier:c})}return null}function eb(e){return{name:e.name||"",niche:e.niche||"",targetWordCount:e.targetWordCount||0,audiencePsychology:e.audiencePsychology||"",voiceProfile:e.voiceProfile,linguisticFingerprint:e.linguisticFingerprint||{personaRole:"",toneAnalysis:"",signatureKeywords:[]},hookAngle:e.hookAngle||{angleCategory:"",deconstruction:""},pacingAndTone:e.pacingAndTone||{pacing:""},emotionalArc:[],structuralSkeleton:e.structuralSkeleton||[],highDopamine:e.highDopamine||[],confusionPoints:e.confusionPoints||[],objections:e.objections||[],patterns:e.patterns,corePatterns:e.corePatterns||[],viralXFactors:e.viralXFactors||[],flopAvoidance:e.flopAvoidance||[],hook_examples:e.hook_examples||[],persuasionFlow:e.persuasionFlow||{framework:"Custom",proofSequence:[],objectionHandling:{placement:"",mainObjection:"",counterTactic:""},logicalProgression:[]},retentionHooks:e.retentionHooks||[],transitions:e.transitions||[]}}function pp(e){const t=e.analysis_data||{};return{name:e.name||"",niche:e.niche||"",targetWordCount:t.targetWordCount||0,audiencePsychology:t.audiencePsychology||"",voiceProfile:t.voiceProfile,linguisticFingerprint:t.linguisticFingerprint||{personaRole:"",toneAnalysis:"",signatureKeywords:[]},hookAngle:t.hookAngle||{angleCategory:e.hook_type||"",deconstruction:""},pacingAndTone:t.pacingAndTone||{pacing:e.pacing||""},emotionalArc:t.emotionalArc||[],structuralSkeleton:t.structuralSkeleton||[],highDopamine:t.highDopamine||[],confusionPoints:t.confusionPoints||[],objections:t.objections||[],patterns:t.patterns,corePatterns:t.corePatterns||e.patterns||[],viralXFactors:t.viralXFactors||e.x_factors||[],flopAvoidance:t.flopAvoidance||[],hook_examples:e.hook_examples||[],persuasionFlow:t.persuasionFlow||{framework:"Custom",proofSequence:[],objectionHandling:{placement:"",mainObjection:"",counterTactic:""},logicalProgression:[]},retentionHooks:t.retentionHooks||[],transitions:t.transitions||[],retention_tactics:e.retention_tactics||[],x_factors:e.x_factors||[],source_url:e.source_url||void 0,source_transcript:e.source_transcript||void 0}}function vz(e){var t,n,r,s;return{name:e.name,niche:e.niche,targetWordCount:e.targetWordCount,audiencePsychology:e.audiencePsychology,voiceProfile:e.voiceProfile||{personaRole:((t=e.linguisticFingerprint)==null?void 0:t.personaRole)||"",toneAnalysis:((n=e.linguisticFingerprint)==null?void 0:n.toneAnalysis)||"",signatureKeywords:((r=e.linguisticFingerprint)==null?void 0:r.signatureKeywords)||[],globalPacing:((s=e.pacingAndTone)==null?void 0:s.pacing)||"medium",syntaxPatterns:""},linguisticFingerprint:e.linguisticFingerprint,hookAngle:e.hookAngle,pacingAndTone:e.pacingAndTone,structuralSkeleton:e.structuralSkeleton,highDopamine:e.highDopamine,confusionPoints:e.confusionPoints,objections:e.objections,patterns:e.patterns||[...(e.corePatterns||[]).map(a=>({pattern:a,tag:"safe"})),...(e.viralXFactors||[]).map(a=>({pattern:a,tag:"experimental"}))],corePatterns:e.corePatterns,viralXFactors:e.viralXFactors,flopAvoidance:e.flopAvoidance,hook_examples:e.hook_examples,persuasionFlow:e.persuasionFlow,retentionHooks:e.retentionHooks,transitions:e.transitions,frictionPoints:[...(e.confusionPoints||[]).map(a=>({type:"confusion",point:a,solution:void 0})),...(e.objections||[]).map(a=>({type:"objection",point:a,solution:void 0}))]}}function tb({mode:e,extractedDna:t,savedDna:n,onBack:r,onSave:s,saving:a,onUpdate:i,onExport:l,onEvolve:c}){var de,J,we,Se;const{t:u}=dn(),h=e==="preview"&&t?eb(t):e==="detail"&&n?pp(n):null,[d,m]=f.useState(h),[p,b]=f.useState({}),[g,w]=f.useState(!1),[x,v]=f.useState(!1),[y,S]=f.useState(!1),[j,N]=f.useState(!1),[C,_]=f.useState([]),[k,E]=f.useState(""),[U,R]=f.useState(""),[$,L]=f.useState(""),[re,z]=f.useState("");f.useEffect(()=>{e==="preview"&&t?m(eb(t)):e==="detail"&&n&&m(pp(n))},[e,t,n]);const B=(D,Y)=>{m(te=>({...te,[D]:Y})),v(!0)},O=(D,Y,te)=>{m(ue=>({...ue,[D]:{...ue[D],[Y]:te}})),v(!0)},A=(D,Y="")=>{const te=d[D];B(D,[...te,Y])},M=(D,Y,te)=>{const ue=[...d[D]];ue[Y]=te,B(D,ue)},G=(D,Y)=>{const te=d[D].filter((ue,Xe)=>Xe!==Y);B(D,te)},ee=D=>{b(Y=>({...Y,[D]:!Y[D]}))},ae=d.structuralSkeleton.reduce((D,Y)=>D+(Y.wordCount||0),0),ce=async()=>{w(!0);try{if(e==="preview"&&s)s(vz(d));else if(e==="detail"&&i&&n){const D={targetWordCount:d.targetWordCount,audiencePsychology:d.audiencePsychology,linguisticFingerprint:d.linguisticFingerprint,hookAngle:d.hookAngle,pacingAndTone:d.pacingAndTone,emotionalArc:d.emotionalArc,structuralSkeleton:d.structuralSkeleton,highDopamine:d.highDopamine,confusionPoints:d.confusionPoints,objections:d.objections,corePatterns:d.corePatterns,viralXFactors:d.viralXFactors,flopAvoidance:d.flopAvoidance};await i({name:d.name,niche:d.niche,hook_examples:d.hook_examples,patterns:d.patterns,retention_tactics:d.retention_tactics,x_factors:d.x_factors,analysis_data:D}),v(!1)}}finally{w(!1)}},Oe=async()=>{if(!c||!k&&!$)return;N(!0),_([]);const D=await c({viralVideos:k?[{transcript:k,url:U}]:void 0,flopVideos:$?[{transcript:$,url:re}]:void 0});N(!1),D.success&&D.changesSummary&&(_(D.changesSummary),E(""),R(""),L(""),z(""),n&&m(pp(n)))},ye=e==="preview",F=ye?a:g;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("div",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur border-b",children:o.jsxs("div",{className:"flex items-center justify-between p-4 max-w-[1600px] mx-auto",children:[o.jsxs(V,{variant:"ghost",onClick:r,className:"gap-2",children:[ye?o.jsx(ps,{className:"h-4 w-4"}):o.jsx(va,{className:"h-4 w-4"}),u(ye?"common.cancel":"common.back")]}),o.jsx(ie,{value:d.name,onChange:D=>B("name",D.target.value),className:"max-w-md text-center text-lg font-semibold bg-transparent border-none focus-visible:ring-1",placeholder:u("dnaLab.manual.namePlaceholder")}),o.jsxs("div",{className:"flex gap-2",children:[!ye&&c&&o.jsx(Xo,{feature:"dna_evolution",hideCompletely:!0,children:o.jsxs(V,{variant:"outline",onClick:()=>S(!y),className:"gap-2 border-green-500/50 text-green-500 hover:bg-green-500/10",children:[o.jsx(Jr,{className:"h-4 w-4"}),u("dnaLab.view.evolution")]})}),!ye&&l&&n&&o.jsxs(V,{variant:"outline",onClick:()=>l(n),className:"gap-2",children:[o.jsx(gv,{className:"h-4 w-4"}),u("common.export")]}),(ye||x)&&o.jsxs(V,{onClick:ce,disabled:F,className:"gap-2",children:[o.jsx(yv,{className:"h-4 w-4"}),u(ye?"dnaLab.view.saveChanges":"common.save")]})]})]})}),!ye&&y&&c&&o.jsx("div",{className:"max-w-[1600px] mx-auto p-4 border-b bg-green-500/5",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-sm font-semibold flex items-center gap-2 text-green-500",children:[o.jsx(Jr,{className:"h-4 w-4"}),u("dnaLab.view.evolution")]}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{S(!1),_([])},children:[" ",u("common.close")]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-green-500",children:[" ",u("dnaLab.view.viralVideo")]}),o.jsx(ie,{value:U,onChange:D=>R(D.target.value),placeholder:"Video URL (optional)",className:"bg-muted/50"}),o.jsx(Ae,{value:k,onChange:D=>E(D.target.value),placeholder:u("dnaLab.view.pasteTranscript"),className:"min-h-[120px] bg-muted/50 resize-none"})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-red-400",children:[" ",u("dnaLab.view.flopVideo")]}),o.jsx(ie,{value:re,onChange:D=>z(D.target.value),placeholder:"Video URL (optional)",className:"bg-muted/50"}),o.jsx(Ae,{value:$,onChange:D=>L(D.target.value),placeholder:u("dnaLab.view.pasteTranscript"),className:"min-h-[120px] bg-muted/50 resize-none"})]})})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(V,{onClick:Oe,disabled:j||!k&&!$,className:"gap-2 bg-green-600 hover:bg-green-700",children:j?o.jsxs(o.Fragment,{children:[o.jsx(We,{className:"h-4 w-4 animate-spin"}),u("dnaLab.view.evolving")]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{className:"h-4 w-4"}),u("dnaLab.view.evolveBtn")]})}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"AI will learn from new content and refine your DNA patterns."})]}),C.length>0&&o.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[o.jsxs(K,{className:"text-sm font-semibold text-green-500 mb-2 block",children:[" ",u("dnaLab.view.evolutionComplete")," - ",C.length," ",u("dnaLab.view.changesMade"),":"]}),o.jsx("ul",{className:"space-y-1",children:C.map((D,Y)=>o.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[o.jsx("span",{className:"text-green-500",children:""}),D]},Y))})]})]})}),o.jsx("div",{className:"max-w-[1600px] mx-auto p-4 md:p-6",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[400px_1fr] gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(ts,{className:"h-3 w-3 text-primary"})," ",u("dnaLab.view.myNotes")]}),o.jsx(Ae,{placeholder:u("dnaLab.view.myNotesPlaceholder"),className:"min-h-[80px] bg-muted/50 resize-none"})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-green-500 flex items-center gap-1.5",children:[o.jsx(sa,{className:"h-3 w-3"})," ",u("dnaLab.view.niche")]}),o.jsx(ie,{value:d.niche,onChange:D=>B("niche",D.target.value),placeholder:u("dnaLab.view.nichePlaceholder"),className:"bg-muted/50"})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-red-500 flex items-center gap-1.5",children:[o.jsx(ts,{className:"h-3 w-3"})," ",u("dnaLab.view.targetWordCount")]}),o.jsx(ie,{type:"number",value:d.targetWordCount||"",onChange:D=>B("targetWordCount",parseInt(D.target.value)||0),placeholder:u("dnaLab.view.wordCountPlaceholder"),className:"bg-muted/50"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:u("dnaLab.view.calcFromViral")})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-4",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(OR,{className:"h-3 w-3"})," ",u("dnaLab.view.linguisticFingerprint")]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dnaLab.view.personaRole")}),o.jsx(ie,{value:d.linguisticFingerprint.personaRole,onChange:D=>O("linguisticFingerprint","personaRole",D.target.value),placeholder:u("dnaLab.view.personaRolePlaceholder"),className:"bg-muted/50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dnaLab.view.toneAnalysis")}),o.jsx(Ae,{value:d.linguisticFingerprint.toneAnalysis,onChange:D=>O("linguisticFingerprint","toneAnalysis",D.target.value),placeholder:u("dnaLab.view.toneAnalysisPlaceholder"),className:"min-h-[80px] bg-muted/50 resize-none"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dnaLab.view.signatureKeywords")}),o.jsx(ie,{value:d.linguisticFingerprint.signatureKeywords.join(", "),onChange:D=>O("linguisticFingerprint","signatureKeywords",D.target.value.split(",").map(Y=>Y.trim())),placeholder:u("dnaLab.view.signatureKeywordsPlaceholder"),className:"bg-muted/50"})]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-4",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(ns,{className:"h-3 w-3 text-green-500"})," ",u("dnaLab.view.hookAngle")]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dnaLab.view.angleCategory")}),o.jsx(ie,{value:d.hookAngle.angleCategory,onChange:D=>O("hookAngle","angleCategory",D.target.value),placeholder:u("dnaLab.view.angleCategoryPlaceholder"),className:"bg-muted/50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dnaLab.view.deconstruction")}),o.jsx(Ae,{value:d.hookAngle.deconstruction,onChange:D=>O("hookAngle","deconstruction",D.target.value),placeholder:u("dnaLab.view.deconstructionPlaceholder"),className:"min-h-[80px] bg-muted/50 resize-none"})]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-4",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(IR,{className:"h-3 w-3"})," ",u("dnaLab.view.pacing")]}),o.jsx(Ae,{value:d.pacingAndTone.pacing,onChange:D=>O("pacingAndTone","pacing",D.target.value),placeholder:u("dnaLab.view.pacingPlaceholder"),className:"min-h-[100px] bg-muted/50 resize-none"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[!ye&&d.emotionalArc.length>0&&o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-4",children:[o.jsxs(K,{className:"text-xs uppercase text-pink-500 flex items-center gap-1.5",children:[o.jsx(dt,{className:"h-3 w-3"})," ",u("dnaLab.view.emotionalArc")]}),o.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[d.emotionalArc.map((D,Y)=>o.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[o.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/20 rounded-lg p-3 min-w-[120px] text-center space-y-1",children:[o.jsx("div",{className:"text-[10px] uppercase text-muted-foreground",children:D.section}),o.jsx("div",{className:"text-sm font-medium text-pink-500",children:D.emotion})]}),Y<d.emotionalArc.length-1&&o.jsx("div",{className:"w-8 h-[2px] bg-muted mx-2"})]},Y)),o.jsx(V,{variant:"ghost",size:"sm",className:"h-full ml-2 border border-dashed",onClick:()=>{const D=[...d.emotionalArc,{section:"New Phase",emotion:"Emotion"}];B("emotionalArc",D)},children:o.jsx(tt,{className:"h-4 w-4"})})]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-xs uppercase text-blue-500 flex items-center gap-1.5",children:[o.jsx(ts,{className:"h-3 w-3"})," ",u("dnaLab.view.structuralSkeleton")]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[u("dnaLab.view.estTotal"),": "," ",o.jsxs("span",{className:"text-foreground font-medium",children:[ae," words"]})]})]}),o.jsx("div",{className:"space-y-2",children:d.structuralSkeleton.map((D,Y)=>o.jsxs(ri,{open:!!p[Y],onOpenChange:()=>ee(Y),children:[o.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-2",children:[o.jsx(si,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",children:p[Y]?o.jsx(Gs,{className:"h-4 w-4"}):o.jsx(Dr,{className:"h-4 w-4"})})}),o.jsx(ie,{value:D.title,onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,title:te.target.value},B("structuralSkeleton",ue)},className:"flex-1 h-8 bg-transparent border-none",placeholder:"Section title..."}),o.jsx(ie,{type:"number",value:D.wordCount||0,onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,wordCount:parseInt(te.target.value)||0},B("structuralSkeleton",ue)},className:"w-24 h-8 text-xs text-center bg-muted",placeholder:u("dnaLab.manual.words")}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>{const te=d.structuralSkeleton.filter((ue,Xe)=>Xe!==Y);B("structuralSkeleton",te)},children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]}),o.jsxs(oi,{className:"pt-4 pl-4 space-y-4 border-l-2 border-muted ml-3 mb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.sectionTone")}),o.jsx(ie,{value:D.tone||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,tone:te.target.value},B("structuralSkeleton",ue)},className:"h-8 bg-muted/30 text-xs",placeholder:u("dnaLab.view.sectionTonePlaceholder")})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.sectionPacing")}),o.jsx(Ae,{value:D.pacing||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,pacing:te.target.value},B("structuralSkeleton",ue)},className:"min-h-[60px] bg-muted/30 text-xs resize-none",placeholder:u("dnaLab.view.sectionPacingPlaceholder")})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.contentFocus")}),o.jsx(Ae,{value:D.contentFocus||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,contentFocus:te.target.value},B("structuralSkeleton",ue)},className:"min-h-[80px] bg-muted/30 text-xs resize-none",placeholder:u("dnaLab.view.contentFocusPlaceholder")})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.openLoop")}),o.jsx(ie,{value:D.openLoop||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,openLoop:te.target.value},B("structuralSkeleton",ue)},className:"h-8 bg-muted/30 text-xs",placeholder:u("dnaLab.view.openLoopPlaceholder")})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.closesLoop")}),o.jsx(ie,{value:D.closesLoop||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,closesLoop:te.target.value},B("structuralSkeleton",ue)},className:"h-8 bg-muted/30 text-xs",placeholder:u("dnaLab.view.closesLoopPlaceholder")})]})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-muted-foreground",children:u("dnaLab.view.audienceInteraction")}),o.jsx(ie,{value:D.audienceInteraction||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,audienceInteraction:te.target.value},B("structuralSkeleton",ue)},className:"h-8 bg-muted/30 text-xs border-green-500/30",placeholder:u("dnaLab.view.ctaPlaceholder")})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-orange-500",children:u("dnaLab.view.audienceValue")}),o.jsx(Ae,{value:D.audienceValue||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,audienceValue:te.target.value},B("structuralSkeleton",ue)},className:"min-h-[60px] bg-muted/30 text-xs resize-none border-orange-500/30 focus:border-orange-500/50",placeholder:u("dnaLab.view.audienceValuePlaceholder")})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-[10px] uppercase text-red-400",children:u("dnaLab.view.antiPattern")}),o.jsx(ie,{value:D.antiPattern||"",onChange:te=>{const ue=[...d.structuralSkeleton];ue[Y]={...D,antiPattern:te.target.value},B("structuralSkeleton",ue)},className:"h-8 bg-red-500/10 border-red-500/30 text-xs",placeholder:u("dnaLab.view.antiPatternPlaceholder")})]})]})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{B("structuralSkeleton",[...d.structuralSkeleton,{title:"",wordCount:100}])},children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addDetailedSection")]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-yellow-500 flex items-center gap-1.5",children:[o.jsx(ns,{className:"h-3 w-3"})," ",u("dnaLab.view.highDopamine")]}),o.jsx("div",{className:"space-y-2",children:d.highDopamine.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("highDopamine",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("highDopamine",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("highDopamine"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addHigh")]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-orange-500 flex items-center gap-1.5",children:[o.jsx(BR,{className:"h-3 w-3"})," ",u("dnaLab.view.confusionPoints")]}),o.jsx("div",{className:"space-y-2",children:d.confusionPoints.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("confusionPoints",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("confusionPoints",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("confusionPoints"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addConfusion")]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-red-500 flex items-center gap-1.5",children:[o.jsx(pc,{className:"h-3 w-3"})," ",u("dnaLab.view.objections")]}),o.jsx("div",{className:"space-y-2",children:d.objections.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("objections",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("objections",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("objections"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addObjection")]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-green-500 flex items-center gap-1.5",children:[o.jsx(FR,{className:"h-3 w-3"})," ",u("dnaLab.view.corePatterns")]}),o.jsx("div",{className:"space-y-2",children:d.corePatterns.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("corePatterns",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("corePatterns",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("corePatterns"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addCore")]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-purple-500 flex items-center gap-1.5",children:[o.jsx(dt,{className:"h-3 w-3"})," ",u("dnaLab.view.viralXFactors")]}),o.jsx("div",{className:"space-y-2",children:d.viralXFactors.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("viralXFactors",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("viralXFactors",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("viralXFactors"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addViral")]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-red-400 flex items-center gap-1.5",children:[o.jsx(SR,{className:"h-3 w-3"})," ",u("dnaLab.view.flopAvoidance")]}),o.jsx("div",{className:"space-y-2",children:d.flopAvoidance.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("flopAvoidance",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("flopAvoidance",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("flopAvoidance"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addFlop")]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-green-500 flex items-center gap-1.5",children:[o.jsx(ns,{className:"h-3 w-3"})," ",u("dnaLab.view.hookExamplesTitle")]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:u("dnaLab.view.aiLearnsWarning")}),o.jsx("div",{className:"space-y-2",children:d.hook_examples.map((D,Y)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ae,{value:D,onChange:te=>M("hook_examples",Y,te.target.value),className:"min-h-[60px] bg-muted/50 resize-none text-sm flex-1"}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>G("hook_examples",Y),children:o.jsx(bt,{className:"h-3 w-3 text-destructive"})})]},Y))}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>A("hook_examples"),className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dnaLab.view.addExample")]})]})}),o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsxs(K,{className:"text-xs uppercase text-purple-500 flex items-center gap-1.5",children:[o.jsx(fm,{className:"h-3 w-3"})," ",u("dnaLab.view.audiencePsychology")]}),o.jsx(Ae,{value:d.audiencePsychology,onChange:D=>B("audiencePsychology",D.target.value),placeholder:u("dnaLab.view.audiencePsychologyPlaceholder"),className:"min-h-[120px] bg-muted/50 resize-none"})]})})]}),o.jsx(ve,{children:o.jsx(ri,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsx(si,{className:"w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-xs uppercase text-blue-400 flex items-center gap-1.5 cursor-pointer",children:[o.jsx(fm,{className:"h-3 w-3"})," ",u("dna.view.persuasionFlow")]}),o.jsx(Gs,{className:"h-4 w-4 transition-transform"})]})}),o.jsxs(oi,{className:"space-y-3 pt-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.framework")}),o.jsx(ie,{value:d.persuasionFlow.framework,onChange:D=>B("persuasionFlow.framework",D.target.value),placeholder:"PAS / BAB / Story-Based / Custom",className:"bg-muted/50 text-sm"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.logicalProgression")}),o.jsx(Ae,{value:((de=d.persuasionFlow.logicalProgression)==null?void 0:de.join("  "))||"",onChange:D=>{const Y=D.target.value.split("").map(te=>te.trim());B("persuasionFlow.logicalProgression",Y)},placeholder:"Step 1  Step 2  Step 3",className:"min-h-[60px] bg-muted/50 resize-none text-sm"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.proofSequence")}),o.jsx(Ae,{value:((J=d.persuasionFlow.proofSequence)==null?void 0:J.join(", "))||"",onChange:D=>{const Y=D.target.value.split(",").map(te=>te.trim());B("persuasionFlow.proofSequence",Y)},placeholder:"personal-story, data, case-study, expert-quote, social-proof",className:"min-h-[60px] bg-muted/50 resize-none text-sm"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.mainObjection")}),o.jsx(ie,{value:((we=d.persuasionFlow.objectionHandling)==null?void 0:we.mainObjection)||"",onChange:D=>B("persuasionFlow.objectionHandling.mainObjection",D.target.value),placeholder:"Skepticism ngi xem s c",className:"bg-muted/50 text-sm"})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.counterTactic")}),o.jsx(Ae,{value:((Se=d.persuasionFlow.objectionHandling)==null?void 0:Se.counterTactic)||"",onChange:D=>B("persuasionFlow.objectionHandling.counterTactic",D.target.value),placeholder:"Cch gii quyt objection",className:"min-h-[60px] bg-muted/50 resize-none text-sm"})]})]})]})})}),o.jsx(ve,{children:o.jsx(ri,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsx(si,{className:"w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-xs uppercase text-orange-400 flex items-center gap-1.5 cursor-pointer",children:[o.jsx(ns,{className:"h-3 w-3"})," ",u("dna.view.retentionHooks")]}),o.jsx(Gs,{className:"h-4 w-4 transition-transform"})]})}),o.jsxs(oi,{className:"space-y-2 pt-2",children:[d.retentionHooks.map((D,Y)=>o.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.atWordCount")}),o.jsx(ie,{type:"number",value:D.atWordCount,onChange:te=>{const ue=[...d.retentionHooks];ue[Y]={...D,atWordCount:parseInt(te.target.value)||0},B("retentionHooks",ue)},className:"bg-background/50 text-sm h-8"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.technique")}),o.jsx(ie,{value:D.technique,onChange:te=>{const ue=[...d.retentionHooks];ue[Y]={...D,technique:te.target.value},B("retentionHooks",ue)},placeholder:"pattern-interrupt, teaser, etc.",className:"bg-background/50 text-sm h-8"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.example")}),o.jsx(Ae,{value:D.example,onChange:te=>{const ue=[...d.retentionHooks];ue[Y]={...D,example:te.target.value},B("retentionHooks",ue)},className:"min-h-[50px] bg-background/50 resize-none text-sm"})]})]},Y)),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{const D=[...d.retentionHooks||[]];D.push({atWordCount:200,technique:"",example:""}),B("retentionHooks",D)},className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dna.view.addRetentionHook")]})]})]})})}),o.jsx(ve,{children:o.jsx(ri,{children:o.jsxs(be,{className:"p-4 space-y-3",children:[o.jsx(si,{className:"w-full",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-xs uppercase text-cyan-400 flex items-center gap-1.5 cursor-pointer",children:[o.jsx(Dr,{className:"h-3 w-3"})," ",u("dna.view.transitionFormulas")]}),o.jsx(Gs,{className:"h-4 w-4 transition-transform"})]})}),o.jsxs(oi,{className:"space-y-2 pt-2",children:[d.transitions.map((D,Y)=>o.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg space-y-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.from")}),o.jsx(ie,{value:D.from,onChange:te=>{const ue=[...d.transitions];ue[Y]={...D,from:te.target.value},B("transitions",ue)},className:"bg-background/50 text-sm h-8"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.to")}),o.jsx(ie,{value:D.to,onChange:te=>{const ue=[...d.transitions];ue[Y]={...D,to:te.target.value},B("transitions",ue)},className:"bg-background/50 text-sm h-8"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:u("dna.view.formula")}),o.jsx(Ae,{value:D.formula,onChange:te=>{const ue=[...d.transitions];ue[Y]={...D,formula:te.target.value},B("transitions",ue)},placeholder:"Abstract transition pattern",className:"min-h-[50px] bg-background/50 resize-none text-sm"})]}),D.example!==void 0&&o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:"Example (optional)"}),o.jsx(Ae,{value:D.example||"",onChange:te=>{const ue=[...d.transitions];ue[Y]={...D,example:te.target.value},B("transitions",ue)},placeholder:"Concrete example",className:"min-h-[50px] bg-background/50 resize-none text-sm"})]})]},Y)),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{const D=[...d.transitions||[]];D.push({from:"",to:"",formula:"",example:""}),B("transitions",D)},className:"w-full text-muted-foreground",children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),u("dna.view.addTransitionFormula")]})]})]})})}),!ye&&d.source_url&&o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-2",children:[o.jsx(K,{className:"text-xs uppercase text-muted-foreground",children:u("dnaLab.view.sourceUrl")}),o.jsx("p",{className:"text-sm text-muted-foreground break-all",children:d.source_url})]})}),!ye&&d.source_transcript&&o.jsx(ve,{children:o.jsxs(be,{className:"p-4 space-y-2",children:[o.jsx(K,{className:"text-xs uppercase text-muted-foreground",children:u("dnaLab.view.sourceTranscript")}),o.jsx(Ae,{value:d.source_transcript,readOnly:!0,className:"min-h-[200px] bg-muted/50 resize-none text-sm"})]})})]})]})})]})}const nb=[{value:"google/gemini-3-flash-preview",label:"Gemini 3 Flash",description:"Next-Gen Fast"},{value:"google/gemini-3-pro-preview",label:"Gemini 3 Pro",description:"Next-Gen Quality"},{value:"anthropic/claude-sonnet-4.5",label:"Claude 4.5 Sonnet",description:"Adv. Reasoning"},{value:"openai/gpt-5.2",label:"GPT-5.2",description:"State of the Art"},{value:"openai/gpt-oss-120b:free",label:"GPT-OSS 120B",description:"Open Source"}];function Ql({value:e,onChange:t,label:n,compact:r=!1}){return r?o.jsxs("div",{className:"flex items-center gap-2",children:[n&&o.jsxs(K,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(dt,{className:"h-3 w-3"}),n,":"]}),o.jsxs(Yn,{value:e,onValueChange:t,children:[o.jsx(Rn,{className:"h-8 rounded-lg text-xs w-[160px]",children:o.jsx(Qn,{})}),o.jsx(On,{children:nb.map(s=>o.jsxs(_e,{value:s.value,className:"text-xs",children:[s.label," (",s.description,")"]},s.value))})]})]}):o.jsxs("div",{className:"space-y-2",children:[n&&o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(dt,{className:"h-4 w-4 text-primary"}),n]}),o.jsxs(Yn,{value:e,onValueChange:t,children:[o.jsx(Rn,{className:"rounded-xl",children:o.jsx(Qn,{})}),o.jsx(On,{children:nb.map(s=>o.jsxs(_e,{value:s.value,children:[s.label," (",s.description,")"]},s.value))})]})]})}var ef="Checkbox",[yz,jW]=Lt(ef),[xz,Cy]=yz(ef);function wz(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:d}=e,[m,p]=$n({prop:n,defaultProp:s??!1,onChange:c,caller:ef}),[b,g]=f.useState(null),[w,x]=f.useState(null),v=f.useRef(!1),y=b?!!i||!!b.closest("form"):!0,S={checked:m,disabled:a,setChecked:p,control:b,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:ao(s)?!1:s,isFormControl:y,bubbleInput:w,setBubbleInput:x};return o.jsx(xz,{scope:t,...S,children:bz(d)?d(S):r})}var PE="CheckboxTrigger",AE=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:h,setChecked:d,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:b}=Cy(PE,e),g=Te(s,h),w=f.useRef(c);return f.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const v=()=>d(w.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[a,d]),o.jsx(fe.button,{type:"button",role:"checkbox","aria-checked":ao(c)?"mixed":c,"aria-required":u,"data-state":ME(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:oe(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:oe(n,x=>{d(v=>ao(v)?!0:!v),b&&p&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});AE.displayName=PE;var _y=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:h,...d}=e;return o.jsx(wz,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>o.jsxs(o.Fragment,{children:[o.jsx(AE,{...d,ref:t,__scopeCheckbox:n}),m&&o.jsx(DE,{__scopeCheckbox:n})]})})});_y.displayName=ef;var RE="CheckboxIndicator",OE=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=Cy(RE,n);return o.jsx(Xt,{present:r||ao(a.checked)||a.checked===!0,children:o.jsx(fe.span,{"data-state":ME(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});OE.displayName=RE;var IE="CheckboxBubbleInput",DE=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:h,form:d,bubbleInput:m,setBubbleInput:p}=Cy(IE,e),b=Te(n,p),g=wy(a),w=Ev(r);f.useEffect(()=>{const v=m;if(!v)return;const y=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(y,"checked").set,N=!s.current;if(g!==a&&j){const C=new Event("click",{bubbles:N});v.indeterminate=ao(a),j.call(v,ao(a)?!1:a),v.dispatchEvent(C)}},[m,g,a,s]);const x=f.useRef(ao(a)?!1:a);return o.jsx(fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:l,disabled:c,name:u,value:h,form:d,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});DE.displayName=IE;function bz(e){return typeof e=="function"}function ao(e){return e==="indeterminate"}function ME(e){return ao(e)?"indeterminate":e?"checked":"unchecked"}const tf=f.forwardRef(({className:e,...t},n)=>o.jsx(_y,{ref:n,className:Q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(OE,{className:Q("flex items-center justify-center text-current"),children:o.jsx(wo,{className:"h-4 w-4"})})}));tf.displayName=_y.displayName;function Sz({dna:e,onView:t,onExport:n,onDelete:r}){return o.jsxs(ve,{variant:"elevated",className:"group cursor-pointer",onClick:()=>t(e),children:[o.jsxs(ut,{children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"rounded-xl bg-primary/10 p-2.5",children:o.jsx(bo,{className:"h-5 w-5 text-primary"})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>{s.stopPropagation(),n(e)},children:o.jsx(gv,{className:"h-4 w-4 text-muted-foreground"})}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>{s.stopPropagation(),r(e.id)},children:o.jsx(bt,{className:"h-4 w-4 text-destructive"})}),o.jsx(Dr,{className:"h-5 w-5 text-muted-foreground opacity-0 transition-all group-hover:opacity-100 group-hover:translate-x-1"})]})]}),o.jsx(xt,{className:"mt-3",children:e.name}),o.jsxs(Ur,{children:[e.niche||"No niche","  ",e.source_url?"1 source":"Manual"]})]}),o.jsx(be,{className:"pt-0"})]})}function Nz({dnas:e,loading:t,searchQuery:n,onSearchChange:r,onView:s,onExport:a,onDelete:i}){const{t:l}=dn(),c=e.filter(u=>{var h;return u.name.toLowerCase().includes(n.toLowerCase())||((h=u.niche)==null?void 0:h.toLowerCase().includes(n.toLowerCase()))});return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Dn,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{placeholder:l("dnaLab.searchPlaceholder"),value:n,onChange:u=>r(u.target.value),className:"pl-10 rounded-xl bg-card/50"})]}),t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(We,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(bo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:l("dnaLab.noDna")})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:c.map(u=>o.jsx(Sz,{dna:u,onView:s,onExport:a,onDelete:i},u.id))})]})}const Fa=()=>({id:crypto.randomUUID(),title:"",url:"",transcript:"",comments:"",notes:"",activeTab:"transcript"});function jz(){const{t:e}=dn(),[t,n]=f.useState(""),[r,s]=f.useState("library"),[a,i]=f.useState(null),l=f.useRef(null),[c,u]=f.useState([Fa()]),[h,d]=f.useState([Fa()]),[m,p]=f.useState(""),[b,g]=f.useState("en"),[w,x]=f.useState(!1),[v,y]=f.useState(!1),[S,j]=f.useState(null),[N,C]=f.useState(!1),[_,k]=f.useState("google/gemini-3-flash-preview"),[E,U]=f.useState(!1),[R,$]=f.useState(null),[L,re]=f.useState(!1),[z,B]=f.useState([]),[O,A]=f.useState(!1),[M,G]=f.useState({name:"",niche:"",tone:"",patterns:"",hookType:"",structure:"",pacing:""}),{dnas:ee,loading:ae,extractDna:ce,createDna:Oe,createDnaFromExtracted:ye,updateDna:F,deleteDna:de,scanDnaContent:J,evolveDna:we}=uy(),{toast:Se}=Mt(),{fetchComments:D,loading:Y}=CE(),[te,ue]=f.useState(null);ys(),ee.filter(W=>{var pe;return W.name.toLowerCase().includes(t.toLowerCase())||((pe=W.niche)==null?void 0:pe.toLowerCase().includes(t.toLowerCase()))});const Xe=W=>{const pe={name:W.name,niche:W.niche,hook_type:W.hook_type,hook_examples:W.hook_examples,structure:W.structure,pacing:W.pacing,retention_tactics:W.retention_tactics,x_factors:W.x_factors,tone:W.tone,vocabulary:W.vocabulary,patterns:W.patterns,source_url:W.source_url},I=new Blob([JSON.stringify(pe,null,2)],{type:"application/json"}),ne=URL.createObjectURL(I),H=document.createElement("a");H.href=ne,H.download=`${W.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_dna.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(ne),Se({title:e("dnaLab.exported"),description:e("dnaLab.exportSuccess")})},Zt=()=>{var W;(W=l.current)==null||W.click()},At=async W=>{var I;const pe=(I=W.target.files)==null?void 0:I[0];if(pe){try{const ne=await pe.text(),H=JSON.parse(ne);if(!H.name)throw new Error("Invalid DNA file: missing name");await Oe({name:H.name,niche:H.niche||null,hook_type:H.hook_type||null,hook_examples:H.hook_examples||null,structure:H.structure||null,pacing:H.pacing||null,retention_tactics:H.retention_tactics||null,x_factors:H.x_factors||null,tone:H.tone||null,vocabulary:H.vocabulary||null,patterns:H.patterns||null,source_url:H.source_url||null}),Se({title:e("dnaLab.imported"),description:`DNA "${H.name}" imported successfully`})}catch(ne){console.error("Import error:",ne),Se({title:e("dnaLab.importFailed"),description:ne instanceof Error?ne.message:"Failed to import DNA file",variant:"destructive"})}l.current&&(l.current.value="")}},en=()=>{u(W=>[...W,Fa()])},jr=()=>{d(W=>[...W,Fa()])},Rt=(W,pe,I,ne)=>{(W==="viral"?u:d)(Ne=>Ne.map(Ie=>Ie.id===pe?{...Ie,[I]:ne}:Ie))},Wr=(W,pe)=>{(W==="viral"?u:d)(ne=>ne.filter(H=>H.id!==pe))},tn=async(W,pe,I)=>{if(!I){Se({title:"Error",description:"Please enter a YouTube URL first",variant:"destructive"});return}ue(pe);try{const ne=await D(I);if(ne&&ne.length>0){const H=ne.map((Ne,Ie)=>`${Ie+1}. [${Ne.likeCount} likes] ${Ne.author}: ${Ne.text}`).join(`

`);Rt(W,pe,"comments",H),Rt(W,pe,"activeTab","comments")}}finally{ue(null)}},Be=async()=>{if(!(c.some(pe=>pe.transcript||pe.comments)||h.some(pe=>pe.transcript||pe.comments))){Se({title:"Error",description:"Please add at least one video (viral or flop) with transcript or comments",variant:"destructive"});return}U(!0);try{const pe={viralVideos:c.map(ne=>({title:ne.title,transcript:ne.transcript,comments:ne.comments,notes:ne.notes})),flopVideos:h.map(ne=>({title:ne.title,transcript:ne.transcript,comments:ne.comments,notes:ne.notes})),language:b},I=await J(pe);I&&($(I),B(I.filter(ne=>!ne.isOutlier).map(ne=>`${ne.type}-${ne.index}`)),re(!0))}finally{U(!1)}},Wt=async()=>{if(z.length===0){Se({title:"Error",description:"Please select at least one video to analyze",variant:"destructive"});return}re(!1),x(!0);try{const W=R==null?void 0:R.filter(Ne=>z.includes(`${Ne.type}-${Ne.index}`)),pe=c.filter((Ne,Ie)=>W==null?void 0:W.some(Nt=>Nt.type==="viral"&&Nt.index===Ie)),I=h.filter((Ne,Ie)=>W==null?void 0:W.some(Nt=>Nt.type==="flop"&&Nt.index===Ie)),ne={viralVideos:pe.map(Ne=>({title:Ne.title,transcript:Ne.transcript,comments:Ne.comments,notes:Ne.notes})),flopVideos:I.map(Ne=>({title:Ne.title,transcript:Ne.transcript,comments:Ne.comments,notes:Ne.notes})),overrideLogic:m,language:b},H=await ce(ne,_);H&&(j(H),y(!0))}catch(W){console.error("Analysis error:",W)}finally{x(!1)}},Ot=async W=>{var pe,I;C(!0);try{const ne=c.filter(Ie=>Ie.transcript).map(Ie=>Ie.transcript).join(`

---

`),H=((pe=c[0])==null?void 0:pe.url)||((I=h[0])==null?void 0:I.url);await ye(W,ne,H)&&(u([Fa()]),d([Fa()]),p(""),y(!1),j(null),s("library"))}finally{C(!1)}},Ht=()=>{y(!1),j(null)},it=async()=>{if(!M.name){Se({title:"Error",description:"Please enter a name for the DNA",variant:"destructive"});return}await Oe({name:M.name,niche:M.niche,tone:M.tone,patterns:M.patterns?M.patterns.split(",").map(W=>W.trim()):null,hook_type:M.hookType,structure:M.structure?M.structure.split(",").map(W=>W.trim()):null,pacing:M.pacing}),G({name:"",niche:"",tone:"",patterns:"",hookType:"",structure:"",pacing:""}),A(!1)},Vn=(W,pe,I)=>o.jsxs("div",{className:"relative bg-muted/50 rounded-2xl p-4 space-y-4",children:[o.jsxs(Re,{className:`absolute -top-2 -left-2 ${pe==="viral"?"bg-green-500":"bg-red-500"} text-white`,children:["#",I+1]}),(pe==="viral"?c:h).length>1&&o.jsx(V,{variant:"ghost",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>Wr(pe,W.id),children:o.jsx(bt,{className:"h-3 w-3"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(Nw,{className:"h-3 w-3"})," ",e("dnaLab.variant.title")]}),o.jsx(ie,{placeholder:e("dnaLab.variant.titlePlaceholder"),value:W.title,onChange:ne=>Rt(pe,W.id,"title",ne.target.value),className:"rounded-xl bg-background"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(co,{className:"h-3 w-3"})," ",e("dnaLab.variant.youtubeUrl")]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ie,{placeholder:"https://youtube.com/",value:W.url,onChange:ne=>Rt(pe,W.id,"url",ne.target.value),className:"rounded-xl bg-background flex-1"}),o.jsx(V,{variant:"secondary",size:"sm",className:"rounded-xl",onClick:()=>tn(pe,W.id,W.url),disabled:te===W.id,children:te===W.id?o.jsx(We,{className:"h-4 w-4 animate-spin"}):e("dnaLab.variant.get")})]})]})]}),o.jsxs(Bi,{value:W.activeTab,onValueChange:ne=>Rt(pe,W.id,"activeTab",ne),className:"w-full",children:[o.jsxs(da,{className:"bg-background/50 w-full justify-start",children:[o.jsxs(Pn,{value:"transcript",className:"flex items-center gap-1.5",children:[o.jsx(ts,{className:"h-3 w-3"})," ",e("dnaLab.variant.transcript")]}),o.jsxs(Pn,{value:"comments",className:"flex items-center gap-1.5",children:[o.jsx(pc,{className:"h-3 w-3"})," ",e("dnaLab.variant.comments")]})]}),o.jsx(An,{value:"transcript",className:"mt-2",children:o.jsx(Ae,{placeholder:e("dnaLab.variant.pastePlaceholder"),value:W.transcript,onChange:ne=>Rt(pe,W.id,"transcript",ne.target.value),className:"min-h-[120px] rounded-xl bg-background resize-none"})}),o.jsx(An,{value:"comments",className:"mt-2",children:o.jsx(Ae,{placeholder:e("dnaLab.variant.commentsPlaceholder"),value:W.comments,onChange:ne=>Rt(pe,W.id,"comments",ne.target.value),className:"min-h-[120px] rounded-xl bg-background resize-none"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"text-xs uppercase text-muted-foreground flex items-center gap-1.5",children:[o.jsx(ts,{className:"h-3 w-3"})," ",e("dnaLab.variant.notes")]}),o.jsx(Ae,{placeholder:e("dnaLab.variant.notesPlaceholder"),value:W.notes,onChange:ne=>Rt(pe,W.id,"notes",ne.target.value),className:"min-h-[80px] rounded-xl bg-background resize-none"})]})]},W.id);return a?o.jsx(tb,{mode:"detail",savedDna:a,onBack:()=>i(null),onUpdate:W=>F(a.id,W),onExport:Xe,onEvolve:W=>we(a.id,W)}):v&&S?o.jsx(tb,{mode:"preview",extractedDna:S,onBack:Ht,onSave:Ot,saving:N}):o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:e("dnaLab.title")}),o.jsx("p",{className:"text-muted-foreground",children:e("dnaLab.subtitle")})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("input",{type:"file",ref:l,onChange:At,accept:".json",className:"hidden"}),o.jsxs(V,{variant:"outline",className:"gap-2 rounded-xl",onClick:Zt,children:[o.jsx(HR,{className:"h-4 w-4"}),e("common.import")]}),o.jsxs(ua,{open:O,onOpenChange:A,children:[o.jsx(i8,{asChild:!0,children:o.jsxs(V,{variant:"outline",className:"gap-2 rounded-xl",children:[o.jsx(Nw,{className:"h-4 w-4"}),e("common.write")]})}),o.jsxs(po,{className:"max-w-lg",children:[o.jsx(mo,{children:o.jsx(go,{children:e("dnaLab.manual.title")})}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{children:[e("dnaLab.manual.name")," *"]}),o.jsx(ie,{placeholder:e("dnaLab.manual.namePlaceholder"),value:M.name,onChange:W=>G(pe=>({...pe,name:W.target.value})),className:"rounded-xl"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.niche")}),o.jsx(ie,{placeholder:e("dnaLab.manual.nichePlaceholder"),value:M.niche,onChange:W=>G(pe=>({...pe,niche:W.target.value})),className:"rounded-xl"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.tone")}),o.jsx(ie,{placeholder:e("dnaLab.manual.tonePlaceholder"),value:M.tone,onChange:W=>G(pe=>({...pe,tone:W.target.value})),className:"rounded-xl"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.hookType")}),o.jsx(ie,{placeholder:e("dnaLab.manual.hookTypePlaceholder"),value:M.hookType,onChange:W=>G(pe=>({...pe,hookType:W.target.value})),className:"rounded-xl"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.patterns")}),o.jsx(ie,{placeholder:e("dnaLab.manual.patternsPlaceholder"),value:M.patterns,onChange:W=>G(pe=>({...pe,patterns:W.target.value})),className:"rounded-xl"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.structure")}),o.jsx(ie,{placeholder:e("dnaLab.manual.structurePlaceholder"),value:M.structure,onChange:W=>G(pe=>({...pe,structure:W.target.value})),className:"rounded-xl"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:e("dnaLab.manual.pacing")}),o.jsx(ie,{placeholder:e("dnaLab.manual.pacingPlaceholder"),value:M.pacing,onChange:W=>G(pe=>({...pe,pacing:W.target.value})),className:"rounded-xl"})]}),o.jsx(V,{onClick:it,className:"w-full rounded-xl",children:e("dnaLab.createDna")})]})]})]}),o.jsxs(V,{className:"gap-2 rounded-xl shadow-lg shadow-primary/20",onClick:()=>s("extract"),children:[o.jsx(tt,{className:"h-4 w-4"}),e("dnaLab.extractNewDna")]})]})]}),o.jsxs(Bi,{value:r,onValueChange:s,className:"space-y-6",children:[o.jsxs(da,{className:"bg-muted/50 p-1 rounded-xl",children:[o.jsx(Pn,{value:"library",className:"rounded-lg data-[state=active]:bg-card data-[state=active]:shadow-sm",children:e("dnaLab.library")}),o.jsx(Pn,{value:"extract",className:"rounded-lg data-[state=active]:bg-card data-[state=active]:shadow-sm",children:e("dnaLab.extract")})]}),o.jsx(An,{value:"library",className:"space-y-4",children:o.jsx(Nz,{dnas:ee,loading:ae,searchQuery:t,onSearchChange:n,onView:i,onExport:Xe,onDelete:de})}),o.jsxs(An,{value:"extract",className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[o.jsx(wo,{className:"h-5 w-5"}),o.jsx("h3",{className:"font-semibold text-lg",children:e("dnaLab.virals")})]}),o.jsx("div",{className:"space-y-6",children:c.map((W,pe)=>Vn(W,"viral",pe))}),o.jsx(Xo,{feature:"batch_dna",hideCompletely:!0,children:o.jsxs(V,{variant:"secondary",className:"w-full rounded-xl gap-2",onClick:en,children:[o.jsx(tt,{className:"h-4 w-4"}),e("dnaLab.addViral")]})})]}),o.jsx(Xo,{feature:"flop_analysis",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[o.jsx(bt,{className:"h-5 w-5"}),o.jsx("h3",{className:"font-semibold text-lg",children:e("dnaLab.flops")})]}),o.jsx("div",{className:"space-y-6",children:h.map((W,pe)=>Vn(W,"flop",pe))}),o.jsxs(V,{variant:"secondary",className:"w-full rounded-xl gap-2",onClick:jr,children:[o.jsx(tt,{className:"h-4 w-4"}),e("dnaLab.addFlop")]})]})})]}),o.jsx(ve,{className:"sticky bottom-4",children:o.jsx(be,{className:"p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 space-y-2 w-full",children:[o.jsx(K,{className:"text-xs uppercase text-muted-foreground",children:e("dnaLab.overrideLogic")}),o.jsx(ie,{placeholder:e("dnaLab.overrideLogicPlaceholder"),value:m,onChange:W=>p(W.target.value),className:"rounded-xl bg-muted"})]}),o.jsxs("div",{className:"flex gap-4 w-full lg:w-auto items-end",children:[o.jsx("div",{className:"space-y-2 flex-1 lg:flex-none",children:o.jsx(Ql,{value:_,onChange:k,label:e("dnaLab.aiModel"),compact:!1})}),o.jsxs("div",{className:"space-y-2 flex-1 lg:flex-none",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"h-4 w-4 text-primary"}),e("dnaLab.language")]}),o.jsxs(Yn,{value:b,onValueChange:g,children:[o.jsx(Rn,{className:"w-full lg:w-[140px] rounded-xl",children:o.jsx(Qn,{})}),o.jsxs(On,{children:[o.jsx(_e,{value:"en",children:"English"}),o.jsx(_e,{value:"vi",children:"Ting Vit"}),o.jsx(_e,{value:"es",children:"Espaol"}),o.jsx(_e,{value:"fr",children:"Franais"}),o.jsx(_e,{value:"ja",children:" (Japanese)"}),o.jsx(_e,{value:"ko",children:" (Korean)"})]})]})]}),o.jsxs(V,{onClick:Be,disabled:E||w,className:"gap-2 rounded-xl px-6 h-10",children:[E?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsx(jw,{className:"h-4 w-4"}),e(E?"dnaLab.analyzing":"dnaLab.analyzeExtract")]})]})]})})})]})]}),o.jsx(ua,{open:L,onOpenChange:re,children:o.jsxs(po,{className:"max-w-3xl",children:[o.jsx(mo,{children:o.jsx(go,{children:e("dnaLab.scanResults.title")})}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-500/10 text-blue-500 rounded-lg border border-blue-500/20",children:[o.jsx(jw,{className:"h-5 w-5"}),o.jsx("p",{className:"text-sm",children:e("dnaLab.scanResults.description")})]}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:R==null?void 0:R.map(W=>{const pe=`${W.type}-${W.index}`;return o.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${W.isOutlier?"bg-red-500/5 border-red-500/20":"bg-card border-border"}`,children:[o.jsx(tf,{checked:z.includes(pe),onCheckedChange:I=>{B(I?ne=>[...ne,pe]:ne=>ne.filter(H=>H!==pe))},className:"mt-1"}),o.jsxs("div",{className:"flex-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-sm truncate",children:W.title||`${W.type==="viral"?"Viral":"Flop"} Video #${W.index+1}`}),W.isOutlier&&o.jsx(Re,{variant:"destructive",className:"text-[10px] h-5",children:e("dnaLab.scanResults.outlier")})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"font-semibold text-foreground",children:[e("dnaLab.scanResults.topic"),":"]})," ",W.topic]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"font-semibold text-foreground",children:[e("dnaLab.scanResults.tone"),":"]})," ",W.tone]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsxs("span",{className:"font-semibold text-foreground",children:[e("dnaLab.scanResults.quality"),":"]})," ",W.qualityScore,"/100"]})]}),W.reason&&o.jsxs("p",{className:"text-xs text-red-500 italic mt-1",children:[" ",W.reason]})]})]},pe)})}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx(V,{variant:"ghost",onClick:()=>re(!1),children:e("common.cancel")}),o.jsxs(V,{onClick:Wt,disabled:z.length===0,children:[e("dnaLab.scanResults.proceed")," ",z.length," ",e("dnaLab.scanResults.videos")]})]})]})]})})]})}const Cz=`You are an expert audience researcher and psychologist. Your task is to reverse-engineer a target audience persona from the content they consume and the feedback they provide.

<task>
Analyze the provided transcript and comments to build a comprehensive audience persona that enables precise content customization.
</task>

<data_sources>
If Manual Description provided: Use it as the foundational base
If Transcript provided: Analyze complexity, tone, subject matter to understand audience interests
If Comments provided: Extract pain points, objections, questions, and resonance patterns

Look for behavioral patterns:
- Specific complaints or frustrations (Pain Points)
- Types of questions asked (Knowledge Level)
- Language style and formality (Vocabulary Preferences)
- Engagement patterns (Content Consumption Behavior)
</data_sources>

<analysis_dimensions>

1. DEMOGRAPHIC INFERENCE (from comments and behavior):
   Extract clues about:
   - Age bracket: Slang usage, cultural references, life stage mentions
     Examples: "in college" (18-24), "my kids" (30-50), "retirement" (55+)
   - Location hints: Timezone patterns, cultural mentions, location-specific references
   - Occupation/Industry: Topic engagement patterns, professional terminology
   - Digital fluency: Emoji usage, meme references, platform-native behavior
     * low: Basic text, formal style, minimal slang
     * medium: Mixed formal/casual, some emoji use
     * high: Heavy meme culture, platform-specific language, rapid trend adoption

2. KNOWLEDGE PROFILE (3-dimensional assessment):

   A. Domain Knowledge (1-5 scale):
      1 = Complete beginner (needs basic definitions, foundational concepts)
      2 = Novice (understands basics, learning fundamentals)
      3 = Intermediate (grasps concepts, lacks deep expertise)
      4 = Advanced (strong understanding, can discuss nuances)
      5 = Expert (uses advanced terminology naturally, teaches others)

   B. Engagement Depth (1-5 scale):
      1 = Casual viewer (surface interest, passive consumption)
      2 = Light learner (some curiosity, occasional deeper dive)
      3 = Invested learner (asks follow-up questions, seeks understanding)
      4 = Active researcher (reads deeply, cross-references sources)
      5 = Deep researcher (comprehensive exploration, contributes insights)

   C. Skepticism Level (1-5 scale):
      1 = Highly trusting (accepts claims at face value)
      2 = Somewhat trusting (minimal verification needed)
      3 = Moderately skeptical (wants some evidence and reasoning)
      4 = Very skeptical (demands multiple sources, rigorous proof)
      5 = Extremely skeptical (challenges everything, requires peer-reviewed data)

   Provide reasoning for each score based on comment evidence.

3. CONTENT CONSUMPTION PATTERNS:

   A. Attention Span (infer from comment length and engagement depth):
      * short: Quick scrollers, prefer bite-sized info (<3min optimal)
      * medium: Standard attention span, comfortable with 3-8min content
      * long: Deep divers, willing to invest 8min+ for quality content

   B. Engagement Triggers (what motivates them to comment/engage):
      * data-driven: Responds to statistics, studies, hard numbers
      * story-driven: Engages with narratives, personal case studies
      * emotion-driven: Reacts to emotional appeals, relatable struggles
      * authority-driven: Values expert credentials, citations, proof

   C. Learning Style (how they prefer information delivery):
      * visual-heavy: Prefers diagrams, charts, visual demonstrations
      * step-by-step: Wants sequential, structured instructions
      * conceptual-first: Likes big-picture understanding before details
      * example-based: Learns best through concrete examples and case studies

4. PAIN POINTS PRIORITIZATION:
   Analyze comment sentiment to extract and rank pain points by:
   - Intensity: high (mentioned repeatedly with strong emotion), medium (consistent mention), low (occasional concern)
   - Evidence: "Mentioned in 15+ comments" or "Implied from frustration pattern in Y discussion"

5. MOTIVATIONS & OBJECTIONS WITH CONTEXT:
   For motivations: What drives them to watch/engage?
   - Frequency: high (dominant driver), medium (common reason), low (occasional motivator)
   - Source: "Positive comments analysis" or "Success story responses"

   For objections: What prevents engagement or creates skepticism?
   - Frequency: high (major barrier), medium (common concern), low (minor hesitation)
   - Source: "Negative comments" or "Skeptical questions pattern"

6. TRUST PROFILE ANALYSIS (MI):
   Determine what type of proof they trust most. Choose from common types OR create a custom type:

   Common types:
   - data: Responds to statistics, studies, numbers (e.g., "87% success rate")
   - story: Engages with personal narratives, case studies, testimonials
   - authority: Values expert credentials, citations, institutional backing
   - social-proof: Influenced by community validation, reviews, popularity

   Custom types (if audience doesn't fit above):
   - visual-proof: Needs to see it to believe it (before/after images, demos)
   - experiential: Must try it themselves, values hands-on experience
   - celebrity-endorsement: Trusts famous figures, influencer recommendations
   - scientific-method: Needs peer-reviewed research, controlled experiments
   - community-driven: Trusts grassroots movements, collective wisdom
   - Or create your own based on comment analysis

   Evidence:
   - What comments get most positive engagement?
   - What type of content do they ask for more of?
   - Do they challenge claims that lack specific proof types?

   Return as string (e.g., "data", "visual-proof", "celebrity-endorsement")

7. OBJECTION TIMELINE (MI):
   Map objections to word count milestones where they likely arise:
   - Early (0-200 words): Skepticism about credibility, "Who is this person?"
   - Middle (200-500 words): Doubt about applicability, "Will this work for me?"
   - Late (500+ words): Hesitation about action, "Is this worth my time/money?"

   For each objection:
   - atWordCount: Where it emerges (based on content flow)
   - objection: Specific skeptical thought
   - counterTactic: How to pre-empt or address it

8. ACTION BARRIERS (MI):
   Why they don't take action after consuming content:
   - time-constraint: "I don't have time for this"
   - skepticism: "I don't believe this will work"
   - cost-concern: "Too expensive / not worth it"
   - information-overload: "Too complex, don't know where to start"
   - trust-issues: "Can I trust this source?"
   - technical-difficulty: "Sounds too hard for my skill level"

</analysis_dimensions>

<output_schema>
Return ONLY valid JSON (no markdown, no explanations):

{
  "name": "Descriptive persona name capturing essence (e.g., 'Frustrated Beginner Investor', 'Skeptical Health Optimizer', 'Time-Starved Parent Entrepreneur')",

  "ageRange": "22-35 (evidence: mentions of college life, early career stress, Gen Z slang usage)",

  "knowledgeLevel": "beginner|intermediate|advanced",

  "targetCountry": "USA | UK | Vietnam | Japan | Korea | India | Germany | France | Other (Inferred from timezone patterns, currency mentions, cultural references, language patterns, location-specific mentions)",

  "knowledgeProfile": {
    "domainKnowledge": 3,
    "engagementDepth": 4,
    "skepticismLevel": 2,
    "reasoning": "Intermediate domain knowledge evidenced by basic concept understanding but confusion on advanced terms. High engagement depth shown by follow-up questions. Low skepticism - accepts explanations readily."
  },

  "demographics": {
    "ageEvidence": "Uses phrases like 'just graduated', mentions student loans, employs Gen Z slang",
    "locationHints": "Mentions PST timezone, references US-specific cultural events",
    "occupationInference": "Early career tech worker based on software terminology and work schedule comments",
    "digitalFluency": "high"
  },

  "contentConsumption": {
    "attentionSpan": "medium",
    "engagementTriggers": ["data-driven", "story-driven"],
    "learningStyle": ["step-by-step", "example-based"],
    "preferredContentLength": "5-7 minute videos with clear structure and actionable takeaways"
  },

  "painPoints": [
    {
      "text": "Can't afford expensive courses or tools",
      "intensity": "high",
      "evidence": "Mentioned in 30+ comments with strong emotional language"
    },
    {
      "text": "Overwhelmed by conflicting advice online",
      "intensity": "medium",
      "evidence": "Recurring theme in 'confused' comment cluster"
    }
  ],

  "preferredTone": "casual|formal|inspirational|educational|humorous|direct|empathetic",

  "vocabulary": "Conversational with occasional technical terms. Avoid jargon overload. Explain concepts in plain language first.",

  "platform": "YouTube",

  "description": "Tech-savvy early career professional seeking actionable advice without high costs. Values clear, step-by-step guidance backed by data. Moderately skeptical of overpromises but open to learning. Prefers medium-length content that respects their time constraints.",

  "contentPreferences": [
    "Actionable tutorials over theory",
    "Real-world examples and case studies",
    "Data-backed recommendations"
  ],

  "motivations": [
    {
      "text": "Career advancement and skill development",
      "frequency": "high",
      "source": "Positive engagement on career growth topics"
    },
    {
      "text": "Financial independence",
      "frequency": "medium",
      "source": "Comments on money-saving tips and side hustles"
    }
  ],

  "objections": [
    {
      "text": "Skeptical of 'get rich quick' claims",
      "frequency": "high",
      "source": "Negative reactions to overpromising content"
    },
    {
      "text": "Concerned about time investment vs. results",
      "frequency": "medium",
      "source": "Questions about ROI and realistic timelines"
    }
  ],

  "trustProfile": {
    "primary": "data|story|authority|social-proof",
    "secondary": "data|story|authority|social-proof (optional)",
    "reasoning": "Why they trust this type of proof (evidence from comments/behavior)"
  },

  "objectionTimeline": [
    {
      "atWordCount": 200,
      "objection": "This sounds too good to be true",
      "counterTactic": "Show concrete data + real case study"
    },
    {
      "atWordCount": 450,
      "objection": "Will this work for someone like me?",
      "counterTactic": "Address specific persona pain point with relatable example"
    }
  ],

  "actionBarriers": ["time-constraint", "skepticism", "cost-concern", "information-overload", "trust-issues", "technical-difficulty"]
}
</output_schema>

<validation_rules>
Flag potential inconsistencies:
- If knowledgeLevel="beginner" BUT vocabulary includes "advanced technical jargon"  Add note about mismatch
- If preferredTone="formal" BUT platform="TikTok"  Flag platform-tone mismatch
- Ensure painPoints align with knowledgeLevel (beginners and experts have different pain points)
- Verify demographics inferences are evidence-based, not assumptions
</validation_rules>

<quality_standards>
Your persona should:
1. Be actionable: Provide enough detail for content customization
2. Be evidence-based: Every claim rooted in transcript/comment analysis
3. Be coherent: All dimensions should paint a consistent picture
4. Be specific: Avoid generic descriptors like "wants value" - specify WHAT value and WHY
5. Be realistic: Represent an actual human psychology, not an idealized archetype
</quality_standards>`,_z=async(e,t="google/gemini-3-flash-preview",n,r,s)=>{if(!e)throw new Error("OpenRouter API Key is required");if(!n&&!r&&!s)throw new Error("At least one of description, transcript, or comments must be provided");let a="";n&&(a+=`<manual_description>
${n}
</manual_description>

`),r&&(a+=`<transcript>
${r}
</transcript>

`),s&&(a+=`<comments>
${s}
</comments>

`),a+="Analyze the above and extract a comprehensive audience persona.";const l=await Pt([{role:"system",content:Cz},{role:"user",content:a}],e,t);return hn(l)};function LE(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),{user:s}=Sn(),{toast:a}=Mt(),{settings:i}=ys(),l=f.useCallback(async()=>{if(!s){t([]),r(!1);return}try{const{data:m,error:p}=await De.from("personas").select("*").order("created_at",{ascending:!1});if(p)throw p;t(m||[])}catch(m){console.error("Error fetching personas:",m),a({title:"Error",description:"Failed to fetch personas",variant:"destructive"})}finally{r(!1)}},[s,a]);return f.useEffect(()=>{l()},[l]),{personas:e,loading:n,createPersona:async m=>{if(!s)return null;try{const p={name:m.name||"New Persona",user_id:s.id,age_range:m.age_range,knowledge_level:m.knowledge_level,target_country:m.target_country,pain_points:m.pain_points,preferred_tone:m.preferred_tone,vocabulary:m.vocabulary,platform:m.platform,description:m.description,motivations:m.motivations,objections:m.objections,content_sources:m.content_sources},{data:b,error:g}=await De.from("personas").insert(p).select().single();if(g)throw g;return t(w=>[b,...w]),a({title:"Success",description:"Persona created successfully"}),b}catch(p){return console.error("Error creating persona:",p),a({title:"Error",description:"Failed to create persona",variant:"destructive"}),null}},updatePersona:async(m,p)=>{try{const{data:b,error:g}=await De.from("personas").update(p).eq("id",m).select().single();if(g)throw g;return t(w=>w.map(x=>x.id===m?b:x)),a({title:"Success",description:"Persona updated successfully"}),b}catch(b){return console.error("Error updating persona:",b),a({title:"Error",description:"Failed to update persona",variant:"destructive"}),null}},deletePersona:async m=>{try{const{error:p}=await De.from("personas").delete().eq("id",m);if(p)throw p;return t(b=>b.filter(g=>g.id!==m)),a({title:"Success",description:"Persona deleted successfully"}),!0}catch(p){return console.error("Error deleting persona:",p),a({title:"Error",description:"Failed to delete persona",variant:"destructive"}),!1}},analyzePersona:async(m,p,b,g)=>{const w=i==null?void 0:i.openrouter_api_key;if(!w)return a({title:"Error",description:"OpenRouter API Key is not configured. Please enter your key in Settings.",variant:"destructive"}),null;try{return await _z(w,g||"google/gemini-3-flash-preview",m,p,b)}catch(x){console.error("Error analyzing persona:",x);const v=x instanceof Error?x.message:"Failed to analyze persona";return a({title:"Error",description:v,variant:"destructive"}),null}},refetch:l}}const rb=["bg-violet-500","bg-sky-500","bg-pink-500","bg-emerald-500","bg-amber-500","bg-rose-500"],sb=[{value:"google/gemini-3-flash-preview",label:"Gemini 3 Flash (Fast)"},{value:"google/gemini-3-pro-preview",label:"Gemini 3 Pro (Quality)"},{value:"anthropic/claude-sonnet-4.5",label:"Claude 4.5 Sonnet (Reasoning)"},{value:"openai/gpt-5.2",label:"GPT-5.2 (SOTA)"},{value:"openai/gpt-oss-120b:free",label:"GPT-OSS 120B (Free)"}];function kz(){const{personas:e,loading:t,createPersona:n,updatePersona:r,deletePersona:s,analyzePersona:a}=LE(),{t:i}=dn(),[l,c]=f.useState(""),[u,h]=f.useState(!1),[d,m]=f.useState(null),[p,b]=f.useState(!1),[g,w]=f.useState(!1),[x,v]=f.useState(""),[y,S]=f.useState(""),[j,N]=f.useState("intermediate"),[C,_]=f.useState(""),[k,E]=f.useState(""),[U,R]=f.useState(""),[$,L]=f.useState(""),[re,z]=f.useState(""),[B,O]=f.useState([{id:"1",script:"",youtubeUrl:"",comments:""}]),[A,M]=f.useState(""),[G,ee]=f.useState(""),[ae,ce]=f.useState(""),[Oe,ye]=f.useState(""),[F,de]=f.useState(""),[J,we]=f.useState(""),[Se,D]=f.useState(""),[Y,te]=f.useState(200),[ue,Xe]=f.useState(sb[0].value),{fetchComments:Zt,loading:At}=CE(),en=e.filter(I=>I.name.toLowerCase().includes(l.toLowerCase())),jr=()=>{v(""),S(""),N("intermediate"),_(""),E(""),R(""),z(""),O([{id:crypto.randomUUID(),script:"",youtubeUrl:"",comments:""}]),M(""),ee(""),L(""),ce(""),ye(""),de(""),we(""),D(""),m(null)},Rt=()=>{jr(),h(!0)},Wr=I=>{var ne,H,Ne;m(I),v(I.name),S(I.age_range||""),N(I.knowledge_level||"intermediate"),_(((ne=I.pain_points)==null?void 0:ne.join(", "))||""),E(I.preferred_tone||""),R(I.platform||""),z(I.description||""),M(((H=I.motivations)==null?void 0:H.join(", "))||""),ee(((Ne=I.objections)==null?void 0:Ne.join(", "))||""),L(I.target_country||""),I.trust_profile&&(ce(I.trust_profile.primary||""),ye(I.trust_profile.secondary||""),de(I.trust_profile.reasoning||"")),we(Array.isArray(I.action_barriers)?I.action_barriers.join(", "):""),I.content_consumption&&D(I.content_consumption.attentionSpan||""),I.content_sources&&Array.isArray(I.content_sources)&&I.content_sources.length>0?O(I.content_sources):O([{id:crypto.randomUUID(),script:"",youtubeUrl:"",comments:""}]),h(!0)},tn=(I,ne,H)=>{O(Ne=>Ne.map(Ie=>Ie.id===I?{...Ie,[ne]:H}:Ie))},Be=()=>{O(I=>[...I,{id:crypto.randomUUID(),script:"",youtubeUrl:"",comments:""}])},Wt=I=>{B.length>1&&O(ne=>ne.filter(H=>H.id!==I))},Ot=async(I,ne,H)=>{if(!ne)return;const Ne=await Zt(ne,H);if(Ne&&Ne.length>0){const Ie=Ne.map(Nt=>`- ${Nt.author}: ${Nt.text} (${Nt.likeCount} likes)`).join(`
`);O(Nt=>Nt.map(nr=>{if(nr.id===I){const Co=nr.comments?`${nr.comments}

${Ie}`:Ie;return{...nr,comments:Co,fetchedCommentsCount:Ne.length}}return nr}))}},Ht=async()=>{const I=B.map(H=>H.script).filter(Boolean).join(`

-- NEXT SOURCE --

`),ne=B.map(H=>H.comments).filter(Boolean).join(`

-- NEXT SOURCE --

`);if(!(!I&&!ne)){w(!0);try{const H=await a(void 0,I,ne,ue);if(H){if(v(H.name||x),S(H.ageRange||y),N(H.knowledgeLevel||j),Array.isArray(H.painPoints)){const Ne=H.painPoints.map(Ie=>typeof Ie=="string"?Ie:Ie.text).join(", ");_(Ne||C)}if(E(H.preferredTone||k),R(H.platform||U),L(H.targetCountry||$),Array.isArray(H.motivations)){const Ne=H.motivations.map(Ie=>typeof Ie=="string"?Ie:Ie.text).join(", ");M(Ne||A)}if(Array.isArray(H.objections)){const Ne=H.objections.map(Ie=>typeof Ie=="string"?Ie:Ie.text).join(", ");ee(Ne||G)}(H.knowledgeProfile||H.demographics||H.contentConsumption)&&(window.__tempPersonaExtended={knowledge_profile:H.knowledgeProfile,demographics:H.demographics,content_consumption:H.contentConsumption})}}finally{w(!1)}}},it=async()=>{const I={name:x,age_range:y||null,knowledge_level:j||null,target_country:$||null,pain_points:C?C.split(",").map(ne=>ne.trim()).filter(Boolean):null,preferred_tone:k||null,platform:U||null,description:re||null,motivations:A?A.split(",").map(ne=>ne.trim()).filter(Boolean):null,objections:G?G.split(",").map(ne=>ne.trim()).filter(Boolean):null,content_sources:B,trust_profile:ae||F?{primary:ae||void 0,secondary:Oe||void 0,reasoning:F}:null,action_barriers:J?J.split(",").map(ne=>ne.trim()).filter(Boolean):null,content_consumption:Se?{attentionSpan:Se,preferredFormats:[]}:null};if(window.__tempPersonaExtended){const ne=window.__tempPersonaExtended;ne.knowledge_profile&&(I.knowledge_profile=ne.knowledge_profile),ne.demographics&&(I.demographics=ne.demographics),ne.content_consumption&&(I.content_consumption=ne.content_consumption),delete window.__tempPersonaExtended}b(!0),d?await r(d.id,I):await n(I),b(!1),h(!1),jr()},Vn=async I=>{await s(I)},W=I=>{switch(I){case"complete-beginner":return 20;case"beginner":return 40;case"intermediate":return 60;case"advanced":return 80;case"expert":return 100;default:return 50}},pe=I=>rb[I%rb.length];return o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:i("personas.title")}),o.jsx("p",{className:"text-muted-foreground",children:i("personas.subtitle")})]}),o.jsxs(V,{onClick:Rt,className:"gap-2 rounded-xl shadow-lg shadow-primary/20",children:[o.jsx(tt,{className:"h-4 w-4"}),i("personas.createPersona")]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Dn,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{placeholder:i("personas.searchPlaceholder"),value:l,onChange:I=>c(I.target.value),className:"pl-10 rounded-xl bg-card/50"})]}),t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(We,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):en.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx($i,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:i("personas.noPersonas")})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:en.map((I,ne)=>o.jsxs(ve,{variant:"elevated",className:"group",children:[o.jsxs(ut,{children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx(sy,{className:"h-12 w-12",children:o.jsx(oy,{className:`${pe(ne)} text-primary-foreground font-semibold`,children:I.name.split(" ").map(H=>H[0]).join("").slice(0,2)})}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>Wr(I),children:o.jsx(UR,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>Vn(I.id),children:o.jsx(bt,{className:"h-4 w-4"})})]})]}),o.jsx(xt,{className:"mt-3",children:I.name}),o.jsxs(Ur,{children:[I.age_range&&`${i("personas.age")} ${I.age_range}`,I.age_range&&(I.target_country||I.platform)&&"  ",I.target_country&&o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx(co,{className:"h-3 w-3"}),I.target_country]}),I.target_country&&I.platform&&"  ",I.platform]})]}),o.jsxs(be,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(fm,{className:"h-4 w-4"}),"Knowledge"]}),o.jsx("span",{className:"font-medium capitalize",children:I.knowledge_level||i("personas.intermediate")})]}),o.jsx(al,{value:W(I.knowledge_level),className:"h-1.5"})]}),I.knowledge_profile&&o.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-primary/5 border border-primary/10",children:[o.jsx("span",{className:"text-xs font-semibold text-primary",children:i("personas.knowledgeProfile")}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg text-primary",children:I.knowledge_profile.domainKnowledge}),o.jsx("div",{className:"text-muted-foreground",children:i("personas.domain")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg text-primary",children:I.knowledge_profile.engagementDepth}),o.jsx("div",{className:"text-muted-foreground",children:i("personas.engagement")})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-lg text-primary",children:I.knowledge_profile.skepticismLevel}),o.jsx("div",{className:"text-muted-foreground",children:i("personas.skepticism")})]})]}),I.knowledge_profile.reasoning&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:I.knowledge_profile.reasoning})]}),I.pain_points&&I.pain_points.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(sa,{className:"h-4 w-4"}),"Pain Points"]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[I.pain_points.slice(0,2).map((H,Ne)=>{const Ie=typeof H=="string"?H:H.text,Nt=typeof H=="object"&&H.intensity?H.intensity:null;return o.jsx("span",{className:`rounded-lg px-2 py-1 text-xs font-medium ${Nt==="high"?"bg-red-500/20 text-red-600":Nt==="medium"?"bg-orange-500/20 text-orange-600":Nt==="low"?"bg-yellow-500/20 text-yellow-600":"bg-accent text-accent-foreground"}`,children:Ie},Ne)}),I.pain_points.length>2&&o.jsxs("span",{className:"rounded-lg bg-muted px-2 py-1 text-xs text-muted-foreground",children:["+",I.pain_points.length-2]})]})]}),I.demographics&&o.jsxs("div",{className:"space-y-1.5 text-xs",children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-muted-foreground font-medium",children:[o.jsx($i,{className:"h-4 w-4"}),"Demographics Inference"]}),I.demographics.ageEvidence&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Age:"})," ",I.demographics.ageEvidence]}),I.demographics.occupationInference&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Occupation:"})," ",I.demographics.occupationInference]}),I.demographics.digitalFluency&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Digital Fluency:"})," ",o.jsx("span",{className:"capitalize",children:I.demographics.digitalFluency})]})]}),I.content_consumption&&o.jsxs("div",{className:"space-y-1.5 text-xs",children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-muted-foreground font-medium",children:[o.jsx(sa,{className:"h-4 w-4"}),"Content Preferences"]}),I.content_consumption.attentionSpan&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Attention:"})," ",o.jsx("span",{className:"capitalize",children:I.content_consumption.attentionSpan})]}),I.content_consumption.engagementTriggers&&I.content_consumption.engagementTriggers.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:I.content_consumption.engagementTriggers.map(H=>o.jsx("span",{className:"rounded-md bg-blue-500/10 text-blue-600 px-1.5 py-0.5 text-xs",children:H},H))})]}),I.motivations&&I.motivations.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(ns,{className:"h-4 w-4"}),"Motivations"]}),o.jsx("p",{className:"text-xs text-foreground/80 line-clamp-1",children:Array.isArray(I.motivations)&&typeof I.motivations[0]=="string"?I.motivations.join(", "):I.motivations.map(H=>H.text||H).join(", ")})]}),I.preferred_tone&&o.jsxs("div",{className:"flex items-center gap-2 text-sm pt-2 border-t border-border/50",children:[o.jsx(RR,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:"text-muted-foreground",children:[i("personas.tone"),":"]}),o.jsx("span",{className:"font-medium",children:I.preferred_tone})]})]})]},I.id))}),o.jsx(ua,{open:u,onOpenChange:h,children:o.jsxs(po,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs(mo,{children:[o.jsx(go,{children:i(d?"personas.dialog.editTitle":"personas.dialog.createTitle")}),o.jsx(Gh,{children:i("personas.dialog.description")})]}),o.jsxs(Bi,{defaultValue:"analyze",className:"w-full",children:[o.jsxs(da,{className:"grid w-full grid-cols-2",children:[o.jsx(Pn,{value:"manual",children:i("personas.dialog.manualTab")}),o.jsx(Pn,{value:"analyze",children:i("personas.dialog.analyzeTab")})]}),o.jsx(An,{value:"manual",className:"space-y-4 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.descriptionLabel")}),o.jsx(Ae,{value:re,onChange:I=>z(I.target.value),placeholder:i("personas.dialog.descriptionPlaceholder"),className:"min-h-[80px]"}),o.jsxs(V,{variant:"outline",size:"sm",onClick:Ht,disabled:g||!re,className:"w-full",children:[g?o.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}):o.jsx(dt,{className:"mr-2 h-4 w-4"}),i("personas.dialog.formatWithAi")]})]})}),o.jsxs(An,{value:"analyze",className:"space-y-6 py-4",children:[o.jsxs("div",{className:"space-y-4",children:[B.map((I,ne)=>o.jsxs("div",{className:"relative rounded-xl border border-border bg-muted/10 p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-sm flex items-center gap-2",children:o.jsxs("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded text-xs border border-primary/20",children:[i("personas.dialog.source")," #",ne+1]})}),B.length>1&&o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>Wt(I.id),children:o.jsx(bt,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.scriptLabel")}),o.jsx(Ae,{value:I.script,onChange:H=>tn(I.id,"script",H.target.value),placeholder:i("personas.dialog.scriptPlaceholder"),className:"min-h-[120px] resize-none"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.youtubeLabel")}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(m1,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-muted-foreground"}),o.jsx(ie,{value:I.youtubeUrl,onChange:H=>tn(I.id,"youtubeUrl",H.target.value),placeholder:"https://youtube.com/...",className:"pl-8 h-8 text-xs"})]}),o.jsx(V,{size:"sm",variant:"secondary",className:"h-8 px-2",onClick:()=>Ot(I.id,I.youtubeUrl,Y),disabled:At||!I.youtubeUrl,children:At?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(gv,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"range",min:50,max:500,step:50,value:Y,onChange:H=>te(Number(H.target.value)),className:"flex-1 h-1.5 bg-muted rounded-full appearance-none cursor-pointer accent-primary"}),o.jsxs("span",{className:"text-xs text-muted-foreground w-16 text-right",children:[Y," ",i("personas.dialog.maxComments")]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(K,{children:i("personas.dialog.commentsLabel")}),I.fetchedCommentsCount?o.jsxs("span",{className:"text-[10px] text-green-600 font-medium",children:[I.fetchedCommentsCount," ",i("personas.dialog.fetched")]}):null]}),o.jsx(Ae,{value:I.comments,onChange:H=>tn(I.id,"comments",H.target.value),placeholder:"Community comments...",className:"min-h-[80px] resize-none"})]})]})]})]},I.id)),o.jsxs(V,{variant:"outline",className:"w-full border-dashed text-muted-foreground hover:text-foreground hover:border-primary/50",onClick:Be,children:[o.jsx(tt,{className:"mr-2 h-4 w-4"})," ",i("personas.dialog.addSource")]})]}),o.jsx("div",{className:"pt-2",children:o.jsxs(V,{variant:"default",size:"default",onClick:Ht,disabled:g,className:"w-full bg-violet-600 hover:bg-violet-700 h-10 text-md shadow-lg shadow-violet-500/20",children:[g?o.jsx(We,{className:"mr-2 h-5 w-5 animate-spin"}):o.jsx(dt,{className:"mr-2 h-5 w-5"}),i("personas.dialog.reverseEngineer")]})})]})]}),o.jsxs("div",{className:"grid gap-4 py-4 border-t border-border",children:[o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{children:[i("personas.dialog.nameLabel")," *"]}),o.jsx(ie,{value:x,onChange:I=>v(I.target.value),placeholder:i("personas.dialog.namePlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.ageRangeLabel")}),o.jsx(ie,{value:y,onChange:I=>S(I.target.value),placeholder:i("personas.dialog.ageRangePlaceholder")})]})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.knowledgeLevelLabel")}),o.jsxs(Yn,{value:j,onValueChange:N,children:[o.jsx(Rn,{children:o.jsx(Qn,{})}),o.jsxs(On,{children:[o.jsx(_e,{value:"complete-beginner",children:i("personas.knowledge.beginner1")}),o.jsx(_e,{value:"beginner",children:i("personas.knowledge.beginner2")}),o.jsx(_e,{value:"intermediate",children:i("personas.knowledge.intermediate")}),o.jsx(_e,{value:"advanced",children:i("personas.knowledge.advanced")}),o.jsx(_e,{value:"expert",children:i("personas.knowledge.expert")})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.platformLabel")}),o.jsxs(Yn,{value:U,onValueChange:R,children:[o.jsx(Rn,{children:o.jsx(Qn,{placeholder:i("personas.dialog.platformPlaceholder")})}),o.jsxs(On,{children:[o.jsx(_e,{value:"YouTube",children:"YouTube"}),o.jsx(_e,{value:"TikTok",children:"TikTok"}),o.jsx(_e,{value:"Instagram",children:"Instagram"}),o.jsx(_e,{value:"Twitter",children:"Twitter"}),o.jsx(_e,{value:"LinkedIn",children:"LinkedIn"})]})]})]})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.targetCountryLabel")}),o.jsx(ie,{value:$,onChange:I=>L(I.target.value),placeholder:i("personas.dialog.targetCountryPlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.toneLabel")}),o.jsx(ie,{value:k,onChange:I=>E(I.target.value),placeholder:i("personas.dialog.tonePlaceholder")})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.painPointsLabel")}),o.jsx(ie,{value:C,onChange:I=>_(I.target.value),placeholder:i("personas.dialog.painPointsPlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.motivationsLabel")}),o.jsx(ie,{value:A,onChange:I=>M(I.target.value),placeholder:i("personas.dialog.motivationsPlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:i("personas.dialog.objectionsLabel")}),o.jsx(ie,{value:G,onChange:I=>ee(I.target.value),placeholder:i("personas.dialog.objectionsPlaceholder")})]}),o.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[o.jsx(K,{className:"text-sm font-medium text-blue-400",children:i("personas.trustProfile.title")}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:i("personas.trustProfile.primaryLabel")}),o.jsx(ie,{value:ae,onChange:I=>ce(I.target.value),placeholder:i("personas.trustProfile.primaryPlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:i("personas.trustProfile.secondaryLabel")}),o.jsx(ie,{value:Oe,onChange:I=>ye(I.target.value),placeholder:i("personas.trustProfile.secondaryPlaceholder")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:i("personas.trustProfile.reasoningLabel")}),o.jsx(Ae,{value:F,onChange:I=>de(I.target.value),placeholder:i("personas.trustProfile.reasoningPlaceholder"),className:"min-h-[60px] resize-none"})]})]}),o.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[o.jsx(K,{className:"text-sm font-medium text-orange-400",children:i("personas.attentionSpan.title")}),o.jsx(ie,{value:Se,onChange:I=>D(I.target.value),placeholder:i("personas.attentionSpan.placeholder")})]}),o.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[o.jsx(K,{className:"text-sm font-medium text-red-400",children:i("personas.actionBarriers.title")}),o.jsx(ie,{value:J,onChange:I=>we(I.target.value),placeholder:i("personas.actionBarriers.placeholder")})]})]}),o.jsxs(nh,{className:"flex items-center justify-between sm:justify-between w-full",children:[o.jsx("div",{className:"w-[200px]",children:o.jsxs(Yn,{value:ue,onValueChange:Xe,children:[o.jsx(Rn,{className:"h-8 text-xs",children:o.jsx(Qn,{placeholder:i("personas.dialog.selectModelPlaceholder")})}),o.jsx(On,{children:sb.map(I=>o.jsx(_e,{value:I.value,children:I.label},I.value))})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"outline",onClick:()=>h(!1),children:i("common.cancel")}),o.jsxs(V,{onClick:it,disabled:p||!x.trim(),children:[p?o.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}):null,i(d?"common.update":"common.create")]})]})]})]})})]})}const Ez=[{name:"Starter",tier:"starter",description:"Basic features to get started",price:"$20",period:"/month",icon:dt,popular:!1,features:[{name:"Extract DNA from 1 video",included:!0},{name:"Basic script generation",included:!0},{name:"2 Personas",included:!0},{name:"7-day version history",included:!0},{name:"DNA Evolution",included:!1},{name:"AI Suggest Angle",included:!1},{name:"Batch DNA (multiple videos)",included:!1},{name:"Structure Innovation",included:!1},{name:"Flop Avoidance Analysis",included:!1}]},{name:"Pro",tier:"pro",description:"Unlock all advanced AI features",price:"$59",period:"/month",icon:ns,popular:!0,features:[{name:"Extract DNA from multiple videos",included:!0},{name:"Unlimited scripts",included:!0},{name:"Unlimited Personas",included:!0},{name:"Unlimited version history",included:!0},{name:"DNA Evolution",included:!0},{name:"AI Suggest Angle",included:!0},{name:"Batch DNA (multiple videos)",included:!0},{name:"Structure Innovation",included:!0},{name:"Flop Avoidance Analysis",included:!0}]},{name:"Ultra",tier:"ultra",description:"Everything in Pro + Future features",price:"$99",period:"/month",icon:Rd,popular:!1,features:[{name:"All Pro features",included:!0},{name:"Early access to new features",included:!0},{name:"24/7 Priority support",included:!0},{name:"Premium Templates (coming soon)",included:!0},{name:"Team Collaboration (coming soon)",included:!0}]}],Tz=[{name:"DNA Extraction",starter:"1 video",pro:"Multiple videos",ultra:"Multiple videos"},{name:"Script Generations",starter:"Basic",pro:"Unlimited",ultra:"Unlimited"},{name:"Personas",starter:"2",pro:"Unlimited",ultra:"Unlimited"},{name:"DNA Evolution",starter:"",pro:"",ultra:""},{name:"AI Suggest Angle",starter:"",pro:"",ultra:""},{name:"Batch DNA",starter:"",pro:"",ultra:""},{name:"Structure Innovation",starter:"",pro:"",ultra:""},{name:"Flop Avoidance Analysis",starter:"",pro:"",ultra:""},{name:"Version History",starter:"7 days",pro:"Unlimited",ultra:"Unlimited"},{name:"Support",starter:"Community",pro:"Priority Email",ultra:"24/7 Dedicated"}];function Pz(){const e=xa();return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"border-b border-border/50 bg-card/50 backdrop-blur-xl",children:o.jsxs("div",{className:"container mx-auto flex items-center justify-between px-4 py-4",children:[o.jsxs("button",{onClick:()=>e("/"),className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary",children:o.jsx("span",{className:"text-sm font-bold text-primary-foreground",children:"L"})}),o.jsx("span",{className:"text-lg font-semibold",children:"LOG"})]}),o.jsx(V,{variant:"outline",onClick:()=>e("/auth"),children:"Sign In"})]})}),o.jsx("section",{className:"py-16 text-center",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx(Re,{variant:"secondary",className:"mb-4",children:"Simple, transparent pricing"}),o.jsx("h1",{className:"mb-4 text-4xl font-bold md:text-5xl",children:"Choose your plan"}),o.jsx("p",{className:"mx-auto max-w-2xl text-lg text-muted-foreground",children:"Start for free and upgrade as you grow. All plans include our core features to help you create viral content."})]})}),o.jsx("section",{className:"pb-16",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:Ez.map(t=>o.jsxs(Qd,{className:`relative flex flex-col ${t.popular?"border-primary shadow-lg shadow-primary/20":"border-border/50"}`,children:[t.popular&&o.jsx(Re,{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:"Most Popular"}),o.jsxs(Zm,{className:"text-center",children:[o.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10",children:o.jsx(t.icon,{className:"h-6 w-6 text-primary"})}),o.jsx(eg,{className:"text-2xl",children:t.name}),o.jsx(QC,{children:t.description})]}),o.jsxs(Xd,{className:"flex-1",children:[o.jsxs("div",{className:"mb-6 text-center",children:[o.jsx("span",{className:"text-4xl font-bold",children:t.price}),o.jsx("span",{className:"text-muted-foreground",children:t.period})]}),o.jsx("ul",{className:"space-y-3",children:t.features.map(n=>o.jsxs("li",{className:"flex items-center gap-3",children:[n.included?o.jsx(wo,{className:"h-4 w-4 text-primary"}):o.jsx(ps,{className:"h-4 w-4 text-muted-foreground/50"}),o.jsx("span",{className:n.included?"":"text-muted-foreground/50",children:n.name})]},n.name))})]}),o.jsx(XC,{children:o.jsx(V,{className:"w-full",variant:t.popular?"default":"outline",onClick:()=>e("/auth"),children:t.price==="$0"?"Get Started Free":"Start Free Trial"})})]},t.name))})})}),o.jsx("section",{className:"border-t border-border/50 bg-card/30 py-16",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h2",{className:"mb-8 text-center text-3xl font-bold",children:"Compare Plans"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-border/50",children:[o.jsx("th",{className:"px-4 py-3 text-left font-medium",children:"Feature"}),o.jsx("th",{className:"px-4 py-3 text-center font-medium",children:"Starter"}),o.jsx("th",{className:"px-4 py-3 text-center font-medium text-primary",children:"Pro"}),o.jsx("th",{className:"px-4 py-3 text-center font-medium",children:"Ultra"})]})}),o.jsx("tbody",{children:Tz.map(t=>o.jsxs("tr",{className:"border-b border-border/30",children:[o.jsx("td",{className:"px-4 py-3 font-medium",children:t.name}),o.jsx("td",{className:"px-4 py-3 text-center text-muted-foreground",children:t.starter}),o.jsx("td",{className:"px-4 py-3 text-center",children:t.pro}),o.jsx("td",{className:"px-4 py-3 text-center",children:t.ultra})]},t.name))})]})})]})}),o.jsx("section",{className:"py-16",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h2",{className:"mb-8 text-center text-3xl font-bold",children:"Frequently Asked Questions"}),o.jsx("div",{className:"mx-auto grid max-w-3xl gap-4",children:[{q:"Can I switch plans anytime?",a:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately."},{q:"Is there a free trial for paid plans?",a:"Yes, all paid plans come with a 14-day free trial. No credit card required to start."},{q:"What happens to my data if I downgrade?",a:"Your data is always safe. If you downgrade, you'll keep access to your existing work but new creation limits will apply."},{q:"Do you offer refunds?",a:"Yes, we offer a 30-day money-back guarantee if you're not satisfied with your purchase."}].map(t=>o.jsxs(Qd,{className:"border-border/50",children:[o.jsx(Zm,{className:"pb-2",children:o.jsx(eg,{className:"text-lg",children:t.q})}),o.jsx(Xd,{children:o.jsx("p",{className:"text-muted-foreground",children:t.a})})]},t.q))})]})}),o.jsx("section",{className:"border-t border-border/50 bg-primary/5 py-16",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"mb-4 text-3xl font-bold",children:"Ready to create viral content?"}),o.jsx("p",{className:"mb-6 text-muted-foreground",children:"Join thousands of creators already using ScriptLab"}),o.jsx(V,{size:"lg",onClick:()=>e("/auth"),children:"Start Free Today"})]})})]})}function To({text:e,className:t="",showCharacters:n=!1}){const{t:r}=dn(),s=f.useMemo(()=>{const a=e.trim();if(!a)return{words:0,characters:0};const i=a.split(/\s+/).filter(Boolean).length,l=a.length;return{words:i,characters:l}},[e]);return o.jsxs("span",{className:`text-xs text-muted-foreground ${t}`,children:[s.words," ",r("common.words"),n&&`  ${s.characters} ${r("common.chars")}`]})}function Az({score:e}){const t=s=>s>=80?"text-green-500":s>=60?"text-yellow-500":"text-red-500",n=s=>s>=80?"bg-green-500":s>=60?"bg-yellow-500":"bg-red-500",r=[{key:"hook",label:"Hook",icon:ns,value:e.breakdown.hook},{key:"structure",label:"Structure",icon:sa,value:e.breakdown.structure},{key:"engagement",label:"Engagement",icon:kh,value:e.breakdown.engagement},{key:"clarity",label:"Clarity",icon:pc,value:e.breakdown.clarity},{key:"callToAction",label:"CTA",icon:Id,value:e.breakdown.callToAction}];return o.jsxs(ve,{children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Id,{className:"h-5 w-5 text-primary"}),"Script Score"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-3xl font-bold ${t(e.score)}`,children:e.score}),o.jsx("span",{className:"text-muted-foreground",children:"/100"})]})]})}),o.jsxs(be,{className:"space-y-4",children:[o.jsx("div",{className:"grid gap-3",children:r.map(({key:s,label:a,icon:i,value:l})=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(i,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{children:a})]}),o.jsx("span",{className:`font-medium ${t(l)}`,children:l})]}),o.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all ${n(l)}`,style:{width:`${l}%`}})})]},s))}),e.suggestions&&e.suggestions.length>0&&o.jsxs("div",{className:"pt-3 border-t border-border/50 space-y-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Suggestions"}),o.jsx("ul",{className:"space-y-1",children:e.suggestions.map((s,a)=>o.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[o.jsx("span",{className:"text-primary mt-1",children:""}),s]},a))})]})]})]})}function Rz(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var ky="ScrollArea",[$E,CW]=Lt(ky),[Oz,tr]=$E(ky),FE=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=f.useState(null),[u,h]=f.useState(null),[d,m]=f.useState(null),[p,b]=f.useState(null),[g,w]=f.useState(null),[x,v]=f.useState(0),[y,S]=f.useState(0),[j,N]=f.useState(!1),[C,_]=f.useState(!1),k=Te(t,U=>c(U)),E=wa(s);return o.jsx(Oz,{scope:n,type:r,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:h,content:d,onContentChange:m,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:C,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:S,children:o.jsx(fe.div,{dir:E,...i,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});FE.displayName=ky;var UE="ScrollAreaViewport",VE=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=tr(UE,n),l=f.useRef(null),c=Te(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});VE.displayName=UE;var Br="ScrollAreaScrollbar",Ey=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=tr(Br,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(Iz,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(Dz,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(zE,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(Ty,{...r,ref:t}):null});Ey.displayName=Br;var Iz=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=tr(Br,e.__scopeScrollArea),[a,i]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},h=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Xt,{present:n||a,children:o.jsx(zE,{"data-state":a?"visible":"hidden",...r,ref:t})})}),Dz=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=tr(Br,e.__scopeScrollArea),a=e.orientation==="horizontal",i=rf(()=>c("SCROLL_END"),100),[l,c]=Rz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,h=a?"scrollLeft":"scrollTop";if(u){let d=u[h];const m=()=>{const p=u[h];d!==p&&(c("SCROLL"),i()),d=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,i]),o.jsx(Xt,{present:n||l!=="hidden",children:o.jsx(Ty,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:oe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:oe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),zE=f.forwardRef((e,t)=>{const n=tr(Br,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=f.useState(!1),l=e.orientation==="horizontal",c=rf(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:h)}},10);return Wi(n.viewport,c),Wi(n.content,c),o.jsx(Xt,{present:r||a,children:o.jsx(Ty,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Ty=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=tr(Br,e.__scopeScrollArea),a=f.useRef(null),i=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=qE(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function d(m,p){return Vz(m,i.current,l,p)}return n==="horizontal"?o.jsx(Mz,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=ob(m,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=d(m,s.dir))}}):n==="vertical"?o.jsx(Lz,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=ob(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=d(m))}}):null}),Mz=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=tr(Br,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Te(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(WE,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nf(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,d)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),YE(m,d)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:oh(i.paddingLeft),paddingEnd:oh(i.paddingRight)}})}})}),Lz=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=tr(Br,e.__scopeScrollArea),[i,l]=f.useState(),c=f.useRef(null),u=Te(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(WE,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nf(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,d)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),YE(m,d)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:oh(i.paddingTop),paddingEnd:oh(i.paddingBottom)}})}})}),[$z,BE]=$E(Br),WE=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:d,...m}=e,p=tr(Br,n),[b,g]=f.useState(null),w=Te(t,k=>g(k)),x=f.useRef(null),v=f.useRef(""),y=p.viewport,S=r.content-r.viewport,j=ot(h),N=ot(c),C=rf(d,10);function _(k){if(x.current){const E=k.clientX-x.current.left,U=k.clientY-x.current.top;u({x:E,y:U})}}return f.useEffect(()=>{const k=E=>{const U=E.target;(b==null?void 0:b.contains(U))&&j(E,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[y,b,S,j]),f.useEffect(N,[r,N]),Wi(b,C),Wi(p.content,C),o.jsx($z,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:ot(a),onThumbPointerUp:ot(i),onThumbPositionChange:N,onThumbPointerDown:ot(l),children:o.jsx(fe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:oe(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=b.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),_(k))}),onPointerMove:oe(e.onPointerMove,_),onPointerUp:oe(e.onPointerUp,k=>{const E=k.target;E.hasPointerCapture(k.pointerId)&&E.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),sh="ScrollAreaThumb",HE=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=BE(sh,e.__scopeScrollArea);return o.jsx(Xt,{present:n||s.hasThumb,children:o.jsx(Fz,{ref:t,...r})})}),Fz=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=tr(sh,n),i=BE(sh,n),{onThumbPositionChange:l}=i,c=Te(t,d=>i.onThumbChange(d)),u=f.useRef(void 0),h=rf(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const d=a.viewport;if(d){const m=()=>{if(h(),!u.current){const p=zz(d,l);u.current=p,l()}};return l(),d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,h,l]),o.jsx(fe.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:oe(e.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),b=d.clientX-p.left,g=d.clientY-p.top;i.onThumbPointerDown({x:b,y:g})}),onPointerUp:oe(e.onPointerUp,i.onThumbPointerUp)})});HE.displayName=sh;var Py="ScrollAreaCorner",KE=f.forwardRef((e,t)=>{const n=tr(Py,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(Uz,{...e,ref:t}):null});KE.displayName=Py;var Uz=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=tr(Py,n),[a,i]=f.useState(0),[l,c]=f.useState(0),u=!!(a&&l);return Wi(s.scrollbarX,()=>{var d;const h=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Wi(s.scrollbarY,()=>{var d;const h=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(h),i(h)}),u?o.jsx(fe.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function oh(e){return e?parseInt(e,10):0}function qE(e,t){const n=e/t;return isNaN(n)?0:n}function nf(e){const t=qE(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Vz(e,t,n,r="ltr"){const s=nf(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,d=r==="ltr"?[0,h]:[h*-1,0];return GE([c,u],d)(e)}function ob(e,t,n="ltr"){const r=nf(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=Ac(e,c);return GE([0,i],[0,l])(u)}function GE(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function YE(e,t){return e>0&&e<t}var zz=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function rf(e,t){const n=ot(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Wi(e,t){const n=ot(t);at(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var QE=FE,Bz=VE,Wz=KE;const Rc=f.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(QE,{ref:r,className:Q("relative overflow-hidden",e),...n,children:[o.jsx(Bz,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(XE,{}),o.jsx(Wz,{})]}));Rc.displayName=QE.displayName;const XE=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(Ey,{ref:r,orientation:t,className:Q("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(HE,{className:"relative flex-1 rounded-full bg-border"})}));XE.displayName=Ey.displayName;var JE="AlertDialog",[Hz,_W]=Lt(JE,[aC]),xs=aC(),ZE=e=>{const{__scopeAlertDialog:t,...n}=e,r=xs(t);return o.jsx(Zv,{...r,...n,modal:!0})};ZE.displayName=JE;var Kz="AlertDialogTrigger",eT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=xs(n);return o.jsx(ey,{...s,...r,ref:t})});eT.displayName=Kz;var qz="AlertDialogPortal",tT=e=>{const{__scopeAlertDialog:t,...n}=e,r=xs(t);return o.jsx(ty,{...r,...n})};tT.displayName=qz;var Gz="AlertDialogOverlay",nT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=xs(n);return o.jsx(Kc,{...s,...r,ref:t})});nT.displayName=Gz;var vi="AlertDialogContent",[Yz,Qz]=Hz(vi),Xz=$N("AlertDialogContent"),rT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=xs(n),i=f.useRef(null),l=Te(t,i),c=f.useRef(null);return o.jsx(V$,{contentName:vi,titleName:sT,docsSlug:"alert-dialog",children:o.jsx(Yz,{scope:n,cancelRef:c,children:o.jsxs(qc,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:oe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(Xz,{children:r}),o.jsx(Zz,{contentRef:i})]})})})});rT.displayName=vi;var sT="AlertDialogTitle",oT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=xs(n);return o.jsx(Gc,{...s,...r,ref:t})});oT.displayName=sT;var aT="AlertDialogDescription",iT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=xs(n);return o.jsx(Yc,{...s,...r,ref:t})});iT.displayName=aT;var Jz="AlertDialogAction",lT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=xs(n);return o.jsx(Wh,{...s,...r,ref:t})});lT.displayName=Jz;var cT="AlertDialogCancel",uT=f.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=Qz(cT,n),a=xs(n),i=Te(t,s);return o.jsx(Wh,{...a,...r,ref:i})});uT.displayName=cT;var Zz=({contentRef:e})=>{const t=`\`${vi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${vi}\` by passing a \`${aT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${vi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},eB=ZE,tB=eT,nB=tT,dT=nT,hT=rT,fT=lT,pT=uT,mT=oT,gT=iT;const vT=eB,rB=tB,sB=nB,yT=f.forwardRef(({className:e,...t},n)=>o.jsx(dT,{className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));yT.displayName=dT.displayName;const Ay=f.forwardRef(({className:e,...t},n)=>o.jsxs(sB,{children:[o.jsx(yT,{}),o.jsx(hT,{ref:n,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ay.displayName=hT.displayName;const Ry=({className:e,...t})=>o.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ry.displayName="AlertDialogHeader";const Oy=({className:e,...t})=>o.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Oy.displayName="AlertDialogFooter";const Iy=f.forwardRef(({className:e,...t},n)=>o.jsx(mT,{ref:n,className:Q("text-lg font-semibold",e),...t}));Iy.displayName=mT.displayName;const Dy=f.forwardRef(({className:e,...t},n)=>o.jsx(gT,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Dy.displayName=gT.displayName;const My=f.forwardRef(({className:e,...t},n)=>o.jsx(fT,{ref:n,className:Q(qv(),e),...t}));My.displayName=fT.displayName;const Ly=f.forwardRef(({className:e,...t},n)=>o.jsx(pT,{ref:n,className:Q(qv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ly.displayName=pT.displayName;function ab({versions:e,type:t,onRestore:n,onUpdateName:r,onDelete:s,renderInfo:a,disabled:i}){const{t:l}=dn(),{toast:c}=Mt(),[u,h]=f.useState(!1),[d,m]=f.useState(null),[p,b]=f.useState(null),[g,w]=f.useState(""),[x,v]=f.useState(null),y=R=>{n(R),h(!1),m(null),c({title:l("common.restored"),description:l("common.restoredDesc")})},S=(R,$)=>{$.stopPropagation(),s&&v(R)},j=()=>{x&&s&&(s(x),d!==null&&m(null),v(null),c({title:l("common.deleted"),description:l("common.deletedDesc")}))},N=(R,$)=>{b(R),w($)},C=(R,$,L)=>{L.stopPropagation(),r&&g.trim()&&(r($,g),b(null))},_=R=>{R.stopPropagation(),b(null),w("")},k=async R=>{try{await navigator.clipboard.writeText(R),c({title:l("common.copied"),description:l("common.copiedDesc")})}catch{c({title:l("common.error"),description:l("common.copyError"),variant:"destructive"})}},E=(R,$)=>{m(d===R?null:R)},U=[...e].sort((R,$)=>new Date($.timestamp).getTime()-new Date(R.timestamp).getTime());return o.jsxs(SC,{open:u,onOpenChange:R=>{h(R),R||(m(null),b(null))},children:[o.jsx(H$,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",disabled:i||e.length===0,className:"gap-2",children:[o.jsx(mm,{className:"h-4 w-4"}),l("common.history")," (",e.length,")"]})}),o.jsxs(ny,{className:"w-[400px] sm:w-[600px]",children:[o.jsx(jC,{children:o.jsxs(CC,{className:"flex items-center gap-2",children:[o.jsx(mm,{className:"h-5 w-5"}),l(t==="outline"?"writer.steps.outline":"writer.steps.script")," ",l("common.history")]})}),o.jsx(Rc,{className:"h-[calc(100vh-120px)] mt-4",children:o.jsx("div",{className:"space-y-3 pr-4",children:U.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:l("common.noVersions")}):U.map((R,$)=>o.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${d===$?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>E($,R.content),children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"flex items-center gap-2 text-sm font-medium",children:p===$?o.jsxs("div",{className:"flex items-center gap-1",onClick:L=>L.stopPropagation(),children:[o.jsx(ie,{value:g,onChange:L=>w(L.target.value),className:"h-7 w-32 text-xs",autoFocus:!0,onClick:L=>L.stopPropagation(),onKeyDown:L=>{L.key==="Enter"&&C($,R,L),L.key==="Escape"&&_(L)}}),o.jsx(V,{size:"icon",variant:"ghost",className:"h-7 w-7 text-green-600 hover:text-green-700 hover:bg-green-50",onClick:L=>C($,R,L),children:o.jsx(wo,{className:"h-3 w-3"})}),o.jsx(V,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-red-50",onClick:_,children:o.jsx(ps,{className:"h-3 w-3"})})]}):o.jsxs("div",{className:"flex items-center gap-2 group",children:[o.jsx("span",{className:"text-foreground/90 font-semibold",children:R.name||`${l("common.draft")} ${$+1}`}),r&&o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:L=>{L.stopPropagation(),N($,R.name||`${l("common.draft")} ${$+1}`)},children:o.jsx(ql,{className:"h-3 w-3 text-muted-foreground"})})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[a&&a(R),R.score&&o.jsx("div",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold ${R.score.score>=90?"bg-green-100 text-green-700":R.score.score>=80?"bg-blue-100 text-blue-700":R.score.score>=70?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:R.score.score}),o.jsx("span",{className:"text-xs text-muted-foreground",children:i_(new Date(R.timestamp),"HH:mm")})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-xs text-muted-foreground",children:[R.wordCount||0," ",l("common.words")]}),s&&o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:L=>S(R,L),children:o.jsx(bt,{className:"h-3 w-3"})})]}),o.jsxs("p",{className:"text-sm line-clamp-3 text-foreground/80",children:[R.content.substring(0,200),R.content.length>200?"...":""]}),d===$&&o.jsxs("div",{className:"mt-3 pt-3 border-t space-y-3",children:[o.jsx(Rc,{className:"h-[250px]",children:o.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono text-foreground/70 leading-relaxed",children:R.content})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{size:"sm",onClick:L=>{L.stopPropagation(),y(R)},className:"flex-1 gap-2",children:[o.jsx(ql,{className:"h-4 w-4"}),l("common.editInEditor")]}),o.jsxs(V,{size:"sm",variant:"outline",onClick:L=>{L.stopPropagation(),k(R.content)},className:"gap-2",children:[o.jsx(Is,{className:"h-4 w-4"}),l("common.copyBtn")]})]})]})]},$))})}),o.jsx(vT,{open:!!x,onOpenChange:R=>!R&&v(null),children:o.jsxs(Ay,{children:[o.jsxs(Ry,{children:[o.jsx(Iy,{children:l("common.confirmDeleteTitle")}),o.jsx(Dy,{children:l("common.confirmDeleteDesc")})]}),o.jsxs(Oy,{children:[o.jsx(Ly,{children:l("common.cancel")}),o.jsx(My,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l("common.delete")})]})]})})]})]})}const ib=()=>({id:crypto.randomUUID(),title:"",url:"",transcript:"",comments:"",notes:"",activeTab:"transcript"});function lb(){const e=xa(),{id:t}=eL(),{toast:n}=Mt(),{t:r}=dn(),{personas:s}=LE(),{dnas:a}=uy(),{scripts:i,generateOutline:l,generateScriptFromOutline:c,generateScriptSectionBySection:u,scoreScript:h,createScript:d,updateScript:m,suggestUniqueAngle:p,rewriteSection:b,generateSEO:g}=d_(),[w,x]=f.useState("select"),[v,y]=f.useState("input"),[S,j]=f.useState("google/gemini-3-flash-preview"),[N,C]=f.useState("google/gemini-3-flash-preview"),[_,k]=f.useState(""),[E,U]=f.useState(""),[R,$]=f.useState("en"),[L,re]=f.useState("US"),[z,B]=f.useState(null),[O,A]=f.useState("New Script"),[M,G]=f.useState(!1),[ee,ae]=f.useState(""),[ce,Oe]=f.useState(""),[ye,F]=f.useState(""),[de,J]=f.useState(""),[we,Se]=f.useState(1e3),[D,Y]=f.useState(!1),[te,ue]=f.useState(""),[Xe,Zt]=f.useState([]),[At,en]=f.useState([]),[jr,Rt]=f.useState(!1),[Wr,tn]=f.useState(!1),[Be,Wt]=f.useState(null),[Ot,Ht]=f.useState([]),[it,Vn]=f.useState(null),[W,pe]=f.useState(!1),[I,ne]=f.useState(!1),[H,Ne]=f.useState(""),[Ie,Nt]=f.useState(""),[nr,Co]=f.useState(""),[Na,nu]=f.useState(""),[cl,zn]=f.useState(null),[Cr,Pe]=f.useState([]),[Le,ze]=f.useState([]),[fn,wt]=f.useState(null),[rr,_r]=f.useState(!1),[$t,sr]=f.useState(!1),[ru,Fy]=f.useState(!1),[$T,Uy]=f.useState(""),[su,ou]=f.useState(!1),[au,iu]=f.useState(null),[Vy,zy]=f.useState(!1),[lu,By]=f.useState({}),[ws,bs]=f.useState(["input"]),of=f.useRef(!1);f.useEffect(()=>{if(t){const P=i.find(X=>X.id===t);if(P){B(P.id),A(P.title||"New Script"),Oe(P.topic||""),F(P.key_points||""),J(P.unique_angle||""),U(P.dna_id||"none"),k(P.persona_id||"none"),Ne(P.full_script||"");const X=(P.outline_history||[]).map(je=>({...je,id:je.id||crypto.randomUUID()})),q=(P.script_history||[]).map(je=>({...je,id:je.id||crypto.randomUUID()}));if(Pe(X),ze(q),P.score_breakdown&&wt(P.score_breakdown),P.blueprint_content){const je=P.blueprint_content;Wt(je);let Je=crypto.randomUUID();const mt=X.find(rt=>rt.content===JSON.stringify(je))||X[X.length-1];mt&&(Je=mt.id),Ht([{id:Je,outline:je,createdAt:new Date(P.created_at),script:P.full_script||void 0}]),Vn(Je)}x("new-idea");const me=["input"];if(P.blueprint_content&&me.push("outline"),P.full_script&&me.push("script"),bs(me),of.current||(P.outline_model&&j(P.outline_model),P.script_model&&C(P.script_model)),!of.current)if(of.current=!0,P.full_script){y("script");const je=q.find(Je=>Je.content===P.full_script)||q[q.length-1];je&&je.id&&zn(je.id)}else P.blueprint_content?y("outline"):y("input")}}},[t,i]),f.useEffect(()=>{ce&&O==="New Script"&&A(ce.slice(0,50)+(ce.length>50?"...":""))},[ce,O]);const Wy=P=>{const X=E&&E!=="none"?a.find(Ge=>Ge.id===E):null,q=_&&_!=="none"?s.find(Ge=>Ge.id===_):null,me=X&&q?"hybrid":X?"dna":"persona",je=Ge=>{const _o=[];return Ge.title&&_o.push(`Title: ${Ge.title}`),Ge.transcript&&_o.push(`Script: ${Ge.transcript}`),Ge.comments&&_o.push(`Comments: ${Ge.comments}`),Ge.notes&&_o.push(`Notes: ${Ge.notes}`),_o.join(`
`)},Je=Xe.filter(Ge=>Ge.transcript||Ge.comments),mt=At.filter(Ge=>Ge.transcript||Ge.comments),rt=Je.length>0?`

Viral References (learn from these):
${Je.map(je).join(`
---
`)}`:"",Nn=mt.length>0?`

Flop References (avoid these patterns):
${mt.map(je).join(`
---
`)}`:"";return{topic:w==="new-idea"?ce:"Rewrite competitor script",keyPoints:(w==="new-idea"?ye:te)+rt+Nn,uniqueAngle:de,mode:me,dna:X||void 0,persona:q||void 0,model:P,language:R,country:L,targetWordCount:we||void 0,allowStructureInnovation:D}},FT=()=>Zt([...Xe,ib()]),ja=(P,X,q)=>{Zt(me=>me.map(je=>je.id===P?{...je,[X]:q}:je))},UT=P=>{Zt(Xe.filter(X=>X.id!==P))},VT=()=>en([...At,ib()]),Ca=(P,X,q)=>{en(me=>me.map(je=>je.id===P?{...je,[X]:q}:je))},zT=P=>{en(At.filter(X=>X.id!==P))},Hy=()=>{ae(O),G(!0)},Ky=async()=>{A(ee),G(!1),z&&await m(z,{title:ee})},qy=()=>{G(!1)},Gy=async P=>{x(P);const X=await d({title:"New Script",topic:"",status:"draft",generation_mode:P});X&&B(X.id)},cu=P=>P.trim().split(/\s+/).filter(Boolean).length,ul=async(P,X)=>{try{const q=P.replace(/\|\|\|SECTION\|\|\|/g,`

`).trim();await navigator.clipboard.writeText(q),n({title:"Copied",description:`${X} copied to clipboard`})}catch{n({title:"Error",description:"Could not copy content",variant:"destructive"})}},Yy=async()=>{sr(!0);let P=[...Cr];const X=Be?JSON.stringify(Be):null;if(X&&z){const q={id:it||crypto.randomUUID(),content:X,timestamp:new Date().toISOString(),wordCount:cu(X)};P=[...Cr,q],Pe(P)}try{const q=await l(Wy(S));if(q){const me=crypto.randomUUID(),je={id:me,outline:q,createdAt:new Date};Ht(rt=>[...rt,je]),Vn(me),Wt(q),Ne(""),wt(null),y("outline");const Je={id:me,name:`${r("common.draft")} ${P.length+1}`,content:JSON.stringify(q),timestamp:new Date().toISOString(),wordCount:cu(JSON.stringify(q))},mt=[...P,Je];if(Pe(mt),ws.includes("outline")||bs(rt=>[...rt,"outline"]),bs(rt=>rt.filter(Nn=>Nn!=="script")),z){const rt=E&&E!=="none"?a.find(Ge=>Ge.id===E):null,Nn=_&&_!=="none"?s.find(Ge=>Ge.id===_):null;await m(z,{title:O,topic:ce,key_points:ye,unique_angle:de,dna_id:(rt==null?void 0:rt.id)||null,persona_id:(Nn==null?void 0:Nn.id)||null,blueprint_content:q,status:"outline",full_script:null,score:null,score_breakdown:null,outline_history:mt,outline_model:S,script_model:N})}}}finally{sr(!1)}},Qy=async()=>{if(!Be)return;Fy(!0),wt(null);let P=[...Le];const X=Le.some(q=>q.content===H);if(H&&z&&!X){const q={id:crypto.randomUUID(),content:H,timestamp:new Date().toISOString(),wordCount:cu(H),outlineVersionId:it||void 0};P=[...Le,q],ze(P)}try{const q=await u(Be,Wy(N),(me,je,Je)=>{Uy(`[${me}/${je}] ${Je}`)});if(Uy(""),q){Ne(q),y("script"),ws.includes("script")||bs(mt=>[...mt,"script"]),it&&Ht(mt=>mt.map(rt=>rt.id===it?{...rt,script:q}:rt));const me=`${r("common.draft")} ${P.filter(mt=>!it||mt.outlineVersionId===it).length+1}`,je={id:crypto.randomUUID(),name:me,content:q,timestamp:new Date().toISOString(),wordCount:cu(q),outlineVersionId:it||void 0},Je=[...P,je];ze(Je),zn(je.id),z&&(await m(z,{title:O,full_script:q,status:"done",script_history:Je,blueprint_content:Be,outline_model:S,script_model:N}),n({title:"Script Complete",description:"Your script has been saved"}))}}finally{Fy(!1)}},BT=async()=>{if(H){_r(!0);try{const P=E&&E!=="none"?a.find(me=>me.id===E):null,X=_&&_!=="none"?s.find(me=>me.id===_):null,q=await h(H,P,X);if(q){wt(q);const me=Le.map(je=>je.content===H?{...je,score:q}:je);ze(me),z&&await m(z,{score:q.score,score_breakdown:q,script_history:me}),n({title:"Script Scored",description:`Your script scored ${q.score}/100`})}}finally{_r(!1)}}},WT=async()=>{z&&(v==="outline"&&Be?(await m(z,{title:O,blueprint_content:Be,status:"draft"}),n({title:"Saved",description:"Outline saved successfully"})):v==="script"&&(await m(z,{title:O,full_script:H,status:"done"}),n({title:"Saved",description:"Script saved successfully"})))},HT=()=>{v==="script"?y("outline"):v==="outline"?y("input"):v==="input"&&(x("select"),Wt(null),Ht([]),Vn(null),Ne(""),wt(null),bs(["input"]),B(null),A("New Script"),Oe(""),F(""),J(""),ue(""),e("/writer"))},af=P=>{(P==="input"||ws.includes(P))&&y(P)},KT=P=>{Wt(P.outline),Vn(P.id),Ne(P.script||""),ne(!1),P.script?ws.includes("script")||bs(X=>[...X,"script"]):bs(X=>X.filter(q=>q!=="script"))},Xy=P=>{try{P.id&&Vn(P.id);const X=JSON.parse(P.content);Wt(X),P.script?(Ne(P.script),wt(null),n({title:"Restored",description:"Outline and associated script restored"})):(Ne(""),wt(null),n({title:"Restored",description:"Outline restored (no linked script found)"}))}catch{n({title:"Error",description:"Could not restore outline",variant:"destructive"})}},Jy=async(P,X)=>{const q=Cr.map(me=>me.id===P.id||me.timestamp===P.timestamp&&me.content===P.content?{...me,name:X}:me);Pe(q),z&&await m(z,{outline_history:q})},Zy=async(P,X)=>{const q=Le.map(me=>me.id===P.id||me.timestamp===P.timestamp&&me.content===P.content?{...me,name:X}:me);ze(q),z&&await m(z,{script_history:q})},qT=async P=>{const X=Cr.filter(q=>q.id!==P.id);if(Pe(X),X.length===0){y("input"),Wt(null),bs(q=>q.filter(me=>me!=="outline"&&me!=="script")),n({title:"History Cleared",description:"Returned to input step"}),z&&await m(z,{outline_history:X,blueprint_content:null,status:"idea"});return}if(P.id===it){const me=[...X].sort((je,Je)=>new Date(Je.timestamp).getTime()-new Date(je.timestamp).getTime())[0];me&&(Xy(me),n({title:"Switched Version",description:"Switched to latest available outline"}))}z&&await m(z,{outline_history:X})},GT=async P=>{const X=Le.filter(q=>q.id!==P.id);ze(X),z&&await m(z,{script_history:X})},[YT,dl]=f.useState(!1),[uu,lf]=f.useState(""),_a=Cr.find(P=>P.id===it),ex=(_a==null?void 0:_a.name)||(Cr.length>0?`${r("common.draft")} ${Cr.length}`:`${r("common.draft")} 1`),ka=Le.find(P=>P.id===cl),tx=(ka==null?void 0:ka.name)||(Le.filter(P=>!it||P.outlineVersionId===it).length>0?`${r("common.draft")} ${Le.filter(P=>!it||P.outlineVersionId===it).length}`:"New Script"),nx=async()=>{if(!uu.trim()){dl(!1);return}v==="outline"&&_a?await Jy(_a,uu):v==="script"&&ka&&await Zy(ka,uu),dl(!1)},QT=P=>{Ne(P.content),P.id&&zn(P.id),P.score?wt(P.score):wt(null),n({title:"Restored",description:"Script restored from history"})},hl=(P,X,q)=>{if(!Be)return;const me=[...Be.sections];me[P]={...me[P],[X]:q},Wt({...Be,sections:me})},rx=()=>{if(!Be)return;const P={title:"New Section",content:"",wordCount:100,notes:""};Wt({...Be,sections:[...Be.sections,P]})},XT=P=>{Be&&Wt({...Be,sections:Be.sections.filter((X,q)=>q!==P)})};return w==="select"&&!t?o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r("writer.title")}),o.jsx("p",{className:"text-muted-foreground",children:r("writer.subtitle")})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2 max-w-3xl",children:[o.jsx(ve,{variant:"elevated",className:"cursor-pointer group hover:ring-2 hover:ring-primary transition-all",onClick:()=>Gy("new-idea"),children:o.jsxs(be,{className:"p-8 text-center space-y-4",children:[o.jsx("div",{className:"mx-auto rounded-2xl bg-primary/10 p-6 w-fit group-hover:bg-primary/20 transition-colors",children:o.jsx(_h,{className:"h-12 w-12 text-primary"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-semibold",children:r("writer.mode.newIdea")}),o.jsx("p",{className:"text-muted-foreground",children:r("writer.mode.newIdeaDesc")})]}),o.jsx(Re,{className:"bg-primary/10 text-primary",children:r("writer.mode.popular")})]})}),o.jsx(ve,{variant:"elevated",className:"cursor-pointer group hover:ring-2 hover:ring-primary transition-all",onClick:()=>Gy("rewrite"),children:o.jsxs(be,{className:"p-8 text-center space-y-4",children:[o.jsx("div",{className:"mx-auto rounded-2xl bg-accent/50 p-6 w-fit group-hover:bg-accent transition-colors",children:o.jsx(Jr,{className:"h-12 w-12 text-accent-foreground"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-semibold",children:r("writer.mode.rewrite")}),o.jsx("p",{className:"text-muted-foreground",children:r("writer.mode.rewriteDesc")})]})]})})]})]}):o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(V,{variant:"ghost",size:"sm",onClick:HT,children:[" ",r("common.back")]}),o.jsxs("div",{className:"flex-1",children:[M?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ie,{value:ee,onChange:P=>ae(P.target.value),className:"text-xl font-bold h-9 max-w-md",autoFocus:!0,onKeyDown:P=>{P.key==="Enter"&&Ky(),P.key==="Escape"&&qy()}}),o.jsx(V,{size:"icon",variant:"ghost",onClick:Ky,children:o.jsx(wo,{className:"h-4 w-4"})}),o.jsx(V,{size:"icon",variant:"ghost",onClick:qy,children:o.jsx(ps,{className:"h-4 w-4"})})]}):o.jsxs("div",{className:"flex items-center gap-2 group",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight cursor-pointer hover:text-primary transition-colors",onClick:Hy,children:O}),o.jsx(V,{size:"icon",variant:"ghost",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:Hy,children:o.jsx(ql,{className:"h-3 w-3"})})]}),o.jsxs("p",{className:"text-muted-foreground",children:[v==="input"&&r("writer.steps.step1Desc"),v==="outline"&&r("writer.steps.step2Desc"),v==="script"&&r("writer.steps.step3Desc")]})]}),(v==="script"||v==="outline")&&o.jsxs("div",{className:"flex items-center gap-3 bg-muted/30 p-1 rounded-full border border-border/50",children:[o.jsxs(V,{onClick:WT,size:"sm",className:"gap-2 shadow-sm h-8 rounded-full",children:[o.jsx(yv,{className:"h-4 w-4"}),r("common.save")]}),o.jsx("div",{className:"flex items-center justify-center min-w-[150px] px-2 border-l border-r border-border/50 h-6",children:YT?o.jsx("div",{className:"flex items-center gap-1",children:o.jsx(ie,{value:uu,onChange:P=>lf(P.target.value),className:"h-6 w-32 text-xs text-center",autoFocus:!0,onKeyDown:P=>{P.key==="Enter"&&nx(),P.key==="Escape"&&dl(!1)},onBlur:nx})}):o.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-muted/50 px-2 py-1 rounded transition-colors group",onClick:()=>{v==="outline"&&_a?(lf(ex),dl(!0)):v==="script"&&ka&&(lf(tx),dl(!0))},children:[o.jsx("span",{className:"text-sm font-medium text-foreground/80",children:v==="outline"?ex:tx}),(v==="outline"||v==="script")&&o.jsx(ql,{className:"h-3 w-3 text-muted-foreground opacity-0 group-hover:opacity-100"})]})}),v==="outline"&&o.jsxs(V,{variant:W?"secondary":"ghost",size:"sm",onClick:()=>pe(!W),className:"h-8 gap-2",children:[o.jsx(ql,{className:"h-3 w-3"}),r(W?"common.done":"common.edit")]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>af("input"),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer ${v==="input"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center text-xs",children:"1"}),r("writer.steps.input")]}),o.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("button",{onClick:()=>af("outline"),disabled:!ws.includes("outline"),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${v==="outline"?"bg-primary text-primary-foreground cursor-pointer":ws.includes("outline")?"bg-muted text-muted-foreground hover:bg-muted/80 cursor-pointer":"bg-muted/50 text-muted-foreground/50 cursor-not-allowed"}`,children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center text-xs",children:"2"}),r("writer.steps.outline")]}),o.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("button",{onClick:()=>af("script"),disabled:!ws.includes("script"),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${v==="script"?"bg-primary text-primary-foreground cursor-pointer":ws.includes("script")?"bg-muted text-muted-foreground hover:bg-muted/80 cursor-pointer":"bg-muted/50 text-muted-foreground/50 cursor-not-allowed"}`,children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center text-xs",children:"3"}),r("writer.steps.script")]})]})]}),v==="input"&&o.jsxs("div",{className:"grid gap-6 lg:grid-cols-5",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(ve,{children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(dt,{className:"h-5 w-5 text-primary"}),r("writer.aiModelOutline")]})}),o.jsx(be,{children:o.jsx(Ql,{value:S,onChange:j})})]}),o.jsxs(ve,{children:[o.jsxs(ut,{children:[o.jsx(xt,{children:r("writer.configureGen")}),o.jsx(Ur,{children:r("writer.configureGenDesc")})]}),o.jsxs(be,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(bo,{className:"h-4 w-4 text-primary"}),r("writer.dnaPattern")]}),o.jsxs(Yn,{value:E,onValueChange:U,children:[o.jsx(Rn,{className:"rounded-xl",children:o.jsx(Qn,{placeholder:r("writer.selectDnaPlaceholder")})}),o.jsxs(On,{children:[o.jsx(_e,{value:"none",children:r("writer.noDna")}),a.map(P=>o.jsx(_e,{value:P.id,children:P.name},P.id))]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx($i,{className:"h-4 w-4 text-primary"}),r("writer.audiencePersona")]}),o.jsxs(Yn,{value:_,onValueChange:k,children:[o.jsx(Rn,{className:"rounded-xl",children:o.jsx(Qn,{placeholder:r("writer.selectPersonaPlaceholder")})}),o.jsxs(On,{children:[o.jsx(_e,{value:"none",children:r("writer.noPersona")}),s.map(P=>o.jsx(_e,{value:P.id,children:P.name},P.id))]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"h-4 w-4 text-primary"}),r("common.language")]}),o.jsxs(Yn,{value:R,onValueChange:$,children:[o.jsx(Rn,{className:"rounded-xl",children:o.jsx(Qn,{placeholder:r("common.languagePlaceholder")})}),o.jsxs(On,{children:[o.jsx(_e,{value:"en",children:"English"}),o.jsx(_e,{value:"vi",children:"Ting Vit"}),o.jsx(_e,{value:"es",children:"Espaol"}),o.jsx(_e,{value:"fr",children:"Franais"}),o.jsx(_e,{value:"ja",children:" (Japanese)"}),o.jsx(_e,{value:"ko",children:" (Korean)"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"h-4 w-4 text-primary"}),r("writer.targetCountry")]}),o.jsxs(Yn,{value:L,onValueChange:re,children:[o.jsx(Rn,{className:"rounded-xl",children:o.jsx(Qn,{placeholder:r("writer.selectCountryPlaceholder")})}),o.jsxs(On,{children:[o.jsx(_e,{value:"US",children:" United States"}),o.jsx(_e,{value:"GB",children:" United Kingdom"}),o.jsx(_e,{value:"VN",children:" Vietnam"}),o.jsx(_e,{value:"JP",children:" Japan"}),o.jsx(_e,{value:"KR",children:" Korea"}),o.jsx(_e,{value:"IN",children:" India"}),o.jsx(_e,{value:"DE",children:" Germany"}),o.jsx(_e,{value:"FR",children:" France"}),o.jsx(_e,{value:"BR",children:" Brazil"}),o.jsx(_e,{value:"ID",children:" Indonesia"}),o.jsx(_e,{value:"TH",children:" Thailand"}),o.jsx(_e,{value:"PH",children:" Philippines"}),o.jsx(_e,{value:"AU",children:" Australia"}),o.jsx(_e,{value:"CA",children:" Canada"}),o.jsx(_e,{value:"MX",children:" Mexico"}),o.jsx(_e,{value:"ES",children:" Spain"}),o.jsx(_e,{value:"IT",children:" Italy"}),o.jsx(_e,{value:"RU",children:" Russia"}),o.jsx(_e,{value:"PL",children:" Poland"}),o.jsx(_e,{value:"NL",children:" Netherlands"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r("writer.cultureAdapt")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(ts,{className:"h-4 w-4 text-primary"}),r("writer.targetWordCount")]}),o.jsx(ie,{type:"number",value:we,onChange:P=>Se(parseInt(P.target.value)||0),className:"rounded-xl",placeholder:r("writer.wordCountPlaceholder")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r("writer.wordCountDesc")})]}),o.jsx(Xo,{feature:"structure_innovation",children:o.jsxs("div",{className:"flex items-start space-x-3 pt-2 p-3 bg-muted/30 rounded-xl border border-border/50",children:[o.jsx(tf,{id:"innovation",checked:D,onCheckedChange:P=>Y(P),className:"mt-1"}),o.jsxs("div",{className:"grid gap-1.5 leading-none",children:[o.jsx(K,{htmlFor:"innovation",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:r("writer.allowInnovation")}),o.jsx("p",{className:"text-xs text-muted-foreground leading-snug",children:r("writer.allowInnovationDesc")})]})]})})]})]})]}),o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsxs(ve,{children:[o.jsxs(ut,{children:[o.jsx(xt,{children:r(w==="new-idea"?"writer.yourIdea":"writer.competitorScript")}),o.jsx(Ur,{children:r(w==="new-idea"?"writer.ideaDesc":"writer.competitorDesc")})]}),o.jsx(be,{className:"space-y-4",children:w==="new-idea"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:[r("writer.topicLabel")," *"]}),o.jsx(To,{text:ce})]}),o.jsx(ie,{value:ce,onChange:P=>Oe(P.target.value),placeholder:r("writer.topicPlaceholder"),className:"rounded-xl"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{children:r("writer.keyPointsLabel")}),o.jsx(To,{text:ye})]}),o.jsx(Ae,{value:ye,onChange:P=>F(P.target.value),placeholder:r("writer.keyPointsPlaceholder"),className:"rounded-xl resize-none min-h-[100px]"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{children:r("writer.uniqueAngle")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xo,{feature:"ai_suggest_angle",hideCompletely:!0,children:o.jsxs(V,{variant:"ghost",size:"sm",onClick:async()=>{if(!ce){n({title:r("writer.enterTopicFirst"),variant:"destructive"});return}ou(!0);const P=E&&E!=="none"?a.find(me=>me.id===E):null,X=_&&_!=="none"?s.find(me=>me.id===_):null,q=await p(ce,P,X,S);q.length>0&&(J(q.map((me,je)=>`${je+1}. ${me.angle}`).join(`

`)),n({title:`${q.length} angles suggested!`})),ou(!1)},disabled:su||!ce,className:"h-7 text-xs gap-1",children:[su?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(dt,{className:"h-3 w-3"}),r("writer.aiSuggest")]})}),o.jsx(To,{text:de})]})]}),o.jsx(Ae,{value:de,onChange:P=>J(P.target.value),placeholder:r("writer.uniqueAnglePlaceholder"),className:"rounded-xl resize-none min-h-[80px]"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:[r("writer.competitorScriptLabel")," *"]}),o.jsx(To,{text:te})]}),o.jsx(Ae,{value:te,onChange:P=>ue(P.target.value),placeholder:r("writer.competitorScriptPlaceholder"),className:"rounded-xl resize-none min-h-[200px]"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{children:r("writer.uniqueAngleOptional")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xo,{feature:"ai_suggest_angle",hideCompletely:!0,children:o.jsxs(V,{variant:"ghost",size:"sm",onClick:async()=>{if(!te){n({title:r("writer.pasteCompetitorFirst"),variant:"destructive"});return}ou(!0);const P=E&&E!=="none"?a.find(je=>je.id===E):null,X=_&&_!=="none"?s.find(je=>je.id===_):null,q=te.substring(0,200),me=await p(q,P,X,S);me.length>0&&(J(me.map((je,Je)=>`${Je+1}. ${je.angle}`).join(`

`)),n({title:`${me.length} angles suggested!`})),ou(!1)},disabled:su||!te,className:"h-7 text-xs gap-1",children:[su?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(dt,{className:"h-3 w-3"}),r("writer.aiSuggest")]})}),o.jsx(To,{text:de})]})]}),o.jsx(Ae,{value:de,onChange:P=>J(P.target.value),placeholder:r("writer.uniqueAnglePlaceholder"),className:"rounded-xl resize-none min-h-[80px]"})]})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ri,{open:jr,onOpenChange:Rt,children:o.jsxs(ve,{className:"overflow-hidden",children:[o.jsx(si,{asChild:!0,children:o.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:o.jsx(kh,{className:"h-4 w-4 text-green-600"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-medium text-green-600",children:r("writer.viralReferences")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r("writer.viralReferencesSubtitle")})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[Xe.length>0&&o.jsx(Re,{variant:"secondary",className:"text-xs",children:Xe.length}),jr?o.jsx(pm,{className:"h-4 w-4"}):o.jsx(Gs,{className:"h-4 w-4"})]})]})}),o.jsx(oi,{children:o.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[Xe.map((P,X)=>o.jsxs("div",{className:"relative bg-muted/30 rounded-xl p-4 space-y-3",children:[o.jsxs(Re,{className:"absolute -top-2 -left-2 bg-green-500 text-white text-xs",children:["#",X+1]}),Xe.length>0&&o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>UT(P.id),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-destructive text-destructive-foreground hover:bg-destructive/90",children:o.jsx(bt,{className:"h-3 w-3"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:r("writer.refTitle")}),o.jsx(ie,{placeholder:r("writer.refTitlePlaceholder"),value:P.title,onChange:q=>ja(P.id,"title",q.target.value),className:"h-8 text-sm"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:r("writer.refUrl")}),o.jsx(ie,{placeholder:"https://youtube.com/",value:P.url,onChange:q=>ja(P.id,"url",q.target.value),className:"h-8 text-sm"})]})]}),o.jsxs(Bi,{value:P.activeTab,onValueChange:q=>ja(P.id,"activeTab",q),children:[o.jsxs(da,{className:"h-8 bg-background/50",children:[o.jsxs(Pn,{value:"transcript",className:"text-xs h-6 gap-1",children:[o.jsx(ts,{className:"h-3 w-3"})," ",r("writer.refScript")]}),o.jsxs(Pn,{value:"comments",className:"text-xs h-6 gap-1",children:[o.jsx(pc,{className:"h-3 w-3"})," ",r("writer.refComments")]})]}),o.jsx(An,{value:"transcript",className:"mt-2",children:o.jsx(Ae,{placeholder:r("writer.refScriptPlaceholder"),value:P.transcript,onChange:q=>ja(P.id,"transcript",q.target.value),className:"min-h-[80px] text-sm resize-none"})}),o.jsx(An,{value:"comments",className:"mt-2",children:o.jsx(Ae,{placeholder:r("writer.refCommentsPlaceholder"),value:P.comments,onChange:q=>ja(P.id,"comments",q.target.value),className:"min-h-[80px] text-sm resize-none"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:r("writer.refNotes")}),o.jsx(Ae,{placeholder:r("writer.refNotesPlaceholder"),value:P.notes,onChange:q=>ja(P.id,"notes",q.target.value),className:"min-h-[60px] text-sm resize-none"})]})]},P.id)),o.jsxs(V,{variant:"outline",size:"sm",onClick:FT,className:"w-full gap-2 border-dashed border-green-500/50 text-green-600 hover:bg-green-500/5",children:[o.jsx(tt,{className:"h-4 w-4"}),r("writer.addViralRef")]})]})})]})}),o.jsx(ri,{open:Wr,onOpenChange:tn,children:o.jsxs(ve,{className:"overflow-hidden",children:[o.jsx(si,{asChild:!0,children:o.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:o.jsx(zR,{className:"h-4 w-4 text-red-500"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"font-medium text-red-500",children:r("writer.flopReferences")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:r("writer.flopReferencesSubtitle")})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[At.length>0&&o.jsx(Re,{variant:"secondary",className:"text-xs",children:At.length}),Wr?o.jsx(pm,{className:"h-4 w-4"}):o.jsx(Gs,{className:"h-4 w-4"})]})]})}),o.jsx(oi,{children:o.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[At.map((P,X)=>o.jsxs("div",{className:"relative bg-muted/30 rounded-xl p-4 space-y-3",children:[o.jsxs(Re,{className:"absolute -top-2 -left-2 bg-red-500 text-white text-xs",children:["#",X+1]}),At.length>0&&o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>zT(P.id),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-destructive text-destructive-foreground hover:bg-destructive/90",children:o.jsx(bt,{className:"h-3 w-3"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:"Title"}),o.jsx(ie,{placeholder:"e.g., Why my video flopped",value:P.title,onChange:q=>Ca(P.id,"title",q.target.value),className:"h-8 text-sm"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:"YouTube URL"}),o.jsx(ie,{placeholder:"https://youtube.com/",value:P.url,onChange:q=>Ca(P.id,"url",q.target.value),className:"h-8 text-sm"})]})]}),o.jsxs(Bi,{value:P.activeTab,onValueChange:q=>Ca(P.id,"activeTab",q),children:[o.jsxs(da,{className:"h-8 bg-background/50",children:[o.jsxs(Pn,{value:"transcript",className:"text-xs h-6 gap-1",children:[o.jsx(ts,{className:"h-3 w-3"})," Script / Transcript"]}),o.jsxs(Pn,{value:"comments",className:"text-xs h-6 gap-1",children:[o.jsx(pc,{className:"h-3 w-3"})," Comments / Feedback"]})]}),o.jsx(An,{value:"transcript",className:"mt-2",children:o.jsx(Ae,{placeholder:"Paste content here...",value:P.transcript,onChange:q=>Ca(P.id,"transcript",q.target.value),className:"min-h-[80px] text-sm resize-none"})}),o.jsx(An,{value:"comments",className:"mt-2",children:o.jsx(Ae,{placeholder:"Paste comments or feedback here...",value:P.comments,onChange:q=>Ca(P.id,"comments",q.target.value),className:"min-h-[80px] text-sm resize-none"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{className:"text-xs text-muted-foreground",children:"Description / Notes"}),o.jsx(Ae,{placeholder:"e.g., Why this didn't work...",value:P.notes,onChange:q=>Ca(P.id,"notes",q.target.value),className:"min-h-[60px] text-sm resize-none"})]})]},P.id)),o.jsxs(V,{variant:"outline",size:"sm",onClick:VT,className:"w-full gap-2 border-dashed border-red-500/50 text-red-500 hover:bg-red-500/5",children:[o.jsx(tt,{className:"h-4 w-4"}),r("writer.addFlopRef")]})]})})]})})]}),o.jsx(V,{className:"w-full gap-2 rounded-xl h-12 shadow-lg shadow-primary/20",onClick:Yy,disabled:$t||(w==="new-idea"?!ce:!te),children:$t?o.jsxs(o.Fragment,{children:[o.jsx(We,{className:"h-5 w-5 animate-spin"}),"Generating Outline..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ts,{className:"h-5 w-5"}),"Generate Outline",o.jsx(Dr,{className:"h-4 w-4"})]})})]})]}),v==="outline"&&Be&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Li,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("span",{className:"text-muted-foreground",children:[r("writer.estWords"),": ",Be.totalWordCount]})]}),o.jsx(ab,{versions:Cr,type:"outline",onRestore:Xy,onUpdateName:Jy,onDelete:qT,renderInfo:P=>{const X=Le.filter(q=>q.outlineVersionId===P.id).length;return X>0?o.jsxs(Re,{variant:"secondary",className:"text-[10px] h-5 px-1 bg-blue-100 text-blue-700 hover:bg-blue-200 border-none",children:[X," ",r("writer.scripts")]}):null},disabled:$t}),o.jsx(Ql,{value:N,onChange:C,label:r("writer.scriptModel"),compact:!0})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs(V,{variant:"outline",size:"sm",onClick:Yy,disabled:$t,children:[o.jsx(Jr,{className:`h-4 w-4 mr-2 ${$t?"animate-spin":""}`}),r("common.regenerate")]})})]}),I&&o.jsxs(ve,{children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(mm,{className:"h-5 w-5"}),r("writer.outlineVersions")]})}),o.jsx(be,{children:o.jsx("div",{className:"space-y-2",children:Ot.map((P,X)=>o.jsxs("div",{onClick:()=>KT(P),className:`p-3 rounded-lg cursor-pointer transition-colors flex items-center justify-between ${P.id===it?"bg-primary/10 border border-primary/30":"bg-muted/50 hover:bg-muted"}`,children:[o.jsxs("div",{children:[o.jsxs("span",{className:"font-medium",children:[r("writer.version")," ",X+1]}),o.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:P.createdAt.toLocaleTimeString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[P.script&&o.jsx(Re,{variant:"secondary",className:"text-xs",children:r("writer.hasScript")}),P.id===it&&o.jsx(Re,{className:"text-xs",children:r("common.current")})]})]},P.id))})})]}),o.jsxs(ve,{children:[o.jsx(ut,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(xt,{children:r("writer.contentSections")}),o.jsxs(Ur,{children:[Be.sections.length," ",r("writer.sectionsCount")]})]}),W&&o.jsxs(V,{variant:"outline",size:"sm",onClick:rx,children:[o.jsx(tt,{className:"h-4 w-4 mr-2"}),r("writer.addSection")]})]})}),o.jsxs(be,{className:"space-y-4",children:[Be.sections.map((P,X)=>o.jsxs("div",{children:[W&&o.jsx("div",{className:"flex justify-center py-1",children:o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{const q={title:r("writer.newSection"),wordCount:100,content:"",notes:""},me=[...Be.sections];me.splice(X,0,q),Wt({...Be,sections:me})},className:"h-6 text-xs gap-1 text-muted-foreground hover:text-primary",children:[o.jsx(tt,{className:"h-3 w-3"}),r("writer.insertSection")]})}),o.jsxs("div",{className:"p-4 rounded-xl bg-muted/50 space-y-3",children:[o.jsx("div",{className:"flex items-center justify-between gap-2",children:W?o.jsxs(o.Fragment,{children:[o.jsx(ie,{value:P.title,onChange:q=>hl(X,"title",q.target.value),className:"rounded-lg font-medium flex-1",placeholder:r("writer.sectionTitlePlaceholder")}),o.jsx(ie,{type:"number",value:P.wordCount,onChange:q=>hl(X,"wordCount",parseInt(q.target.value)||0),className:"rounded-lg w-24",placeholder:r("writer.words")}),o.jsx(V,{variant:"ghost",size:"icon",onClick:()=>XT(X),className:"h-8 w-8 text-destructive",children:o.jsx(bt,{className:"h-4 w-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"font-medium",children:[X+1,". ",P.title]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(Re,{variant:"outline",children:[P.wordCount," ",r("writer.wordsSuffix")]})})]})}),W?o.jsxs("div",{className:"space-y-1",children:[o.jsx(Ae,{value:P.content,onChange:q=>hl(X,"content",q.target.value),className:"rounded-lg resize-none min-h-[80px]",placeholder:r("writer.sectionContentPlaceholder")}),o.jsx(To,{text:P.content})]}):o.jsx("p",{className:"text-sm text-muted-foreground",children:P.content}),W?o.jsx(ie,{value:P.notes||"",onChange:q=>hl(X,"notes",q.target.value),className:"rounded-lg text-sm",placeholder:r("writer.notesPlaceholder")}):P.notes&&o.jsxs("div",{className:"space-y-1",children:[P.notes.includes("Unique Angle Integration")&&o.jsxs(Re,{variant:"secondary",className:"bg-purple-500/10 text-purple-500 border-purple-500/20 mb-1",children:[" ",r("writer.angleIntegrated")]}),o.jsxs("p",{className:"text-xs text-muted-foreground italic",children:[" ",P.notes]})]}),!W&&o.jsxs("div",{className:"pt-2 border-t border-border/50 flex items-center gap-2",children:[o.jsx(ie,{value:lu[X]||"",onChange:q=>By(me=>({...me,[X]:q.target.value})),placeholder:r("writer.improveSectionPlaceholder"),className:"rounded-lg text-sm flex-1 h-8"}),o.jsxs(V,{variant:"outline",size:"sm",onClick:async()=>{iu(X);const q=E&&E!=="none"?a.find(Je=>Je.id===E):null,me=_&&_!=="none"?s.find(Je=>Je.id===_):null,je=await b(P.title,P.content,lu[X]||"",{dna:q,persona:me,targetWordCount:P.wordCount},S);je&&(hl(X,"content",je),n({title:`Section "${P.title}" rewritten!`})),iu(null)},disabled:au===X,className:"h-8 gap-1",children:[au===X?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(Jr,{className:"h-3 w-3"}),r("common.rewrite")]})]})]})]},X)),W&&o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs(V,{variant:"outline",size:"sm",onClick:rx,className:"h-8 gap-1",children:[o.jsx(tt,{className:"h-4 w-4"}),r("writer.addSectionEnd")]})})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs(V,{variant:"outline",className:"flex-1 rounded-xl h-12",onClick:()=>y("input"),children:[" ",r("writer.backToInput")]}),o.jsx(V,{className:"flex-1 gap-2 rounded-xl h-12 shadow-lg shadow-primary/20",onClick:Qy,disabled:ru,children:ru?o.jsxs(o.Fragment,{children:[o.jsx(We,{className:"h-5 w-5 animate-spin"}),$T||r("common.starting")]}):o.jsxs(o.Fragment,{children:[o.jsx(uo,{className:"h-5 w-5"}),r("writer.writeFullScript"),o.jsx(Dr,{className:"h-4 w-4"})]})})]})]}),v==="script"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[o.jsxs(ve,{children:[o.jsx(ut,{className:"py-3 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(xt,{className:"text-sm",children:r("writer.seoMetadata")}),o.jsxs(V,{variant:"outline",size:"sm",onClick:async()=>{if(!H){n({title:r("writer.generateScriptFirst"),variant:"destructive"});return}zy(!0);const P=E&&E!=="none"?a.find(me=>me.id===E):null,X=_&&_!=="none"?s.find(me=>me.id===_):null,q=await g(H,P,X,N);q&&(Nt(q.title),Co(q.description),nu(q.tags.join(", ")),n({title:r("writer.seoGenerated")})),zy(!1)},disabled:Vy||!H,className:"h-7 gap-1",children:[Vy?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(dt,{className:"h-3 w-3"}),r("writer.generateSeo")]})]})}),o.jsxs(be,{className:"p-4 space-y-4 pt-0",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-sm font-medium",children:r("common.title")}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ul(Ie,"title"),disabled:!Ie,children:o.jsx(Is,{className:"h-3 w-3"})})]}),o.jsx(ie,{value:Ie,onChange:P=>Nt(P.target.value),placeholder:r("writer.titlePlaceholder"),className:"bg-background/50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-sm font-medium",children:r("common.description")}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ul(nr,"description"),disabled:!nr,children:o.jsx(Is,{className:"h-3 w-3"})})]}),o.jsx(Ae,{value:nr,onChange:P=>Co(P.target.value),placeholder:r("writer.descriptionPlaceholder"),className:"min-h-[80px] resize-none bg-background/50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{className:"text-sm font-medium flex items-center gap-1",children:[o.jsx(xv,{className:"h-3 w-3"}),r("common.tags")]}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ul(Na,"tags"),disabled:!Na,children:o.jsx(Is,{className:"h-3 w-3"})})]}),o.jsx(ie,{value:Na,onChange:P=>nu(P.target.value),placeholder:r("writer.tagsPlaceholder"),className:"bg-background/50"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(ve,{children:o.jsx(ut,{className:"border-b border-border/50 py-3",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs(xt,{className:"flex items-center gap-2 text-base",children:[o.jsx(uo,{className:"h-4 w-4 text-primary"}),r("writer.steps.script")]}),o.jsx(Re,{className:"bg-green-500/10 text-green-600 text-xs",children:r("common.done")}),o.jsx(To,{text:H,showCharacters:!0})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs(V,{variant:"outline",size:"sm",className:"gap-1 h-8 text-xs",onClick:()=>ul(H,r("writer.steps.script")),disabled:!H,children:[o.jsx(Is,{className:"h-3 w-3"}),r("common.copyAll")]}),o.jsx(Ql,{value:N,onChange:C,label:r("common.model"),compact:!0}),o.jsx(ab,{versions:Le.filter(P=>!it||P.outlineVersionId===it),type:"script",onRestore:QT,onUpdateName:Zy,onDelete:GT,disabled:ru}),o.jsxs(V,{variant:"outline",size:"sm",onClick:BT,disabled:rr||!H,className:"gap-1 h-8 text-xs",children:[rr?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(Id,{className:"h-3 w-3"}),r("common.score")]})]})]})})}),Be&&H?o.jsx("div",{className:"space-y-3",children:Be.sections.map((P,X)=>{const q=H.includes("|||SECTION|||")?"|||SECTION|||":`

`,je=H.split(q)[X]||"",Je=je.trim().split(/\s+/).filter(mt=>mt.length>0).length;return o.jsxs(ve,{children:[o.jsx(ut,{className:"py-3 px-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-xs font-medium",children:X+1}),o.jsx("span",{className:"font-medium text-sm",children:P.title}),o.jsxs(Re,{variant:"outline",className:"text-xs",children:[Je," words"]})]}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ul(je,P.title),children:o.jsx(Is,{className:"h-3 w-3"})})]})}),o.jsxs(be,{className:"px-4 pb-4 pt-0 space-y-2",children:[o.jsx(Ae,{value:je,onChange:mt=>{const rt=H.includes("|||SECTION|||")?"|||SECTION|||":`

`,Nn=H.split(rt);Nn[X]=mt.target.value,Ne(Nn.join(rt))},className:"resize-none text-sm leading-relaxed min-h-[100px]"}),o.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[o.jsx(ie,{value:lu[X+1e3]||"",onChange:mt=>By(rt=>({...rt,[X+1e3]:mt.target.value})),placeholder:r("writer.improveSectionPlaceholder"),className:"text-sm flex-1 h-8"}),o.jsxs(V,{variant:"outline",size:"sm",onClick:async()=>{iu(X+1e3);const mt=E&&E!=="none"?a.find(cf=>cf.id===E):null,rt=_&&_!=="none"?s.find(cf=>cf.id===_):null,Nn=H.includes("|||SECTION|||")?"|||SECTION|||":`

`,Ge=H.split(Nn),_o=Ge.slice(0,X),sx=await b(P.title,je,lu[X+1e3]||"",{previousSections:_o,dna:mt,persona:rt,targetWordCount:P.wordCount},N);sx&&(Ge[X]=sx,Ne(Ge.join(Nn)),n({title:`Section "${P.title}" rewritten!`})),iu(null)},disabled:au===X+1e3,className:"h-8 gap-1",children:[au===X+1e3?o.jsx(We,{className:"h-3 w-3 animate-spin"}):o.jsx(Jr,{className:"h-3 w-3"}),r("common.rewrite")]})]})]})]},X)})}):o.jsx(ve,{children:o.jsx(be,{className:"p-4",children:o.jsx(Ae,{value:H,onChange:P=>Ne(P.target.value),className:"min-h-[400px] resize-none text-sm leading-relaxed",placeholder:"Your script will appear here..."})})})]})]}),o.jsx("div",{className:"lg:col-span-1",children:fn?o.jsx(Az,{score:fn}):o.jsx(ve,{children:o.jsxs(be,{className:"p-8 text-center space-y-4",children:[o.jsx(Id,{className:"h-12 w-12 text-muted-foreground/30 mx-auto"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"font-medium text-muted-foreground",children:r("writer.script.noScore")}),o.jsx("p",{className:"text-sm text-muted-foreground/70",children:r("writer.script.clickScore")})]})]})})})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(V,{variant:"outline",className:"flex-1 rounded-xl h-12",onClick:()=>y("outline"),children:" Back to Outline"}),o.jsxs(V,{variant:"outline",className:"flex-1 gap-2 rounded-xl h-12",onClick:Qy,disabled:ru,children:[o.jsx(Jr,{className:"h-5 w-5"}),"Regenerate Script"]}),o.jsx(V,{className:"flex-1 gap-2 rounded-xl h-12",onClick:()=>e("/"),children:"Go to Dashboard"})]})]})]})}function oB(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),{user:s}=Sn(),{toast:a}=Mt(),i=f.useCallback(async()=>{if(!s){t([]),r(!1);return}try{const{data:h,error:d}=await De.from("notes").select("*").order("updated_at",{ascending:!1});if(d)throw d;t(h||[])}catch(h){console.error("Error fetching notes:",h),a({title:"Error",description:"Failed to fetch notes",variant:"destructive"})}finally{r(!1)}},[s,a]);return f.useEffect(()=>{i()},[i]),{notes:e,loading:n,createNote:async h=>{if(!s)return null;try{const{data:d,error:m}=await De.from("notes").insert({...h,user_id:s.id,title:h.title||"Untitled"}).select().single();if(m)throw m;return t(p=>[d,...p]),d}catch(d){return console.error("Error creating note:",d),a({title:"Error",description:"Failed to create note",variant:"destructive"}),null}},updateNote:async(h,d)=>{try{const{data:m,error:p}=await De.from("notes").update(d).eq("id",h).select().single();if(p)throw p;return t(b=>b.map(g=>g.id===h?m:g)),m}catch(m){return console.error("Error updating note:",m),a({title:"Error",description:"Failed to update note",variant:"destructive"}),null}},deleteNote:async h=>{try{const{error:d}=await De.from("notes").delete().eq("id",h);if(d)throw d;return t(m=>m.filter(p=>p.id!==h)),a({title:"Success",description:"Note deleted successfully"}),!0}catch(d){return console.error("Error deleting note:",d),a({title:"Error",description:"Failed to delete note",variant:"destructive"}),!1}},refetch:i}}const mp=["bg-violet-100 dark:bg-violet-900/20","bg-sky-100 dark:bg-sky-900/20","bg-amber-100 dark:bg-amber-900/20","bg-emerald-100 dark:bg-emerald-900/20","bg-pink-100 dark:bg-pink-900/20","bg-rose-100 dark:bg-rose-900/20"];function aB(){const{notes:e,loading:t,createNote:n,updateNote:r,deleteNote:s}=oB(),{t:a}=dn(),[i,l]=f.useState(""),[c,u]=f.useState(null),[h,d]=f.useState(""),[m,p]=f.useState(""),[b,g]=f.useState(!1),w=e.filter(N=>N.title.toLowerCase().includes(i.toLowerCase())||N.content&&N.content.toLowerCase().includes(i.toLowerCase()));f.useEffect(()=>{c&&(d(c.title),p(c.content||""))},[c]);const x=async()=>{const N=mp[Math.floor(Math.random()*mp.length)],C=await n({title:a("notes.untitled"),content:"",color:N});C&&(u(C),d(C.title),p(C.content||""))},v=async()=>{if(!c)return;g(!0);const N=await r(c.id,{title:h||"Untitled",content:m});N&&u(N),g(!1)},y=async N=>{if(!c)return;const C=await r(c.id,{color:N});C&&u(C)},S=async()=>{if(!c)return;await s(c.id)&&(u(null),d(""),p(""))},j=N=>{const C=new Date(N),k=new Date().getTime()-C.getTime(),E=Math.floor(k/6e4),U=Math.floor(k/36e5),R=Math.floor(k/864e5);return E<1?"Just now":E<60?`${E} min ago`:U<24?`${U} hour${U>1?"s":""} ago`:R<7?`${R} day${R>1?"s":""} ago`:C.toLocaleDateString()};return o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("notes.title")}),o.jsx("p",{className:"text-muted-foreground",children:a("notes.subtitle")})]}),o.jsxs(V,{onClick:x,className:"gap-2 rounded-xl shadow-lg shadow-primary/20",children:[o.jsx(tt,{className:"h-4 w-4"}),a("notes.newNote")]})]}),o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Dn,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),o.jsx(ie,{placeholder:a("notes.searchPlaceholder"),value:i,onChange:N=>l(N.target.value),className:"pl-10 rounded-xl bg-card/50"})]}),t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(We,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):w.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(gm,{className:"h-10 w-10 mx-auto text-muted-foreground/50 mb-3"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:a("notes.noNotes")})]}):o.jsx("div",{className:"space-y-3",children:w.map(N=>o.jsx(ve,{variant:"elevated",className:`cursor-pointer transition-all ${(c==null?void 0:c.id)===N.id?"ring-2 ring-primary":""}`,onClick:()=>u(N),children:o.jsxs(be,{className:"p-4",children:[o.jsx("div",{className:`mb-3 h-2 w-12 rounded-full ${N.color||"bg-violet-100 dark:bg-violet-900/20"}`}),o.jsx("h3",{className:"font-medium line-clamp-1",children:N.title}),o.jsx("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:N.content||a("notes.noContent")}),o.jsxs("div",{className:"mt-3 flex items-center gap-1.5 text-xs text-muted-foreground",children:[o.jsx(Li,{className:"h-3 w-3"}),j(N.updated_at)]})]})},N.id))})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx(ve,{className:"h-full min-h-[500px]",children:c?o.jsxs(be,{className:"p-6 space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsx(ie,{value:h,onChange:N=>d(N.target.value),className:"text-lg font-semibold border-0 p-0 h-auto focus-visible:ring-0 bg-transparent",placeholder:a("notes.titlePlaceholder")}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:v,disabled:b,children:b?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsx(yv,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:S,children:o.jsx(bt,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-muted-foreground",children:[a("notes.color"),":"]}),o.jsx("div",{className:"flex gap-1.5",children:mp.map(N=>o.jsx("button",{onClick:()=>y(N),className:`h-6 w-6 rounded-full transition-all hover:scale-110 ${N} ${c.color===N?"ring-2 ring-primary ring-offset-2 ring-offset-background":"ring-1 ring-border/50"}`,title:"Select color"},N))})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Li,{className:"h-4 w-4"}),j(c.updated_at)]}),o.jsx(Ae,{value:m,onChange:N=>p(N.target.value),className:"flex-1 resize-none border-0 p-0 pl-1 pt-2 focus-visible:ring-0 bg-transparent text-base leading-relaxed",placeholder:a("notes.contentPlaceholder")})]}):o.jsx(be,{className:"p-6 h-full flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-sm space-y-4",children:[o.jsx("div",{className:"mx-auto rounded-2xl bg-muted/50 p-6 w-fit",children:o.jsx(gm,{className:"h-12 w-12 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-lg font-medium",children:a("notes.selectNote")}),o.jsx("p",{className:"text-sm text-muted-foreground",children:a("notes.selectNoteDescription")})]})]})})})})]})]})}function iB(){const{language:e,setLanguage:t,t:n}=dn();return o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6 max-w-xl",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:n("settings.title")}),o.jsx("p",{className:"text-muted-foreground",children:n("settings.description")})]}),o.jsxs(ve,{children:[o.jsxs(ut,{children:[o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"h-5 w-5 text-primary"}),n("settings.language.title")]}),o.jsx(Ur,{children:n("settings.language.description")})]}),o.jsx(be,{children:o.jsxs(Yn,{value:e,onValueChange:r=>t(r),children:[o.jsx(Rn,{className:"w-full max-w-xs rounded-xl",children:o.jsx(Qn,{})}),o.jsxs(On,{children:[o.jsx(_e,{value:"en",children:" English"}),o.jsx(_e,{value:"vi",children:" Ting Vit"})]})]})})]}),o.jsxs(ve,{children:[o.jsxs(ut,{children:[o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(dt,{className:"h-5 w-5 text-primary"}),n("settings.aiModel.title"),o.jsxs(Re,{variant:"secondary",className:"ml-2",children:[o.jsx(Li,{className:"h-3 w-3 mr-1"}),n("common.comingSoon")]})]}),o.jsx(Ur,{children:n("settings.aiModel.description")})]}),o.jsx(be,{children:o.jsxs("div",{className:"text-sm text-muted-foreground bg-muted/50 rounded-xl p-4",children:[o.jsxs("p",{className:"font-medium mb-2",children:[" ",n("settings.aiModel.perStep")]}),o.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[o.jsx("li",{children:n("settings.aiModel.dnaLab")}),o.jsx("li",{children:n("settings.aiModel.writerInput")}),o.jsx("li",{children:n("settings.aiModel.writerOutline")}),o.jsx("li",{children:n("settings.aiModel.persona")})]})]})})]})]})}function xT(){const[e,t]=f.useState([]),[n,r]=f.useState(!0),[s,a]=f.useState(null),[i,l]=f.useState([]),[c,u]=f.useState(null),{user:h}=Sn(),{toast:d}=Mt(),m=f.useCallback(async()=>{if(!h){t([]),r(!1);return}try{const{data:y,error:S}=await De.from("tubeclone_projects").select("*").order("created_at",{ascending:!1});if(S)throw S;t(y||[])}catch(y){console.error("Error fetching TubeClone projects:",y),d({title:"Error",description:"Failed to fetch projects",variant:"destructive"})}finally{r(!1)}},[h,d]);return f.useEffect(()=>{m()},[m]),{projects:e,loading:n,currentProject:s,videos:i,analysis:c,fetchProjects:m,createProject:async y=>{if(!h)return null;try{const S={user_id:h.id,name:y.name||"New Project",source_url:y.source_url||null,niche:y.niche||null,country:y.country||"USA",category_id:y.category_id||null,video_limit:y.video_limit||50,time_range:y.time_range||"30d",status:"draft"},{data:j,error:N}=await De.from("tubeclone_projects").insert(S).select().single();if(N)throw N;const C=j;return t(_=>[C,..._]),d({title:"Success",description:"Project created"}),C}catch(S){return console.error("Error creating project:",S),d({title:"Error",description:"Failed to create project",variant:"destructive"}),null}},updateProject:async(y,S)=>{try{const{data:j,error:N}=await De.from("tubeclone_projects").update({...S,updated_at:new Date().toISOString()}).eq("id",y).select().single();if(N)throw N;const C=j;return t(_=>_.map(k=>k.id===y?C:k)),(s==null?void 0:s.id)===y&&a(C),C}catch(j){return console.error("Error updating project:",j),d({title:"Error",description:"Failed to update project",variant:"destructive"}),null}},deleteProject:async y=>{try{const{error:S}=await De.from("tubeclone_projects").delete().eq("id",y);if(S)throw S;return t(j=>j.filter(N=>N.id!==y)),(s==null?void 0:s.id)===y&&a(null),d({title:"Success",description:"Project deleted"}),!0}catch(S){return console.error("Error deleting project:",S),d({title:"Error",description:"Failed to delete project",variant:"destructive"}),!1}},loadProject:async y=>{try{const{data:S,error:j}=await De.from("tubeclone_projects").select("*").eq("id",y).single();if(j)throw j;a(S);const{data:N,error:C}=await De.from("tubeclone_videos").select("*").eq("project_id",y).order("combined_score",{ascending:!1});if(C)throw C;l(N||[]);const{data:_,error:k}=await De.from("tubeclone_analyses").select("*").eq("project_id",y).order("created_at",{ascending:!1}).limit(1).single();return u(!k&&_?_:null),S}catch(S){return console.error("Error loading project:",S),d({title:"Error",description:"Failed to load project",variant:"destructive"}),null}},saveVideos:async(y,S)=>{try{const j=S.map(_=>({..._,project_id:y})),{error:N}=await De.from("tubeclone_videos").upsert(j);if(N)throw N;const{data:C}=await De.from("tubeclone_videos").select("*").eq("project_id",y).order("combined_score",{ascending:!1});return l(C||[]),!0}catch(j){return console.error("Error saving videos:",j),d({title:"Error",description:"Failed to save videos",variant:"destructive"}),!1}},saveAnalysis:async(y,S)=>{try{const{data:j,error:N}=await De.from("tubeclone_analyses").insert({...S,project_id:y}).select().single();if(N)throw N;return u(j),j}catch(j){return console.error("Error saving analysis:",j),d({title:"Error",description:"Failed to save analysis",variant:"destructive"}),null}},setCurrentProject:a}}const cb={draft:"bg-gray-500/20 text-gray-600",searching:"bg-blue-500/20 text-blue-600",filtering:"bg-yellow-500/20 text-yellow-600",embedding:"bg-purple-500/20 text-purple-600",analyzing:"bg-orange-500/20 text-orange-600",done:"bg-green-500/20 text-green-600"};function lB({projects:e,loading:t,onOpen:n,onCreateNew:r,onDelete:s}){const a=async l=>{s(l)},i=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return t?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(We,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(vv,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"No projects yet"}),o.jsx(V,{onClick:r,children:"Create Your First Research"})]}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(l=>o.jsxs(ve,{variant:"elevated",className:"group cursor-pointer hover:border-primary/30 transition-all",onClick:()=>n(l),children:[o.jsxs(ut,{children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx(Re,{className:cb[l.status]||cb.draft,children:l.status}),o.jsxs(vT,{children:[o.jsx(rB,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive hover:bg-destructive/10",onClick:c=>c.stopPropagation(),children:o.jsx(bt,{className:"h-4 w-4"})})}),o.jsxs(Ay,{onClick:c=>c.stopPropagation(),children:[o.jsxs(Ry,{children:[o.jsx(Iy,{children:"Delete Project?"}),o.jsxs(Dy,{children:['This will permanently delete "',l.name,'" and all of its research data. This action cannot be undone.']})]}),o.jsxs(Oy,{children:[o.jsx(Ly,{onClick:c=>c.stopPropagation(),children:"Cancel"}),o.jsx(My,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:c=>{c.stopPropagation(),a(l.id)},children:"Delete"})]})]})]})]}),o.jsx(xt,{className:"mt-2 line-clamp-1",children:l.name}),l.niche&&o.jsx(Ur,{className:"line-clamp-1",children:l.niche})]}),o.jsx(be,{children:o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(co,{className:"h-3 w-3"}),l.country]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(v1,{className:"h-3 w-3"}),l.video_limit," videos"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Li,{className:"h-3 w-3"}),i(l.created_at)]})]})})]},l.id))})}const wT=f.createContext(null);function Sa(){const e=f.useContext(wT);if(!e)throw new Error("useTubeCloneContext must be used within a TubeCloneProvider");return e}function ai(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var bT=["PageUp","PageDown"],ST=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],NT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ll="Slider",[dg,cB,uB]=Yi(ll),[jT,kW]=Lt(ll,[uB]),[dB,sf]=jT(ll),CT=f.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:h,onValueChange:d=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:b,...g}=e,w=f.useRef(new Set),x=f.useRef(0),y=i==="horizontal"?hB:fB,[S=[],j]=$n({prop:h,defaultProp:u,onChange:U=>{var $;($=[...w.current][x.current])==null||$.focus(),d(U)}}),N=f.useRef(S);function C(U){const R=yB(S,U);E(U,R)}function _(U){E(U,x.current)}function k(){const U=N.current[x.current];S[x.current]!==U&&m(S)}function E(U,R,{commit:$}={commit:!1}){const L=SB(a),re=NB(Math.round((U-r)/a)*a+r,L),z=Ac(re,[r,s]);j((B=[])=>{const O=gB(B,z,R);if(bB(O,c*a)){x.current=O.indexOf(z);const A=String(O)!==String(B);return A&&$&&m(O),A?O:B}else return B})}return o.jsx(dB,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:i,form:b,children:o.jsx(dg.Provider,{scope:e.__scopeSlider,children:o.jsx(dg.Slot,{scope:e.__scopeSlider,children:o.jsx(y,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:ai(g.onPointerDown,()=>{l||(N.current=S)}),min:r,max:s,inverted:p,onSlideStart:l?void 0:C,onSlideMove:l?void 0:_,onSlideEnd:l?void 0:k,onHomeKeyDown:()=>!l&&E(r,0,{commit:!0}),onEndKeyDown:()=>!l&&E(s,S.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:R})=>{if(!l){const re=bT.includes(U.key)||U.shiftKey&&ST.includes(U.key)?10:1,z=x.current,B=S[z],O=a*re*R;E(B+O,z,{commit:!0})}}})})})})});CT.displayName=ll;var[_T,kT]=jT(ll,{startEdge:"left",endEdge:"right",size:"width",direction:1}),hB=f.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...h}=e,[d,m]=f.useState(null),p=Te(t,y=>m(y)),b=f.useRef(void 0),g=wa(s),w=g==="ltr",x=w&&!a||!w&&a;function v(y){const S=b.current||d.getBoundingClientRect(),j=[0,S.width],C=$y(j,x?[n,r]:[r,n]);return b.current=S,C(y-S.left)}return o.jsx(_T,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(ET,{dir:g,"data-orientation":"horizontal",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const S=v(y.clientX);i==null||i(S)},onSlideMove:y=>{const S=v(y.clientX);l==null||l(S)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:y=>{const j=NT[x?"from-left":"from-right"].includes(y.key);u==null||u({event:y,direction:j?-1:1})}})})}),fB=f.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...u}=e,h=f.useRef(null),d=Te(t,h),m=f.useRef(void 0),p=!s;function b(g){const w=m.current||h.current.getBoundingClientRect(),x=[0,w.height],y=$y(x,p?[r,n]:[n,r]);return m.current=w,y(g-w.top)}return o.jsx(_T,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:o.jsx(ET,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=b(g.clientY);a==null||a(w)},onSlideMove:g=>{const w=b(g.clientY);i==null||i(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const x=NT[p?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),ET=f.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...u}=e,h=sf(ll,n);return o.jsx(fe.span,{...u,ref:t,onKeyDown:ai(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):bT.concat(ST).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:ai(e.onPointerDown,d=>{const m=d.target;m.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(m)?m.focus():r(d)}),onPointerMove:ai(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:ai(e.onPointerUp,d=>{const m=d.target;m.hasPointerCapture(d.pointerId)&&(m.releasePointerCapture(d.pointerId),a(d))})})}),TT="SliderTrack",PT=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=sf(TT,n);return o.jsx(fe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});PT.displayName=TT;var hg="SliderRange",AT=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=sf(hg,n),a=kT(hg,n),i=f.useRef(null),l=Te(t,i),c=s.values.length,u=s.values.map(m=>IT(m,s.min,s.max)),h=c>1?Math.min(...u):0,d=100-Math.max(...u);return o.jsx(fe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:d+"%"}})});AT.displayName=hg;var fg="SliderThumb",RT=f.forwardRef((e,t)=>{const n=cB(e.__scopeSlider),[r,s]=f.useState(null),a=Te(t,l=>s(l)),i=f.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return o.jsx(pB,{...e,ref:a,index:i})}),pB=f.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,i=sf(fg,n),l=kT(fg,n),[c,u]=f.useState(null),h=Te(t,v=>u(v)),d=c?i.form||!!c.closest("form"):!0,m=Ev(c),p=i.values[r],b=p===void 0?0:IT(p,i.min,i.max),g=vB(r,i.values.length),w=m==null?void 0:m[l.size],x=w?xB(w,b,l.direction):0;return f.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${x}px)`},children:[o.jsx(dg.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(fe.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:p===void 0?{display:"none"}:e.style,onFocus:ai(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&o.jsx(OT,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},r)]})});RT.displayName=fg;var mB="RadioBubbleInput",OT=f.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=f.useRef(null),a=Te(s,r),i=wy(t);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const d=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(d)}},[i,t]),o.jsx(fe.input,{style:{display:"none"},...n,ref:a,defaultValue:t})});OT.displayName=mB;function gB(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function IT(e,t,n){const a=100/(n-t)*(e-t);return Ac(a,[0,100])}function vB(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function yB(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function xB(e,t,n){const r=e/2,a=$y([0,50],[0,r]);return(r-a(t)*n)*n}function wB(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function bB(e,t){if(t>0){const n=wB(e);return Math.min(...n)>=t}return!0}function $y(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function SB(e){return(String(e).split(".")[1]||"").length}function NB(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var DT=CT,jB=PT,CB=AT,_B=RT;const pg=f.forwardRef(({className:e,...t},n)=>o.jsxs(DT,{ref:n,className:Q("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(jB,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(CB,{className:"absolute h-full bg-primary"})}),o.jsx(_B,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));pg.displayName=DT.displayName;const MT="https://www.googleapis.com/youtube/v3";function kB(e){const t=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!t)return e;const n=t[1]?parseInt(t[1]):0,r=t[2]?parseInt(t[2]):0,s=t[3]?parseInt(t[3]):0;return n>0?`${n}:${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${r}:${s.toString().padStart(2,"0")}`}function EB(e){const t=new Date;switch(e){case"7d":t.setDate(t.getDate()-7);break;case"30d":t.setDate(t.getDate()-30);break;case"90d":t.setDate(t.getDate()-90);break;case"1y":t.setFullYear(t.getFullYear()-1);break;case"all":return;default:t.setDate(t.getDate()-30)}return t.toISOString()}async function mg(e,t){var s;if(e.length===0)return[];const n=[];for(let a=0;a<e.length;a+=50)n.push(e.slice(a,a+50));const r=[];for(const a of n){const i=new URL(`${MT}/videos`);i.searchParams.set("part","snippet,statistics,contentDetails"),i.searchParams.set("id",a.join(",")),i.searchParams.set("key",t);const l=await fetch(i.toString());if(!l.ok){const h=await l.json();throw new Error(((s=h.error)==null?void 0:s.message)||"Failed to get video details")}const u=((await l.json()).items||[]).map(h=>{var d,m,p,b;return{videoId:h.id,title:h.snippet.title,description:h.snippet.description,tags:h.snippet.tags||[],categoryId:h.snippet.categoryId,channelId:h.snippet.channelId,channelTitle:h.snippet.channelTitle,thumbnailUrl:((m=(d=h.snippet.thumbnails)==null?void 0:d.medium)==null?void 0:m.url)||((b=(p=h.snippet.thumbnails)==null?void 0:p.default)==null?void 0:b.url),viewCount:parseInt(h.statistics.viewCount||"0"),likeCount:parseInt(h.statistics.likeCount||"0"),commentCount:parseInt(h.statistics.commentCount||"0"),duration:kB(h.contentDetails.duration),publishedAt:h.snippet.publishedAt}});r.push(...u)}return r}function TB(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/^([a-zA-Z0-9_-]{11})$/];for(const n of t){const r=e.match(n);if(r)return r[1]}return null}async function PB(e,t,n){var l;const r=[];let s;const i=Math.ceil(t/50);for(let c=0;c<i&&r.length<t;c++){n==null||n(c+1,i);const u=new URL(`${MT}/search`);u.searchParams.set("part","snippet"),u.searchParams.set("type","video"),u.searchParams.set("q",e.query),u.searchParams.set("order",e.order||"relevance"),u.searchParams.set("maxResults","50"),u.searchParams.set("key",e.apiKey),e.regionCode&&u.searchParams.set("regionCode",e.regionCode),e.publishedAfter&&u.searchParams.set("publishedAfter",e.publishedAfter),e.videoCategoryId&&u.searchParams.set("videoCategoryId",e.videoCategoryId),s&&u.searchParams.set("pageToken",s);const h=await fetch(u.toString());if(!h.ok){const p=await h.json();throw new Error(((l=p.error)==null?void 0:l.message)||"YouTube search failed")}const d=await h.json(),m=(d.items||[]).map(p=>{var b,g,w,x;return{videoId:p.id.videoId,title:p.snippet.title,channelId:p.snippet.channelId,channelTitle:p.snippet.channelTitle,description:p.snippet.description,publishedAt:p.snippet.publishedAt,thumbnailUrl:((g=(b=p.snippet.thumbnails)==null?void 0:b.medium)==null?void 0:g.url)||((x=(w=p.snippet.thumbnails)==null?void 0:w.default)==null?void 0:x.url)}});if(r.push(...m),s=d.nextPageToken,!s)break}return r.slice(0,t)}async function ub(e,t,n={}){const{maxResults:r=100,regionCode:s,publishedAfter:a,videoCategoryId:i,onProgress:l}=n;return await PB({query:e,apiKey:t,order:"relevance",regionCode:s,publishedAfter:a,videoCategoryId:i},r,l)}async function AB(e,t,n,r={}){const{resultsPerQuery:s=50,regionCode:a,publishedAfter:i,videoCategoryId:l,onProgress:c}=r,u=[],h=new Set,d=Math.ceil(s*.75);c==null||c(e,1,t.length>0?2:1);try{const m=await ub(e,n,{maxResults:d,regionCode:a,publishedAfter:i,videoCategoryId:l});for(const p of m)h.has(p.videoId)||(h.add(p.videoId),u.push(p))}catch(m){console.error(`Title query "${e}" failed:`,m)}if(t&&t.length>0){const p=t.slice(0,7).join(" "),b=Math.ceil(s*.25);c==null||c(p,2,2);try{const g=await ub(p,n,{maxResults:b,regionCode:a,publishedAfter:i,videoCategoryId:l});for(const w of g)h.has(w.videoId)||(h.add(w.videoId),u.push(w))}catch(g){console.error(`Tag query "${p}" failed:`,g)}}return u}const RB=[{value:"US",label:" United States"},{value:"GB",label:" United Kingdom"},{value:"VN",label:" Vietnam"},{value:"JP",label:" Japan"},{value:"KR",label:" Korea"},{value:"IN",label:" India"},{value:"DE",label:" Germany"},{value:"FR",label:" France"},{value:"BR",label:" Brazil"},{value:"ID",label:" Indonesia"},{value:"TH",label:" Thailand"},{value:"PH",label:" Philippines"},{value:"AU",label:" Australia"},{value:"CA",label:" Canada"},{value:"MX",label:" Mexico"},{value:"ES",label:" Spain"},{value:"IT",label:" Italy"},{value:"RU",label:" Russia"},{value:"PL",label:" Poland"},{value:"NL",label:" Netherlands"}];function OB(e){if(e<=23)return e+1;if(e<=30)return(2+(e-24))*24;if(e<=60)return(8+Math.round((e-31)*(22/29)))*24;if(e<=120)return(31+Math.round((e-61)*(59/59)))*24;if(e<=180)return(91+Math.round((e-121)*(89/59)))*24;const t=181+Math.round((e-181)*(184/59));return Math.min(t,365)*24}function IB(e){const t=e/24;return e<=24?e-1:t<=7?24+(t-2):t<=30?31+Math.round((t-8)*(29/22)):t<=90?61+Math.round((t-31)*(59/59)):t<=180?121+Math.round((t-91)*(59/89)):181+Math.round((t-181)*(59/184))}function DB(e){if(e<24)return`${e} hour${e>1?"s":""}`;const t=Math.round(e/24);return t===1?"1 day":t<7?`${t} days`:t===7?"1 week":t<14?`${t} days`:t<30?`${Math.round(t/7)} weeks`:t===30?"1 month":t<60?`${t} days`:t<90?`${Math.round(t/30)} months`:t===90?"3 months":t<180?`${Math.round(t/30)} months`:t===180?"6 months":t<365?`${Math.round(t/30)} months`:"1 year"}function MB({project:e,configState:t,setConfigState:n,onNext:r}){const{updateProject:s,videos:a}=Sa(),{settings:i}=ys(),{toast:l}=Mt(),{t:c}=dn(),[u,h]=f.useState(!1),[d,m]=f.useState(!1),p=IB(t.hoursRange),b=async()=>{if(!t.sourceUrl){l({title:c("tubeClone.toast.error"),description:c("tubeClone.toast.enterUrl"),variant:"destructive"});return}const v=i==null?void 0:i.youtube_api_key;if(!v){l({title:c("tubeClone.toast.error"),description:c("tubeClone.toast.apiKeyMissing"),variant:"destructive"});return}const y=TB(t.sourceUrl);if(!y){l({title:c("tubeClone.toast.error"),description:c("tubeClone.toast.invalidUrl"),variant:"destructive"});return}m(!0);try{const S=await mg([y],v);if(S.length>0){const j=S[0];n(N=>({...N,videoPreview:{title:j.title,description:j.description,tags:j.tags,categoryId:j.categoryId,publishedAt:j.publishedAt,channelTitle:j.channelTitle,thumbnailUrl:j.thumbnailUrl},detectedNiche:N.detectedNiche||j.title})),l({title:c("tubeClone.toast.videoFound"),description:`"${j.title}"`})}}catch(S){console.error("Error fetching video:",S),l({title:c("tubeClone.toast.error"),description:c("tubeClone.toast.fetchFailed"),variant:"destructive"})}finally{m(!1)}},g=async()=>{var N;h(!0);const v=t.hoursRange,y=Math.round(v/24);let S;v<24?S=`${v}h`:S=`${y}d`;const j=t.detectedNiche||t.name;await s(e.id,{name:t.name,source_url:t.sourceUrl||null,country:t.country,time_range:S,video_limit:t.videoLimit,niche:j,category_id:((N=t.videoPreview)==null?void 0:N.categoryId)||null,status:"searching"}),h(!1),r()},w=v=>new Date(v).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),x=v=>({1:"Film & Animation",2:"Autos & Vehicles",10:"Music",15:"Pets & Animals",17:"Sports",18:"Short Movies",19:"Travel & Events",20:"Gaming",21:"Videoblogging",22:"People & Blogs",23:"Comedy",24:"Entertainment",25:"News & Politics",26:"Howto & Style",27:"Education",28:"Science & Technology",29:"Nonprofits & Activism"})[v]||`Category ${v}`;return o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsx(xt,{children:c("tubeClone.config.title")})}),o.jsxs(be,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Project Name"}),o.jsx(ie,{value:t.name,onChange:v=>n(y=>({...y,name:v.target.value})),placeholder:"My YouTube Research"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(m1,{className:"h-4 w-4"}),c("tubeClone.config.competitorUrl")]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ie,{value:t.sourceUrl,onChange:v=>n(y=>({...y,sourceUrl:v.target.value,videoPreview:null})),placeholder:"https://youtube.com/watch?v=...",className:"flex-1"}),o.jsxs(V,{variant:"outline",onClick:b,disabled:d||!t.sourceUrl,className:"gap-2",children:[d?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsx(Dn,{className:"h-4 w-4"}),c("tubeClone.config.fetch")]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:c("tubeClone.config.pasteUrlHelp")})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(WR,{className:"h-4 w-4"}),c("tubeClone.config.keywordsLabel")]}),o.jsx(ie,{value:t.detectedNiche,onChange:v=>n(y=>({...y,detectedNiche:v.target.value})),placeholder:c("tubeClone.config.keywordsPlaceholder")}),o.jsx("p",{className:"text-xs text-muted-foreground",children:c("tubeClone.config.keywordsHelp")})]}),t.videoPreview&&o.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30 space-y-3",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx("img",{src:t.videoPreview.thumbnailUrl,alt:"",className:"w-32 h-20 object-cover rounded"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium line-clamp-2",children:t.videoPreview.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:t.videoPreview.channelTitle}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.videoPreview.description})]})]}),o.jsxs("div",{className:"grid gap-2 text-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Re,{variant:"outline",className:"shrink-0",children:c("tubeClone.config.category")}),o.jsx("span",{className:"text-muted-foreground",children:x(t.videoPreview.categoryId)})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Re,{variant:"outline",className:"shrink-0",children:c("tubeClone.config.published")}),o.jsx("span",{className:"text-muted-foreground",children:w(t.videoPreview.publishedAt)})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs(Re,{variant:"outline",className:"shrink-0",children:[c("tubeClone.config.tags")," (",t.videoPreview.tags.length,")"]}),t.videoPreview.tags.length>0?o.jsx("div",{className:"flex flex-wrap gap-1 max-h-24 overflow-y-auto",children:t.videoPreview.tags.map((v,y)=>o.jsx(Re,{variant:"secondary",className:"text-xs",children:v},y))}):o.jsx("span",{className:"text-muted-foreground italic",children:c("tubeClone.config.noTags")})]})]})]}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center gap-2",children:[o.jsx(co,{className:"h-4 w-4"})," ",c("tubeClone.config.targetCountry")]}),o.jsxs(Yn,{value:t.country,onValueChange:v=>n(y=>({...y,country:v})),children:[o.jsx(Rn,{children:o.jsx(Qn,{})}),o.jsx(On,{children:RB.map(v=>o.jsx(_e,{value:v.value,children:v.label},v.value))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(K,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(v1,{className:"h-4 w-4"})," ",c("tubeClone.config.videosToAnalyze")]}),o.jsx("span",{className:"text-primary font-bold",children:t.videoLimit})]}),o.jsx(pg,{value:[t.videoLimit],onValueChange:v=>n(y=>({...y,videoLimit:v[0]})),min:50,max:200,step:10,className:"py-2"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(K,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Li,{className:"h-4 w-4"})," ",c("tubeClone.config.timeRange")]}),o.jsx("span",{className:"text-primary font-bold",children:DB(t.hoursRange)})]}),o.jsx(pg,{value:[p],onValueChange:v=>{const y=OB(v[0]);n(S=>({...S,hoursRange:y}))},min:0,max:240,step:1,className:"py-2"})]}),o.jsxs("div",{className:"flex justify-between pt-4",children:[a.length>0&&o.jsx("div",{className:"text-sm text-yellow-600 flex items-center",children:c("tubeClone.config.warningReSearch")}),o.jsx(V,{onClick:g,disabled:u||!t.name.trim(),className:"gap-2 ml-auto",children:u?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsxs(o.Fragment,{children:[c("tubeClone.config.startResearch")," ",o.jsx(fs,{className:"h-4 w-4"})]})})]})]})]})}function LB(e,t,n){return n===0?0:(e+t)/n*100}function $B(e,t){const n=new Date(t),s=Math.max(1,Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24)));return e/s}function FB(e){const t=new Date(e);return Math.max(1,Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60*24)))}function gp(e,t,n){return n===t?50:Math.max(0,Math.min(100,(e-t)/(n-t)*100))}function UB(e,t){if(!e||e.length===0||!t||t.length===0)return 0;const n=new Set(e.map(i=>i.toLowerCase().trim())),r=new Set(t.map(i=>i.toLowerCase().trim()));let s=0;for(const i of n)r.has(i)&&s++;const a=n.size+r.size-s;return a>0?s/a*100:0}function VB(e,t=1.5){if(e.length<4)return{min:Math.min(...e),max:Math.max(...e)};const n=[...e].sort((i,l)=>i-l),r=n[Math.floor(n.length*.25)],s=n[Math.floor(n.length*.75)],a=s-r;return{min:r-a*t,max:s+a*t}}function zB(e,t=50,n={}){const{engagementWeight:r=.4,velocityWeight:s=.3,tagWeight:a=.2,categoryWeight:i=.1,removeOutliers:l=!0,sourceTags:c=[],sourceCategoryId:u}=n;if(e.length===0)return[];let h=e.map(S=>{const j=LB(S.likeCount,S.commentCount,S.viewCount),N=$B(S.viewCount,S.publishedAt),C=FB(S.publishedAt),_=c.length>0?UB(c,S.tags):50,k=u?S.categoryId===u:!0;return{...S,engagementRate:j,viewVelocity:N,tagOverlapScore:_,categoryMatch:k,combinedScore:0,daysSincePublish:C}});if(l&&h.length>10){const S=h.map(N=>N.viewCount),j=VB(S);h=h.filter(N=>N.viewCount>=j.min&&N.viewCount<=j.max)}if(h.length===0)return[];const d=h.map(S=>S.engagementRate),m=h.map(S=>S.viewVelocity),p=h.map(S=>S.tagOverlapScore||0),b=Math.min(...d),g=Math.max(...d),w=Math.min(...m),x=Math.max(...m),v=Math.min(...p),y=Math.max(...p);return h=h.map(S=>{const j=gp(S.engagementRate,b,g),N=gp(S.viewVelocity,w,x),C=gp(S.tagOverlapScore||0,v,y),_=S.categoryMatch?i*100:0,k=j*r+N*s+C*a+_;return{...S,combinedScore:k}}),h.sort((S,j)=>j.combinedScore-S.combinedScore).slice(0,t)}function Ir(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function BB({project:e,onNext:t,onBack:n,autoStart:r=!1}){const{settings:s,loading:a}=ys(),{toast:i}=Mt(),{updateProject:l,saveVideos:c,videos:u}=Sa(),[h,d]=f.useState("idle"),[m,p]=f.useState(0),[b,g]=f.useState(""),[w,x]=f.useState([]),[v,y]=f.useState(null),S=f.useRef(!1),[j,N]=f.useState(null),C=()=>u.map(k=>({videoId:k.youtube_id,title:k.title||"",description:k.description||"",tags:k.tags||[],categoryId:k.category_id||"",channelId:k.channel_id||"",channelTitle:k.channel_title||"",thumbnailUrl:k.thumbnail_url||"",viewCount:k.view_count,likeCount:k.like_count,commentCount:k.comment_count,duration:k.duration||"",publishedAt:k.published_at||"",engagementRate:k.engagement_rate||0,viewVelocity:k.view_velocity||0,combinedScore:k.combined_score||0,daysSincePublish:0}));f.useEffect(()=>{u.length>0?(x(C()),d("done"),g(`Loaded ${u.length} videos`)):r&&!S.current&&!a&&(S.current=!0,_())},[u,r,a]);const _=async()=>{var E;if(a)return;const k=s==null?void 0:s.youtube_api_key;if(!k){i({title:"Error",description:"YouTube API Key is not configured. Please add it in Settings.",variant:"destructive"}),d("error"),y("YouTube API Key is not configured. Please add it in Settings.");return}d("searching"),p(0),y(null),x([]);try{let U,R=[];if(e.source_url){g("Analyzing source video...");try{const M=await mg([((E=e.source_url.match(/[?&]v=([^&]+)/))==null?void 0:E[1])||""],k);M.length>0&&(U=M[0].categoryId,R=M[0].tags||[])}catch(M){console.warn("Failed to analyze source video",M)}}let $;const L=e.time_range;if(L){const M=new Date;if(L.endsWith("h")){const G=parseInt(L);M.setHours(M.getHours()-G),$=M.toISOString()}else if(L.endsWith("d")){const G=parseInt(L);M.setDate(M.getDate()-G),$=M.toISOString()}else $=EB(L)}g("Searching YouTube with optimized relevance strategy..."),p(10);const re=await AB(e.niche||"trending",R,k,{resultsPerQuery:Math.ceil(e.video_limit*.8),regionCode:e.country,publishedAfter:$,videoCategoryId:U,onProgress:(M,G,ee)=>{p(10+G/ee*30),g(`Searching: "${M.substring(0,30)}..." (${G}/${ee})`)}});if(re.length===0)throw new Error("No videos found. Try different search terms or settings.");g(`Found ${re.length} videos, fetching details...`),p(45),d("fetching_details");const z=re.map(M=>M.videoId),B=await mg(z,k);p(65),g(`Analyzing ${B.length} videos with tag matching...`),d("filtering");const O=zB(B,e.video_limit,{removeOutliers:!1,sourceTags:R,sourceCategoryId:U,engagementWeight:.4,velocityWeight:.3,tagWeight:.2,categoryWeight:.1});p(85),g(`Saving top ${O.length} videos...`),d("saving");const A=O.map(M=>({youtube_id:M.videoId,title:M.title,description:M.description,tags:M.tags,category_id:M.categoryId,channel_id:M.channelId,channel_title:M.channelTitle,thumbnail_url:M.thumbnailUrl,view_count:M.viewCount,like_count:M.likeCount,comment_count:M.commentCount,duration:M.duration,published_at:M.publishedAt,engagement_rate:M.engagementRate,view_velocity:M.viewVelocity,combined_score:M.combinedScore}));await c(e.id,A),await l(e.id,{status:"filtering"}),x(O),p(100),d("done"),g(`Found ${O.length} top videos!`),i({title:"Search Complete",description:`Found and analyzed ${O.length} videos`})}catch(U){console.error("Search error:",U);const R=U instanceof Error?U.message:"Search failed";y(R),d("error"),i({title:"Error",description:R,variant:"destructive"})}};return o.jsxs(o.Fragment,{children:[o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(Dn,{className:"h-5 w-5"}),"Search & Analyze Videos"]})}),o.jsxs(be,{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(Re,{variant:"outline",children:[" ",e.country]}),o.jsxs(Re,{variant:"outline",children:[" ",e.time_range]}),o.jsxs(Re,{variant:"outline",children:[" ",e.video_limit," videos"]}),e.niche&&o.jsxs(Re,{variant:"outline",children:[" ",e.niche]})]}),h!=="idle"&&h!=="done"&&h!=="error"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(al,{value:m,className:"h-2"}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(We,{className:"h-4 w-4 animate-spin"}),b]})]}),h==="done"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[o.jsx(Ch,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:b})]}),o.jsxs(Re,{variant:"outline",children:[w.length," videos"]})]}),o.jsx(Rc,{className:"h-[400px] rounded-lg border",children:o.jsx("div",{className:"space-y-2 p-2",children:w.map((k,E)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors cursor-pointer",onClick:()=>N(k),children:[o.jsxs("span",{className:"text-xs font-bold text-muted-foreground w-6 text-center",children:["#",E+1]}),o.jsx("img",{src:k.thumbnailUrl,alt:"",className:"w-20 h-12 object-cover rounded"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium line-clamp-1",children:k.title}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.channelTitle,"  ",Ir(k.viewCount)," views"]}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[k.tags.slice(0,3).map((U,R)=>o.jsx(Re,{variant:"secondary",className:"text-[10px] px-1 py-0",children:U},R)),k.tags.length>3&&o.jsxs(Re,{variant:"outline",className:"text-[10px] px-1 py-0",children:["+",k.tags.length-3]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx(Re,{className:"bg-primary/20 text-primary",children:k.combinedScore.toFixed(0)}),o.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:[k.engagementRate.toFixed(2),"% eng"]})]}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:U=>{U.stopPropagation(),window.open(`https://youtube.com/watch?v=${k.videoId}`,"_blank")},children:o.jsx(Od,{className:"h-4 w-4"})})]},k.videoId))})})]}),h==="error"&&o.jsxs("div",{className:"flex flex-col items-center gap-4 py-8",children:[o.jsx(d1,{className:"h-12 w-12 text-destructive"}),o.jsx("p",{className:"text-destructive text-center",children:v}),o.jsx(V,{onClick:_,children:"Retry Search"})]}),h==="idle"&&o.jsx("div",{className:"text-center py-8",children:a?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(We,{className:"h-8 w-8 animate-spin text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking settings..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dn,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Ready to search for top-performing videos in your niche"}),o.jsxs(V,{onClick:_,size:"lg",className:"gap-2",children:[o.jsx(Dn,{className:"h-4 w-4"}),"Start Search"]})]})}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsxs(V,{variant:"outline",onClick:n,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back"]}),o.jsxs("div",{className:"flex gap-2",children:[h==="done"&&o.jsx(V,{variant:"outline",onClick:_,children:"Re-Search"}),o.jsxs(V,{onClick:t,disabled:h!=="done",className:"gap-2",children:["Continue",o.jsx(fs,{className:"h-4 w-4"})]})]})]})]})]}),o.jsx(ua,{open:!!j,onOpenChange:k=>!k&&N(null),children:o.jsx(po,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:j&&o.jsxs(o.Fragment,{children:[o.jsxs(mo,{children:[o.jsx(go,{className:"line-clamp-2",children:j.title}),o.jsxs(Gh,{children:[j.channelTitle,"  ",Ir(j.viewCount)," views"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("img",{src:j.thumbnailUrl,alt:"",className:"w-full aspect-video object-cover rounded-lg"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsx("div",{className:"text-xl font-bold",children:Ir(j.viewCount)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Views"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsx("div",{className:"text-xl font-bold",children:Ir(j.likeCount)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsxs("div",{className:"text-xl font-bold",children:[j.engagementRate.toFixed(2),"%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Engagement"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[o.jsx(xv,{className:"h-4 w-4"}),"Tags (",j.tags.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-1 max-h-40 overflow-y-auto",children:j.tags.map((k,E)=>o.jsx(Re,{variant:"secondary",children:k},E))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap max-h-40 overflow-y-auto",children:j.description})]}),o.jsxs(V,{className:"w-full gap-2",onClick:()=>window.open(`https://youtube.com/watch?v=${j.videoId}`,"_blank"),children:[o.jsx(Od,{className:"h-4 w-4"}),"Open on YouTube"]})]})]})})})]})}function WB({project:e,onNext:t,onBack:n}){const{videos:r,updateProject:s}=Sa(),[a,i]=f.useState(new Set),[l,c]=f.useState("score"),[u,h]=f.useState(null),d=g=>{i(w=>{const x=new Set(w);return x.has(g)?x.delete(g):x.add(g),x})},m=[...r].sort((g,w)=>{switch(l){case"views":return w.view_count-g.view_count;case"engagement":return(w.engagement_rate||0)-(g.engagement_rate||0);default:return(w.combined_score||0)-(g.combined_score||0)}}),p=m.filter(g=>!a.has(g.id)),b=async()=>{await s(e.id,{status:"embedding"}),t()};return o.jsxs(o.Fragment,{children:[o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(f1,{className:"h-5 w-5"}),"Review Top Videos (",r.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Sort by:"}),o.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"text-sm bg-background border rounded-md px-2 py-1",children:[o.jsx("option",{value:"score",children:"Combined Score"}),o.jsx("option",{value:"views",children:"View Count"}),o.jsx("option",{value:"engagement",children:"Engagement"})]})]})]})}),o.jsxs(be,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4 text-sm",children:[o.jsxs(Re,{variant:"outline",className:"gap-1",children:["Total: ",r.length]}),o.jsxs(Re,{variant:"outline",className:"gap-1 text-green-600",children:["Active: ",p.length]}),a.size>0&&o.jsxs(Re,{variant:"outline",className:"gap-1 text-red-600",children:["Excluded: ",a.size]})]}),o.jsx(Rc,{className:"h-[400px] rounded-lg border",children:o.jsx("div",{className:"space-y-2 p-2",children:m.map((g,w)=>{var v,y;const x=a.has(g.id);return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${x?"bg-muted/30 opacity-50 border-transparent":"bg-card border-border hover:border-primary/30"}`,onClick:()=>h(g),children:[o.jsx(tf,{checked:!x,onCheckedChange:()=>d(g.id),onClick:S=>S.stopPropagation()}),o.jsxs("span",{className:"text-xs font-bold text-muted-foreground w-6",children:["#",w+1]}),o.jsx("img",{src:g.thumbnail_url||"",alt:"",className:"w-20 h-12 object-cover rounded"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium line-clamp-1",children:g.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:g.channel_title}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[(g.tags||[]).slice(0,3).map((S,j)=>o.jsx(Re,{variant:"secondary",className:"text-[10px] px-1 py-0",children:S},j)),(((v=g.tags)==null?void 0:v.length)||0)>3&&o.jsxs(Re,{variant:"outline",className:"text-[10px] px-1 py-0",children:["+",(((y=g.tags)==null?void 0:y.length)||0)-3]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(h1,{className:"h-3 w-3"}),Ir(g.view_count)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(VR,{className:"h-3 w-3"}),Ir(g.like_count)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(kh,{className:"h-3 w-3"}),(g.engagement_rate||0).toFixed(2),"%"]})]}),o.jsx(Re,{className:"bg-primary/20 text-primary min-w-[70px] justify-center",children:(g.combined_score||0).toFixed(0)}),o.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:S=>{S.stopPropagation(),window.open(`https://youtube.com/watch?v=${g.youtube_id}`,"_blank")},children:o.jsx(Od,{className:"h-4 w-4"})})]},g.id)})})}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsxs(V,{variant:"outline",onClick:n,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back"]}),o.jsxs(V,{onClick:b,disabled:p.length<1,className:"gap-2",children:["Continue with ",p.length," videos",o.jsx(fs,{className:"h-4 w-4"})]})]})]})]}),o.jsx(ua,{open:!!u,onOpenChange:g=>!g&&h(null),children:o.jsx(po,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:u&&o.jsxs(o.Fragment,{children:[o.jsxs(mo,{children:[o.jsx(go,{className:"line-clamp-2",children:u.title}),o.jsxs(Gh,{children:[u.channel_title,"  ",Ir(u.view_count)," views"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("img",{src:u.thumbnail_url||"",alt:"",className:"w-full aspect-video object-cover rounded-lg"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsx("div",{className:"text-xl font-bold",children:Ir(u.view_count)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Views"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsx("div",{className:"text-xl font-bold",children:Ir(u.like_count)}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes"})]}),o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[o.jsxs("div",{className:"text-xl font-bold",children:[(u.engagement_rate||0).toFixed(2),"%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Engagement"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[o.jsx(xv,{className:"h-4 w-4"}),"Tags (",(u.tags||[]).length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-1 max-h-40 overflow-y-auto",children:(u.tags||[]).map((g,w)=>o.jsx(Re,{variant:"secondary",children:g},w))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap max-h-40 overflow-y-auto",children:u.description})]}),o.jsxs(V,{className:"w-full gap-2",onClick:()=>window.open(`https://youtube.com/watch?v=${u.youtube_id}`,"_blank"),children:[o.jsx(Od,{className:"h-4 w-4"}),"Open on YouTube"]})]})]})})})]})}const HB="https://openrouter.ai/api/v1";async function LT(e,t,n={}){var c;const{model:r="openai/text-embedding-3-small",dimensions:s=1536,onProgress:a}=n;if(e.length===0)return[];const i=50,l=[];for(let u=0;u<e.length;u+=i){const h=e.slice(u,u+i);a==null||a(u,e.length);const d=await fetch(`${HB}/embeddings`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"TubeClone Research"},body:JSON.stringify({model:r,input:h})});if(!d.ok){const p=await d.json();throw console.error("Embedding API Error:",d.status,p),new Error(((c=p.error)==null?void 0:c.message)||`Embedding failed: ${d.status}`)}const m=await d.json();for(let p=0;p<h.length;p++)l.push({text:h[p],embedding:m.data[p].embedding})}return a==null||a(e.length,e.length),l}function db(e,t){if(e.length!==t.length)throw new Error("Vectors must have the same length");let n=0,r=0,s=0;for(let a=0;a<e.length;a++)n+=e[a]*t[a],r+=e[a]*e[a],s+=t[a]*t[a];return r===0||s===0?0:n/(Math.sqrt(r)*Math.sqrt(s))}function KB({project:e,onNext:t,onBack:n,autoStart:r=!0}){const{videos:s,updateProject:a,saveVideos:i}=Sa(),{settings:l,loading:c}=ys(),{toast:u}=Mt(),[h,d]=f.useState("idle"),[m,p]=f.useState(0),[b,g]=f.useState(""),w=s.filter(y=>!y.embedding),x=s.length;f.useEffect(()=>{w.length===0&&x>0&&h==="idle"?d("completed"):r&&h==="idle"&&w.length>0&&!c&&(l!=null&&l.openrouter_api_key)&&v()},[w.length,x,r,c,l==null?void 0:l.openrouter_api_key,h]);const v=async y=>{const S=typeof y=="boolean"?y:!1;if(h==="embedding"||h==="completed"&&!S)return;const j=l==null?void 0:l.openrouter_api_key;if(!j){c||(d("error"),u({title:"Error",description:"OpenRouter API Key is required for embeddings. Please add it in Settings.",variant:"destructive"}));return}d("embedding"),p(0),g("Initializing embedding process...");try{const C=S?s:w,_=C.length;if(_===0){d("completed");return}for(let k=0;k<_;k+=5){const E=C.slice(k,k+5);g(`Embedding batch ${Math.ceil((k+1)/5)} of ${Math.ceil(_/5)}...`);const U=E.map(L=>{const re=L.tags?L.tags.join(", "):"";return`Title: ${L.title||""}
Description: ${L.description||""}
Tags: ${re}`}),R=await LT(U,j),$=E.map((L,re)=>({...L,embedding:R[re].embedding}));await i(e.id,$),p((k+5)/_*100)}await a(e.id,{status:"analyzing"}),d("completed"),p(100),g("Embedding generation complete!"),u({title:"Success",description:`Generated embeddings for ${_} videos`})}catch(N){console.error("Embedding error:",N),d("error"),g("Failed to generate embeddings. Check console for details."),u({title:"Error",description:"An error occurred while generating embeddings",variant:"destructive"})}};return o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(Pl,{className:"h-5 w-5"}),"Generate Video Embeddings"]})}),o.jsxs(be,{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-4 text-sm",children:[o.jsxs(Re,{variant:"outline",children:["Total Videos: ",x]}),o.jsxs(Re,{variant:"outline",className:"text-amber-600",children:["Pending: ",w.length]}),o.jsxs(Re,{variant:"outline",className:"text-green-600",children:["Ready: ",x-w.length]})]}),h==="idle"&&w.length>0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Pl,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),o.jsxs("p",{className:"text-muted-foreground mb-4",children:["Analyze video content semantics to find deep patterns.",o.jsx("br",{}),"This requires OpenRouter API key."]}),o.jsxs(V,{onClick:v,size:"lg",className:"gap-2",children:[o.jsx(Pl,{className:"h-4 w-4"}),"Start Embedding Generation"]})]}),h==="embedding"&&o.jsxs("div",{className:"space-y-4 py-8",children:[o.jsx(al,{value:m,className:"h-2"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[o.jsx(We,{className:"h-4 w-4 animate-spin"}),b]})]}),h==="completed"&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ch,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Embeddings Ready"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"All videos have been processed and are ready for analysis."}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"mt-2",children:[o.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Regenerate Embeddings"]})]}),h==="error"&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(d1,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),o.jsx("h3",{className:"text-lg font-medium mb-2 text-destructive",children:"Process Failed"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error generating embeddings. Check your API key and connection."}),o.jsx(V,{onClick:v,variant:"outline",children:"Retry"})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsxs(V,{variant:"outline",onClick:n,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back"]}),o.jsxs(V,{onClick:t,disabled:h!=="completed",className:"gap-2",children:["Continue",o.jsx(fs,{className:"h-4 w-4"})]})]})]})]})}function qB({project:e,userInput:t,setUserInput:n,onNext:r,onBack:s}){const{updateProject:a}=Sa(),i=async()=>{await a(e.id,{status:"analyzing"}),r()};return o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(uo,{className:"h-5 w-5"}),"Your Content Input"]})}),o.jsxs(be,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Working Title"}),o.jsx(ie,{value:t.title,onChange:l=>n(c=>({...c,title:l.target.value})),placeholder:"E.g., How to make coding tutorials 2024"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"The draft title for your video."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Description / Key Points"}),o.jsx(Ae,{value:t.description,onChange:l=>n(c=>({...c,description:l.target.value})),placeholder:"Briefly describe what your video is about, or bullet points of content...",className:"h-32"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(K,{children:"Target Keywords / Tags (Optional)"}),o.jsx(ie,{value:t.tags,onChange:l=>n(c=>({...c,tags:l.target.value})),placeholder:"coding, tutorial, devlog"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma separated keywords you want to target."})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsxs(V,{variant:"outline",onClick:s,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back"]}),o.jsxs(V,{onClick:i,disabled:!t.title.trim(),className:"gap-2",children:["Start Analysis",o.jsx(fs,{className:"h-4 w-4"})]})]})]})]})}const GB=`You are an expert YouTube SEO analyst. Analyze the metadata from these top-performing videos and extract patterns.

<top_videos>
{videos_data}
</top_videos>

Extract patterns that make these videos successful. Return ONLY valid JSON:

{
  "titlePatterns": [
    {
      "pattern": "Pattern description",
      "examples": ["Example 1", "Example 2"],
      "frequency": "high|medium|low"
    }
  ],
  "descriptionPatterns": [
    {
      "pattern": "Pattern description",
      "location": "first_line|opening|middle|cta",
      "examples": ["Example snippet"]
    }
  ],
  "keywordClusters": [
    {
      "name": "Cluster name",
      "keywords": ["keyword1", "keyword2", "keyword3"],
      "importance": "high|medium|low"
    }
  ],
  "commonElements": {
    "avgTitleLength": 50,
    "avgDescriptionLength": 500,
    "avgTagCount": 15,
    "powerWords": ["word1", "word2"],
    "emotionalTriggers": ["trigger1", "trigger2"]
  }
}`,YB=`You are an expert YouTube SEO analyst. Compare the user's video metadata against successful patterns and score it.

<successful_patterns>
{patterns}
</successful_patterns>

<user_metadata>
Title: {user_title}
Description: {user_description}
Tags: {user_tags}
</user_metadata>

Analyze gaps and score the metadata. Return ONLY valid JSON:

{
  "scores": {
    "homepage": 0-100,
    "suggested": 0-100,
    "cpi": 0-100,
    "titleScore": 0-100,
    "descriptionScore": 0-100,
    "tagsScore": 0-100
  },
  "gaps": [
    {
      "type": "title|description|tags|keyword",
      "issue": "Description of the issue",
      "severity": "high|medium|low",
      "suggestion": "How to fix it"
    }
  ],
  "strengths": [
    "What the user is doing well"
  ],
  "overallAnalysis": "Brief overall assessment"
}`,QB=`You are an expert YouTube title optimizer. Based on successful patterns, generate optimized title variants.

<successful_patterns>
{patterns}
</successful_patterns>

<current_title>
{user_title}
</current_title>

<topic_context>
{topic_context}
</topic_context>

Generate 5 optimized title variants that:
1. Follow successful patterns
2. Include power words and emotional triggers
3. Are 50-70 characters (optimal for display)
4. Maintain the core message

Return ONLY valid JSON:

{
  "variants": [
    {
      "title": "Optimized title",
      "reasoning": "Why this works",
      "patternsUsed": ["pattern1", "pattern2"],
      "predictedCTR": "high|medium|standard"
    }
  ]
}`,XB=`You are an expert YouTube description optimizer. Create an optimized description based on successful patterns.

<successful_patterns>
{patterns}
</successful_patterns>

<current_description>
{user_description}
</current_description>

<video_context>
Title: {video_title}
Tags: {video_tags}
</video_context>

Create an optimized description that:
1. Has a compelling first line (visible in search)
2. Includes relevant keywords naturally
3. Has clear structure with timestamps placeholder
4. Includes call-to-action
5. Is 500-1000 characters optimal

Return ONLY valid JSON:

{
  "optimizedDescription": "Full optimized description",
  "keyChanges": [
    "What was improved and why"
  ],
  "keywordsIncluded": ["keyword1", "keyword2"],
  "structure": {
    "hook": "First line",
    "mainContent": "Middle section summary",
    "cta": "Call to action"
  }
}`,JB=`You are an expert YouTube tags optimizer. Suggest optimal tags based on successful videos.

<successful_video_tags>
{top_video_tags}
</successful_video_tags>

<user_video>
Title: {user_title}
Description: {user_description}
Current Tags: {user_tags}
</user_video>

Suggest optimal tags that:
1. Include high-volume keywords from successful videos
2. Mix broad and specific tags
3. Include variations and synonyms
4. Total 15-30 tags (YouTube allows up to 500 characters)

Return ONLY valid JSON:

{
  "suggestedTags": ["tag1", "tag2", "tag3"],
  "removeTags": ["tags that should be removed"],
  "tagCategories": {
    "primary": ["main topic tags"],
    "secondary": ["related topic tags"],
    "longtail": ["specific phrase tags"],
    "trending": ["trending/timely tags"]
  },
  "totalCharacters": 450
}`;async function ZB(e,t,n="google/gemini-3-flash-preview"){const r=JSON.stringify(e.slice(0,10),null,2),a=[{role:"user",content:GB.replace("{videos_data}",r)}],i=await Pt(a,t,n);return hn(i)}async function eW(e,t,n,r,s,a="google/gemini-3-flash-preview"){const l=[{role:"user",content:YB.replace("{patterns}",JSON.stringify(e,null,2)).replace("{user_title}",t).replace("{user_description}",n).replace("{user_tags}",r.join(", "))}],c=await Pt(l,s,a);return hn(c)}async function tW(e,t,n,r,s="google/gemini-3-flash-preview"){const i=[{role:"user",content:QB.replace("{patterns}",JSON.stringify(e,null,2)).replace("{user_title}",t).replace("{topic_context}",n)}],l=await Pt(i,r,s);return hn(l)}async function nW(e,t,n,r,s,a="google/gemini-3-flash-preview"){const l=[{role:"user",content:XB.replace("{patterns}",JSON.stringify(e,null,2)).replace("{user_description}",t).replace("{video_title}",n).replace("{video_tags}",r.join(", "))}],c=await Pt(l,s,a);return hn(c)}async function rW(e,t,n,r,s,a="google/gemini-3-flash-preview"){const l=[{role:"user",content:JB.replace("{top_video_tags}",JSON.stringify(e,null,2)).replace("{user_title}",t).replace("{user_description}",n).replace("{user_tags}",r.join(", "))}],c=await Pt(l,s,a);return hn(c)}function sW({project:e,userInput:t,onNext:n,onBack:r}){var v,y,S,j;const{videos:s,analysis:a,saveAnalysis:i,updateProject:l}=Sa(),{settings:c}=ys(),[u,h]=f.useState("google/gemini-3-flash-preview"),[d,m]=f.useState("idle"),[p,b]=f.useState(0),[g,w]=f.useState("");f.useEffect(()=>{a&&d==="idle"?m("completed"):!a&&d==="idle"&&s.length>0},[a,d,s.length]);const x=async()=>{var C,_,k;const N=c==null?void 0:c.openrouter_api_key;if(N){m("analyzing"),b(0);try{w("Analyzing your concept...");const E=t.tags.split(",").map(J=>J.trim()).filter(Boolean),U=`${t.title}
${t.description}
${t.tags}`,[R]=await LT([U],N),$=R.embedding;b(10),w("Comparing with top competitors...");const L=s.filter(J=>J.embedding&&J.embedding.length>0),re=J=>{if(!J)return null;if(Array.isArray(J))return J;if(typeof J=="string")try{return JSON.parse(J)}catch(we){return console.error("Failed to parse embedding string:",we),null}return null},B=s.map(J=>{const we=re(J.embedding);if(!we)return{id:J.id,video:J,score:0};try{const Se=db($,we);return{id:J.id,video:J,score:Se}}catch(Se){return console.warn(`Similarity error for video ${J.id}:`,Se),{id:J.id,video:J,score:0}}}).sort((J,we)=>we.score-J.score).slice(0,10).map(J=>J.video),O=B.map(J=>({title:J.title||"",description:J.description||"",tags:J.tags||[]}));b(30),w("Extracting winning patterns...");const A=await ZB(O,N,u);b(50),w("Identifying opportunities & gaps...");const M=await eW(A,t.title,t.description,E,N,u);b(70),w("Optimizing your metadata...");const[G,ee,ae]=await Promise.all([tW(A,t.title,t.description,N,u),nW(A,t.description,t.title,E,N,u),rW(B.map(J=>J.tags||[]),t.title,t.description,E,N,u)]);b(90);const ce=Array.isArray(M.gaps)?M.gaps.map(J=>J.issue||JSON.stringify(J)):[],Oe=Array.isArray(G.variants)?G.variants.map(J=>J.title):[],ye=ee.optimizedDescription||"",F=Array.isArray(ae.suggestedTags)?ae.suggestedTags:[],de={user_title:t.title,user_description:t.description,user_tags:E,user_embedding:$,top_video_ids:B.map(J=>J.id),pattern_analysis:A,scores:{homepage:((C=M.scores)==null?void 0:C.homepage)||80,suggested:((_=M.scores)==null?void 0:_.suggested)||80,cpi:((k=M.scores)==null?void 0:k.cpi)||80,gaps:ce},suggestions:{titleVariants:Oe,optimizedDescription:ye,suggestedTags:F},validation_score:0};await i(e.id,de),await l(e.id,{status:"done"}),m("completed"),b(100)}catch(E){console.error("Analysis failed:",E);const U=E instanceof Error?E.message:"Unknown error";w(`Analysis failed: ${U}`)}}};return o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2",children:[o.jsx(mv,{className:"h-5 w-5"}),"AI Analysis in Progress"]})}),o.jsxs(be,{className:"space-y-6",children:[d==="analyzing"&&o.jsxs("div",{className:"py-10 space-y-6 text-center",children:[o.jsxs("div",{className:"relative w-24 h-24 mx-auto",children:[o.jsx(We,{className:"w-24 h-24 animate-spin text-primary opacity-20"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("span",{className:"text-xl font-bold",children:[Math.round(p),"%"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium",children:g}),o.jsx(al,{value:p,className:"h-2 w-full max-w-md mx-auto"})]})]}),d==="completed"&&a&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[o.jsxs(ve,{className:"p-4 bg-green-500/10 border-green-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 text-green-600",children:[o.jsx(sa,{className:"h-4 w-4"}),o.jsx("span",{className:"font-semibold",children:"Similarity Score"})]}),o.jsx("div",{className:"text-2xl font-bold",children:((v=a.top_video_ids)==null?void 0:v.length)>0&&s.length>0?(()=>{const N=s.find(E=>E.id===a.top_video_ids[0]);if(!(N!=null&&N.embedding)||!a.user_embedding)return"N/A";const C=E=>{if(!E)return null;if(Array.isArray(E))return E;if(typeof E=="string")try{return JSON.parse(E)}catch{return null}return null},_=C(N.embedding),k=C(a.user_embedding);if(!_||!k)return"N/A";try{return(db(k,_)*100).toFixed(1)+"%"}catch{return"N/A"}})():"N/A"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Match with top competitor"})]}),o.jsxs(ve,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-600",children:[o.jsx(kh,{className:"h-4 w-4"}),o.jsx("span",{className:"font-semibold",children:"Top Competitors"})]}),o.jsx("div",{className:"text-2xl font-bold",children:((y=a.top_video_ids)==null?void 0:y.length)||0}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Similar videos analyzed"})]}),o.jsxs(ve,{className:"p-4 bg-amber-500/10 border-amber-500/20",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-600",children:[o.jsx(_h,{className:"h-4 w-4"}),o.jsx("span",{className:"font-semibold",children:"Gaps Found"})]}),o.jsx("div",{className:"text-2xl font-bold",children:((j=(S=a.scores)==null?void 0:S.gaps)==null?void 0:j.length)||0}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Opportunities to stand out"})]})]}),o.jsxs("div",{className:"mt-6 space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Your Input Will Compete With These Videos"}),o.jsx("div",{className:"grid gap-3",children:(s||[]).filter(N=>(a.top_video_ids||[]).includes(N.id)).slice(0,10).map((N,C)=>o.jsxs("div",{className:"flex gap-3 p-2 rounded border bg-card/50 hover:bg-card transition-colors cursor-pointer",onClick:()=>window.open(`https://youtube.com/watch?v=${N.youtube_id}`,"_blank"),children:[o.jsx("img",{src:N.thumbnail_url||"",alt:"",className:"w-20 h-12 object-cover rounded"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-medium line-clamp-1",children:N.title}),o.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[o.jsx("span",{children:N.channel_title}),o.jsx("span",{children:""}),o.jsxs("span",{children:[Ir(N.view_count)," views"]})]})]})]},C))})]})]}),d==="idle"&&!a&&o.jsxs("div",{className:"flex flex-col items-center gap-6 py-10",children:[o.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[o.jsx(Ql,{label:"Analysis Model",value:u,onChange:h}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Select the AI model to perform pattern extraction and optimization."})]}),o.jsx(V,{onClick:x,size:"lg",className:"w-full max-w-sm",children:"Start Analysis"})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsxs(V,{variant:"outline",onClick:r,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back"]}),o.jsxs(V,{onClick:n,disabled:d!=="completed",className:"gap-2",children:["See Results",o.jsx(fs,{className:"h-4 w-4"})]})]})]})]})}function oW({project:e,userInput:t,onBack:n}){var i,l,c,u;const{analysis:r}=Sa(),{toast:s}=Mt();if(!r)return null;const a=h=>{navigator.clipboard.writeText(h),s({title:"Copied!",description:"Content copied to clipboard"})};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ve,{variant:"elevated",children:[o.jsx(ut,{children:o.jsxs(xt,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(Ch,{className:"h-6 w-6"}),"Validation Complete"]})}),o.jsxs(be,{children:[o.jsxs("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20 mb-6",children:[o.jsx("h3",{className:"font-semibold text-green-700 mb-1",children:"Ready for Production"}),o.jsxs("p",{className:"text-sm text-green-600/80",children:["Your concept has been optimized based on ",((i=r.top_video_ids)==null?void 0:i.length)||0," top-performing competitor videos."]})]}),o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(dt,{className:"h-3 w-3 text-primary"}),"Optimized Titles"]}),o.jsx("div",{className:"grid gap-2",children:(l=r.suggestions)==null?void 0:l.titleVariants.map((h,d)=>o.jsxs("div",{className:"flex gap-2 items-center p-3 rounded bg-muted/50 border group hover:border-primary/50 transition-colors",children:[o.jsx("div",{className:"font-medium text-sm flex-1",children:h}),o.jsx(V,{size:"icon",variant:"ghost",className:"h-8 w-8 opacity-0 group-hover:opacity-100",onClick:()=>a(h),children:o.jsx(Is,{className:"h-4 w-4"})})]},d))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(dt,{className:"h-3 w-3 text-primary"}),"Optimized Description"]}),o.jsxs("div",{className:"relative p-4 rounded bg-muted/50 border min-h-[100px] text-sm whitespace-pre-wrap group",children:[(c=r.suggestions)==null?void 0:c.optimizedDescription,o.jsx(V,{size:"icon",variant:"ghost",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100",onClick:()=>{var h;return a(((h=r.suggestions)==null?void 0:h.optimizedDescription)||"")},children:o.jsx(Is,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(dt,{className:"h-3 w-3 text-primary"}),"Recommended Tags"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(u=r.suggestions)==null?void 0:u.suggestedTags.map((h,d)=>o.jsx(Re,{variant:"secondary",className:"px-2 py-1 cursor-pointer hover:bg-primary/20",onClick:()=>a(h),children:h},d))})]})]})]})]}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(V,{variant:"outline",onClick:n,className:"gap-2",children:[o.jsx(va,{className:"h-4 w-4"}),"Back to Analysis"]})})]})}const ir=[{id:"config",label:"Config",icon:g1},{id:"search",label:"Search",icon:Dn},{id:"filter",label:"Filter",icon:f1},{id:"embed",label:"Embed",icon:Pl},{id:"input",label:"Input",icon:uo},{id:"analysis",label:"Analysis",icon:mv},{id:"validation",label:"Validate",icon:Ch}];function aW(e){switch(e){case"searching":return"search";case"filtering":return"filter";case"embedding":return"embed";case"analyzing":return"input";case"done":return"validation";default:return"config"}}function iW({project:e}){const t=xT(),{loadProject:n,currentProject:r,videos:s}=t,[a,i]=f.useState(!0),[l,c]=f.useState("config"),[u,h]=f.useState("config"),[d,m]=f.useState(!1),[p,b]=f.useState({name:e.name,sourceUrl:e.source_url||"",country:e.country||"US",hoursRange:24*30,videoLimit:e.video_limit||50,videoPreview:null,detectedNiche:e.niche||""}),[g,w]=f.useState({title:"",description:"",tags:""});f.useEffect(()=>{(async()=>{i(!0),await n(e.id),i(!1)})()},[e.id]),f.useEffect(()=>{if(!a&&r&&!d){const j=aW(r.status);c(j),h(j),m(!0),b(N=>({...N,name:r.name,sourceUrl:r.source_url||"",country:r.country||"US",videoLimit:r.video_limit||50,detectedNiche:r.niche||""}))}},[a,d]);const x=j=>{const N=ir.findIndex(k=>k.id===j),C=ir.findIndex(k=>k.id===l),_=ir.findIndex(k=>k.id===u);return N<=_&&N<C?"completed":N===C?"current":"upcoming"},v=()=>{const j=ir.findIndex(N=>N.id===l);if(j<ir.length-1){const N=ir[j+1].id;c(N);const C=ir.findIndex(_=>_.id===u);j+1>C&&h(N)}},y=()=>{const j=ir.findIndex(N=>N.id===l);j>0&&c(ir[j-1].id)};if(a)return o.jsxs("div",{className:"flex items-center justify-center py-20",children:[o.jsx(We,{className:"h-8 w-8 animate-spin text-primary"}),o.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading project..."})]});const S=()=>{const j=r||e;return o.jsxs(o.Fragment,{children:[l==="config"&&o.jsx(MB,{project:j,configState:p,setConfigState:b,onNext:v}),l==="search"&&o.jsx(BB,{project:j,onNext:v,onBack:y,autoStart:s.length===0}),l==="filter"&&o.jsx(WB,{project:j,onNext:v,onBack:y}),l==="embed"&&o.jsx(KB,{project:j,onNext:v,onBack:y}),l==="input"&&o.jsx(qB,{project:j,userInput:g,setUserInput:w,onNext:v,onBack:y}),l==="analysis"&&o.jsx(sW,{project:j,userInput:g,onNext:v,onBack:y}),l==="validation"&&o.jsx(oW,{project:j,userInput:g,onBack:y})]})};return o.jsx(wT.Provider,{value:t,children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between overflow-x-auto pb-2",children:ir.map((j,N)=>{const C=x(j.id),_=j.icon,k=C!=="upcoming";return o.jsxs("div",{className:"flex items-center",children:[o.jsxs("button",{onClick:()=>k&&c(j.id),disabled:!k,className:Q("flex flex-col items-center gap-1 px-3 py-2 rounded-lg transition-all",C==="completed"&&"text-primary cursor-pointer hover:bg-primary/10",C==="current"&&"text-primary bg-primary/10",C==="upcoming"&&"text-muted-foreground/50 cursor-not-allowed"),children:[o.jsx("div",{className:Q("flex h-8 w-8 items-center justify-center rounded-full border-2 transition-all",C==="completed"&&"border-primary bg-primary text-primary-foreground",C==="current"&&"border-primary bg-primary/20",C==="upcoming"&&"border-muted-foreground/30"),children:C==="completed"?o.jsx(wo,{className:"h-4 w-4"}):o.jsx(_,{className:"h-4 w-4"})}),o.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:j.label})]}),N<ir.length-1&&o.jsx(Dr,{className:Q("h-4 w-4 mx-1 flex-shrink-0",C==="completed"?"text-primary":"text-muted-foreground/30")})]},j.id)})}),o.jsx("div",{className:"min-h-[400px]",children:S()})]})})}function lW(){const{projects:e,loading:t,currentProject:n,createProject:r,setCurrentProject:s,deleteProject:a}=xT(),{t:i}=dn(),[l,c]=f.useState("library"),[u,h]=f.useState(!1),d=async()=>{h(!0);const p=await r({name:"New Research"});p&&(s(p),c("research")),h(!1)},m=p=>{s(p),c("research")};return o.jsx(Xo,{feature:"tubeclone",children:o.jsxs("div",{className:"p-4 md:p-6 lg:p-8 space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:o.jsx(Dn,{className:"h-5 w-5 text-primary"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:i("tubeClone.title")}),o.jsx("p",{className:"text-muted-foreground",children:i("tubeClone.subtitle")})]})]}),o.jsxs(V,{onClick:d,disabled:u,className:"gap-2 rounded-xl shadow-lg shadow-primary/20",children:[u?o.jsx(We,{className:"h-4 w-4 animate-spin"}):o.jsx(tt,{className:"h-4 w-4"}),i("tubeClone.newResearch")]})]}),o.jsxs(Bi,{value:l,onValueChange:p=>c(p),children:[o.jsxs(da,{className:"grid w-full max-w-md grid-cols-2",children:[o.jsxs(Pn,{value:"library",className:"gap-2",children:[o.jsx(vv,{className:"h-4 w-4"}),i("tubeClone.library")]}),o.jsxs(Pn,{value:"research",className:"gap-2",disabled:!n,children:[o.jsx($R,{className:"h-4 w-4"}),i("tubeClone.research")]})]}),o.jsx(An,{value:"library",className:"mt-6",children:o.jsx(lB,{projects:e,loading:t,onOpen:m,onCreateNew:d,onDelete:a})}),o.jsx(An,{value:"research",className:"mt-6",children:n?o.jsx(iW,{project:n}):o.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(Dn,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:i("tubeClone.selectOrCreate")})]})})]})]})})}const cW=()=>{const e=ya();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},uW=new cM,_s=({children:e})=>{const{user:t,loading:n}=Sn(),{showOnboarding:r,completeOnboarding:s,skipOnboarding:a}=zF();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?o.jsxs(OF,{children:[r&&o.jsx(VF,{onComplete:s,onSkip:a}),e]}):o.jsx(kj,{to:"/auth",replace:!0})},dW=()=>o.jsxs(mL,{children:[o.jsx(Bn,{path:"/auth",element:o.jsx(f8,{})}),o.jsx(Bn,{path:"/pricing",element:o.jsx(Pz,{})}),o.jsx(Bn,{path:"/",element:o.jsx(_s,{children:o.jsx(h8,{})})}),o.jsx(Bn,{path:"/dna-lab",element:o.jsx(_s,{children:o.jsx(jz,{})})}),o.jsx(Bn,{path:"/personas",element:o.jsx(_s,{children:o.jsx(kz,{})})}),o.jsx(Bn,{path:"/writer",element:o.jsx(_s,{children:o.jsx(lb,{})})}),o.jsx(Bn,{path:"/writer/:id",element:o.jsx(_s,{children:o.jsx(lb,{})})}),o.jsx(Bn,{path:"/notes",element:o.jsx(_s,{children:o.jsx(aB,{})})}),o.jsx(Bn,{path:"/tubeclone",element:o.jsx(_s,{children:o.jsx(lW,{})})}),o.jsx(Bn,{path:"/settings",element:o.jsx(_s,{children:o.jsx(iB,{})})}),o.jsx(Bn,{path:"*",element:o.jsx(cW,{})})]}),hW=()=>o.jsx(pM,{client:uW,children:o.jsx(F3,{children:o.jsxs(rj,{children:[o.jsx(EO,{}),o.jsx(aI,{}),o.jsx(NL,{children:o.jsx(d3,{children:o.jsx(dW,{})})})]})})});MN(document.getElementById("root")).render(o.jsx(hW,{}));
